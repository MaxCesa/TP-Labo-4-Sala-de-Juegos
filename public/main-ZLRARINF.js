import{$ as $u,$a as k,A as Fu,Aa as Ho,Ab as rg,B as Bo,Ba as zm,Bb as In,C as Lu,Ca as Wt,Cb as ta,D as xm,Da as qu,Db as Wn,E as Gn,Ea as Qr,Eb as sg,F as Ci,Fa as qm,Fb as Oi,G as Si,Ga as Gm,Gb as og,H as Mm,Ha as Yr,Hb as ag,I as Uu,Ia as ge,Ib as ke,J as _n,Ja as se,Jb as cg,K as Nm,Ka as Wo,Kb as es,L as $o,La as Hm,Lb as ug,M as yn,Ma as Ko,Mb as lg,N as ju,Na as Jr,Nb as ts,O as Om,Oa as Wm,Ob as hg,P as Vm,Pa as Km,Pb as dg,Q as Fm,Qa as Qo,Qb as na,R as zo,Ra as Xr,Rb as wt,S as gt,Sa as Zr,Sb as fg,T as qo,Ta as Qm,Tb as pg,U as Pe,Ua as Gu,Ub as Yu,V as Te,Va as Kt,Vb as mg,W as Bu,Wa as Hu,Wb as gg,X as Y,Xa as ki,Y as Ye,Ya as Ze,Z as Lm,Za as Ym,_ as ie,_a as Yo,a as V,aa as H,ab as x,b as ce,ba as U,bb as de,ca as Je,cb as xi,d as mn,da as Um,db as $,e as _,ea as Hr,eb as Jo,f as Cm,fa as we,fb as et,g as Sm,ga as Xe,gb as F,h as qn,ha as ht,hb as xt,i as xu,ia as _t,ib as Jm,j as Mu,ja as jm,jb as Xm,k as ut,ka as Wr,kb as Zm,l as lt,la as Dt,lb as Hn,m as Rm,ma as Ri,mb as Ee,n as Dm,na as Pt,nb as vn,o as gn,oa as kt,ob as eg,p as Nu,pa as Di,pb as Mi,q as Ou,qa as Pi,qb as tg,r as Vu,ra as Kr,rb as Xo,s as Qe,sa as zu,sb as Zo,t as W,ta as yt,tb as Wu,u as Gr,ua as Bm,ub as Ku,v as Pm,va as vt,vb as Qu,w as km,wa as ye,wb as ea,x as ae,xa as Go,xb as ng,y as Ai,ya as It,yb as Ni,z as rt,za as $m,zb as ig}from"./chunk-WJXUS4L5.js";var Zu=class extends ag{constructor(){super(...arguments),this.supportsDOMEvents=!0}},el=class n extends Zu{static makeCurrent(){og(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=mw();return t==null?null:gw(t)}resetBaseElement(){ns=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return hg(document.cookie,e)}},ns=null;function mw(){return ns=ns||document.querySelector("base"),ns?ns.getAttribute("href"):null}function gw(n){return new URL(n,document.baseURI).pathname}var _w=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),ia=new ie(""),vg=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new Te(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(H(ia),H(ye))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),is=class{constructor(e){this._doc=e}},Ju="ng-app-id",Ig=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Yu(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Ju}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(Ju),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(Ju,this.appId),i.appendChild(c),c}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,c=o.get(r)?.elements;c?c.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(H(ke),H(Ho),H(Qr,8),H(Wt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),Xu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},nl=/%COMP%/g,wg="%COMP%",yw=`_nghost-${wg}`,vw=`_ngcontent-${wg}`,Iw=!0,ww=new ie("",{providedIn:"root",factory:()=>Iw});function Ew(n){return vw.replace(nl,n)}function bw(n){return yw.replace(nl,n)}function Eg(n,e){return e.map(t=>t.replace(nl,n))}var ra=(()=>{let e=class e{constructor(i,r,s,o,c,l,h,f=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=l,this.ngZone=h,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Yu(l),this.defaultRenderer=new rs(i,c,h,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Hr.ShadowDom&&(r=ce(V({},r),{encapsulation:Hr.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof sa?s.applyToHost(i):s instanceof ss&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let c=this.doc,l=this.ngZone,h=this.eventManager,f=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,I=this.platformIsServer;switch(r.encapsulation){case Hr.Emulated:o=new sa(h,f,r,this.appId,g,c,l,I);break;case Hr.ShadowDom:return new tl(h,f,i,r,c,l,this.nonce,I);default:o=new ss(h,f,r,g,c,l,I);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(H(vg),H(Ig),H(Ho),H(ww),H(ke),H(Wt),H(ye),H(Qr))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),rs=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Xu[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(_g(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(_g(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Te(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=Xu[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Xu[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Yr.DashCase|Yr.Important)?e.style.setProperty(t,i,r&Yr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Yr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=Oi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function _g(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var tl=class extends rs{constructor(e,t,i,r,s,o,c,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=Eg(r.id,r.styles);for(let f of h){let g=document.createElement("style");c&&g.setAttribute("nonce",c),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ss=class extends rs{constructor(e,t,i,r,s,o,c,l){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?Eg(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},sa=class extends ss{constructor(e,t,i,r,s,o,c,l){let h=r+"-"+i.id;super(e,t,i,s,o,c,l,h),this.contentAttr=Ew(h),this.hostAttr=bw(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},Tw=(()=>{let e=class e extends is{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(H(ke))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),Aw=(()=>{let e=class e extends is{constructor(i){super(i),this.delegate=U(rg,{optional:!0})}supports(i){return this.delegate?this.delegate.supports(i):!1}addEventListener(i,r,s){return this.delegate.addEventListener(i,r,s)}removeEventListener(i,r,s){return this.delegate.removeEventListener(i,r,s)}};e.\u0275fac=function(r){return new(r||e)(H(ke))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),yg=["alt","control","meta","shift"],Cw={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sw={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Rw=(()=>{let e=class e extends is{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),c=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Oi().onAndCancel(i,o.domEventName,c))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),c="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),c="code."),yg.forEach(f=>{let g=r.indexOf(f);g>-1&&(r.splice(g,1),c+=f+".")}),c+=o,r.length!=0||o.length===0)return null;let h={};return h.domEventName=s,h.fullKey=c,h}static matchEventFullKeyCode(i,r){let s=Cw[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),yg.forEach(c=>{if(c!==s){let l=Sw[c];l(i)&&(o+=c+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(H(ke))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})();function bg(n,e){return ig(V({rootComponent:n},Dw(e)))}function Dw(n){return{appProviders:[...Nw,...n?.providers??[]],platformProviders:Mw}}function Pw(){el.makeCurrent()}function kw(){return new Go}function xw(){return $m(document),document}var Mw=[{provide:Wt,useValue:fg},{provide:zm,useValue:Pw,multi:!0},{provide:ke,useFactory:xw,deps:[]}];var Nw=[{provide:jm,useValue:"root"},{provide:Go,useFactory:kw,deps:[]},{provide:ia,useClass:Tw,multi:!0,deps:[ke,ye,Wt]},{provide:ia,useClass:Rw,multi:!0,deps:[ke]},{provide:ia,useClass:Aw,multi:!0},ra,Ig,vg,{provide:Ko,useExisting:ra},{provide:gg,useClass:_w,deps:[]},[]];var Tg=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(H(ke))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Z="primary",Is=Symbol("RouteTitle"),al=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Bi(n){return new al(n)}function Lw(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],c=n[s];if(o[0]===":")r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Uw(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mt(n[t],e[t]))return!1;return!0}function Mt(n,e){let t=n?cl(n):void 0,i=e?cl(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!Og(n[r],e[r]))return!1;return!0}function cl(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Og(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function Vg(n){return n.length>0?n[n.length-1]:null}function bn(n){return Pm(n)?n:Zo(n)?Qe(Promise.resolve(n)):W(n)}var jw={exact:Lg,subset:Ug},Fg={exact:Bw,subset:$w,ignored:()=>!0};function Ag(n,e,t){return jw[t.paths](n.root,e.root,t.matrixParams)&&Fg[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Bw(n,e){return Mt(n,e)}function Lg(n,e,t){if(!Qn(n.segments,e.segments)||!ca(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!Lg(n.children[i],e.children[i],t))return!1;return!0}function $w(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Og(n[t],e[t]))}function Ug(n,e,t){return jg(n,e,e.segments,t)}function jg(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Qn(r,t)||e.hasChildren()||!ca(r,t,i))}else if(n.segments.length===t.length){if(!Qn(n.segments,t)||!ca(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!Ug(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Qn(n.segments,r)||!ca(n.segments,r,i)||!n.children[Z]?!1:jg(n.children[Z],e,s,i)}}function ca(n,e,t){return e.every((i,r)=>Fg[t](n[r].parameters,i.parameters))}var Yt=class{constructor(e=new ue([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Bi(this.queryParams),this._queryParamMap}toString(){return Gw.serialize(this)}},ue=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ua(this)}},Kn=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Bi(this.parameters),this._parameterMap}toString(){return $g(this)}};function zw(n,e){return Qn(n,e)&&n.every((t,i)=>Mt(t.parameters,e[i].parameters))}function Qn(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function qw(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Z&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Z&&(t=t.concat(e(r,i)))}),t}var ws=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:()=>new $i,providedIn:"root"});let n=e;return n})(),$i=class{parse(e){let t=new ll(e);return new Yt(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${os(e.root,!0)}`,i=Kw(e.queryParams),r=typeof e.fragment=="string"?`#${Hw(e.fragment)}`:"";return`${t}${i}${r}`}},Gw=new $i;function ua(n){return n.segments.map(e=>$g(e)).join("/")}function os(n,e){if(!n.hasChildren())return ua(n);if(e){let t=n.children[Z]?os(n.children[Z],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==Z&&i.push(`${r}:${os(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=qw(n,(i,r)=>r===Z?[os(n.children[Z],!1)]:[`${r}:${os(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Z]!=null?`${ua(n)}/${t[0]}`:`${ua(n)}/(${t.join("//")})`}}function Bg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function oa(n){return Bg(n).replace(/%3B/gi,";")}function Hw(n){return encodeURI(n)}function ul(n){return Bg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function la(n){return decodeURIComponent(n)}function Cg(n){return la(n.replace(/\+/g,"%20"))}function $g(n){return`${ul(n.path)}${Ww(n.parameters)}`}function Ww(n){return Object.entries(n).map(([e,t])=>`;${ul(e)}=${ul(t)}`).join("")}function Kw(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${oa(t)}=${oa(r)}`).join("&"):`${oa(t)}=${oa(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Qw=/^[^\/()?;#]+/;function il(n){let e=n.match(Qw);return e?e[0]:""}var Yw=/^[^\/()?;=#]+/;function Jw(n){let e=n.match(Yw);return e?e[0]:""}var Xw=/^[^=?&#]+/;function Zw(n){let e=n.match(Xw);return e?e[0]:""}var eE=/^[^&#]+/;function tE(n){let e=n.match(eE);return e?e[0]:""}var ll=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ue([],{}):new ue([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Z]=new ue(e,t)),i}parseSegment(){let e=il(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Te(4009,!1);return this.capture(e),new Kn(la(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Jw(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=il(this.remaining);r&&(i=r,this.capture(i))}e[la(t)]=la(i)}parseQueryParam(e){let t=Zw(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=tE(this.remaining);o&&(i=o,this.capture(i))}let r=Cg(t),s=Cg(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=il(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Te(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Z);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Z]:new ue([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Te(4011,!1)}};function zg(n){return n.segments.length>0?new ue([],{[Z]:n}):n}function qg(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=qg(r);if(i===Z&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new ue(n.segments,e);return nE(t)}function nE(n){if(n.numberOfChildren===1&&n.children[Z]){let e=n.children[Z];return new ue(n.segments.concat(e.segments),e.children)}return n}function Yn(n){return n instanceof Yt}function iE(n,e,t=null,i=null){let r=Gg(n);return Hg(r,e,t,i)}function Gg(n){let e;function t(s){let o={};for(let l of s.children){let h=t(l);o[l.outlet]=h}let c=new ue(s.url,o);return s===n&&(e=c),c}let i=t(n.root),r=zg(i);return e??r}function Hg(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return rl(r,r,r,t,i);let s=rE(e);if(s.toRoot())return rl(r,r,new ue([],{}),t,i);let o=sE(s,r,n),c=o.processChildren?us(o.segmentGroup,o.index,s.commands):Kg(o.segmentGroup,o.index,s.commands);return rl(r,o.segmentGroup,c,t,i)}function ha(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ds(n){return typeof n=="object"&&n!=null&&n.outlets}function rl(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([l,h])=>{s[l]=Array.isArray(h)?h.map(f=>`${f}`):`${h}`});let o;n===e?o=t:o=Wg(n,e,t);let c=zg(qg(o));return new Yt(c,s,r)}function Wg(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=Wg(s,e,t)}),new ue(n.segments,i)}var da=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&ha(i[0]))throw new Te(4003,!1);let r=i.find(ds);if(r&&r!==Vg(i))throw new Te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function rE(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new da(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,h])=>{c[l]=typeof h=="string"?h.split("/"):h}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new da(t,e,i)}var Li=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function sE(n,e,t){if(n.isAbsolute)return new Li(e,!0,0);if(!t)return new Li(e,!1,NaN);if(t.parent===null)return new Li(t,!0,0);let i=ha(n.commands[0])?0:1,r=t.segments.length-1+i;return oE(t,r,n.numberOfDoubleDots)}function oE(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Te(4005,!1);r=i.segments.length}return new Li(i,!1,r-s)}function aE(n){return ds(n[0])?n[0].outlets:{[Z]:n}}function Kg(n,e,t){if(n??=new ue([],{}),n.segments.length===0&&n.hasChildren())return us(n,e,t);let i=cE(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new ue(n.segments.slice(0,i.pathIndex),{});return s.children[Z]=new ue(n.segments.slice(i.pathIndex),n.children),us(s,0,r)}else return i.match&&r.length===0?new ue(n.segments,{}):i.match&&!n.hasChildren()?hl(n,e,t):i.match?us(n,0,r):hl(n,e,t)}function us(n,e,t){if(t.length===0)return new ue(n.segments,{});{let i=aE(t),r={};if(Object.keys(i).some(s=>s!==Z)&&n.children[Z]&&n.numberOfChildren===1&&n.children[Z].segments.length===0){let s=us(n.children[Z],e,t);return new ue(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=Kg(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new ue(n.segments,r)}}function cE(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],c=t[i];if(ds(c))break;let l=`${c}`,h=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&h&&typeof h=="object"&&h.outlets===void 0){if(!Rg(l,h,o))return s;i+=2}else{if(!Rg(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function hl(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(ds(s)){let l=uE(s.outlets);return new ue(i,l)}if(r===0&&ha(t[0])){let l=n.segments[e];i.push(new Kn(l.path,Sg(t[0]))),r++;continue}let o=ds(s)?s.outlets[Z]:`${s}`,c=r<t.length-1?t[r+1]:null;o&&c&&ha(c)?(i.push(new Kn(o,Sg(c))),r+=2):(i.push(new Kn(o,{})),r++)}return new ue(i,{})}function uE(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=hl(new ue([],{}),0,i))}),e}function Sg(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function Rg(n,e,t){return n==t.path&&Mt(e,t.parameters)}var ls="imperative",xe=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(xe||{}),dt=class{constructor(e,t){this.id=e,this.url=t}},zi=class extends dt{constructor(e,t,i="imperative",r=null){super(e,t),this.type=xe.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Nt=class extends dt{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=xe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ot=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ot||{}),fa=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(fa||{}),Qt=class extends dt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=xe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},wn=class extends dt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=xe.NavigationSkipped}},fs=class extends dt{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=xe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},pa=class extends dt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=xe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dl=class extends dt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=xe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fl=class extends dt{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=xe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},pl=class extends dt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=xe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ml=class extends dt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=xe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gl=class{constructor(e){this.route=e,this.type=xe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},_l=class{constructor(e){this.route=e,this.type=xe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},yl=class{constructor(e){this.snapshot=e,this.type=xe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vl=class{constructor(e){this.snapshot=e,this.type=xe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Il=class{constructor(e){this.snapshot=e,this.type=xe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wl=class{constructor(e){this.snapshot=e,this.type=xe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ma=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=xe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ps=class{},qi=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function lE(n,e){return n.providers&&!n._injector&&(n._injector=Gu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Et(n){return n.outlet||Z}function hE(n,e){let t=n.filter(i=>Et(i)===e);return t.push(...n.filter(i=>Et(i)!==e)),t}function Es(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var El=class{get injector(){return Es(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new bs(this.rootInjector),this.attachRef=null}},bs=(()=>{let e=class e{constructor(i){this.rootInjector=i,this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new El(this.rootInjector),this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)(H(Wr))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ga=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=bl(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=bl(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Tl(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Tl(e,this._root).map(t=>t.value)}};function bl(n,e){if(n===e.value)return e;for(let t of e.children){let i=bl(n,t);if(i)return i}return null}function Tl(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Tl(n,t);if(i.length)return i.unshift(e),i}return[]}var st=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Fi(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var _a=class extends ga{constructor(e,t){super(e),this.snapshot=t,Nl(this,e)}toString(){return this.snapshot.toString()}};function Qg(n){let e=dE(n),t=new lt([new Kn("",{})]),i=new lt({}),r=new lt({}),s=new lt({}),o=new lt(""),c=new En(t,i,s,o,r,Z,n,e.root);return c.snapshot=e.root,new _a(new st(c,[]),e)}function dE(n){let e={},t={},i={},r="",s=new Ui([],e,i,r,t,Z,n,null,{});return new va("",new st(s,[]))}var En=class{constructor(e,t,i,r,s,o,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ae(h=>h[Is]))??W(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>Bi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>Bi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ya(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),r?.data),n._resolvedData)}:i={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},r&&Jg(r)&&(i.resolve[Is]=r.title),i}var Ui=class{get title(){return this.data?.[Is]}constructor(e,t,i,r,s,o,c,l,h){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},va=class extends ga{constructor(e,t){super(t),this.url=e,Nl(this,t)}toString(){return Yg(this._root)}};function Nl(n,e){e.value._routerState=n,e.children.forEach(t=>Nl(n,t))}function Yg(n){let e=n.children.length>0?` { ${n.children.map(Yg).join(", ")} } `:"";return`${n.value}${e}`}function sl(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Mt(e.params,t.params)||n.paramsSubject.next(t.params),Uw(e.url,t.url)||n.urlSubject.next(t.url),Mt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Al(n,e){let t=Mt(n.params,e.params)&&zw(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||Al(n.parent,e.parent))}function Jg(n){return typeof n.title=="string"||n.title===null}var Ts=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Z,this.activateEvents=new vt,this.deactivateEvents=new vt,this.attachEvents=new vt,this.detachEvents=new vt,this.parentContexts=U(bs),this.location=U(Wm),this.changeDetector=U(Ni),this.inputBinder=U(ba,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Te(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new Te(4013,!1);this._activatedRoute=i;let s=this.location,c=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,h=new Cl(i,l,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:h,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ht({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ri]});let n=e;return n})(),Cl=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===En?this.route:e===bs?this.childContexts:this.parent.get(e,t)}},ba=new ie(""),Dg=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,s=Ai([r.queryParams,r.params,r.data]).pipe(gt(([o,c,l],h)=>(l=V(V(V({},o),c),l),h===0?W(l):Promise.resolve(l)))).subscribe(o=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let c=sg(r.component);if(!c){this.unsubscribeFromRouteData(i);return}for(let{templateName:l}of c.inputs)i.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(i,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})();function fE(n,e,t){let i=ms(n,e._root,t?t._root:void 0);return new _a(i,e)}function ms(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=pE(n,e,t);return new st(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>ms(n,c)),o}}let i=mE(e.value),r=e.children.map(s=>ms(n,s));return new st(i,r)}}function pE(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ms(n,i,r);return ms(n,i)})}function mE(n){return new En(new lt(n.url),new lt(n.params),new lt(n.queryParams),new lt(n.fragment),new lt(n.data),n.outlet,n.component,n)}var gs=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Xg="ngNavigationCancelingError";function Ia(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Yn(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Zg(!1,ot.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function Zg(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Xg]=!0,t.cancellationCode=e,t}function gE(n){return e_(n)&&Yn(n.url)}function e_(n){return!!n&&n[Xg]}var _E=(n,e,t,i)=>ae(r=>(new Sl(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),Sl=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),sl(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Fi(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Fi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Fi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Fi(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new wl(s.value.snapshot))}),e.children.length&&this.forwardEvent(new vl(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(sl(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),sl(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},wa=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ji=class{constructor(e,t){this.component=e,this.route=t}};function yE(n,e,t){let i=n._root,r=e?e._root:null;return as(i,r,t,[i.value])}function vE(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Hi(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!Lm(n)?n:e.get(n):i}function as(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Fi(e);return n.children.forEach(o=>{IE(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>hs(c,t.getContext(o),r)),r}function IE(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=wE(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new wa(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?as(n,e,c?c.children:null,i,r):as(n,e,t,i,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new ji(c.outlet.component,o))}else o&&hs(e,c,r),r.canActivateChecks.push(new wa(i)),s.component?as(n,null,c?c.children:null,i,r):as(n,null,t,i,r);return r}function wE(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Qn(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Qn(n.url,e.url)||!Mt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Al(n,e)||!Mt(n.queryParams,e.queryParams);case"paramsChange":default:return!Al(n,e)}}function hs(n,e,t){let i=Fi(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?hs(o,e.children.getContext(s),t):hs(o,null,t):hs(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ji(e.outlet.component,r)):t.canDeactivateChecks.push(new ji(null,r)):t.canDeactivateChecks.push(new ji(null,r))}function As(n){return typeof n=="function"}function EE(n){return typeof n=="boolean"}function bE(n){return n&&As(n.canLoad)}function TE(n){return n&&As(n.canActivate)}function AE(n){return n&&As(n.canActivateChild)}function CE(n){return n&&As(n.canDeactivate)}function SE(n){return n&&As(n.canMatch)}function t_(n){return n instanceof km||n?.name==="EmptyError"}var aa=Symbol("INITIAL_VALUE");function Gi(){return gt(n=>Ai(n.map(e=>e.pipe(_n(1),zo(aa)))).pipe(ae(e=>{for(let t of e)if(t!==!0){if(t===aa)return aa;if(t===!1||RE(t))return t}return!0}),Gn(e=>e!==aa),_n(1)))}function RE(n){return Yn(n)||n instanceof gs}function DE(n,e){return rt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?W(ce(V({},t),{guardsResult:!0})):PE(o,i,r,n).pipe(rt(c=>c&&EE(c)?kE(i,s,n,e):W(c)),ae(c=>ce(V({},t),{guardsResult:c})))})}function PE(n,e,t,i){return Qe(n).pipe(rt(r=>VE(r.component,r.route,t,e,i)),yn(r=>r!==!0,!0))}function kE(n,e,t,i){return Qe(e).pipe(Si(r=>Bo(ME(r.route.parent,i),xE(r.route,i),OE(n,r.path,t),NE(n,r.route,t))),yn(r=>r!==!0,!0))}function xE(n,e){return n!==null&&e&&e(new Il(n)),W(!0)}function ME(n,e){return n!==null&&e&&e(new yl(n)),W(!0)}function NE(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return W(!0);let r=i.map(s=>Lu(()=>{let o=Es(e)??t,c=Hi(s,o),l=TE(c)?c.canActivate(e,n):Dt(o,()=>c(e,n));return bn(l).pipe(yn())}));return W(r).pipe(Gi())}function OE(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>vE(o)).filter(o=>o!==null).map(o=>Lu(()=>{let c=o.guards.map(l=>{let h=Es(o.node)??t,f=Hi(l,h),g=AE(f)?f.canActivateChild(i,n):Dt(h,()=>f(i,n));return bn(g).pipe(yn())});return W(c).pipe(Gi())}));return W(s).pipe(Gi())}function VE(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return W(!0);let o=s.map(c=>{let l=Es(e)??r,h=Hi(c,l),f=CE(h)?h.canDeactivate(n,e,t,i):Dt(l,()=>h(n,e,t,i));return bn(f).pipe(yn())});return W(o).pipe(Gi())}function FE(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return W(!0);let s=r.map(o=>{let c=Hi(o,n),l=bE(c)?c.canLoad(e,t):Dt(n,()=>c(e,t));return bn(l)});return W(s).pipe(Gi(),n_(i))}function n_(n){return Sm(Pe(e=>{if(typeof e!="boolean")throw Ia(n,e)}),ae(e=>e===!0))}function LE(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return W(!0);let s=r.map(o=>{let c=Hi(o,n),l=SE(c)?c.canMatch(e,t):Dt(n,()=>c(e,t));return bn(l)});return W(s).pipe(Gi(),n_(i))}var _s=class{constructor(e){this.segmentGroup=e||null}},ys=class extends Error{constructor(e){super(),this.urlTree=e}};function Vi(n){return Gr(new _s(n))}function UE(n){return Gr(new Te(4e3,!1))}function jE(n){return Gr(Zg(!1,ot.GuardRejected))}var Rl=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return W(i);if(r.numberOfChildren>1||!r.children[Z])return UE(`${e.redirectTo}`);r=r.children[Z]}}applyRedirectCommands(e,t,i,r,s){if(typeof t!="string"){let c=t,{queryParams:l,fragment:h,routeConfig:f,url:g,outlet:I,params:S,data:P,title:O}=r,D=Dt(s,()=>c({params:S,data:P,queryParams:l,fragment:h,routeConfig:f,url:g,outlet:I,title:O}));if(D instanceof Yt)throw new ys(D);t=D}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new ys(o);return o}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new Yt(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);i[r]=t[c]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,i,r)}),new ue(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Te(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},Dl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function BE(n,e,t,i,r){let s=i_(n,e,t);return s.matched?(i=lE(e,i),LE(i,e,t,r).pipe(ae(o=>o===!0?s:V({},Dl)))):W(s)}function i_(n,e,t){if(e.path==="**")return $E(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},Dl):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||Lw)(t,n,e);if(!r)return V({},Dl);let s={};Object.entries(r.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=r.consumed.length>0?V(V({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function $E(n){return{matched:!0,parameters:n.length>0?Vg(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Pg(n,e,t,i){return t.length>0&&GE(n,t,i)?{segmentGroup:new ue(e,qE(i,new ue(t,n.children))),slicedSegments:[]}:t.length===0&&HE(n,t,i)?{segmentGroup:new ue(n.segments,zE(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new ue(n.segments,n.children),slicedSegments:t}}function zE(n,e,t,i){let r={};for(let s of t)if(Ta(n,e,s)&&!i[Et(s)]){let o=new ue([],{});r[Et(s)]=o}return V(V({},i),r)}function qE(n,e){let t={};t[Z]=e;for(let i of n)if(i.path===""&&Et(i)!==Z){let r=new ue([],{});t[Et(i)]=r}return t}function GE(n,e,t){return t.some(i=>Ta(n,e,i)&&Et(i)!==Z)}function HE(n,e,t){return t.some(i=>Ta(n,e,i))}function Ta(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function WE(n,e,t){return e.length===0&&!n.children[t]}var Pl=class{};function KE(n,e,t,i,r,s,o="emptyOnly"){return new kl(n,e,t,i,r,o,s).recognize()}var QE=31,kl=class{constructor(e,t,i,r,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new Rl(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Te(4002,`'${e.segmentGroup}'`)}recognize(){let e=Pg(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(({children:t,rootSnapshot:i})=>{let r=new st(i,t),s=new va("",r),o=iE(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Ui([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Z,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Z,t).pipe(ae(i=>({children:i,rootSnapshot:t})),Ci(i=>{if(i instanceof ys)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof _s?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(ae(o=>o instanceof st?[o]:[]))}processChildren(e,t,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return Qe(s).pipe(Si(o=>{let c=i.children[o],l=hE(t,o);return this.processSegmentGroup(e,l,c,o,r)}),Vm((o,c)=>(o.push(...c),o)),Uu(null),Om(),rt(o=>{if(o===null)return Vi(i);let c=r_(o);return YE(c),W(c)}))}processSegment(e,t,i,r,s,o,c){return Qe(t).pipe(Si(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,s,o,c).pipe(Ci(h=>{if(h instanceof _s)return W(null);throw h}))),yn(l=>!!l),Ci(l=>{if(t_(l))return WE(i,r,s)?W(new Pl):Vi(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,s,o,c,l){return Et(i)!==o&&(o===Z||!Ta(r,s,i))?Vi(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,l):Vi(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,c){let{matched:l,parameters:h,consumedSegments:f,positionalParamSegments:g,remainingSegments:I}=i_(t,r,s);if(!l)return Vi(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>QE&&(this.allowRedirects=!1));let S=new Ui(s,h,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,kg(r),Et(r),r.component??r._loadedComponent??null,r,xg(r)),P=ya(S,c,this.paramsInheritanceStrategy);S.params=Object.freeze(P.params),S.data=Object.freeze(P.data);let O=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,g,S,e);return this.applyRedirects.lineralizeSegments(r,O).pipe(rt(D=>this.processSegment(e,i,t,D.concat(I),o,!1,c)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let c=BE(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),c.pipe(gt(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(gt(({routes:h})=>{let f=i._loadedInjector??e,{parameters:g,consumedSegments:I,remainingSegments:S}=l,P=new Ui(I,g,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,kg(i),Et(i),i.component??i._loadedComponent??null,i,xg(i)),O=ya(P,o,this.paramsInheritanceStrategy);P.params=Object.freeze(O.params),P.data=Object.freeze(O.data);let{segmentGroup:D,slicedSegments:z}=Pg(t,I,S,h);if(z.length===0&&D.hasChildren())return this.processChildren(f,h,D,P).pipe(ae(J=>new st(P,J)));if(h.length===0&&z.length===0)return W(new st(P,[]));let Q=Et(i)===s;return this.processSegment(f,h,D,z,Q?Z:s,!0,P).pipe(ae(J=>new st(P,J instanceof st?[J]:[])))}))):Vi(t)))}getChildConfig(e,t,i){return t.children?W({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?W({routes:t._loadedRoutes,injector:t._loadedInjector}):FE(e,t,i,this.urlSerializer).pipe(rt(r=>r?this.configLoader.loadChildren(e,t).pipe(Pe(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):jE(t))):W({routes:[],injector:e})}};function YE(n){n.sort((e,t)=>e.value.outlet===Z?-1:t.value.outlet===Z?1:e.value.outlet.localeCompare(t.value.outlet))}function JE(n){let e=n.value.routeConfig;return e&&e.path===""}function r_(n){let e=[],t=new Set;for(let i of n){if(!JE(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=r_(i.children);e.push(new st(i.value,r))}return e.filter(i=>!t.has(i))}function kg(n){return n.data||{}}function xg(n){return n.resolve||{}}function XE(n,e,t,i,r,s){return rt(o=>KE(n,e,t,i,o.extractedUrl,r,s).pipe(ae(({state:c,tree:l})=>ce(V({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function ZE(n,e){return rt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return W(t);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let h of s_(l))o.add(h);let c=0;return Qe(o).pipe(Si(l=>s.has(l)?eb(l,i,n,e):(l.data=ya(l,l.parent,n).resolve,W(void 0))),Pe(()=>c++),ju(1),rt(l=>c===o.size?W(t):gn))})}function s_(n){let e=n.children.map(t=>s_(t)).flat();return[n,...e]}function eb(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!Jg(r)&&(s[Is]=r.title),tb(s,n,e,i).pipe(ae(o=>(n._resolvedData=o,n.data=ya(n,n.parent,t).resolve,null)))}function tb(n,e,t,i){let r=cl(n);if(r.length===0)return W({});let s={};return Qe(r).pipe(rt(o=>nb(n[o],e,t,i).pipe(yn(),Pe(c=>{if(c instanceof gs)throw Ia(new $i,c);s[o]=c}))),ju(1),Nm(s),Ci(o=>t_(o)?gn:Gr(o)))}function nb(n,e,t,i){let r=Es(e)??i,s=Hi(n,r),o=s.resolve?s.resolve(e,t):Dt(r,()=>s(e,t));return bn(o)}function ol(n){return gt(e=>{let t=n(e);return t?Qe(t).pipe(ae(()=>e)):W(e)})}var o_=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===Z);return r}getResolvedTitleForRoute(i){return i.data[Is]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:()=>U(ib),providedIn:"root"});let n=e;return n})(),ib=(()=>{let e=class e extends o_{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(H(Tg))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Cs=new ie("",{providedIn:"root",factory:()=>({})}),rb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=we({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ee],decls:1,vars:0,template:function(r,s){r&1&&de(0,"router-outlet")},dependencies:[Ts],encapsulation:2});let n=e;return n})();function Ol(n){let e=n.children&&n.children.map(Ol),t=e?ce(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Z&&(t.component=rb),t}var vs=new ie(""),Vl=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(ea)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return W(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=bn(i.loadComponent()).pipe(ae(a_),Pe(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),$o(()=>{this.componentLoaders.delete(i)})),s=new Mu(r,()=>new ut).pipe(xu());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=sb(r,this.compiler,i,this.onLoadEndListener).pipe($o(()=>{this.childrenLoaders.delete(r)})),c=new Mu(o,()=>new ut).pipe(xu());return this.childrenLoaders.set(r,c),c}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function sb(n,e,t,i){return bn(n.loadChildren()).pipe(ae(a_),rt(r=>r instanceof Qm||Array.isArray(r)?W(r):Qe(e.compileModuleAsync(r))),ae(r=>{i&&i(n);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(t).injector,o=s.get(vs,[],{optional:!0,self:!0}).flat()),{routes:o.map(Ol),injector:s}}))}function ob(n){return n&&typeof n=="object"&&"default"in n}function a_(n){return ob(n)?n.default:n}var Fl=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:()=>U(ab),providedIn:"root"});let n=e;return n})(),ab=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),c_=new ie(""),u_=new ie("");function cb(n,e,t){let i=n.get(u_),r=n.get(ke);return n.get(ye).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(h=>setTimeout(h));let s,o=new Promise(h=>{s=h}),c=r.startViewTransition(()=>(s(),ub(n))),{onViewTransitionCreated:l}=i;return l&&Dt(n,()=>l({transition:c,from:e,to:t})),o})}function ub(n){return new Promise(e=>{Hu({read:()=>setTimeout(e)},{injector:n})})}var lb=new ie(""),Ll=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ut,this.transitionAbortSubject=new ut,this.configLoader=U(Vl),this.environmentInjector=U(Wr),this.urlSerializer=U(ws),this.rootContexts=U(bs),this.location=U(ts),this.inputBindingEnabled=U(ba,{optional:!0})!==null,this.titleStrategy=U(o_),this.options=U(Cs,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(Fl),this.createViewTransition=U(c_,{optional:!0}),this.navigationErrorHandler=U(lb,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>W(void 0),this.rootComponentType=null;let i=s=>this.events.next(new gl(s)),r=s=>this.events.next(new _l(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(ce(V(V({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new lt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ls,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Gn(o=>o.id!==0),ae(o=>ce(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),gt(o=>{let c=!1,l=!1;return W(o).pipe(gt(h=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ot.SupersededByNewNavigation),gn;this.currentTransition=o,this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,targetBrowserUrl:typeof h.extras.browserUrl=="string"?this.urlSerializer.parse(h.extras.browserUrl):h.extras.browserUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?ce(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=h.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!f&&g!=="reload"){let I="";return this.events.next(new wn(h.id,this.urlSerializer.serialize(h.rawUrl),I,fa.IgnoredSameUrlNavigation)),h.resolve(!1),gn}if(this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return W(h).pipe(gt(I=>{let S=this.transitions?.getValue();return this.events.next(new zi(I.id,this.urlSerializer.serialize(I.extractedUrl),I.source,I.restoredState)),S!==this.transitions?.getValue()?gn:Promise.resolve(I)}),XE(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Pe(I=>{o.targetSnapshot=I.targetSnapshot,o.urlAfterRedirects=I.urlAfterRedirects,this.currentNavigation=ce(V({},this.currentNavigation),{finalUrl:I.urlAfterRedirects});let S=new pa(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects),I.targetSnapshot);this.events.next(S)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(h.currentRawUrl)){let{id:I,extractedUrl:S,source:P,restoredState:O,extras:D}=h,z=new zi(I,this.urlSerializer.serialize(S),P,O);this.events.next(z);let Q=Qg(this.rootComponentType).snapshot;return this.currentTransition=o=ce(V({},h),{targetSnapshot:Q,urlAfterRedirects:S,extras:ce(V({},D),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=S,W(o)}else{let I="";return this.events.next(new wn(h.id,this.urlSerializer.serialize(h.extractedUrl),I,fa.IgnoredByUrlHandlingStrategy)),h.resolve(!1),gn}}),Pe(h=>{let f=new dl(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}),ae(h=>(this.currentTransition=o=ce(V({},h),{guards:yE(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),o)),DE(this.environmentInjector,h=>this.events.next(h)),Pe(h=>{if(o.guardsResult=h.guardsResult,h.guardsResult&&typeof h.guardsResult!="boolean")throw Ia(this.urlSerializer,h.guardsResult);let f=new fl(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.events.next(f)}),Gn(h=>h.guardsResult?!0:(this.cancelNavigationTransition(h,"",ot.GuardRejected),!1)),ol(h=>{if(h.guards.canActivateChecks.length)return W(h).pipe(Pe(f=>{let g=new pl(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}),gt(f=>{let g=!1;return W(f).pipe(ZE(this.paramsInheritanceStrategy,this.environmentInjector),Pe({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(f,"",ot.NoDataFromResolver)}}))}),Pe(f=>{let g=new ml(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}))}),ol(h=>{let f=g=>{let I=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&I.push(this.configLoader.loadComponent(g.routeConfig).pipe(Pe(S=>{g.component=S}),ae(()=>{})));for(let S of g.children)I.push(...f(S));return I};return Ai(f(h.targetSnapshot.root)).pipe(Uu(null),_n(1))}),ol(()=>this.afterPreactivation()),gt(()=>{let{currentSnapshot:h,targetSnapshot:f}=o,g=this.createViewTransition?.(this.environmentInjector,h.root,f.root);return g?Qe(g).pipe(ae(()=>o)):W(o)}),ae(h=>{let f=fE(i.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return this.currentTransition=o=ce(V({},h),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),Pe(()=>{this.events.next(new ps)}),_E(this.rootContexts,i.routeReuseStrategy,h=>this.events.next(h),this.inputBindingEnabled),_n(1),Pe({next:h=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Nt(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects))),this.titleStrategy?.updateTitle(h.targetRouterState.snapshot),h.resolve(!0)},complete:()=>{c=!0}}),qo(this.transitionAbortSubject.pipe(Pe(h=>{throw h}))),$o(()=>{!c&&!l&&this.cancelNavigationTransition(o,"",ot.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ci(h=>{if(l=!0,e_(h))this.events.next(new Qt(o.id,this.urlSerializer.serialize(o.extractedUrl),h.message,h.cancellationCode)),gE(h)?this.events.next(new qi(h.url,h.navigationBehaviorOptions)):o.resolve(!1);else{let f=new fs(o.id,this.urlSerializer.serialize(o.extractedUrl),h,o.targetSnapshot??void 0);try{let g=Dt(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(g instanceof gs){let{message:I,cancellationCode:S}=Ia(this.urlSerializer,g);this.events.next(new Qt(o.id,this.urlSerializer.serialize(o.extractedUrl),I,S)),this.events.next(new qi(g.redirectTo,g.navigationBehaviorOptions))}else{this.events.next(f);let I=i.errorHandler(h);o.resolve(!!I)}}catch(g){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(g)}}return gn}))}))}cancelNavigationTransition(i,r,s){let o=new Qt(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let i=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return i.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function hb(n){return n!==ls}var db=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:()=>U(fb),providedIn:"root"});let n=e;return n})(),xl=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},fb=(()=>{let e=class e extends xl{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Kr(e)))(s||e)}})(),e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),l_=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:()=>U(pb),providedIn:"root"});let n=e;return n})(),pb=(()=>{let e=class e extends l_{constructor(){super(...arguments),this.location=U(ts),this.urlSerializer=U(ws),this.options=U(Cs,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(Fl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Yt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Qg(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof zi)this.stateMemento=this.createStateMemento();else if(i instanceof wn)this.rawUrlTree=r.initialUrl;else if(i instanceof pa){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??s,r)}}else i instanceof ps?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):i instanceof Qt&&(i.code===ot.GuardRejected||i.code===ot.NoDataFromResolver)?this.restoreHistory(r):i instanceof fs?this.restoreHistory(r,!0):i instanceof Nt&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=i instanceof Yt?this.urlSerializer.serialize(i):i;if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,c=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",c)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Kr(e)))(s||e)}})(),e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),cs=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(cs||{});function h_(n,e){n.events.pipe(Gn(t=>t instanceof Nt||t instanceof Qt||t instanceof fs||t instanceof wn),ae(t=>t instanceof Nt||t instanceof wn?cs.COMPLETE:(t instanceof Qt?t.code===ot.Redirect||t.code===ot.SupersededByNewNavigation:!1)?cs.REDIRECTING:cs.FAILED),Gn(t=>t!==cs.REDIRECTING),_n(1)).subscribe(()=>{e()})}function mb(n){throw n}var gb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_b={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ve=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=U(Xo),this.stateManager=U(l_),this.options=U(Cs,{optional:!0})||{},this.pendingTasks=U(Bm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(Ll),this.urlSerializer=U(ws),this.location=U(ts),this.urlHandlingStrategy=U(Fl),this._events=new ut,this.errorHandler=this.options.errorHandler||mb,this.navigated=!1,this.routeReuseStrategy=U(db),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(vs,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(ba,{optional:!0}),this.eventsSubscription=new Cm,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Qt&&r.code!==ot.Redirect&&r.code!==ot.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Nt)this.navigated=!0;else if(r instanceof qi){let c=r.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),h=V({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||hb(s.source)},c);this.scheduleNavigation(l,ls,null,h,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}vb(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ls,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let h=V({},s);delete h.navigationId,delete h.\u0275routerPageId,Object.keys(h).length!==0&&(o.state=h)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Ol),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:c,queryParamsHandling:l,preserveFragment:h}=r,f=h?this.currentUrlTree.fragment:c,g=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":g=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}g!==null&&(g=this.removeEmptyProps(g));let I;try{let S=s?s.snapshot:this.routerState.snapshot.root;I=Gg(S)}catch{(typeof i[0]!="string"||i[0][0]!=="/")&&(i=[]),I=this.currentUrlTree.root}return Hg(I,i,g,f??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=Yn(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,ls,null,r)}navigate(i,r={skipLocationChange:!1}){return yb(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=V({},gb):r===!1?s=V({},_b):s=r,Yn(i))return Ag(this.currentUrlTree,i,s);let o=this.parseUrl(i);return Ag(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,c){if(this.disposed)return Promise.resolve(!1);let l,h,f;c?(l=c.resolve,h=c.reject,f=c.promise):f=new Promise((I,S)=>{l=I,h=S});let g=this.pendingTasks.add();return h_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:h,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(I=>Promise.reject(I))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function yb(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Te(4008,!1)}function vb(n){return!(n instanceof ps)&&!(n instanceof qi)}var Aa=(()=>{let e=class e{constructor(i,r,s,o,c,l){this.router=i,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=c,this.locationStrategy=l,this.href=null,this.onChanges=new ut,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let h=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement=h==="a"||h==="area",this.isAnchorElement?this.subscription=i.events.subscribe(f=>{f instanceof Nt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Yn(i)?this.routerLinkInput=i:this.routerLinkInput=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0"))}onClick(i,r,s,o,c){let l=this.urlTree;if(l===null||this.isAnchorElement&&(i!==0||r||s||o||c||typeof this.target=="string"&&this.target!="_self"))return!0;let h={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,h),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let i=this.urlTree;this.href=i!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(i)):null;let r=this.href===null?null:Gm(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(i,r){let s=this.renderer,o=this.el.nativeElement;r!==null?s.setAttribute(o,i,r):s.removeAttribute(o,i)}get urlTree(){return this.routerLinkInput===null?null:Yn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(se(Ve),se(En),zu("tabindex"),se(Jr),se(It),se(es))},e.\u0275dir=ht({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&$("click",function(c){return s.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),r&2&&ki("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",In],skipLocationChange:[2,"skipLocationChange","skipLocationChange",In],replaceUrl:[2,"replaceUrl","replaceUrl",In],routerLink:"routerLink"},standalone:!0,features:[Zr,Ri]});let n=e;return n})();var Ea=class{};var Ib=(()=>{let e=class e{constructor(i,r,s,o,c){this.router=i,this.injector=s,this.preloadingStrategy=o,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Gn(i=>i instanceof Nt),Si(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let s=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Gu(o.providers,i,`Route: ${o.path}`));let c=o._injector??i,l=o._loadedInjector??c;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(c,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(l,o.children??o._loadedRoutes))}return Qe(s).pipe(Fu())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(i,r):s=W(null);let o=s.pipe(rt(c=>c===null?W(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??i,c.routes))));if(r.loadComponent&&!r._loadedComponent){let c=this.loader.loadComponent(r);return Qe([o,c]).pipe(Fu())}else return o})}};e.\u0275fac=function(r){return new(r||e)(H(Ve),H(ea),H(Wr),H(Ea),H(Vl))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),d_=new ie(""),wb=(()=>{let e=class e{constructor(i,r,s,o,c={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=s,this.zone=o,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration||="disabled",c.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof zi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof Nt?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof wn&&i.code===fa.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof ma&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ma(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){Wo()},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})();function f_(n,...e){return _t([{provide:vs,multi:!0,useValue:n},[],{provide:En,useFactory:p_,deps:[Ve]},{provide:Ku,multi:!0,useFactory:m_},e.map(t=>t.\u0275providers)])}function p_(n){return n.routerState.root}function Ss(n,e){return{\u0275kind:n,\u0275providers:e}}function m_(){let n=U(yt);return e=>{let t=n.get(Qu);if(e!==t.components[0])return;let i=n.get(Ve),r=n.get(g_);n.get(Ul)===1&&i.initialNavigation(),n.get(__,null,$u.Optional)?.setUpPreloading(),n.get(d_,null,$u.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var g_=new ie("",{factory:()=>new ut}),Ul=new ie("",{providedIn:"root",factory:()=>1});function Eb(){return Ss(2,[{provide:Ul,useValue:0},{provide:Wu,multi:!0,deps:[yt],useFactory:e=>{let t=e.get(cg,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=e.get(Ve),s=e.get(g_);h_(r,()=>{i(!0)}),e.get(Ll).afterPreactivation=()=>(i(!0),s.closed?W(void 0):s),r.initialNavigation()}))}}])}function bb(){return Ss(3,[{provide:Wu,multi:!0,useFactory:()=>{let e=U(Ve);return()=>{e.setUpLocationChangeListener()}}},{provide:Ul,useValue:2}])}var __=new ie("");function Tb(n){return Ss(0,[{provide:__,useExisting:Ib},{provide:Ea,useExisting:n}])}function Ab(){return Ss(8,[Dg,{provide:ba,useExisting:Dg}])}function Cb(n){let e=[{provide:c_,useValue:cb},{provide:u_,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ss(9,e)}var Mg=new ie("ROUTER_FORROOT_GUARD"),Sb=[ts,{provide:ws,useClass:$i},Ve,bs,{provide:En,useFactory:p_,deps:[Ve]},Vl,[]],Ca=(()=>{let e=class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[Sb,[],{provide:vs,multi:!0,useValue:i},{provide:Mg,useFactory:kb,deps:[[Ve,new Je,new Um]]},{provide:Cs,useValue:r||{}},r?.useHash?Db():Pb(),Rb(),r?.preloadingStrategy?Tb(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?xb(r):[],r?.bindToComponentInputs?Ab().\u0275providers:[],r?.enableViewTransitions?Cb().\u0275providers:[],Mb()]}}static forChild(i){return{ngModule:e,providers:[{provide:vs,multi:!0,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)(H(Mg,8))},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({});let n=e;return n})();function Rb(){return{provide:d_,useFactory:()=>{let n=U(mg),e=U(ye),t=U(Cs),i=U(Ll),r=U(ws);return t.scrollOffset&&n.setOffset(t.scrollOffset),new wb(r,i,n,e,t)}}}function Db(){return{provide:es,useClass:lg}}function Pb(){return{provide:es,useClass:ug}}function kb(n){return"guarded"}function xb(n){return[n.initialNavigation==="disabled"?bb().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Eb().\u0275providers:[]]}var Ng=new ie("");function Mb(){return[{provide:Ng,useFactory:m_},{provide:Ku,multi:!0,useExisting:Ng}]}var v_=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Nb=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],c=n[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},I_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,c=o?n[r+1]:0,l=r+2<n.length,h=l?n[r+2]:0,f=s>>2,g=(s&3)<<4|c>>4,I=(c&15)<<2|h>>6,S=h&63;l||(S=64,o||(I=64)),i.push(t[f],t[g],t[I],t[S])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(v_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Nb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let h=r<n.length?t[n.charAt(r)]:64;++r;let g=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||h==null||g==null)throw new Bl;let I=s<<2|c>>4;if(i.push(I),h!==64){let S=c<<4&240|h>>2;if(i.push(S),g!==64){let P=h<<6&192|g;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Bl=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Ob=function(n){let e=v_(n);return I_.encodeByteArray(e,!0)},Ds=function(n){return Ob(n).replace(/\./g,"")},zl=function(n){try{return I_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Vb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Fb=()=>Vb().__FIREBASE_DEFAULTS__,Lb=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ub=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&zl(n[1]);return e&&JSON.parse(e)},Ra=()=>{try{return Fb()||Lb()||Ub()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ql=n=>{var e,t;return(t=(e=Ra())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},w_=n=>{let e=ql(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Gl=()=>{var n;return(n=Ra())===null||n===void 0?void 0:n.config},Hl=n=>{var e;return(e=Ra())===null||e===void 0?void 0:e[`_${n}`]};var Sa=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function E_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ds(JSON.stringify(t)),Ds(JSON.stringify(o)),""].join(".")}function Me(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function b_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function jb(){var n;let e=(n=Ra())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function T_(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function A_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function C_(){let n=Me();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function S_(){return!jb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wl(){try{return typeof indexedDB=="object"}catch{return!1}}function R_(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Bb="FirebaseError",tt=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Bb,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jt.prototype.create)}},Jt=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?$b(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new tt(r,c,i)}};function $b(n,e){return n.replace(zb,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var zb=/\{\$([^}]+)}/g;function D_(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Jn(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(y_(s)&&y_(o)){if(!Jn(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function y_(n){return n!==null&&typeof n=="object"}function Ps(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Wi(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Ki(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function P_(n,e){let t=new $l(n,e);return t.subscribe.bind(t)}var $l=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");qb(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=jl),r.error===void 0&&(r.error=jl),r.complete===void 0&&(r.complete=jl);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function qb(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function jl(){}var P1=4*60*60*1e3;function Fe(n){return n&&n._delegate?n._delegate:n}var ft=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Xn="[DEFAULT]";var Kl=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Sa;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hb(e))try{this.getOrInitializeService({instanceIdentifier:Xn})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Xn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Xn){return this.instances.has(e)}getOptions(e=Xn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Gb(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Xn){return this.component?this.component.multipleInstances?e:Xn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Gb(n){return n===Xn?void 0:n}function Hb(n){return n.instantiationMode==="EAGER"}var Da=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Kl(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Wb=[],ee=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ee||{}),Kb={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},Qb=ee.INFO,Yb={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},Jb=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=Yb[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Tn=class{constructor(e){this.name=e,this._logLevel=Qb,this._logHandler=Jb,this._userLogHandler=null,Wb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...e),this._logHandler(this,ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...e),this._logHandler(this,ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...e),this._logHandler(this,ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...e),this._logHandler(this,ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...e),this._logHandler(this,ee.ERROR,...e)}};var Xb=(n,e)=>e.some(t=>n instanceof t),k_,x_;function Zb(){return k_||(k_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eT(){return x_||(x_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var M_=new WeakMap,Yl=new WeakMap,N_=new WeakMap,Ql=new WeakMap,Xl=new WeakMap;function tT(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ot(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&M_.set(t,n)}).catch(()=>{}),Xl.set(e,n),e}function nT(n){if(Yl.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Yl.set(n,e)}var Jl={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Yl.get(n);if(e==="objectStoreNames")return n.objectStoreNames||N_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ot(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function O_(n){Jl=n(Jl)}function iT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Pa(this),e,...t);return N_.set(i,e.sort?e.sort():[e]),Ot(i)}:eT().includes(n)?function(...e){return n.apply(Pa(this),e),Ot(M_.get(this))}:function(...e){return Ot(n.apply(Pa(this),e))}}function rT(n){return typeof n=="function"?iT(n):(n instanceof IDBTransaction&&nT(n),Xb(n,Zb())?new Proxy(n,Jl):n)}function Ot(n){if(n instanceof IDBRequest)return tT(n);if(Ql.has(n))return Ql.get(n);let e=rT(n);return e!==n&&(Ql.set(n,e),Xl.set(e,n)),e}var Pa=n=>Xl.get(n);function F_(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),c=Ot(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Ot(o.result),l.oldVersion,l.newVersion,Ot(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}var sT=["get","getKey","getAll","getAllKeys","count"],oT=["put","add","delete","clear"],Zl=new Map;function V_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Zl.get(e))return Zl.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=oT.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||sT.includes(t)))return;let s=function(o,...c){return _(this,null,function*(){let l=this.transaction(o,r?"readwrite":"readonly"),h=l.store;return i&&(h=h.index(c.shift())),(yield Promise.all([h[t](...c),r&&l.done]))[0]})};return Zl.set(e,s),s}O_(n=>ce(V({},n),{get:(e,t,i)=>V_(e,t)||n.get(e,t,i),has:(e,t)=>!!V_(e,t)||n.has(e,t)}));var th=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(aT(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function aT(n){let e=n.getComponent();return e?.type==="VERSION"}var nh="@firebase/app",L_="0.10.10";var Xt=new Tn("@firebase/app"),cT="@firebase/app-compat",uT="@firebase/analytics-compat",lT="@firebase/analytics",hT="@firebase/app-check-compat",dT="@firebase/app-check",fT="@firebase/auth",pT="@firebase/auth-compat",mT="@firebase/database",gT="@firebase/database-compat",_T="@firebase/functions",yT="@firebase/functions-compat",vT="@firebase/installations",IT="@firebase/installations-compat",wT="@firebase/messaging",ET="@firebase/messaging-compat",bT="@firebase/performance",TT="@firebase/performance-compat",AT="@firebase/remote-config",CT="@firebase/remote-config-compat",ST="@firebase/storage",RT="@firebase/storage-compat",DT="@firebase/firestore",PT="@firebase/vertexai-preview",kT="@firebase/firestore-compat",xT="firebase",MT="10.13.1";var ih="[DEFAULT]",NT={[nh]:"fire-core",[cT]:"fire-core-compat",[lT]:"fire-analytics",[uT]:"fire-analytics-compat",[dT]:"fire-app-check",[hT]:"fire-app-check-compat",[fT]:"fire-auth",[pT]:"fire-auth-compat",[mT]:"fire-rtdb",[gT]:"fire-rtdb-compat",[_T]:"fire-fn",[yT]:"fire-fn-compat",[vT]:"fire-iid",[IT]:"fire-iid-compat",[wT]:"fire-fcm",[ET]:"fire-fcm-compat",[bT]:"fire-perf",[TT]:"fire-perf-compat",[AT]:"fire-rc",[CT]:"fire-rc-compat",[ST]:"fire-gcs",[RT]:"fire-gcs-compat",[DT]:"fire-fst",[kT]:"fire-fst-compat",[PT]:"fire-vertex","fire-js":"fire-js",[xT]:"fire-js-all"};var ks=new Map,OT=new Map,rh=new Map;function U_(n,e){try{n.container.addComponent(e)}catch(t){Xt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Cn(n){let e=n.name;if(rh.has(e))return Xt.debug(`There were multiple attempts to register component ${e}.`),!1;rh.set(e,n);for(let t of ks.values())U_(t,n);for(let t of OT.values())U_(t,n);return!0}function Ms(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bt(n){return n.settings!==void 0}var VT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},An=new Jt("app","Firebase",VT);var sh=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ft("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw An.create("app-deleted",{appName:this._name})}};var Sn=MT;function Ns(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:ih,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw An.create("bad-app-name",{appName:String(r)});if(t||(t=Gl()),!t)throw An.create("no-options");let s=ks.get(r);if(s){if(Jn(t,s.options)&&Jn(i,s.config))return s;throw An.create("duplicate-app",{appName:r})}let o=new Da(r);for(let l of rh.values())o.addComponent(l);let c=new sh(t,i,o);return ks.set(r,c),c}function Qi(n=ih){let e=ks.get(n);if(!e&&n===ih&&Gl())return Ns();if(!e)throw An.create("no-app",{appName:n});return e}function ka(){return Array.from(ks.values())}function De(n,e,t){var i;let r=(i=NT[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xt.warn(c.join(" "));return}Cn(new ft(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var FT="firebase-heartbeat-database",LT=1,xs="firebase-heartbeat-store",eh=null;function z_(){return eh||(eh=F_(FT,LT,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(xs)}catch(t){console.warn(t)}}}}).catch(n=>{throw An.create("idb-open",{originalErrorMessage:n.message})})),eh}function UT(n){return _(this,null,function*(){try{let t=(yield z_()).transaction(xs),i=yield t.objectStore(xs).get(q_(n));return yield t.done,i}catch(e){if(e instanceof tt)Xt.warn(e.message);else{let t=An.create("idb-get",{originalErrorMessage:e?.message});Xt.warn(t.message)}}})}function j_(n,e){return _(this,null,function*(){try{let i=(yield z_()).transaction(xs,"readwrite");yield i.objectStore(xs).put(e,q_(n)),yield i.done}catch(t){if(t instanceof tt)Xt.warn(t.message);else{let i=An.create("idb-set",{originalErrorMessage:t?.message});Xt.warn(i.message)}}})}function q_(n){return`${n.name}!${n.options.appId}`}var jT=1024,BT=30*24*60*60*1e3,oh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ah(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=B_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=BT}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Xt.warn(i)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=B_(),{heartbeatsToSend:i,unsentEntries:r}=$T(this._heartbeatsCache.heartbeats),s=Ds(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Xt.warn(t),""}})}};function B_(){return new Date().toISOString().substring(0,10)}function $T(n,e=jT){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),$_(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),$_(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var ah=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Wl()?R_().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield UT(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return j_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return j_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function $_(n){return Ds(JSON.stringify({version:2,heartbeats:n})).length}function zT(n){Cn(new ft("platform-logger",e=>new th(e),"PRIVATE")),Cn(new ft("heartbeat",e=>new oh(e),"PRIVATE")),De(nh,L_,n),De(nh,L_,"esm2017"),De("fire-js","")}zT("");var qT="firebase",GT="10.13.1";De(qT,GT,"app");var ei=new Mi("ANGULARFIRE2_VERSION");function Ma(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Os=(n,e)=>{let t=e?[e]:ka(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Ji=class{constructor(){return Os(HT)}},HT="app-check";function Yi(){}var xa=class{zone;delegate;constructor(e,t=Dm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,i)}},ch=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yi,{},Yi,Yi)),t.pipe(Pe({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Xi=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new xa(Zone.current)),this.insideAngular=t.run(()=>new xa(Zone.current,Rm)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(H(ye))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Na(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function WT(n){return Na().ngZone.runOutsideAngular(()=>n())}function Zn(n){return Na().ngZone.run(()=>n())}function KT(n){return QT(Na())(n)}function QT(n){return function(t){return t=t.lift(new ch(n.ngZone)),t.pipe(Vu(n.outsideAngular),Ou(n.insideAngular))}}var YT=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Zn(()=>n.apply(void 0,i))},nt=(n,e)=>function(){let t,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(t||=Zn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yi,{},Yi,Yi))),i[s]=YT(i[s],t));let r=WT(()=>n.apply(this,i));if(!e)if(r instanceof qn){let s=Na();return r.pipe(Vu(s.outsideAngular),Ou(s.insideAngular))}else return Zn(()=>r);return r instanceof qn?r.pipe(KT):r instanceof Promise?Zn(()=>new Promise((s,o)=>r.then(c=>Zn(()=>s(c)),c=>Zn(()=>o(c))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:Zn(()=>r)};var Zt=class{constructor(e){return e}},ti=class{constructor(){return ka()}};function JT(n){return n&&n.length===1?n[0]:new Zt(Qi())}var uh=new ie("angularfire2._apps"),XT={provide:Zt,useFactory:JT,deps:[[new Je,uh]]},ZT={provide:ti,deps:[[new Je,uh]]};function eA(n){return(e,t)=>{let i=t.get(Wt);De("angularfire",ei.full,"core"),De("angularfire",ei.full,"app"),De("angular",tg.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new Zt(r)}}function G_(n,...e){return _t([XT,ZT,{provide:uh,useFactory:eA(n),multi:!0,deps:[ye,yt,Xi,...e]}])}var H_=nt(Ns,!0);function uy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ly=uy,hy=new Jt("auth","Firebase",uy());var ja=new Tn("@firebase/auth");function tA(n,...e){ja.logLevel<=ee.WARN&&ja.warn(`Auth (${Sn}): ${n}`,...e)}function Va(n,...e){ja.logLevel<=ee.ERROR&&ja.error(`Auth (${Sn}): ${n}`,...e)}function Ft(n,...e){throw xh(n,...e)}function ni(n,...e){return xh(n,...e)}function dy(n,e,t){let i=Object.assign(Object.assign({},ly()),{[e]:t});return new Jt("auth","Firebase",i).create(e,{appName:n.name})}function nn(n){return dy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xh(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return hy.create(n,...e)}function q(n,e,...t){if(!n)throw xh(e,...t)}function en(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Va(e),new Error(e)}function Dn(n,e){n||en(e)}function fh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function nA(){return W_()==="http:"||W_()==="https:"}function W_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function iA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nA()||T_()||"connection"in navigator)?navigator.onLine:!0}function rA(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ii=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Dn(t>e,"Short delay should be less than long delay!"),this.isMobile=b_()||A_()}get(){return iA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Mh(n,e){Dn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ba=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;en("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;en("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;en("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var oA=new ii(3e4,6e4);function Pn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function kn(s,o,c,l){return _(this,arguments,function*(n,e,t,i,r={}){return fy(n,r,()=>_(this,null,function*(){let h={},f={};i&&(e==="GET"?f=i:h={body:JSON.stringify(i)});let g=Ps(Object.assign({key:n.config.apiKey},f)).slice(1),I=yield n._getAdditionalHeaders();return I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode),Ba.fetch()(py(n,n.config.apiHost,t,g),Object.assign({method:e,headers:I,referrerPolicy:"no-referrer"},h))}))})}function fy(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},sA),e);try{let r=new ph(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Oa(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oa(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Oa(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Oa(n,"user-disabled",o);let f=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw dy(n,f,h);Ft(n,f)}}catch(r){if(r instanceof tt)throw r;Ft(n,"network-request-failed",{message:String(r)})}})}function zs(s,o,c,l){return _(this,arguments,function*(n,e,t,i,r={}){let h=yield kn(n,e,t,i,r);return"mfaPendingCredential"in h&&Ft(n,"multi-factor-auth-required",{_serverResponse:h}),h})}function py(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?Mh(n.config,r):`${n.config.apiScheme}://${r}`}function aA(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var ph=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ni(this.auth,"network-request-failed")),oA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Oa(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=ni(n,e,i);return r.customData._tokenResponse=t,r}function K_(n){return n!==void 0&&n.enterprise!==void 0}var mh=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return aA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function cA(n,e){return _(this,null,function*(){return kn(n,"GET","/v2/recaptchaConfig",Pn(n,e))})}function uA(n,e){return _(this,null,function*(){return kn(n,"POST","/v1/accounts:delete",e)})}function my(n,e){return _(this,null,function*(){return kn(n,"POST","/v1/accounts:lookup",e)})}function Vs(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Nh(n,e=!1){return _(this,null,function*(){let t=Fe(n),i=yield t.getIdToken(e),r=Oh(i);q(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Vs(lh(r.auth_time)),issuedAtTime:Vs(lh(r.iat)),expirationTime:Vs(lh(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function lh(n){return Number(n)*1e3}function Oh(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Va("JWT malformed, contained fewer than 3 sections"),null;try{let r=zl(t);return r?JSON.parse(r):(Va("Failed to decode base64 JWT payload"),null)}catch(r){return Va("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Q_(n){let e=Oh(n);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ls(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof tt&&lA(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function lA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var gh=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Us=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vs(this.lastLoginAt),this.creationTime=Vs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function $a(n){return _(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield Ls(n,my(t,{idToken:i}));q(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?gy(s.providerUserInfo):[],c=hA(n.providerData,o),l=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!c?.length,f=l?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Us(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)})}function Vh(n){return _(this,null,function*(){let e=Fe(n);yield $a(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function hA(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function gy(n){return n.map(e=>{var{providerId:t}=e,i=Nu(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function dA(n,e){return _(this,null,function*(){let t=yield fy(n,{},()=>_(this,null,function*(){let i=Ps({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=py(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ba.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function fA(n,e){return _(this,null,function*(){return kn(n,"POST","/v2/accounts:revokeToken",Pn(n,e))})}var Fs=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Q_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){q(e.length!==0,"internal-error");let t=Q_(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield dA(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(q(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(q(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return en("not implemented")}};function Rn(n,e){q(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Zi=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Nu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Us(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield Ls(this,this.stsTokenManager.getToken(this.auth,e));return q(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Nh(this,e)}reload(){return Vh(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield $a(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(bt(this.auth.app))return Promise.reject(nn(this.auth));let e=yield this.getIdToken();return yield Ls(this,uA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,c,l,h,f;let g=(i=t.displayName)!==null&&i!==void 0?i:void 0,I=(r=t.email)!==null&&r!==void 0?r:void 0,S=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,P=(o=t.photoURL)!==null&&o!==void 0?o:void 0,O=(c=t.tenantId)!==null&&c!==void 0?c:void 0,D=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,z=(h=t.createdAt)!==null&&h!==void 0?h:void 0,Q=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:J,emailVerified:pe,isAnonymous:He,providerData:le,stsTokenManager:E}=t;q(J&&E,e,"internal-error");let m=Fs.fromJSON(this.name,E);q(typeof J=="string",e,"internal-error"),Rn(g,e.name),Rn(I,e.name),q(typeof pe=="boolean",e,"internal-error"),q(typeof He=="boolean",e,"internal-error"),Rn(S,e.name),Rn(P,e.name),Rn(O,e.name),Rn(D,e.name),Rn(z,e.name),Rn(Q,e.name);let v=new n({uid:J,auth:e,email:I,emailVerified:pe,displayName:g,isAnonymous:He,photoURL:P,phoneNumber:S,tenantId:O,stsTokenManager:m,createdAt:z,lastLoginAt:Q});return le&&Array.isArray(le)&&(v.providerData=le.map(w=>Object.assign({},w))),D&&(v._redirectEventId=D),v}static _fromIdTokenResponse(e,t,i=!1){return _(this,null,function*(){let r=new Fs;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield $a(s),s})}static _fromGetAccountInfoResponse(e,t,i){return _(this,null,function*(){let r=t.users[0];q(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?gy(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new Fs;c.updateFromIdToken(i);let l=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Us(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,h),l})}};var Y_=new Map;function tn(n){Dn(n instanceof Function,"Expected a class definition");let e=Y_.get(n);return e?(Dn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Y_.set(n,e),e)}var pA=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,i){return _(this,null,function*(){this.storage[t]=i})}_get(t){return _(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),_h=pA;function Fa(n,e,t){return`firebase:${n}:${e}:${t}`}var za=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Fa(this.userKey,r.apiKey,s),this.fullPersistenceKey=Fa("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Zi._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return _(this,null,function*(){if(!t.length)return new n(tn(_h),e,i);let r=(yield Promise.all(t.map(h=>_(this,null,function*(){if(yield h._isAvailable())return h})))).filter(h=>h),s=r[0]||tn(_h),o=Fa(i,e.config.apiKey,e.name),c=null;for(let h of t)try{let f=yield h._get(o);if(f){let g=Zi._fromJSON(e,f);h!==s&&(c=g),s=h;break}}catch{}let l=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,i):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(h=>_(this,null,function*(){if(h!==s)try{yield h._remove(o)}catch{}}))),new n(s,e,i))})}};function J_(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Iy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_y(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ey(e))return"Blackberry";if(by(e))return"Webos";if(yy(e))return"Safari";if((e.includes("chrome/")||vy(e))&&!e.includes("edge/"))return"Chrome";if(wy(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function _y(n=Me()){return/firefox\//i.test(n)}function yy(n=Me()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vy(n=Me()){return/crios\//i.test(n)}function Iy(n=Me()){return/iemobile/i.test(n)}function wy(n=Me()){return/android/i.test(n)}function Ey(n=Me()){return/blackberry/i.test(n)}function by(n=Me()){return/webos/i.test(n)}function Fh(n=Me()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mA(n=Me()){var e;return Fh(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gA(){return C_()&&document.documentMode===10}function Ty(n=Me()){return Fh(n)||wy(n)||by(n)||Ey(n)||/windows phone/i.test(n)||Iy(n)}function Ay(n,e=[]){let t;switch(n){case"Browser":t=J_(Me());break;case"Worker":t=`${J_(Me())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Sn}/${i}`}var yh=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function _A(t){return _(this,arguments,function*(n,e={}){return kn(n,"GET","/v2/passwordPolicy",Pn(n,e))})}var yA=6,vh=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:yA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Ih=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qa(this),this.idTokenSubscription=new qa(this),this.beforeStateQueue=new yh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=tn(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield za.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield my(this,{idToken:e}),i=yield Zi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(bt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield $a(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=rA()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(bt(this.app))return Promise.reject(nn(this));let t=e?Fe(e):null;return t&&q(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return bt(this.app)?Promise.reject(nn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return bt(this.app)?Promise.reject(nn(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(tn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield _A(this),t=new vh(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Jt("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield fA(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&tn(e)||this._popupRedirectResolver;q(t,this,"argument-error"),this.redirectPersistenceManager=yield za.create(this,[tn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,i,r);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ay(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return _(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&tA(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function si(n){return Fe(n)}var qa=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=P_(t=>this.observer=t)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ja={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vA(n){Ja=n}function Cy(n){return Ja.loadJS(n)}function IA(){return Ja.recaptchaEnterpriseScript}function wA(){return Ja.gapiScript}function Sy(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var EA="recaptcha-enterprise",bA="NO_RECAPTCHA",wh=class{constructor(e){this.type=EA,this.auth=si(e)}verify(e="verify",t=!1){return _(this,null,function*(){function i(s){return _(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>_(this,null,function*(){cA(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let h=new mh(l);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(l=>{c(l)})}))})}function r(s,o,c){let l=window.grecaptcha;K_(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(bA)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(c=>{if(!t&&K_(window.grecaptcha))r(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=IA();l.length!==0&&(l+=c),Cy(l).then(()=>{r(c,s,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})})}};function X_(n,e,t,i=!1){return _(this,null,function*(){let r=new wh(n),s;try{s=yield r.verify(t)}catch{s=yield r.verify(t,!0)}let o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Eh(n,e,t,i){return _(this,null,function*(){var r;if(!((r=n._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield X_(n,e,t,t==="getOobCode");return i(n,s)}else return i(n,e).catch(s=>_(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield X_(n,e,t,t==="getOobCode");return i(n,o)}else return Promise.reject(s)}))})}function Lh(n,e){let t=Ms(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(Jn(s,e??{}))return r;Ft(r,"already-initialized")}return t.initialize({options:e})}function TA(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(tn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Uh(n,e,t){let i=si(n);q(i._canInitEmulator,i,"emulator-config-failed"),q(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=Ry(e),{host:o,port:c}=AA(e),l=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||CA()}function Ry(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AA(n){let e=Ry(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:Z_(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:Z_(o)}}}function Z_(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function CA(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var js=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return en("not implemented")}_getIdTokenResponse(e){return en("not implemented")}_linkToIdToken(e,t){return en("not implemented")}_getReauthenticationResolver(e){return en("not implemented")}};function SA(n,e){return _(this,null,function*(){return kn(n,"POST","/v1/accounts:signUp",e)})}function RA(n,e){return _(this,null,function*(){return zs(n,"POST","/v1/accounts:signInWithPassword",Pn(n,e))})}function DA(n,e){return _(this,null,function*(){return zs(n,"POST","/v1/accounts:signInWithEmailLink",Pn(n,e))})}function PA(n,e){return _(this,null,function*(){return zs(n,"POST","/v1/accounts:signInWithEmailLink",Pn(n,e))})}var Bs=class n extends js{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Eh(e,t,"signInWithPassword",RA);case"emailLink":return DA(e,{email:this._email,oobCode:this._password});default:Ft(e,"internal-error")}})}_linkToIdToken(e,t){return _(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Eh(e,i,"signUpPassword",SA);case"emailLink":return PA(e,{idToken:t,email:this._email,oobCode:this._password});default:Ft(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function hh(n,e){return _(this,null,function*(){return zs(n,"POST","/v1/accounts:signInWithIdp",Pn(n,e))})}function kA(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xA(n){let e=Wi(Ki(n)).link,t=e?Wi(Ki(e)).deep_link_id:null,i=Wi(Ki(n)).deep_link_id;return(i?Wi(Ki(i)).link:null)||i||t||e||n}var Ga=class n{constructor(e){var t,i,r,s,o,c;let l=Wi(Ki(e)),h=(t=l.apiKey)!==null&&t!==void 0?t:null,f=(i=l.oobCode)!==null&&i!==void 0?i:null,g=kA((r=l.mode)!==null&&r!==void 0?r:null);q(h&&f&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=f,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=xA(e);try{return new n(t)}catch{return null}}};var Dy=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return Bs._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let r=Ga.parseLink(i);return q(r,"argument-error"),Bs._fromEmailAndCode(t,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Ha=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var bh=class extends Ha{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function MA(n,e){return _(this,null,function*(){return zs(n,"POST","/v1/accounts:signUp",Pn(n,e))})}var er=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return _(this,null,function*(){let s=yield Zi._fromIdTokenResponse(e,i,r),o=ey(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return _(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=ey(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function ey(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Th=class n extends tt{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function Py(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Th._fromErrorAndOperation(n,s,e,i):s})}function NA(n,e,t=!1){return _(this,null,function*(){let i=yield Ls(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return er._forOperation(n,"link",i)})}function OA(n,e,t=!1){return _(this,null,function*(){let{auth:i}=n;if(bt(i.app))return Promise.reject(nn(i));let r="reauthenticate";try{let s=yield Ls(n,Py(i,r,e,n),t);q(s.idToken,i,"internal-error");let o=Oh(s.idToken);q(o,i,"internal-error");let{sub:c}=o;return q(n.uid===c,i,"user-mismatch"),er._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ft(i,"user-mismatch"),s}})}function ky(n,e,t=!1){return _(this,null,function*(){if(bt(n.app))return Promise.reject(nn(n));let i="signIn",r=yield Py(n,i,e),s=yield er._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function jh(n,e){return _(this,null,function*(){return ky(si(n),e)})}function xy(n){return _(this,null,function*(){let e=si(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Bh(n,e,t){return _(this,null,function*(){if(bt(n.app))return Promise.reject(nn(n));let i=si(n),o=yield Eh(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",MA).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&xy(n),l}),c=yield er._fromIdTokenResponse(i,"signIn",o);return yield i._updateCurrentUser(c.user),c})}function $h(n,e,t){return bt(n.app)?Promise.reject(nn(n)):jh(Fe(n),Dy.credential(e,t)).catch(i=>_(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&xy(n),i}))}function zh(n,e,t,i){return Fe(n).onIdTokenChanged(e,t,i)}function qh(n,e,t){return Fe(n).beforeAuthStateChanged(e,t)}function Gh(n,e,t,i){return Fe(n).onAuthStateChanged(e,t,i)}var Wa="__sak";var Ka=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wa,"1"),this.storage.removeItem(Wa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var VA=1e3,FA=10,LA=(()=>{class n extends Ka{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ty(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((c,l,h)=>{this.notifyListeners(c,h)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);gA()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,FA):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},VA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return _(this,null,function*(){yield mn(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return _(this,null,function*(){let i=yield mn(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return _(this,null,function*(){yield mn(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),My=LA;var UA=(()=>{class n extends Ka{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),Hh=UA;function jA(n){return Promise.all(n.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var BA=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(f=>_(this,null,function*(){return f(i.origin,o)})),h=yield jA(l);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Ny(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var Ah=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return _(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let h=Ny("",20);r.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(g){let I=g;if(I.data.eventId===h)switch(I.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(I.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Vt(){return window}function $A(n){Vt().location.href=n}function Oy(){return typeof Vt().WorkerGlobalScope<"u"&&typeof Vt().importScripts=="function"}function zA(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function qA(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function GA(){return Oy()?self:null}var Vy="firebaseLocalStorageDb",HA=1,Qa="firebaseLocalStorage",Fy="fbase_key",ri=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Xa(n,e){return n.transaction([Qa],e?"readwrite":"readonly").objectStore(Qa)}function WA(){let n=indexedDB.deleteDatabase(Vy);return new ri(n).toPromise()}function Ch(){let n=indexedDB.open(Vy,HA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Qa,{keyPath:Fy})}catch(r){t(r)}}),n.addEventListener("success",()=>_(this,null,function*(){let i=n.result;i.objectStoreNames.contains(Qa)?e(i):(i.close(),yield WA(),e(yield Ch()))}))})}function ty(n,e,t){return _(this,null,function*(){let i=Xa(n,!0).put({[Fy]:e,value:t});return new ri(i).toPromise()})}function KA(n,e){return _(this,null,function*(){let t=Xa(n,!1).get(e),i=yield new ri(t).toPromise();return i===void 0?null:i.value})}function ny(n,e){let t=Xa(n,!0).delete(e);return new ri(t).toPromise()}var QA=800,YA=3,JA=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Ch(),this.db)})}_withRetries(t){return _(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>YA)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return Oy()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=BA._getInstance(GA()),this.receiver._subscribe("keyChanged",(t,i)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,i;if(this.activeServiceWorker=yield zA(),!this.activeServiceWorker)return;this.sender=new Ah(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||qA()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Ch();return yield ty(t,Wa,"1"),yield ny(t,Wa),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>ty(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let i=yield this._withRetries(r=>KA(r,t));return this.localCache[t]=i,i})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>ny(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(s=>{let o=Xa(s,!1).getAll();return new ri(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),QA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Ly=JA;var bk=Sy("rcb"),Tk=new ii(3e4,6e4);function XA(n,e){return e?tn(e):(q(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var $s=class extends js{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hh(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function ZA(n){return ky(n.auth,new $s(n),n.bypassAuthState)}function eC(n){let{auth:e,user:t}=n;return q(t,e,"internal-error"),OA(t,new $s(n),n.bypassAuthState)}function tC(n){return _(this,null,function*(){let{auth:e,user:t}=n;return q(t,e,"internal-error"),NA(t,new $s(n),n.bypassAuthState)})}var Sh=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(h){this.reject(h)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZA;case"linkViaPopup":case"linkViaRedirect":return tC;case"reauthViaPopup":case"reauthViaRedirect":return eC;default:Ft(this.auth,"internal-error")}}resolve(e){Dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Ak=new ii(2e3,1e4);var nC="pendingRedirect",La=new Map,Rh=class n extends Sh{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return _(this,null,function*(){let e=La.get(this.auth._key());if(!e){try{let i=(yield iC(this.resolver,this.auth))?yield mn(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}La.set(this.auth._key(),e)}return this.bypassAuthState||La.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return mn(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,mn(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function iC(n,e){return _(this,null,function*(){let t=oC(e),i=sC(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function rC(n,e){La.set(n._key(),e)}function sC(n){return tn(n._redirectPersistence)}function oC(n){return Fa(nC,n.config.apiKey,n.name)}function aC(n,e,t=!1){return _(this,null,function*(){if(bt(n.app))return Promise.reject(nn(n));let i=si(n),r=XA(i,e),o=yield new Rh(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var cC=10*60*1e3,Dh=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Uy(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ni(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cC&&this.cachedEventUids.clear(),this.cachedEventUids.has(iy(e))}saveEventToCache(e){this.cachedEventUids.add(iy(e)),this.lastProcessedEventTime=Date.now()}};function iy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Uy({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function uC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Uy(n);default:return!1}}function lC(t){return _(this,arguments,function*(n,e={}){return kn(n,"GET","/v1/projects",e)})}var hC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dC=/^https?/;function fC(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield lC(n);for(let t of e)try{if(pC(t))return}catch{}Ft(n,"unauthorized-domain")})}function pC(n){let e=fh(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!dC.test(t))return!1;if(hC.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var mC=new ii(3e4,6e4);function ry(){let n=Vt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function gC(n){return new Promise((e,t)=>{var i,r,s;function o(){ry(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ry(),t(ni(n,"network-request-failed"))},timeout:mC.get()})}if(!((r=(i=Vt().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Vt().gapi)===null||s===void 0)&&s.load)o();else{let c=Sy("iframefcb");return Vt()[c]=()=>{gapi.load?o():t(ni(n,"network-request-failed"))},Cy(`${wA()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw Ua=null,e})}var Ua=null;function _C(n){return Ua=Ua||gC(n),Ua}var yC=new ii(5e3,15e3),vC="__/auth/iframe",IC="emulator/auth/iframe",wC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bC(n){let e=n.config;q(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Mh(e,IC):`https://${n.config.authDomain}/${vC}`,i={apiKey:e.apiKey,appName:n.name,v:Sn},r=EC.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${Ps(i).slice(1)}`}function TC(n){return _(this,null,function*(){let e=yield _C(n),t=Vt().gapi;return q(t,n,"internal-error"),e.open({where:document.body,url:bC(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wC,dontclear:!0},i=>new Promise((r,s)=>_(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=ni(n,"network-request-failed"),c=Vt().setTimeout(()=>{s(o)},yC.get());function l(){Vt().clearTimeout(c),r(i)}i.ping(l).then(l,()=>{s(o)})})))})}var AC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CC=500,SC=600,RC="_blank",DC="http://localhost",Ya=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function PC(n,e,t,i=CC,r=SC){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},AC),{width:i.toString(),height:r.toString(),top:s,left:o}),h=Me().toLowerCase();t&&(c=vy(h)?RC:t),_y(h)&&(e=e||DC,l.scrollbars="yes");let f=Object.entries(l).reduce((I,[S,P])=>`${I}${S}=${P},`,"");if(mA(h)&&c!=="_self")return kC(e||"",c),new Ya(null);let g=window.open(e||"",c,f);q(g,n,"popup-blocked");try{g.focus()}catch{}return new Ya(g)}function kC(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var xC="__/auth/handler",MC="emulator/auth/handler",NC=encodeURIComponent("fac");function sy(n,e,t,i,r,s){return _(this,null,function*(){q(n.config.authDomain,n,"auth-domain-config-required"),q(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Sn,eventId:r};if(e instanceof Ha){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",D_(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,g]of Object.entries(s||{}))o[f]=g}if(e instanceof bh){let f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let l=yield n._getAppCheckToken(),h=l?`#${NC}=${encodeURIComponent(l)}`:"";return`${OC(n)}?${Ps(c).slice(1)}${h}`})}function OC({config:n}){return n.emulator?Mh(n,MC):`https://${n.authDomain}/${xC}`}var dh="webStorageSupport",Ph=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hh,this._completeRedirectFn=aC,this._overrideRedirectResult=rC}_openPopup(e,t,i,r){return _(this,null,function*(){var s;Dn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield sy(e,t,i,fh(),r);return PC(e,o,Ny())})}_openRedirect(e,t,i,r){return _(this,null,function*(){yield this._originValidation(e);let s=yield sy(e,t,i,fh(),r);return $A(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Dn(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return _(this,null,function*(){let t=yield TC(e),i=new Dh(e);return t.register("authEvent",r=>(q(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dh,{type:dh},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[dh];o!==void 0&&t(!!o),Ft(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ty()||yy()||Fh()}},jy=Ph;var oy="@firebase/auth",ay="1.7.8";var kh=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function VC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FC(n){Cn(new ft("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;q(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ay(n)},h=new Ih(i,r,s,l);return TA(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Cn(new ft("auth-internal",e=>{let t=si(e.getProvider("auth").getImmediate());return(i=>new kh(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),De(oy,ay,VC(n)),De(oy,ay,"esm2017")}var LC=5*60,UC=Hl("authIdTokenMaxAge")||LC,cy=null,jC=n=>e=>_(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>UC)return;let r=t?.token;cy!==r&&(cy=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function Wh(n=Qi()){let e=Ms(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Lh(n,{popupRedirectResolver:jy,persistence:[Ly,My,Hh]}),i=Hl("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=jC(s.toString());qh(t,o,()=>o(t.currentUser)),zh(t,c=>o(c))}}let r=ql("auth");return r&&Uh(t,`http://${r}`),t}function BC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}vA({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=ni("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",BC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FC("Browser");var By="auth",Tt=class{constructor(e){return e}},qs=class{constructor(){return Os(By)}};var Kh=new ie("angularfire2.auth-instances");function kS(n,e){let t=Ma(By,n,e);return t&&new Tt(t)}function xS(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Tt(i)}}var MS={provide:qs,deps:[[new Je,Kh]]},NS={provide:Tt,useFactory:kS,deps:[[new Je,Kh],Zt]};function $y(n,...e){return De("angularfire",ei.full,"auth"),_t([NS,MS,{provide:Kh,useFactory:xS(n),multi:!0,deps:[ye,yt,Xi,ti,[new Je,Ji],...e]}])}var zy=nt(Bh,!0);var qy=nt(Wh,!0);var Gy=nt(Gh,!0);var Hy=nt($h,!0);var Wy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ky={};var xn,Qh;(function(){var n;function e(E,m){function v(){}v.prototype=m.prototype,E.D=m.prototype,E.prototype=new v,E.prototype.constructor=E,E.C=function(w,b,A){for(var y=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)y[qt-2]=arguments[qt];return m.prototype[b].apply(w,y)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,m,v){v||(v=0);var w=Array(16);if(typeof m=="string")for(var b=0;16>b;++b)w[b]=m.charCodeAt(v++)|m.charCodeAt(v++)<<8|m.charCodeAt(v++)<<16|m.charCodeAt(v++)<<24;else for(b=0;16>b;++b)w[b]=m[v++]|m[v++]<<8|m[v++]<<16|m[v++]<<24;m=E.g[0],v=E.g[1],b=E.g[2];var A=E.g[3],y=m+(A^v&(b^A))+w[0]+3614090360&4294967295;m=v+(y<<7&4294967295|y>>>25),y=A+(b^m&(v^b))+w[1]+3905402710&4294967295,A=m+(y<<12&4294967295|y>>>20),y=b+(v^A&(m^v))+w[2]+606105819&4294967295,b=A+(y<<17&4294967295|y>>>15),y=v+(m^b&(A^m))+w[3]+3250441966&4294967295,v=b+(y<<22&4294967295|y>>>10),y=m+(A^v&(b^A))+w[4]+4118548399&4294967295,m=v+(y<<7&4294967295|y>>>25),y=A+(b^m&(v^b))+w[5]+1200080426&4294967295,A=m+(y<<12&4294967295|y>>>20),y=b+(v^A&(m^v))+w[6]+2821735955&4294967295,b=A+(y<<17&4294967295|y>>>15),y=v+(m^b&(A^m))+w[7]+4249261313&4294967295,v=b+(y<<22&4294967295|y>>>10),y=m+(A^v&(b^A))+w[8]+1770035416&4294967295,m=v+(y<<7&4294967295|y>>>25),y=A+(b^m&(v^b))+w[9]+2336552879&4294967295,A=m+(y<<12&4294967295|y>>>20),y=b+(v^A&(m^v))+w[10]+4294925233&4294967295,b=A+(y<<17&4294967295|y>>>15),y=v+(m^b&(A^m))+w[11]+2304563134&4294967295,v=b+(y<<22&4294967295|y>>>10),y=m+(A^v&(b^A))+w[12]+1804603682&4294967295,m=v+(y<<7&4294967295|y>>>25),y=A+(b^m&(v^b))+w[13]+4254626195&4294967295,A=m+(y<<12&4294967295|y>>>20),y=b+(v^A&(m^v))+w[14]+2792965006&4294967295,b=A+(y<<17&4294967295|y>>>15),y=v+(m^b&(A^m))+w[15]+1236535329&4294967295,v=b+(y<<22&4294967295|y>>>10),y=m+(b^A&(v^b))+w[1]+4129170786&4294967295,m=v+(y<<5&4294967295|y>>>27),y=A+(v^b&(m^v))+w[6]+3225465664&4294967295,A=m+(y<<9&4294967295|y>>>23),y=b+(m^v&(A^m))+w[11]+643717713&4294967295,b=A+(y<<14&4294967295|y>>>18),y=v+(A^m&(b^A))+w[0]+3921069994&4294967295,v=b+(y<<20&4294967295|y>>>12),y=m+(b^A&(v^b))+w[5]+3593408605&4294967295,m=v+(y<<5&4294967295|y>>>27),y=A+(v^b&(m^v))+w[10]+38016083&4294967295,A=m+(y<<9&4294967295|y>>>23),y=b+(m^v&(A^m))+w[15]+3634488961&4294967295,b=A+(y<<14&4294967295|y>>>18),y=v+(A^m&(b^A))+w[4]+3889429448&4294967295,v=b+(y<<20&4294967295|y>>>12),y=m+(b^A&(v^b))+w[9]+568446438&4294967295,m=v+(y<<5&4294967295|y>>>27),y=A+(v^b&(m^v))+w[14]+3275163606&4294967295,A=m+(y<<9&4294967295|y>>>23),y=b+(m^v&(A^m))+w[3]+4107603335&4294967295,b=A+(y<<14&4294967295|y>>>18),y=v+(A^m&(b^A))+w[8]+1163531501&4294967295,v=b+(y<<20&4294967295|y>>>12),y=m+(b^A&(v^b))+w[13]+2850285829&4294967295,m=v+(y<<5&4294967295|y>>>27),y=A+(v^b&(m^v))+w[2]+4243563512&4294967295,A=m+(y<<9&4294967295|y>>>23),y=b+(m^v&(A^m))+w[7]+1735328473&4294967295,b=A+(y<<14&4294967295|y>>>18),y=v+(A^m&(b^A))+w[12]+2368359562&4294967295,v=b+(y<<20&4294967295|y>>>12),y=m+(v^b^A)+w[5]+4294588738&4294967295,m=v+(y<<4&4294967295|y>>>28),y=A+(m^v^b)+w[8]+2272392833&4294967295,A=m+(y<<11&4294967295|y>>>21),y=b+(A^m^v)+w[11]+1839030562&4294967295,b=A+(y<<16&4294967295|y>>>16),y=v+(b^A^m)+w[14]+4259657740&4294967295,v=b+(y<<23&4294967295|y>>>9),y=m+(v^b^A)+w[1]+2763975236&4294967295,m=v+(y<<4&4294967295|y>>>28),y=A+(m^v^b)+w[4]+1272893353&4294967295,A=m+(y<<11&4294967295|y>>>21),y=b+(A^m^v)+w[7]+4139469664&4294967295,b=A+(y<<16&4294967295|y>>>16),y=v+(b^A^m)+w[10]+3200236656&4294967295,v=b+(y<<23&4294967295|y>>>9),y=m+(v^b^A)+w[13]+681279174&4294967295,m=v+(y<<4&4294967295|y>>>28),y=A+(m^v^b)+w[0]+3936430074&4294967295,A=m+(y<<11&4294967295|y>>>21),y=b+(A^m^v)+w[3]+3572445317&4294967295,b=A+(y<<16&4294967295|y>>>16),y=v+(b^A^m)+w[6]+76029189&4294967295,v=b+(y<<23&4294967295|y>>>9),y=m+(v^b^A)+w[9]+3654602809&4294967295,m=v+(y<<4&4294967295|y>>>28),y=A+(m^v^b)+w[12]+3873151461&4294967295,A=m+(y<<11&4294967295|y>>>21),y=b+(A^m^v)+w[15]+530742520&4294967295,b=A+(y<<16&4294967295|y>>>16),y=v+(b^A^m)+w[2]+3299628645&4294967295,v=b+(y<<23&4294967295|y>>>9),y=m+(b^(v|~A))+w[0]+4096336452&4294967295,m=v+(y<<6&4294967295|y>>>26),y=A+(v^(m|~b))+w[7]+1126891415&4294967295,A=m+(y<<10&4294967295|y>>>22),y=b+(m^(A|~v))+w[14]+2878612391&4294967295,b=A+(y<<15&4294967295|y>>>17),y=v+(A^(b|~m))+w[5]+4237533241&4294967295,v=b+(y<<21&4294967295|y>>>11),y=m+(b^(v|~A))+w[12]+1700485571&4294967295,m=v+(y<<6&4294967295|y>>>26),y=A+(v^(m|~b))+w[3]+2399980690&4294967295,A=m+(y<<10&4294967295|y>>>22),y=b+(m^(A|~v))+w[10]+4293915773&4294967295,b=A+(y<<15&4294967295|y>>>17),y=v+(A^(b|~m))+w[1]+2240044497&4294967295,v=b+(y<<21&4294967295|y>>>11),y=m+(b^(v|~A))+w[8]+1873313359&4294967295,m=v+(y<<6&4294967295|y>>>26),y=A+(v^(m|~b))+w[15]+4264355552&4294967295,A=m+(y<<10&4294967295|y>>>22),y=b+(m^(A|~v))+w[6]+2734768916&4294967295,b=A+(y<<15&4294967295|y>>>17),y=v+(A^(b|~m))+w[13]+1309151649&4294967295,v=b+(y<<21&4294967295|y>>>11),y=m+(b^(v|~A))+w[4]+4149444226&4294967295,m=v+(y<<6&4294967295|y>>>26),y=A+(v^(m|~b))+w[11]+3174756917&4294967295,A=m+(y<<10&4294967295|y>>>22),y=b+(m^(A|~v))+w[2]+718787259&4294967295,b=A+(y<<15&4294967295|y>>>17),y=v+(A^(b|~m))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+m&4294967295,E.g[1]=E.g[1]+(b+(y<<21&4294967295|y>>>11))&4294967295,E.g[2]=E.g[2]+b&4294967295,E.g[3]=E.g[3]+A&4294967295}i.prototype.u=function(E,m){m===void 0&&(m=E.length);for(var v=m-this.blockSize,w=this.B,b=this.h,A=0;A<m;){if(b==0)for(;A<=v;)r(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<m;)if(w[b++]=E.charCodeAt(A++),b==this.blockSize){r(this,w),b=0;break}}else for(;A<m;)if(w[b++]=E[A++],b==this.blockSize){r(this,w),b=0;break}}this.h=b,this.o+=m},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var m=1;m<E.length-8;++m)E[m]=0;var v=8*this.o;for(m=E.length-8;m<E.length;++m)E[m]=v&255,v/=256;for(this.u(E),E=Array(16),m=v=0;4>m;++m)for(var w=0;32>w;w+=8)E[v++]=this.g[m]>>>w&255;return E};function s(E,m){var v=c;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=m(E)}function o(E,m){this.h=m;for(var v=[],w=!0,b=E.length-1;0<=b;b--){var A=E[b]|0;w&&A==m||(v[b]=A,w=!1)}this.g=v}var c={};function l(E){return-128<=E&&128>E?s(E,function(m){return new o([m|0],0>m?-1:0)}):new o([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return D(h(-E));for(var m=[],v=1,w=0;E>=v;w++)m[w]=E/v|0,v*=4294967296;return new o(m,0)}function f(E,m){if(E.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(E.charAt(0)=="-")return D(f(E.substring(1),m));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=h(Math.pow(m,8)),w=g,b=0;b<E.length;b+=8){var A=Math.min(8,E.length-b),y=parseInt(E.substring(b,b+A),m);8>A?(A=h(Math.pow(m,A)),w=w.j(A).add(h(y))):(w=w.j(v),w=w.add(h(y)))}return w}var g=l(0),I=l(1),S=l(16777216);n=o.prototype,n.m=function(){if(O(this))return-D(this).m();for(var E=0,m=1,v=0;v<this.g.length;v++){var w=this.i(v);E+=(0<=w?w:4294967296+w)*m,m*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(P(this))return"0";if(O(this))return"-"+D(this).toString(E);for(var m=h(Math.pow(E,6)),v=this,w="";;){var b=pe(v,m).g;v=z(v,b.j(m));var A=((0<v.g.length?v.g[0]:v.h)>>>0).toString(E);if(v=b,P(v))return A+w;for(;6>A.length;)A="0"+A;w=A+w}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function P(E){if(E.h!=0)return!1;for(var m=0;m<E.g.length;m++)if(E.g[m]!=0)return!1;return!0}function O(E){return E.h==-1}n.l=function(E){return E=z(this,E),O(E)?-1:P(E)?0:1};function D(E){for(var m=E.g.length,v=[],w=0;w<m;w++)v[w]=~E.g[w];return new o(v,~E.h).add(I)}n.abs=function(){return O(this)?D(this):this},n.add=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0,b=0;b<=m;b++){var A=w+(this.i(b)&65535)+(E.i(b)&65535),y=(A>>>16)+(this.i(b)>>>16)+(E.i(b)>>>16);w=y>>>16,A&=65535,y&=65535,v[b]=y<<16|A}return new o(v,v[v.length-1]&-2147483648?-1:0)};function z(E,m){return E.add(D(m))}n.j=function(E){if(P(this)||P(E))return g;if(O(this))return O(E)?D(this).j(D(E)):D(D(this).j(E));if(O(E))return D(this.j(D(E)));if(0>this.l(S)&&0>E.l(S))return h(this.m()*E.m());for(var m=this.g.length+E.g.length,v=[],w=0;w<2*m;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<E.g.length;b++){var A=this.i(w)>>>16,y=this.i(w)&65535,qt=E.i(b)>>>16,Cr=E.i(b)&65535;v[2*w+2*b]+=y*Cr,Q(v,2*w+2*b),v[2*w+2*b+1]+=A*Cr,Q(v,2*w+2*b+1),v[2*w+2*b+1]+=y*qt,Q(v,2*w+2*b+1),v[2*w+2*b+2]+=A*qt,Q(v,2*w+2*b+2)}for(w=0;w<m;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=m;w<2*m;w++)v[w]=0;return new o(v,0)};function Q(E,m){for(;(E[m]&65535)!=E[m];)E[m+1]+=E[m]>>>16,E[m]&=65535,m++}function J(E,m){this.g=E,this.h=m}function pe(E,m){if(P(m))throw Error("division by zero");if(P(E))return new J(g,g);if(O(E))return m=pe(D(E),m),new J(D(m.g),D(m.h));if(O(m))return m=pe(E,D(m)),new J(D(m.g),m.h);if(30<E.g.length){if(O(E)||O(m))throw Error("slowDivide_ only works with positive integers.");for(var v=I,w=m;0>=w.l(E);)v=He(v),w=He(w);var b=le(v,1),A=le(w,1);for(w=le(w,2),v=le(v,2);!P(w);){var y=A.add(w);0>=y.l(E)&&(b=b.add(v),A=y),w=le(w,1),v=le(v,1)}return m=z(E,b.j(m)),new J(b,m)}for(b=g;0<=E.l(m);){for(v=Math.max(1,Math.floor(E.m()/m.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),A=h(v),y=A.j(m);O(y)||0<y.l(E);)v-=w,A=h(v),y=A.j(m);P(A)&&(A=I),b=b.add(A),E=z(E,y)}return new J(b,E)}n.A=function(E){return pe(this,E).h},n.and=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)&E.i(w);return new o(v,this.h&E.h)},n.or=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)|E.i(w);return new o(v,this.h|E.h)},n.xor=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)^E.i(w);return new o(v,this.h^E.h)};function He(E){for(var m=E.g.length+1,v=[],w=0;w<m;w++)v[w]=E.i(w)<<1|E.i(w-1)>>>31;return new o(v,E.h)}function le(E,m){var v=m>>5;m%=32;for(var w=E.g.length-v,b=[],A=0;A<w;A++)b[A]=0<m?E.i(A+v)>>>m|E.i(A+v+1)<<32-m:E.i(A+v);return new o(b,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Qh=Ky.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,xn=Ky.Integer=o}).apply(typeof Wy<"u"?Wy:typeof self<"u"?self:typeof window<"u"?window:{});var Za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rn={};var Yh,Jh,tr,Xh,Gs,ec,Zh,ed,td;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,d){return a==Array.prototype||a==Object.prototype||(a[u]=d.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Za=="object"&&Za];for(var u=0;u<a.length;++u){var d=a[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var i=t(this);function r(a,u){if(u)e:{var d=i;a=a.split(".");for(var p=0;p<a.length-1;p++){var T=a[p];if(!(T in d))break e;d=d[T]}a=a[a.length-1],p=d[a],u=u(p),u!=p&&u!=null&&e(d,a,{configurable:!0,writable:!0,value:u})}}function s(a,u){a instanceof String&&(a+="");var d=0,p=!1,T={next:function(){if(!p&&d<a.length){var C=d++;return{value:u(C,a[C]),done:!1}}return p=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}r("Array.prototype.values",function(a){return a||function(){return s(this,function(u,d){return d})}});var o=o||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function h(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function f(a,u,d){return a.call.apply(a.bind,arguments)}function g(a,u,d){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,p),a.apply(u,T)}}return function(){return a.apply(u,arguments)}}function I(a,u,d){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,I.apply(null,arguments)}function S(a,u){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function P(a,u){function d(){}d.prototype=u.prototype,a.aa=u.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(p,T,C){for(var N=Array(arguments.length-2),he=2;he<arguments.length;he++)N[he-2]=arguments[he];return u.prototype[T].apply(p,N)}}function O(a){let u=a.length;if(0<u){let d=Array(u);for(let p=0;p<u;p++)d[p]=a[p];return d}return[]}function D(a,u){for(let d=1;d<arguments.length;d++){let p=arguments[d];if(l(p)){let T=a.length||0,C=p.length||0;a.length=T+C;for(let N=0;N<C;N++)a[T+N]=p[N]}else a.push(p)}}class z{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function Q(a){return/^[\s\xa0]*$/.test(a)}function J(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function pe(a){return pe[" "](a),a}pe[" "]=function(){};var He=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function le(a,u,d){for(let p in a)u.call(d,a[p],p,a)}function E(a,u){for(let d in a)u.call(void 0,a[d],d,a)}function m(a){let u={};for(let d in a)u[d]=a[d];return u}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,u){let d,p;for(let T=1;T<arguments.length;T++){p=arguments[T];for(d in p)a[d]=p[d];for(let C=0;C<v.length;C++)d=v[C],Object.prototype.hasOwnProperty.call(p,d)&&(a[d]=p[d])}}function b(a){var u=1;a=a.split(":");let d=[];for(;0<u&&a.length;)d.push(a.shift()),u--;return a.length&&d.push(a.join(":")),d}function A(a){c.setTimeout(()=>{throw a},0)}function y(){var a=au;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class qt{constructor(){this.h=this.g=null}add(u,d){let p=Cr.get();p.set(u,d),this.h?this.h.next=p:this.g=p,this.h=p}}var Cr=new z(()=>new NI,a=>a.reset());class NI{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Sr,Rr=!1,au=new qt,Ap=()=>{let a=c.Promise.resolve(void 0);Sr=()=>{a.then(OI)}};var OI=()=>{for(var a;a=y();){try{a.h.call(a.g)}catch(d){A(d)}var u=Cr;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}Rr=!1};function hn(){this.s=this.s,this.C=this.C}hn.prototype.s=!1,hn.prototype.ma=function(){this.s||(this.s=!0,this.N())},hn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ue(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}Ue.prototype.h=function(){this.defaultPrevented=!0};var VI=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let d=()=>{};c.addEventListener("test",d,u),c.removeEventListener("test",d,u)}catch{}return a}();function Dr(a,u){if(Ue.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(He){e:{try{pe(u.nodeName);var T=!0;break e}catch{}T=!1}T||(u=null)}}else d=="mouseover"?u=a.fromElement:d=="mouseout"&&(u=a.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:FI[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Dr.aa.h.call(this)}}P(Dr,Ue);var FI={2:"touch",3:"pen",4:"mouse"};Dr.prototype.h=function(){Dr.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Pr="closure_listenable_"+(1e6*Math.random()|0),LI=0;function UI(a,u,d,p,T){this.listener=a,this.proxy=null,this.src=u,this.type=d,this.capture=!!p,this.ha=T,this.key=++LI,this.da=this.fa=!1}function To(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ao(a){this.src=a,this.g={},this.h=0}Ao.prototype.add=function(a,u,d,p,T){var C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);var N=uu(a,u,p,T);return-1<N?(u=a[N],d||(u.fa=!1)):(u=new UI(u,this.src,C,!!p,T),u.fa=d,a.push(u)),u};function cu(a,u){var d=u.type;if(d in a.g){var p=a.g[d],T=Array.prototype.indexOf.call(p,u,void 0),C;(C=0<=T)&&Array.prototype.splice.call(p,T,1),C&&(To(u),a.g[d].length==0&&(delete a.g[d],a.h--))}}function uu(a,u,d,p){for(var T=0;T<a.length;++T){var C=a[T];if(!C.da&&C.listener==u&&C.capture==!!d&&C.ha==p)return T}return-1}var lu="closure_lm_"+(1e6*Math.random()|0),hu={};function Cp(a,u,d,p,T){if(p&&p.once)return Rp(a,u,d,p,T);if(Array.isArray(u)){for(var C=0;C<u.length;C++)Cp(a,u[C],d,p,T);return null}return d=mu(d),a&&a[Pr]?a.K(u,d,h(p)?!!p.capture:!!p,T):Sp(a,u,d,!1,p,T)}function Sp(a,u,d,p,T,C){if(!u)throw Error("Invalid event type");var N=h(T)?!!T.capture:!!T,he=fu(a);if(he||(a[lu]=he=new Ao(a)),d=he.add(u,d,p,N,C),d.proxy)return d;if(p=jI(),d.proxy=p,p.src=a,p.listener=d,a.addEventListener)VI||(T=N),T===void 0&&(T=!1),a.addEventListener(u.toString(),p,T);else if(a.attachEvent)a.attachEvent(Pp(u.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function jI(){function a(d){return u.call(a.src,a.listener,d)}let u=BI;return a}function Rp(a,u,d,p,T){if(Array.isArray(u)){for(var C=0;C<u.length;C++)Rp(a,u[C],d,p,T);return null}return d=mu(d),a&&a[Pr]?a.L(u,d,h(p)?!!p.capture:!!p,T):Sp(a,u,d,!0,p,T)}function Dp(a,u,d,p,T){if(Array.isArray(u))for(var C=0;C<u.length;C++)Dp(a,u[C],d,p,T);else p=h(p)?!!p.capture:!!p,d=mu(d),a&&a[Pr]?(a=a.i,u=String(u).toString(),u in a.g&&(C=a.g[u],d=uu(C,d,p,T),-1<d&&(To(C[d]),Array.prototype.splice.call(C,d,1),C.length==0&&(delete a.g[u],a.h--)))):a&&(a=fu(a))&&(u=a.g[u.toString()],a=-1,u&&(a=uu(u,d,p,T)),(d=-1<a?u[a]:null)&&du(d))}function du(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[Pr])cu(u.i,a);else{var d=a.type,p=a.proxy;u.removeEventListener?u.removeEventListener(d,p,a.capture):u.detachEvent?u.detachEvent(Pp(d),p):u.addListener&&u.removeListener&&u.removeListener(p),(d=fu(u))?(cu(d,a),d.h==0&&(d.src=null,u[lu]=null)):To(a)}}}function Pp(a){return a in hu?hu[a]:hu[a]="on"+a}function BI(a,u){if(a.da)a=!0;else{u=new Dr(u,this);var d=a.listener,p=a.ha||a.src;a.fa&&du(a),a=d.call(p,u)}return a}function fu(a){return a=a[lu],a instanceof Ao?a:null}var pu="__closure_events_fn_"+(1e9*Math.random()>>>0);function mu(a){return typeof a=="function"?a:(a[pu]||(a[pu]=function(u){return a.handleEvent(u)}),a[pu])}function je(){hn.call(this),this.i=new Ao(this),this.M=this,this.F=null}P(je,hn),je.prototype[Pr]=!0,je.prototype.removeEventListener=function(a,u,d,p){Dp(this,a,u,d,p)};function We(a,u){var d,p=a.F;if(p)for(d=[];p;p=p.F)d.push(p);if(a=a.M,p=u.type||u,typeof u=="string")u=new Ue(u,a);else if(u instanceof Ue)u.target=u.target||a;else{var T=u;u=new Ue(p,a),w(u,T)}if(T=!0,d)for(var C=d.length-1;0<=C;C--){var N=u.g=d[C];T=Co(N,p,!0,u)&&T}if(N=u.g=a,T=Co(N,p,!0,u)&&T,T=Co(N,p,!1,u)&&T,d)for(C=0;C<d.length;C++)N=u.g=d[C],T=Co(N,p,!1,u)&&T}je.prototype.N=function(){if(je.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var d=a.g[u],p=0;p<d.length;p++)To(d[p]);delete a.g[u],a.h--}}this.F=null},je.prototype.K=function(a,u,d,p){return this.i.add(String(a),u,!1,d,p)},je.prototype.L=function(a,u,d,p){return this.i.add(String(a),u,!0,d,p)};function Co(a,u,d,p){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var T=!0,C=0;C<u.length;++C){var N=u[C];if(N&&!N.da&&N.capture==d){var he=N.listener,Oe=N.ha||N.src;N.fa&&cu(a.i,N),T=he.call(Oe,p)!==!1&&T}}return T&&!p.defaultPrevented}function kp(a,u,d){if(typeof a=="function")d&&(a=I(a,d));else if(a&&typeof a.handleEvent=="function")a=I(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function xp(a){a.g=kp(()=>{a.g=null,a.i&&(a.i=!1,xp(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class $I extends hn{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:xp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kr(a){hn.call(this),this.h=a,this.g={}}P(kr,hn);var Mp=[];function Np(a){le(a.g,function(u,d){this.g.hasOwnProperty(d)&&du(u)},a),a.g={}}kr.prototype.N=function(){kr.aa.N.call(this),Np(this)},kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gu=c.JSON.stringify,zI=c.JSON.parse,qI=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function _u(){}_u.prototype.h=null;function Op(a){return a.h||(a.h=a.i())}function Vp(){}var xr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yu(){Ue.call(this,"d")}P(yu,Ue);function vu(){Ue.call(this,"c")}P(vu,Ue);var jn={},Fp=null;function So(){return Fp=Fp||new je}jn.La="serverreachability";function Lp(a){Ue.call(this,jn.La,a)}P(Lp,Ue);function Mr(a){let u=So();We(u,new Lp(u))}jn.STAT_EVENT="statevent";function Up(a,u){Ue.call(this,jn.STAT_EVENT,a),this.stat=u}P(Up,Ue);function Ke(a){let u=So();We(u,new Up(u,a))}jn.Ma="timingevent";function jp(a,u){Ue.call(this,jn.Ma,a),this.size=u}P(jp,Ue);function Nr(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function Or(){this.g=!0}Or.prototype.xa=function(){this.g=!1};function GI(a,u,d,p,T,C){a.info(function(){if(a.g)if(C)for(var N="",he=C.split("&"),Oe=0;Oe<he.length;Oe++){var re=he[Oe].split("=");if(1<re.length){var Be=re[0];re=re[1];var $e=Be.split("_");N=2<=$e.length&&$e[1]=="type"?N+(Be+"="+re+"&"):N+(Be+"=redacted&")}}else N=null;else N=C;return"XMLHTTP REQ ("+p+") [attempt "+T+"]: "+u+`
`+d+`
`+N})}function HI(a,u,d,p,T,C,N){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+T+"]: "+u+`
`+d+`
`+C+" "+N})}function wi(a,u,d,p){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+KI(a,d)+(p?" "+p:"")})}function WI(a,u){a.info(function(){return"TIMEOUT: "+u})}Or.prototype.info=function(){};function KI(a,u){if(!a.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var p=d[a];if(!(2>p.length)){var T=p[1];if(Array.isArray(T)&&!(1>T.length)){var C=T[0];if(C!="noop"&&C!="stop"&&C!="close")for(var N=1;N<T.length;N++)T[N]=""}}}}return gu(d)}catch{return u}}var Ro={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Iu;function Do(){}P(Do,_u),Do.prototype.g=function(){return new XMLHttpRequest},Do.prototype.i=function(){return{}},Iu=new Do;function dn(a,u,d,p){this.j=a,this.i=u,this.l=d,this.R=p||1,this.U=new kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $p}function $p(){this.i=null,this.g="",this.h=!1}var zp={},wu={};function Eu(a,u,d){a.L=1,a.v=Mo(Gt(u)),a.m=d,a.P=!0,qp(a,null)}function qp(a,u){a.F=Date.now(),Po(a),a.A=Gt(a.v);var d=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),rm(d.i,"t",p),a.C=0,d=a.j.J,a.h=new $p,a.g=Em(a.j,d?u:null,!a.m),0<a.O&&(a.M=new $I(I(a.Y,a,a.g),a.O)),u=a.U,d=a.g,p=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(Mp[0]=T.toString()),T=Mp);for(var C=0;C<T.length;C++){var N=Cp(d,T[C],p||u.handleEvent,!1,u.h||u);if(!N)break;u.g[N.key]=N}u=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),Mr(),GI(a.i,a.u,a.A,a.l,a.R,a.m)}dn.prototype.ca=function(a){a=a.target;let u=this.M;u&&Ht(a)==3?u.j():this.Y(a)},dn.prototype.Y=function(a){try{if(a==this.g)e:{let $e=Ht(this.g);var u=this.g.Ba();let Ti=this.g.Z();if(!(3>$e)&&($e!=3||this.g&&(this.h.h||this.g.oa()||hm(this.g)))){this.J||$e!=4||u==7||(u==8||0>=Ti?Mr(3):Mr(2)),bu(this);var d=this.g.Z();this.X=d;t:if(Gp(this)){var p=hm(this.g);a="";var T=p.length,C=Ht(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bn(this),Vr(this);var N="";break t}this.h.i=new c.TextDecoder}for(u=0;u<T;u++)this.h.h=!0,a+=this.h.i.decode(p[u],{stream:!(C&&u==T-1)});p.length=0,this.h.g+=a,this.C=0,N=this.h.g}else N=this.g.oa();if(this.o=d==200,HI(this.i,this.u,this.A,this.l,this.R,$e,d),this.o){if(this.T&&!this.K){t:{if(this.g){var he,Oe=this.g;if((he=Oe.g?Oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(he)){var re=he;break t}}re=null}if(d=re)wi(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tu(this,d);else{this.o=!1,this.s=3,Ke(12),Bn(this),Vr(this);break e}}if(this.P){d=!0;let mt;for(;!this.J&&this.C<N.length;)if(mt=QI(this,N),mt==wu){$e==4&&(this.s=4,Ke(14),d=!1),wi(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==zp){this.s=4,Ke(15),wi(this.i,this.l,N,"[Invalid Chunk]"),d=!1;break}else wi(this.i,this.l,mt,null),Tu(this,mt);if(Gp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||N.length!=0||this.h.h||(this.s=1,Ke(16),d=!1),this.o=this.o&&d,!d)wi(this.i,this.l,N,"[Invalid Chunked Response]"),Bn(this),Vr(this);else if(0<N.length&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.ba&&!Be.M&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),Pu(Be),Be.M=!0,Ke(11))}}else wi(this.i,this.l,N,null),Tu(this,N);$e==4&&Bn(this),this.o&&!this.J&&($e==4?ym(this.j,this):(this.o=!1,Po(this)))}else dw(this.g),d==400&&0<N.indexOf("Unknown SID")?(this.s=3,Ke(12)):(this.s=0,Ke(13)),Bn(this),Vr(this)}}}catch{}finally{}};function Gp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function QI(a,u){var d=a.C,p=u.indexOf(`
`,d);return p==-1?wu:(d=Number(u.substring(d,p)),isNaN(d)?zp:(p+=1,p+d>u.length?wu:(u=u.slice(p,p+d),a.C=p+d,u)))}dn.prototype.cancel=function(){this.J=!0,Bn(this)};function Po(a){a.S=Date.now()+a.I,Hp(a,a.I)}function Hp(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Nr(I(a.ba,a),u)}function bu(a){a.B&&(c.clearTimeout(a.B),a.B=null)}dn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(WI(this.i,this.A),this.L!=2&&(Mr(),Ke(17)),Bn(this),this.s=2,Vr(this)):Hp(this,this.S-a)};function Vr(a){a.j.G==0||a.J||ym(a.j,a)}function Bn(a){bu(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,Np(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function Tu(a,u){try{var d=a.j;if(d.G!=0&&(d.g==a||Au(d.h,a))){if(!a.K&&Au(d.h,a)&&d.G==3){try{var p=d.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var T=p;if(T[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)Lo(d),Vo(d);else break e;Du(d),Ke(18)}}else d.za=T[1],0<d.za-d.T&&37500>T[2]&&d.F&&d.v==0&&!d.C&&(d.C=Nr(I(d.Za,d),6e3));if(1>=Qp(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else zn(d,11)}else if((a.K||d.g==a)&&Lo(d),!Q(u))for(T=d.Da.g.parse(u),u=0;u<T.length;u++){let re=T[u];if(d.T=re[0],re=re[1],d.G==2)if(re[0]=="c"){d.K=re[1],d.ia=re[2];let Be=re[3];Be!=null&&(d.la=Be,d.j.info("VER="+d.la));let $e=re[4];$e!=null&&(d.Aa=$e,d.j.info("SVER="+d.Aa));let Ti=re[5];Ti!=null&&typeof Ti=="number"&&0<Ti&&(p=1.5*Ti,d.L=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;let mt=a.g;if(mt){let jo=mt.g?mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jo){var C=p.h;C.g||jo.indexOf("spdy")==-1&&jo.indexOf("quic")==-1&&jo.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(Cu(C,C.h),C.h=null))}if(p.D){let ku=mt.g?mt.g.getResponseHeader("X-HTTP-Session-Id"):null;ku&&(p.ya=ku,me(p.I,p.D,ku))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),p=d;var N=a;if(p.qa=wm(p,p.J?p.ia:null,p.W),N.K){Yp(p.h,N);var he=N,Oe=p.L;Oe&&(he.I=Oe),he.B&&(bu(he),Po(he)),p.g=N}else gm(p);0<d.i.length&&Fo(d)}else re[0]!="stop"&&re[0]!="close"||zn(d,7);else d.G==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?zn(d,7):Ru(d):re[0]!="noop"&&d.l&&d.l.ta(re),d.v=0)}}Mr(4)}catch{}}var YI=class{constructor(a,u){this.g=a,this.map=u}};function Wp(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Kp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Qp(a){return a.h?1:a.g?a.g.size:0}function Au(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function Cu(a,u){a.g?a.g.add(u):a.h=u}function Yp(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}Wp.prototype.cancel=function(){if(this.i=Jp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Jp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let d of a.g.values())u=u.concat(d.D);return u}return O(a.i)}function JI(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],d=a.length,p=0;p<d;p++)u.push(a[p]);return u}u=[],d=0;for(p in a)u[d++]=a[p];return u}function XI(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var d=0;d<a;d++)u.push(d);return u}u=[],d=0;for(let p in a)u[d++]=p;return u}}}function Xp(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var d=XI(a),p=JI(a),T=p.length,C=0;C<T;C++)u.call(void 0,p[C],d&&d[C],a)}var Zp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ZI(a,u){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var p=a[d].indexOf("="),T=null;if(0<=p){var C=a[d].substring(0,p);T=a[d].substring(p+1)}else C=a[d];u(C,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function $n(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof $n){this.h=a.h,ko(this,a.j),this.o=a.o,this.g=a.g,xo(this,a.s),this.l=a.l;var u=a.i,d=new Ur;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),em(this,d),this.m=a.m}else a&&(u=String(a).match(Zp))?(this.h=!1,ko(this,u[1]||"",!0),this.o=Fr(u[2]||""),this.g=Fr(u[3]||"",!0),xo(this,u[4]),this.l=Fr(u[5]||"",!0),em(this,u[6]||"",!0),this.m=Fr(u[7]||"")):(this.h=!1,this.i=new Ur(null,this.h))}$n.prototype.toString=function(){var a=[],u=this.j;u&&a.push(Lr(u,tm,!0),":");var d=this.g;return(d||u=="file")&&(a.push("//"),(u=this.o)&&a.push(Lr(u,tm,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Lr(d,d.charAt(0)=="/"?nw:tw,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Lr(d,rw)),a.join("")};function Gt(a){return new $n(a)}function ko(a,u,d){a.j=d?Fr(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function xo(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function em(a,u,d){u instanceof Ur?(a.i=u,sw(a.i,a.h)):(d||(u=Lr(u,iw)),a.i=new Ur(u,a.h))}function me(a,u,d){a.i.set(u,d)}function Mo(a){return me(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Fr(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Lr(a,u,d){return typeof a=="string"?(a=encodeURI(a).replace(u,ew),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ew(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var tm=/[#\/\?@]/g,tw=/[#\?:]/g,nw=/[#\?]/g,iw=/[#\?@]/g,rw=/#/g;function Ur(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function fn(a){a.g||(a.g=new Map,a.h=0,a.i&&ZI(a.i,function(u,d){a.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=Ur.prototype,n.add=function(a,u){fn(this),this.i=null,a=Ei(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(u),this.h+=1,this};function nm(a,u){fn(a),u=Ei(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function im(a,u){return fn(a),u=Ei(a,u),a.g.has(u)}n.forEach=function(a,u){fn(this),this.g.forEach(function(d,p){d.forEach(function(T){a.call(u,T,p,this)},this)},this)},n.na=function(){fn(this);let a=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let p=0;p<u.length;p++){let T=a[p];for(let C=0;C<T.length;C++)d.push(u[p])}return d},n.V=function(a){fn(this);let u=[];if(typeof a=="string")im(this,a)&&(u=u.concat(this.g.get(Ei(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)u=u.concat(a[d])}return u},n.set=function(a,u){return fn(this),this.i=null,a=Ei(this,a),im(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},n.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function rm(a,u,d){nm(a,u),0<d.length&&(a.i=null,a.g.set(Ei(a,u),O(d)),a.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var p=u[d];let C=encodeURIComponent(String(p)),N=this.V(p);for(p=0;p<N.length;p++){var T=C;N[p]!==""&&(T+="="+encodeURIComponent(String(N[p]))),a.push(T)}}return this.i=a.join("&")};function Ei(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function sw(a,u){u&&!a.j&&(fn(a),a.i=null,a.g.forEach(function(d,p){var T=p.toLowerCase();p!=T&&(nm(this,p),rm(this,T,d))},a)),a.j=u}function ow(a,u){let d=new Or;if(c.Image){let p=new Image;p.onload=S(pn,d,"TestLoadImage: loaded",!0,u,p),p.onerror=S(pn,d,"TestLoadImage: error",!1,u,p),p.onabort=S(pn,d,"TestLoadImage: abort",!1,u,p),p.ontimeout=S(pn,d,"TestLoadImage: timeout",!1,u,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else u(!1)}function aw(a,u){let d=new Or,p=new AbortController,T=setTimeout(()=>{p.abort(),pn(d,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:p.signal}).then(C=>{clearTimeout(T),C.ok?pn(d,"TestPingServer: ok",!0,u):pn(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(T),pn(d,"TestPingServer: error",!1,u)})}function pn(a,u,d,p,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),p(d)}catch{}}function cw(){this.g=new qI}function uw(a,u,d){let p=d||"";try{Xp(a,function(T,C){let N=T;h(T)&&(N=gu(T)),u.push(p+C+"="+encodeURIComponent(N))})}catch(T){throw u.push(p+"type="+encodeURIComponent("_badmap")),T}}function jr(a){this.l=a.Ub||null,this.j=a.eb||!1}P(jr,_u),jr.prototype.g=function(){return new No(this.l,this.j)},jr.prototype.i=function(a){return function(){return a}}({});function No(a,u){je.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(No,je),n=No.prototype,n.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,$r(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Br(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,$r(this)),this.g&&(this.readyState=3,$r(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function sm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?Br(this):$r(this),this.readyState==3&&sm(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,Br(this))},n.Qa=function(a){this.g&&(this.response=a,Br(this))},n.ga=function(){this.g&&Br(this)};function Br(a){a.readyState=4,a.l=null,a.j=null,a.v=null,$r(a)}n.setRequestHeader=function(a,u){this.u.append(a,u)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=u.next();return a.join(`\r
`)};function $r(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(No.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function om(a){let u="";return le(a,function(d,p){u+=p,u+=":",u+=d,u+=`\r
`}),u}function Su(a,u,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=om(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):me(a,u,d))}function Ie(a){je.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Ie,je);var lw=/^https?$/i,hw=["POST","PUT"];n=Ie.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,u,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Iu.g(),this.v=this.o?Op(this.o):Op(Iu),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(C){am(this,C);return}if(a=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var T in p)d.set(T,p[T]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let C of p.keys())d.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(C=>C.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(hw,u,void 0))||p||T||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,N]of d)this.g.setRequestHeader(C,N);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lm(this),this.u=!0,this.g.send(a),this.u=!1}catch(C){am(this,C)}};function am(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,cm(a),Oo(a)}function cm(a){a.A||(a.A=!0,We(a,"complete"),We(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,We(this,"complete"),We(this,"abort"),Oo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oo(this,!0)),Ie.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?um(this):this.bb())},n.bb=function(){um(this)};function um(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Ht(a)!=4||a.Z()!=2)){if(a.u&&Ht(a)==4)kp(a.Ea,0,a);else if(We(a,"readystatechange"),Ht(a)==4){a.h=!1;try{let N=a.Z();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var p;if(p=N===0){var T=String(a.D).match(Zp)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),p=!lw.test(T?T.toLowerCase():"")}d=p}if(d)We(a,"complete"),We(a,"success");else{a.m=6;try{var C=2<Ht(a)?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.Z()+"]",cm(a)}}finally{Oo(a)}}}}function Oo(a,u){if(a.g){lm(a);let d=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||We(a,"ready");try{d.onreadystatechange=p}catch{}}}function lm(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Ht(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),zI(u)}};function hm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function dw(a){let u={};a=(a.g&&2<=Ht(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(Q(a[p]))continue;var d=b(a[p]);let T=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let C=u[T]||[];u[T]=C,C.push(d)}E(u,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zr(a,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||u}function dm(a){this.Aa=0,this.i=[],this.j=new Or,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zr("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zr("baseRetryDelayMs",5e3,a),this.cb=zr("retryDelaySeedMs",1e4,a),this.Wa=zr("forwardChannelMaxRetries",2,a),this.wa=zr("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Wp(a&&a.concurrentRequestLimit),this.Da=new cw,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=dm.prototype,n.la=8,n.G=1,n.connect=function(a,u,d,p){Ke(0),this.W=a,this.H=u||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.I=wm(this,null,this.W),Fo(this)};function Ru(a){if(fm(a),a.G==3){var u=a.U++,d=Gt(a.I);if(me(d,"SID",a.K),me(d,"RID",u),me(d,"TYPE","terminate"),qr(a,d),u=new dn(a,a.j,u),u.L=2,u.v=Mo(Gt(d)),d=!1,c.navigator&&c.navigator.sendBeacon)try{d=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&c.Image&&(new Image().src=u.v,d=!0),d||(u.g=Em(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Po(u)}Im(a)}function Vo(a){a.g&&(Pu(a),a.g.cancel(),a.g=null)}function fm(a){Vo(a),a.u&&(c.clearTimeout(a.u),a.u=null),Lo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Fo(a){if(!Kp(a.h)&&!a.s){a.s=!0;var u=a.Ga;Sr||Ap(),Rr||(Sr(),Rr=!0),au.add(u,a),a.B=0}}function fw(a,u){return Qp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Nr(I(a.Ga,a,u),vm(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new dn(this,this.j,a),C=this.o;if(this.S&&(C?(C=m(C),w(C,this.S)):C=this.S),this.m!==null||this.O||(T.H=C,C=null),this.P)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=mm(this,T,u),d=Gt(this.I),me(d,"RID",a),me(d,"CVER",22),this.D&&me(d,"X-HTTP-Session-Id",this.D),qr(this,d),C&&(this.O?u="headers="+encodeURIComponent(String(om(C)))+"&"+u:this.m&&Su(d,this.m,C)),Cu(this.h,T),this.Ua&&me(d,"TYPE","init"),this.P?(me(d,"$req",u),me(d,"SID","null"),T.T=!0,Eu(T,d,null)):Eu(T,d,u),this.G=2}}else this.G==3&&(a?pm(this,a):this.i.length==0||Kp(this.h)||pm(this))};function pm(a,u){var d;u?d=u.l:d=a.U++;let p=Gt(a.I);me(p,"SID",a.K),me(p,"RID",d),me(p,"AID",a.T),qr(a,p),a.m&&a.o&&Su(p,a.m,a.o),d=new dn(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),u&&(a.i=u.D.concat(a.i)),u=mm(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Cu(a.h,d),Eu(d,p,u)}function qr(a,u){a.H&&le(a.H,function(d,p){me(u,p,d)}),a.l&&Xp({},function(d,p){me(u,p,d)})}function mm(a,u,d){d=Math.min(a.i.length,d);var p=a.l?I(a.l.Na,a.l,a):null;e:{var T=a.i;let C=-1;for(;;){let N=["count="+d];C==-1?0<d?(C=T[0].g,N.push("ofs="+C)):C=0:N.push("ofs="+C);let he=!0;for(let Oe=0;Oe<d;Oe++){let re=T[Oe].g,Be=T[Oe].map;if(re-=C,0>re)C=Math.max(0,T[Oe].g-100),he=!1;else try{uw(Be,N,"req"+re+"_")}catch{p&&p(Be)}}if(he){p=N.join("&");break e}}}return a=a.i.splice(0,d),u.D=a,p}function gm(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;Sr||Ap(),Rr||(Sr(),Rr=!0),au.add(u,a),a.v=0}}function Du(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Nr(I(a.Fa,a),vm(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,_m(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Nr(I(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ke(10),Vo(this),_m(this))};function Pu(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function _m(a){a.g=new dn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=Gt(a.qa);me(u,"RID","rpc"),me(u,"SID",a.K),me(u,"AID",a.T),me(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&me(u,"TO",a.ja),me(u,"TYPE","xmlhttp"),qr(a,u),a.m&&a.o&&Su(u,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Mo(Gt(u)),d.m=null,d.P=!0,qp(d,a)}n.Za=function(){this.C!=null&&(this.C=null,Vo(this),Du(this),Ke(19))};function Lo(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function ym(a,u){var d=null;if(a.g==u){Lo(a),Pu(a),a.g=null;var p=2}else if(Au(a.h,u))d=u.D,Yp(a.h,u),p=1;else return;if(a.G!=0){if(u.o)if(p==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var T=a.B;p=So(),We(p,new jp(p,d)),Fo(a)}else gm(a);else if(T=u.s,T==3||T==0&&0<u.X||!(p==1&&fw(a,u)||p==2&&Du(a)))switch(d&&0<d.length&&(u=a.h,u.i=u.i.concat(d)),T){case 1:zn(a,5);break;case 4:zn(a,10);break;case 3:zn(a,6);break;default:zn(a,2)}}}function vm(a,u){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*u}function zn(a,u){if(a.j.info("Error code "+u),u==2){var d=I(a.fb,a),p=a.Xa;let T=!p;p=new $n(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ko(p,"https"),Mo(p),T?ow(p.toString(),d):aw(p.toString(),d)}else Ke(2);a.G=0,a.l&&a.l.sa(u),Im(a),fm(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Ke(2)):(this.j.info("Failed to ping google.com"),Ke(1))};function Im(a){if(a.G=0,a.ka=[],a.l){let u=Jp(a.h);(u.length!=0||a.i.length!=0)&&(D(a.ka,u),D(a.ka,a.i),a.h.i.length=0,O(a.i),a.i.length=0),a.l.ra()}}function wm(a,u,d){var p=d instanceof $n?Gt(d):new $n(d);if(p.g!="")u&&(p.g=u+"."+p.g),xo(p,p.s);else{var T=c.location;p=T.protocol,u=u?u+"."+T.hostname:T.hostname,T=+T.port;var C=new $n(null);p&&ko(C,p),u&&(C.g=u),T&&xo(C,T),d&&(C.l=d),p=C}return d=a.D,u=a.ya,d&&u&&me(p,d,u),me(p,"VER",a.la),qr(a,p),p}function Em(a,u,d){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new Ie(new jr({eb:d})):new Ie(a.pa),u.Ha(a.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function bm(){}n=bm.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Uo(){}Uo.prototype.g=function(a,u){return new it(a,u)};function it(a,u){je.call(this),this.g=new dm(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!Q(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!Q(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new bi(this)}P(it,je),it.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},it.prototype.close=function(){Ru(this.g)},it.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=gu(a),a=d);u.i.push(new YI(u.Ya++,a)),u.G==3&&Fo(u)},it.prototype.N=function(){this.g.l=null,delete this.j,Ru(this.g),delete this.g,it.aa.N.call(this)};function Tm(a){yu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(let d in u){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}P(Tm,yu);function Am(){vu.call(this),this.status=1}P(Am,vu);function bi(a){this.g=a}P(bi,bm),bi.prototype.ua=function(){We(this.g,"a")},bi.prototype.ta=function(a){We(this.g,new Tm(a))},bi.prototype.sa=function(a){We(this.g,new Am)},bi.prototype.ra=function(){We(this.g,"b")},Uo.prototype.createWebChannel=Uo.prototype.g,it.prototype.send=it.prototype.o,it.prototype.open=it.prototype.m,it.prototype.close=it.prototype.close,td=rn.createWebChannelTransport=function(){return new Uo},ed=rn.getStatEventTarget=function(){return So()},Zh=rn.Event=jn,ec=rn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,Gs=rn.ErrorCode=Ro,Bp.COMPLETE="complete",Xh=rn.EventType=Bp,Vp.EventType=xr,xr.OPEN="a",xr.CLOSE="b",xr.ERROR="c",xr.MESSAGE="d",je.prototype.listen=je.prototype.K,tr=rn.WebChannel=Vp,Jh=rn.FetchXmlHttpFactory=jr,Ie.prototype.listenOnce=Ie.prototype.L,Ie.prototype.getLastError=Ie.prototype.Ka,Ie.prototype.getLastErrorCode=Ie.prototype.Ba,Ie.prototype.getStatus=Ie.prototype.Z,Ie.prototype.getResponseJson=Ie.prototype.Oa,Ie.prototype.getResponseText=Ie.prototype.oa,Ie.prototype.send=Ie.prototype.ea,Ie.prototype.setWithCredentials=Ie.prototype.Ha,Yh=rn.XhrIo=Ie}).apply(typeof Za<"u"?Za:typeof self<"u"?self:typeof window<"u"?window:{});var Qy="@firebase/firestore";var Ne=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ne.UNAUTHENTICATED=new Ne(null),Ne.GOOGLE_CREDENTIALS=new Ne("google-credentials-uid"),Ne.FIRST_PARTY=new Ne("first-party-uid"),Ne.MOCK_USER=new Ne("mock-user");var Ir="10.13.1";var li=new Tn("@firebase/firestore");function Hs(){return li.logLevel}function j(n,...e){if(li.logLevel<=ee.DEBUG){let t=e.map(zf);li.debug(`Firestore (${Ir}): ${n}`,...t)}}function on(n,...e){if(li.logLevel<=ee.ERROR){let t=e.map(zf);li.error(`Firestore (${Ir}): ${n}`,...t)}}function cr(n,...e){if(li.logLevel<=ee.WARN){let t=e.map(zf);li.warn(`Firestore (${Ir}): ${n}`,...t)}}function zf(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function G(n="Unexpected state"){let e=`FIRESTORE (${Ir}) INTERNAL ASSERTION FAILED: `+n;throw on(e),new Error(e)}function fe(n,e){n||G()}function K(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends tt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var sn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var sc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},od=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ne.UNAUTHENTICATED))}shutdown(){}},ad=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},cd=class{constructor(e){this.t=e,this.currentUser=Ne.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i,r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve(),s=new sn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sn,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>_(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(fe(typeof i.accessToken=="string"),new sc(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new Ne(e)}},ud=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ne.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ld=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new ud(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ne.FIRST_PARTY))}shutdown(){}invalidateToken(){}},hd=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},dd=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let i=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(fe(typeof t.token=="string"),this.R=t.token,new hd(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function OS(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var oc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=OS(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function oe(n,e){return n<e?-1:n>e?1:0}function ur(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var Le=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new L(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Le(0,0))}static max(){return new n(new Le(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ac=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&G(),i===void 0?i=e.length-t:i>e.length-t&&G(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ve=class n extends ac{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new L(R.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},VS=/^[_a-zA-Z][_a-zA-Z0-9]*$/,at=class n extends ac{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return VS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new L(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new L(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new L(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(i+=c,r++):(s(),r++)}if(s(),o)throw new L(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var B=class n{constructor(e){this.path=e}static fromPath(e){return new n(ve.fromString(e))}static fromName(e){return new n(ve.fromString(e).popFirst(5))}static empty(){return new n(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ve(e.slice()))}};var fd=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};fd.UNKNOWN_ID=-1;function FS(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=X.fromTimestamp(i===1e9?new Le(t+1,0):new Le(t,i));return new hi(r,B.empty(),e)}function LS(n){return new hi(n.readTime,n.key,-1)}var hi=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(X.min(),B.empty(),-1)}static max(){return new n(X.max(),B.empty(),-1)}};function US(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=B.comparator(n.documentKey,e.documentKey),t!==0?t:oe(n.largestBatchId,e.largestBatchId))}var jS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ho(n){return _(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==jS)throw n;j("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let h=l;t(e[h]).next(f=>{o[h]=f,++c,c===s&&i(o)},f=>r(f))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function BS(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fo(n){return n.name==="IndexedDbTransactionError"}var Pv=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Vc(n){return n==null}function Zs(n){return n===0&&1/n==-1/0}function $S(n){return typeof n=="number"&&Number.isInteger(n)&&!Zs(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var zS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wx=[...zS,"documentOverlays"],qS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],GS=qS,HS=[...GS,"indexConfiguration","indexState","indexEntries"];var Ex=[...HS,"globals"];function Yy(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kv(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var be=class n{constructor(e,t){this.comparator=e,this.root=t||jt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sr(this.root,e,this.comparator,!1)}getReverseIterator(){return new sr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sr(this.root,e,this.comparator,!0)}},sr=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},jt=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();let e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}};jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,t,i,r,s){return this}insert(e,t,i){return new jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var qe=class n{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cc(this.data.getIterator())}getIteratorFrom(e){return new cc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},cc=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ut=class n{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new n([])}unionWith(e){let t=new qe(at.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ur(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var uc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ge=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new uc("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ge.EMPTY_BYTE_STRING=new Ge("");var WS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function an(n){if(fe(!!n),typeof n=="string"){let e=0,t=WS.exec(n);if(fe(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:_e(n.seconds),nanos:_e(n.nanos)}}function _e(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Nn(n){return typeof n=="string"?Ge.fromBase64String(n):Ge.fromUint8Array(n)}function qf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Gf(n){let e=n.mapValue.fields.__previous_value__;return qf(e)?Gf(e):e}function eo(n){let e=an(n.mapValue.fields.__local_write_time__.timestampValue);return new Le(e.seconds,e.nanos)}var md=class{constructor(e,t,i,r,s,o,c,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h}},lc=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var tc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function di(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qf(n)?4:Mv(n)?9007199254740991:xv(n)?10:11:G()}function zt(n,e){if(n===e)return!0;let t=di(n);if(t!==di(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return eo(n).isEqual(eo(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=an(r.timestampValue),c=an(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return Nn(r.bytesValue).isEqual(Nn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return _e(r.geoPointValue.latitude)===_e(s.geoPointValue.latitude)&&_e(r.geoPointValue.longitude)===_e(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return _e(r.integerValue)===_e(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=_e(r.doubleValue),c=_e(s.doubleValue);return o===c?Zs(o)===Zs(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return ur(n.arrayValue.values||[],e.arrayValue.values||[],zt);case 10:case 11:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(Yy(o)!==Yy(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!zt(o[l],c[l])))return!1;return!0}(n,e);default:return G()}}function to(n,e){return(n.values||[]).find(t=>zt(t,e))!==void 0}function lr(n,e){if(n===e)return 0;let t=di(n),i=di(e);if(t!==i)return oe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return oe(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=_e(s.integerValue||s.doubleValue),l=_e(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return Jy(n.timestampValue,e.timestampValue);case 4:return Jy(eo(n),eo(e));case 5:return oe(n.stringValue,e.stringValue);case 6:return function(s,o){let c=Nn(s),l=Nn(o);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let h=0;h<c.length&&h<l.length;h++){let f=oe(c[h],l[h]);if(f!==0)return f}return oe(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=oe(_e(s.latitude),_e(o.latitude));return c!==0?c:oe(_e(s.longitude),_e(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Xy(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,l,h,f;let g=s.fields||{},I=o.fields||{},S=(c=g.value)===null||c===void 0?void 0:c.arrayValue,P=(l=I.value)===null||l===void 0?void 0:l.arrayValue,O=oe(((h=S?.values)===null||h===void 0?void 0:h.length)||0,((f=P?.values)===null||f===void 0?void 0:f.length)||0);return O!==0?O:Xy(S,P)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===tc.mapValue&&o===tc.mapValue)return 0;if(s===tc.mapValue)return 1;if(o===tc.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),h=o.fields||{},f=Object.keys(h);l.sort(),f.sort();for(let g=0;g<l.length&&g<f.length;++g){let I=oe(l[g],f[g]);if(I!==0)return I;let S=lr(c[l[g]],h[f[g]]);if(S!==0)return S}return oe(l.length,f.length)}(n.mapValue,e.mapValue);default:throw G()}}function Jy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return oe(n,e);let t=an(n),i=an(e),r=oe(t.seconds,i.seconds);return r!==0?r:oe(t.nanos,i.nanos)}function Xy(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=lr(t[r],i[r]);if(s)return s}return oe(t.length,i.length)}function hr(n){return gd(n)}function gd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=an(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Nn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return B.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=gd(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${gd(t.fields[o])}`;return r+"}"}(n.mapValue):G()}function Zy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _d(n){return!!n&&"integerValue"in n}function Hf(n){return!!n&&"arrayValue"in n}function ev(n){return!!n&&"nullValue"in n}function tv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ic(n){return!!n&&"mapValue"in n}function xv(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ks(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return wr(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ks(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ks(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Mv(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var At=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ic(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ks(t)}setAll(e){let t=at.emptyPath(),i={},r=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=c.popLast()}o?i[c.lastSegment()]=Ks(o):r.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());ic(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];ic(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){wr(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(Ks(this.value))}};function Nv(n){let e=[];return wr(n.fields,(t,i)=>{let r=new at([t]);if(ic(i)){let s=Nv(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new Ut(e)}var Ct=class n{constructor(e,t,i,r,s,o,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,X.min(),X.min(),X.min(),At.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,X.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,X.min(),X.min(),At.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,X.min(),X.min(),At.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var dr=class{constructor(e,t){this.position=e,this.inclusive=t}};function nv(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=B.comparator(B.fromName(o.referenceValue),t.key):i=lr(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function iv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zt(n.position[t],e.position[t]))return!1;return!0}var fi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function KS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var hc=class{},Re=class n extends hc{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new vd(e,t,i):t==="array-contains"?new Ed(e,i):t==="in"?new bd(e,i):t==="not-in"?new Td(e,i):t==="array-contains-any"?new Ad(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Id(e,i):new wd(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(lr(t,this.value)):t!==null&&di(this.value)===di(t)&&this.matchesComparison(lr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},St=class n extends hc{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Ov(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ov(n){return n.op==="and"}function Vv(n){return QS(n)&&Ov(n)}function QS(n){for(let e of n.filters)if(e instanceof St)return!1;return!0}function yd(n){if(n instanceof Re)return n.field.canonicalString()+n.op.toString()+hr(n.value);if(Vv(n))return n.filters.map(e=>yd(e)).join(",");{let e=n.filters.map(t=>yd(t)).join(",");return`${n.op}(${e})`}}function Fv(n,e){return n instanceof Re?function(i,r){return r instanceof Re&&i.op===r.op&&i.field.isEqual(r.field)&&zt(i.value,r.value)}(n,e):n instanceof St?function(i,r){return r instanceof St&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,c)=>s&&Fv(o,r.filters[c]),!0):!1}(n,e):void G()}function Lv(n){return n instanceof Re?function(t){return`${t.field.canonicalString()} ${t.op} ${hr(t.value)}`}(n):n instanceof St?function(t){return t.op.toString()+" {"+t.getFilters().map(Lv).join(" ,")+"}"}(n):"Filter"}var vd=class extends Re{constructor(e,t,i){super(e,t,i),this.key=B.fromName(i.referenceValue)}matches(e){let t=B.comparator(e.key,this.key);return this.matchesComparison(t)}},Id=class extends Re{constructor(e,t){super(e,"in",t),this.keys=Uv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},wd=class extends Re{constructor(e,t){super(e,"not-in",t),this.keys=Uv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Uv(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>B.fromName(i.referenceValue))}var Ed=class extends Re{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Hf(t)&&to(t.arrayValue,this.value)}},bd=class extends Re{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&to(this.value.arrayValue,t)}},Td=class extends Re{constructor(e,t){super(e,"not-in",t)}matches(e){if(to(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!to(this.value.arrayValue,t)}},Ad=class extends Re{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Hf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>to(this.value.arrayValue,i))}};var Cd=class{constructor(e,t=null,i=[],r=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function rv(n,e=null,t=[],i=[],r=null,s=null,o=null){return new Cd(n,e,t,i,r,s,o)}function Wf(n){let e=K(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>yd(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Vc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>hr(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>hr(i)).join(",")),e.ue=t}return e.ue}function Kf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!KS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Fv(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iv(n.startAt,e.startAt)&&iv(n.endAt,e.endAt)}function Sd(n){return B.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var On=class{constructor(e,t=null,i=[],r=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function YS(n,e,t,i,r,s,o,c){return new On(n,e,t,i,r,s,o,c)}function Qf(n){return new On(n)}function sv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jv(n){return n.collectionGroup!==null}function Qs(n){let e=K(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new qe(at.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new fi(s,i))}),t.has(at.keyField().canonicalString())||e.ce.push(new fi(at.keyField(),i))}return e.ce}function Bt(n){let e=K(n);return e.le||(e.le=JS(e,Qs(n))),e.le}function JS(n,e){if(n.limitType==="F")return rv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new fi(r.field,s)});let t=n.endAt?new dr(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new dr(n.startAt.position,n.startAt.inclusive):null;return rv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Rd(n,e){let t=n.filters.concat([e]);return new On(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Dd(n,e,t){return new On(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fc(n,e){return Kf(Bt(n),Bt(e))&&n.limitType===e.limitType}function Bv(n){return`${Wf(Bt(n))}|lt:${n.limitType}`}function nr(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>Lv(r)).join(", ")}]`),Vc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>hr(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>hr(r)).join(",")),`Target(${i})`}(Bt(n))}; limitType=${n.limitType})`}function Lc(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):B.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of Qs(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,c,l){let h=nv(o,c,l);return o.inclusive?h<=0:h<0}(i.startAt,Qs(i),r)||i.endAt&&!function(o,c,l){let h=nv(o,c,l);return o.inclusive?h>=0:h>0}(i.endAt,Qs(i),r))}(n,e)}function XS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $v(n){return(e,t)=>{let i=!1;for(let r of Qs(n)){let s=ZS(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function ZS(n,e,t){let i=n.field.isKeyField()?B.comparator(e.key,t.key):function(s,o,c){let l=o.data.field(s),h=c.data.field(s);return l!==null&&h!==null?lr(l,h):G()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return G()}}var Vn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wr(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return kv(this.inner)}size(){return this.innerSize}};var eR=new be(B.comparator);function cn(){return eR}var zv=new be(B.comparator);function Ws(...n){let e=zv;for(let t of n)e=e.insert(t.key,t);return e}function qv(n){let e=zv;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function oi(){return Ys()}function Gv(){return Ys()}function Ys(){return new Vn(n=>n.toString(),(n,e)=>n.isEqual(e))}var tR=new be(B.comparator),nR=new qe(B.comparator);function te(...n){let e=nR;for(let t of n)e=e.add(t);return e}var iR=new qe(oe);function rR(){return iR}function Yf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zs(e)?"-0":e}}function Hv(n){return{integerValue:""+n}}function sR(n,e){return $S(e)?Hv(e):Yf(n,e)}var fr=class{constructor(){this._=void 0}};function oR(n,e,t){return n instanceof pr?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&qf(s)&&(s=Gf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof pi?Kv(n,e):n instanceof mi?Qv(n,e):function(r,s){let o=Wv(r,s),c=ov(o)+ov(r.Pe);return _d(o)&&_d(r.Pe)?Hv(c):Yf(r.serializer,c)}(n,e)}function aR(n,e,t){return n instanceof pi?Kv(n,e):n instanceof mi?Qv(n,e):t}function Wv(n,e){return n instanceof mr?function(i){return _d(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var pr=class extends fr{},pi=class extends fr{constructor(e){super(),this.elements=e}};function Kv(n,e){let t=Yv(e);for(let i of n.elements)t.some(r=>zt(r,i))||t.push(i);return{arrayValue:{values:t}}}var mi=class extends fr{constructor(e){super(),this.elements=e}};function Qv(n,e){let t=Yv(e);for(let i of n.elements)t=t.filter(r=>!zt(r,i));return{arrayValue:{values:t}}}var mr=class extends fr{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function ov(n){return _e(n.integerValue||n.doubleValue)}function Yv(n){return Hf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function cR(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof pi&&r instanceof pi||i instanceof mi&&r instanceof mi?ur(i.elements,r.elements,zt):i instanceof mr&&r instanceof mr?zt(i.Pe,r.Pe):i instanceof pr&&r instanceof pr}(n.transform,e.transform)}var Pd=class{constructor(e,t){this.version=e,this.transformResults=t}},ui=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function rc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var gr=class{};function Jv(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new dc(n.key,ui.none()):new gi(n.key,n.data,ui.none());{let t=n.data,i=At.empty(),r=new qe(at.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new un(n.key,i,new Ut(r.toArray()),ui.none())}}function uR(n,e,t){n instanceof gi?function(r,s,o){let c=r.value.clone(),l=cv(r.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof un?function(r,s,o){if(!rc(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=cv(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Xv(r)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Js(n,e,t,i){return n instanceof gi?function(s,o,c,l){if(!rc(s.precondition,o))return c;let h=s.value.clone(),f=uv(s.fieldTransforms,l,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,i):n instanceof un?function(s,o,c,l){if(!rc(s.precondition,o))return c;let h=uv(s.fieldTransforms,l,o),f=o.data;return f.setAll(Xv(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,i):function(s,o,c){return rc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function lR(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=Wv(i.transform,r||null);s!=null&&(t===null&&(t=At.empty()),t.set(i.field,s))}return t||null}function av(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ur(i,r,(s,o)=>cR(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var gi=class extends gr{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},un=class extends gr{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Xv(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function cv(n,e,t){let i=new Map;fe(n.length===t.length);for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,c=e.data.field(s.field);i.set(s.field,aR(o,c,t[r]))}return i}function uv(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,oR(s,o,e))}return i}var dc=class extends gr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},kd=class extends gr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var xd=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&uR(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=Js(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=Js(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=Gv();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(r.key)?null:c;let l=Jv(o,c);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(X.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),te())}isEqual(e){return this.batchId===e.batchId&&ur(this.mutations,e.mutations,(t,i)=>av(t,i))&&ur(this.baseMutations,e.baseMutations,(t,i)=>av(t,i))}},Md=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){fe(e.mutations.length===i.length);let r=function(){return tR}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var Nd=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Od=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ce,ne;function hR(n){switch(n){default:return G();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function Zv(n){if(n===void 0)return on("GRPC error has no .code"),R.UNKNOWN;switch(n){case Ce.OK:return R.OK;case Ce.CANCELLED:return R.CANCELLED;case Ce.UNKNOWN:return R.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return R.INTERNAL;case Ce.UNAVAILABLE:return R.UNAVAILABLE;case Ce.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Ce.NOT_FOUND:return R.NOT_FOUND;case Ce.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Ce.ABORTED:return R.ABORTED;case Ce.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Ce.DATA_LOSS:return R.DATA_LOSS;default:return G()}}(ne=Ce||(Ce={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";var lv=null;function dR(){return new TextEncoder}var fR=new xn([4294967295,4294967295],0);function hv(n){let e=dR().encode(n),t=new Qh;return t.update(e),new Uint8Array(t.digest())}function dv(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new xn([t,i],0),new xn([r,s],0)]}var Vd=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ai(`Invalid padding: ${t}`);if(i<0)throw new ai(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ai(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ai(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=xn.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(xn.fromNumber(i)));return r.compare(fR)===1&&(r=new xn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=hv(e),[i,r]=dv(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=hv(e),[i,r]=dv(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},ai=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var fc=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,no.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(X.min(),r,new be(oe),cn(),te())}},no=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,te(),te(),te())}};var or=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},pc=class{constructor(e,t){this.targetId=e,this.me=t}},mc=class{constructor(e,t,i=Ge.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},gc=class{constructor(){this.fe=0,this.ge=pv(),this.pe=Ge.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=te(),t=te(),i=te();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:G()}}),new no(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=pv()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Fd=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=cn(),this.qe=fv(),this.Qe=new be(oe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:G()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let s=r.target;if(Sd(s))if(i===0){let o=new B(s.path);this.Ue(t,o,Ct.newNoDocument(o,X.min()))}else fe(i===1);else{let o=this.Ye(t);if(o!==i){let c=this.Ze(e),l=c?this.Xe(c,e,o):1;if(l!==0){this.je(t);let h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,h)}lv?.et(function(f,g,I,S,P){var O,D,z,Q,J,pe;let He={localCacheCount:f,existenceFilterCount:g.count,databaseId:I.database,projectId:I.projectId},le=g.unchangedNames;return le&&(He.bloomFilter={applied:P===0,hashCount:(O=le?.hashCount)!==null&&O!==void 0?O:0,bitmapLength:(Q=(z=(D=le?.bits)===null||D===void 0?void 0:D.bitmap)===null||z===void 0?void 0:z.length)!==null&&Q!==void 0?Q:0,padding:(pe=(J=le?.bits)===null||J===void 0?void 0:J.padding)!==null&&pe!==void 0?pe:0,mightContain:E=>{var m;return(m=S?.mightContain(E))!==null&&m!==void 0&&m}}),He}(o,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,c;try{o=Nn(i).toUint8Array()}catch(l){if(l instanceof uc)return cr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Vd(o,r,s)}catch(l){return cr(l instanceof ai?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&Sd(c.target)){let l=new B(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ct.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let i=te();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let h=this.Je(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new fc(e,t,this.Qe,this.ke,i);return this.ke=cn(),this.qe=fv(),this.Qe=new be(oe),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new gc,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new qe(oe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new gc),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function fv(){return new be(B.comparator)}function pv(){return new be(B.comparator)}var pR={asc:"ASCENDING",desc:"DESCENDING"},mR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gR={and:"AND",or:"OR"},Ld=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Ud(n,e){return n.useProto3Json||Vc(e)?e:{value:e}}function _c(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function e0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _R(n,e){return _c(n,e.toTimestamp())}function $t(n){return fe(!!n),X.fromTimestamp(function(t){let i=an(t);return new Le(i.seconds,i.nanos)}(n))}function Jf(n,e){return jd(n,e).canonicalString()}function jd(n,e){let t=function(r){return new ve(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function t0(n){let e=ve.fromString(n);return fe(o0(e)),e}function Bd(n,e){return Jf(n.databaseId,e.path)}function nd(n,e){let t=t0(e);if(t.get(1)!==n.databaseId.projectId)throw new L(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new L(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new B(i0(t))}function n0(n,e){return Jf(n.databaseId,e)}function yR(n){let e=t0(n);return e.length===4?ve.emptyPath():i0(e)}function $d(n){return new ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function i0(n){return fe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function mv(n,e,t){return{name:Bd(n,e),fields:t.value.mapValue.fields}}function vR(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(fe(f===void 0||typeof f=="string"),Ge.fromBase64String(f||"")):(fe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Ge.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){let f=h.code===void 0?R.UNKNOWN:Zv(h.code);return new L(f,h.message||"")}(o);t=new mc(i,r,s,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=nd(n,i.document.name),s=$t(i.document.updateTime),o=i.document.createTime?$t(i.document.createTime):X.min(),c=new At({mapValue:{fields:i.document.fields}}),l=Ct.newFoundDocument(r,s,o,c),h=i.targetIds||[],f=i.removedTargetIds||[];t=new or(h,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=nd(n,i.document),s=i.readTime?$t(i.readTime):X.min(),o=Ct.newNoDocument(r,s),c=i.removedTargetIds||[];t=new or([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=nd(n,i.document),s=i.removedTargetIds||[];t=new or([],s,r,null)}else{if(!("filter"in e))return G();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new Od(r,s),c=i.targetId;t=new pc(c,o)}}return t}function IR(n,e){let t;if(e instanceof gi)t={update:mv(n,e.key,e.value)};else if(e instanceof dc)t={delete:Bd(n,e.key)};else if(e instanceof un)t={update:mv(n,e.key,e.data),updateMask:DR(e.fieldMask)};else{if(!(e instanceof kd))return G();t={verify:Bd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let c=o.transform;if(c instanceof pr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof pi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof mi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof mr)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw G()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:_R(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:G()}(n,e.precondition)),t}function wR(n,e){return n&&n.length>0?(fe(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?$t(r.updateTime):$t(s);return o.isEqual(X.min())&&(o=$t(s)),new Pd(o,r.transformResults||[])}(t,e))):[]}function ER(n,e){return{documents:[n0(n,e.path)]}}function bR(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=n0(n,r);let s=function(h){if(h.length!==0)return s0(St.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(h){if(h.length!==0)return h.map(f=>function(I){return{field:ir(I.field),direction:CR(I.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=Ud(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:t,parent:r}}function TR(n){let e=yR(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){fe(i===1);let f=t.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(g){let I=r0(g);return I instanceof St&&Vv(I)?I.getFilters():[I]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(I=>function(P){return new fi(rr(P.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(I))}(t.orderBy));let c=null;t.limit&&(c=function(g){let I;return I=typeof g=="object"?g.value:g,Vc(I)?null:I}(t.limit));let l=null;t.startAt&&(l=function(g){let I=!!g.before,S=g.values||[];return new dr(S,I)}(t.startAt));let h=null;return t.endAt&&(h=function(g){let I=!g.before,S=g.values||[];return new dr(S,I)}(t.endAt)),YS(e,r,o,s,c,"F",l,h)}function AR(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function r0(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=rr(t.unaryFilter.field);return Re.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=rr(t.unaryFilter.field);return Re.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=rr(t.unaryFilter.field);return Re.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=rr(t.unaryFilter.field);return Re.create(o,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(n):n.fieldFilter!==void 0?function(t){return Re.create(rr(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return St.create(t.compositeFilter.filters.map(i=>r0(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return G()}}(t.compositeFilter.op))}(n):G()}function CR(n){return pR[n]}function SR(n){return mR[n]}function RR(n){return gR[n]}function ir(n){return{fieldPath:n.canonicalString()}}function rr(n){return at.fromServerFormat(n.fieldPath)}function s0(n){return n instanceof Re?function(t){if(t.op==="=="){if(tv(t.value))return{unaryFilter:{field:ir(t.field),op:"IS_NAN"}};if(ev(t.value))return{unaryFilter:{field:ir(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(tv(t.value))return{unaryFilter:{field:ir(t.field),op:"IS_NOT_NAN"}};if(ev(t.value))return{unaryFilter:{field:ir(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ir(t.field),op:SR(t.op),value:t.value}}}(n):n instanceof St?function(t){let i=t.getFilters().map(r=>s0(r));return i.length===1?i[0]:{compositeFilter:{op:RR(t.op),filters:i}}}(n):G()}function DR(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function o0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var io=class n{constructor(e,t,i,r,s=X.min(),o=X.min(),c=Ge.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var zd=class{constructor(e){this.ct=e}};function PR(n){let e=TR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Dd(e,e.limit,"L"):e}var yc=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(_e(e.integerValue));else if("doubleValue"in e){let i=_e(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),Zs(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=an(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Nn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?Mv(e)?this.dt(t,Number.MAX_SAFE_INTEGER):xv(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):G()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let s=e.fields||{};this.dt(t,53);let o="value",c=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(_e(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),B.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};yc.vt=new yc;var qd=class{constructor(){this.un=new Gd}addToCollectionParentIndex(e,t){return this.un.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(hi.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(hi.min())}updateCollectionGroup(e,t,i){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},Gd=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new qe(ve.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new qe(ve.comparator)).toArray()}};var Tx=new Uint8Array(0);var Lt=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(41943040,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);var ro=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Hd=class{constructor(){this.changes=new Vn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?M.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Wd=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Kd=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Js(i.mutation,r,Ut.empty(),Le.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,te()).next(()=>i))}getLocalViewOfDocuments(e,t,i=te()){let r=oi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Ws();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=oi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,te()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,i,r){let s=cn(),o=Ys(),c=function(){return Ys()}();return t.forEach((l,h)=>{let f=i.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof un)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Js(f.mutation,h,f.mutation.getFieldMask(),Le.now())):o.set(h.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((h,f)=>o.set(h,f)),t.forEach((h,f)=>{var g;return c.set(h,new Wd(f,(g=o.get(h))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){let i=Ys(),r=new be((o,c)=>o-c),s=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(l=>{let h=t.get(l);if(h===null)return;let f=i.get(l)||Ut.empty();f=c.applyToLocalView(h,f),i.set(l,f);let g=(r.get(c.batchId)||te()).add(l);r=r.insert(c.batchId,g)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),h=l.key,f=l.value,g=Gv();f.forEach(I=>{if(!s.has(I)){let S=Jv(t.get(I),i.get(I));S!==null&&g.set(I,S),s=s.add(I)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return M.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return B.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):M.resolve(oi()),c=-1,l=s;return o.next(h=>M.forEach(h,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(I=>{l=l.insert(f,I)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,l,h,te())).next(f=>({batchId:c,changes:qv(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next(i=>{let r=Ws();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=Ws();return this.indexManager.getCollectionParents(e,s).next(c=>M.forEach(c,l=>{let h=function(g,I){return new On(I,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next(f=>{f.forEach((g,I)=>{o=o.insert(g,I)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,h)=>{let f=h.getKey();o.get(f)===null&&(o=o.insert(f,Ct.newInvalidDocument(f)))});let c=Ws();return o.forEach((l,h)=>{let f=s.get(l);f!==void 0&&Js(f.mutation,h,Ut.empty(),Le.now()),Lc(t,h)&&(c=c.insert(l,h))}),c})}};var Qd=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return M.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:$t(r.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:PR(r.bundledQuery),readTime:$t(r.readTime)}}(t)),M.resolve()}};var Yd=class{constructor(){this.overlays=new be(B.comparator),this.Ir=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let i=oi();return M.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),M.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),M.resolve()}getOverlaysForCollection(e,t,i){let r=oi(),s=t.length+1,o=new B(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,h=l.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return M.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new be((h,f)=>h-f),o=this.overlays.getIterator();for(;o.hasNext();){let h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let f=s.get(h.largestBatchId);f===null&&(f=oi(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}let c=oi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,f)=>c.set(h,f)),!(c.size()>=r)););return M.resolve(c)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Nd(t,i));let s=this.Ir.get(t);s===void 0&&(s=te(),this.Ir.set(t,s)),this.Ir.set(t,s.add(i.key))}};var Jd=class{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var so=class{constructor(){this.Tr=new qe(Se.Er),this.dr=new qe(Se.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new Se(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new Se(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new B(new ve([])),i=new Se(t,e),r=new Se(t,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new B(new ve([])),i=new Se(t,e),r=new Se(t,e+1),s=te();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Se(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},Se=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return B.comparator(e.key,t.key)||oe(e.wr,t.wr)}static Ar(e,t){return oe(e.wr,t.wr)||B.comparator(e.key,t.key)}};var Xd=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new qe(Se.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new xd(s,t,i,r);this.mutationQueue.push(o);for(let c of r)this.br=this.br.add(new Se(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,t){return M.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.vr(i),s=r<0?0:r;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new Se(t,0),r=new Se(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{let c=this.Dr(o.wr);s.push(c)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new qe(oe);return t.forEach(r=>{let s=new Se(r,0),o=new Se(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{i=i.add(c.wr)})}),M.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;B.isDocumentKey(s)||(s=s.child(""));let o=new Se(new B(s),0),c=new qe(oe);return this.br.forEachWhile(l=>{let h=l.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(c=c.add(l.wr)),!0)},o),M.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){fe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return M.forEach(t.mutations,r=>{let s=new Se(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new Se(t,0),r=this.br.firstAfterOrEqual(i);return M.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Zd=class{constructor(e){this.Mr=e,this.docs=function(){return new be(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return M.resolve(i?i.document.mutableCopy():Ct.newInvalidDocument(t))}getEntries(e,t){let i=cn();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ct.newInvalidDocument(r))}),M.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=cn(),o=t.path,c=new B(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:h,value:{document:f}}=l.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||US(LS(f),i)<=0||(r.has(f.key)||Lc(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,t,i,r){G()}Or(e,t){return M.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new ef(this)}getSize(e){return M.resolve(this.size)}},ef=class extends Hd{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),M.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var tf=class{constructor(e){this.persistence=e,this.Nr=new Vn(t=>Wf(t),Kf),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new so,this.targetCount=0,this.kr=ro.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),M.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ro(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Kn(t),M.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),M.waitFor(s).next(()=>r)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return M.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),M.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return M.resolve(i)}containsKey(e,t){return M.resolve(this.Br.containsKey(t))}};var nf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Pv(0),this.Kr=!1,this.Kr=!0,this.$r=new Jd,this.referenceDelegate=e(this),this.Ur=new tf(this),this.indexManager=new qd,this.remoteDocumentCache=function(r){return new Zd(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new zd(t),this.Gr=new Qd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Yd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new Xd(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){j("MemoryPersistence","Starting transaction:",e);let r=new rf(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,t){return M.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},rf=class extends pd{constructor(e){super(),this.currentSequenceNumber=e}},sf=class n{constructor(e){this.persistence=e,this.Jr=new so,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),M.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),M.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,i=>{let r=B.fromPath(i);return this.ei(e,r).next(s=>{s||t.removeEntry(r,X.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return M.or([()=>M.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var of=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=te(),r=te();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var af=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var cf=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return S_()?8:BS(Me())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new af;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(Hs()<=ee.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",nr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(Hs()<=ee.DEBUG&&j("QueryEngine","Query:",nr(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Hs()<=ee.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",nr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bt(t))):M.resolve())}Yi(e,t){if(sv(t))return M.resolve(null);let i=Bt(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Dd(t,null,"F"),i=Bt(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=te(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,i).next(l=>{let h=this.ts(t,c);return this.ns(t,h,o,l.readTime)?this.Yi(e,Dd(t,null,"F")):this.rs(e,h,t,l)}))})))}Zi(e,t,i,r){return sv(t)||r.isEqual(X.min())?M.resolve(null):this.Ji.getDocuments(e,i).next(s=>{let o=this.ts(t,s);return this.ns(t,o,i,r)?M.resolve(null):(Hs()<=ee.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),nr(t)),this.rs(e,o,t,FS(r,-1)).next(c=>c))})}ts(e,t){let i=new qe($v(e));return t.forEach((r,s)=>{Lc(e,s)&&(i=i.add(s))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,i){return Hs()<=ee.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",nr(t)),this.Ji.getDocumentsMatchingQuery(e,t,hi.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var uf=class{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new be(oe),this._s=new Vn(s=>Wf(s),Kf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function kR(n,e,t,i){return new uf(n,e,t,i)}function a0(n,e){return _(this,null,function*(){let t=K(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],c=[],l=te();for(let h of r){o.push(h.batchId);for(let f of h.mutations)l=l.add(f.key)}for(let h of s){c.push(h.batchId);for(let f of h.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(i,l).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:c}))})})})}function xR(n,e){let t=K(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,l,h,f){let g=h.batch,I=g.keys(),S=M.resolve();return I.forEach(P=>{S=S.next(()=>f.getEntry(l,P)).next(O=>{let D=h.docVersions.get(P);fe(D!==null),O.version.compareTo(D)<0&&(g.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),f.addEntry(O)))})}),S.next(()=>c.mutationQueue.removeMutationBatch(l,g))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let l=te();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(l=l.add(c.batch.mutations[h].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function c0(n){let e=K(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function MR(n,e){let t=K(n),i=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let c=[];e.targetChanges.forEach((f,g)=>{let I=r.get(g);if(!I)return;c.push(t.Ur.removeMatchingKeys(s,f.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(s,f.addedDocuments,g)));let S=I.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(Ge.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,i)),r=r.insert(g,S),function(O,D,z){return O.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(I,S,f)&&c.push(t.Ur.updateTargetData(s,S))});let l=cn(),h=te();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(NR(s,o,e.documentUpdates).next(f=>{l=f.Ps,h=f.Is})),!i.isEqual(X.min())){let f=t.Ur.getLastRemoteSnapshotVersion(s).next(g=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(f)}return M.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(t.os=r,s))}function NR(n,e,t){let i=te(),r=te();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=cn();return t.forEach((c,l)=>{let h=s.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(X.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):j("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function OR(n,e){let t=K(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function VR(n,e){let t=K(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(s=>s?(r=s,M.resolve(r)):t.Ur.allocateTargetId(i).next(o=>(r=new io(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function lf(n,e,t){return _(this,null,function*(){let i=K(n),r=i.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!fo(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function gv(n,e,t){let i=K(n),r=X.min(),s=te();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,h,f){let g=K(l),I=g._s.get(f);return I!==void 0?M.resolve(g.os.get(I)):g.Ur.getTargetData(h,f)}(i,o,Bt(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,t?r:X.min(),t?s:te())).next(c=>(FR(i,XS(e),c),{documents:c,Ts:s})))}function FR(n,e,t){let i=n.us.get(e)||X.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.us.set(e,i)}var vc=class{constructor(){this.activeTargetIds=rR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var hf=class{constructor(){this.so=new vc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new vc,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var df=class{_o(e){}shutdown(){}};var Ic=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var nc=null;function id(){return nc===null?nc=function(){return 268435456+Math.round(2147483648*Math.random())}():nc++,"0x"+nc.toString(16)}var LR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ff=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ze="WebChannelConnection",pf=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(t,i,r,s,o){let c=id(),l=this.xo(t,i.toUriEncodedString());j("RestConnection",`Sending RPC '${t}' ${c}:`,l,r);let h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(t,l,h,r).then(f=>(j("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw cr("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",l,"request:",r),f})}Lo(t,i,r,s,o,c){return this.Mo(t,i,r,s,o)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ir}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}xo(t,i){let r=LR[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){let s=id();return new Promise((o,c)=>{let l=new Yh;l.setWithCredentials(!0),l.listenOnce(Xh.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Gs.NO_ERROR:let f=l.getResponseJson();j(ze,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Gs.TIMEOUT:j(ze,`RPC '${e}' ${s} timed out`),c(new L(R.DEADLINE_EXCEEDED,"Request time out"));break;case Gs.HTTP_ERROR:let g=l.getStatus();if(j(ze,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let I=l.getResponseJson();Array.isArray(I)&&(I=I[0]);let S=I?.error;if(S&&S.status&&S.message){let P=function(D){let z=D.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(z)>=0?z:R.UNKNOWN}(S.status);c(new L(P,S.message))}else c(new L(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new L(R.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{j(ze,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(r);j(ze,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",h,i,15)})}Bo(e,t,i){let r=id(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=td(),c=ed(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.xmlHttpFactory=new Jh({})),this.Oo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;let f=s.join("");j(ze,`Creating RPC '${e}' stream ${r}: ${f}`,l);let g=o.createWebChannel(f,l),I=!1,S=!1,P=new ff({Io:D=>{S?j(ze,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(I||(j(ze,`Opening RPC '${e}' stream ${r} transport.`),g.open(),I=!0),j(ze,`RPC '${e}' stream ${r} sending:`,D),g.send(D))},To:()=>g.close()}),O=(D,z,Q)=>{D.listen(z,J=>{try{Q(J)}catch(pe){setTimeout(()=>{throw pe},0)}})};return O(g,tr.EventType.OPEN,()=>{S||(j(ze,`RPC '${e}' stream ${r} transport opened.`),P.yo())}),O(g,tr.EventType.CLOSE,()=>{S||(S=!0,j(ze,`RPC '${e}' stream ${r} transport closed`),P.So())}),O(g,tr.EventType.ERROR,D=>{S||(S=!0,cr(ze,`RPC '${e}' stream ${r} transport errored:`,D),P.So(new L(R.UNAVAILABLE,"The operation could not be completed")))}),O(g,tr.EventType.MESSAGE,D=>{var z;if(!S){let Q=D.data[0];fe(!!Q);let J=Q,pe=J.error||((z=J[0])===null||z===void 0?void 0:z.error);if(pe){j(ze,`RPC '${e}' stream ${r} received error:`,pe);let He=pe.status,le=function(v){let w=Ce[v];if(w!==void 0)return Zv(w)}(He),E=pe.message;le===void 0&&(le=R.INTERNAL,E="Unknown error status: "+He+" with message "+pe.message),S=!0,P.So(new L(le,E)),g.close()}else j(ze,`RPC '${e}' stream ${r} received:`,Q),P.bo(Q)}}),O(c,Zh.STAT_EVENT,D=>{D.stat===ec.PROXY?j(ze,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===ec.NOPROXY&&j(ze,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}};function rd(){return typeof document<"u"?document:null}function Uc(n){return new Ld(n,!0)}var wc=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&j("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Ec=class{constructor(e,t,i,r,s,o,c,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new wc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(on(t.toString()),on("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{let r=new L(R.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},mf=class extends Ec{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=vR(this.serializer,e),i=function(s){if(!("targetChange"in s))return X.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?$t(o.readTime):X.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=$d(this.serializer),t.addTarget=function(s,o){let c,l=o.target;if(c=Sd(l)?{documents:ER(s,l)}:{query:bR(s,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=e0(s,o.resumeToken);let h=Ud(s,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(X.min())>0){c.readTime=_c(s,o.snapshotVersion.toTimestamp());let h=Ud(s,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);let i=AR(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=$d(this.serializer),t.removeTarget=e,this.a_(t)}},gf=class extends Ec{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return fe(!!e.streamToken),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=wR(e.writeResults,e.commitTime),i=$t(e.commitTime);return this.listener.g_(i,t)}p_(){let e={};e.database=$d(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>IR(this.serializer,i))};this.a_(t)}};var _f=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new L(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,jd(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(R.UNKNOWN,s.toString())})}Lo(e,t,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,jd(t,i),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(R.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},yf=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(on(t),this.D_=!1):j("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var vf=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(()=>_(this,null,function*(){yi(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(l){return _(this,null,function*(){let h=K(l);h.L_.add(4),yield po(h),h.q_.set("Unknown"),h.L_.delete(4),yield jc(h)})}(this))}))}),this.q_=new yf(i,r)}};function jc(n){return _(this,null,function*(){if(yi(n))for(let e of n.B_)yield e(!0)})}function po(n){return _(this,null,function*(){for(let e of n.B_)yield e(!1)})}function u0(n,e){let t=K(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),tp(t)?ep(t):Er(t).r_()&&Zf(t,e))}function Xf(n,e){let t=K(n),i=Er(t);t.N_.delete(e),i.r_()&&l0(t,e),t.N_.size===0&&(i.r_()?i.o_():yi(t)&&t.q_.set("Unknown"))}function Zf(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Er(n).A_(e)}function l0(n,e){n.Q_.xe(e),Er(n).R_(e)}function ep(n){n.Q_=new Fd({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Er(n).start(),n.q_.v_()}function tp(n){return yi(n)&&!Er(n).n_()&&n.N_.size>0}function yi(n){return K(n).L_.size===0}function h0(n){n.Q_=void 0}function UR(n){return _(this,null,function*(){n.q_.set("Online")})}function jR(n){return _(this,null,function*(){n.N_.forEach((e,t)=>{Zf(n,e)})})}function BR(n,e){return _(this,null,function*(){h0(n),tp(n)?(n.q_.M_(e),ep(n)):n.q_.set("Unknown")})}function $R(n,e,t){return _(this,null,function*(){if(n.q_.set("Online"),e instanceof mc&&e.state===2&&e.cause)try{yield function(r,s){return _(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.N_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.N_.delete(c),r.Q_.removeTarget(c))})}(n,e)}catch(i){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield bc(n,i)}else if(e instanceof or?n.Q_.Ke(e):e instanceof pc?n.Q_.He(e):n.Q_.We(e),!t.isEqual(X.min()))try{let i=yield c0(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){let f=s.N_.get(h);f&&s.N_.set(h,f.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,h)=>{let f=s.N_.get(l);if(!f)return;s.N_.set(l,f.withResumeToken(Ge.EMPTY_BYTE_STRING,f.snapshotVersion)),l0(s,l);let g=new io(f.target,l,h,f.sequenceNumber);Zf(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){j("RemoteStore","Failed to raise snapshot:",i),yield bc(n,i)}})}function bc(n,e,t){return _(this,null,function*(){if(!fo(e))throw e;n.L_.add(1),yield po(n),n.q_.set("Offline"),t||(t=()=>c0(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield jc(n)}))})}function d0(n,e){return e().catch(t=>bc(n,t,e))}function Bc(n){return _(this,null,function*(){let e=K(n),t=Fn(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;zR(e);)try{let r=yield OR(e.localStore,i);if(r===null){e.O_.length===0&&t.o_();break}i=r.batchId,qR(e,r)}catch(r){yield bc(e,r)}f0(e)&&p0(e)})}function zR(n){return yi(n)&&n.O_.length<10}function qR(n,e){n.O_.push(e);let t=Fn(n);t.r_()&&t.V_&&t.m_(e.mutations)}function f0(n){return yi(n)&&!Fn(n).n_()&&n.O_.length>0}function p0(n){Fn(n).start()}function GR(n){return _(this,null,function*(){Fn(n).p_()})}function HR(n){return _(this,null,function*(){let e=Fn(n);for(let t of n.O_)e.m_(t.mutations)})}function WR(n,e,t){return _(this,null,function*(){let i=n.O_.shift(),r=Md.from(i,e,t);yield d0(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Bc(n)})}function KR(n,e){return _(this,null,function*(){e&&Fn(n).V_&&(yield function(i,r){return _(this,null,function*(){if(function(o){return hR(o)&&o!==R.ABORTED}(r.code)){let s=i.O_.shift();Fn(i).s_(),yield d0(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield Bc(i)}})}(n,e)),f0(n)&&p0(n)})}function _v(n,e){return _(this,null,function*(){let t=K(n);t.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let i=yi(t);t.L_.add(3),yield po(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield jc(t)})}function QR(n,e){return _(this,null,function*(){let t=K(n);e?(t.L_.delete(2),yield jc(t)):e||(t.L_.add(2),yield po(t),t.q_.set("Unknown"))})}function Er(n){return n.K_||(n.K_=function(t,i,r){let s=K(t);return s.w_(),new mf(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:UR.bind(null,n),Ro:jR.bind(null,n),mo:BR.bind(null,n),d_:$R.bind(null,n)}),n.B_.push(e=>_(this,null,function*(){e?(n.K_.s_(),tp(n)?ep(n):n.q_.set("Unknown")):(yield n.K_.stop(),h0(n))}))),n.K_}function Fn(n){return n.U_||(n.U_=function(t,i,r){let s=K(t);return s.w_(),new gf(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:GR.bind(null,n),mo:KR.bind(null,n),f_:HR.bind(null,n),g_:WR.bind(null,n)}),n.B_.push(e=>_(this,null,function*(){e?(n.U_.s_(),yield Bc(n)):(yield n.U_.stop(),n.O_.length>0&&(j("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var If=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,c=new n(e,t,o,r,s);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function np(n,e){if(on("AsyncQueue",`${e}: ${n}`),fo(n))return new L(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Tc=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||B.comparator(t.key,i.key):(t,i)=>B.comparator(t.key,i.key),this.keyedMap=Ws(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var Ac=class{constructor(){this.W_=new be(B.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},_r=class n{constructor(e,t,i,r,s,o,c,l,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,Tc.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var wf=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Ef=class{constructor(){this.queries=yv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let r=K(t),s=r.queries;r.queries=yv(),s.forEach((o,c)=>{for(let l of c.j_)l.onError(i)})})(this,new L(R.ABORTED,"Firestore shutting down"))}};function yv(){return new Vn(n=>Bv(n),Fc)}function YR(n,e){return _(this,null,function*(){let t=K(n),i=3,r=e.query,s=t.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new wf,i=e.J_()?0:1);try{switch(i){case 0:s.z_=yield t.onListen(r,!0);break;case 1:s.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let c=np(o,`Initialization of query '${nr(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&ip(t)})}function JR(n,e){return _(this,null,function*(){let t=K(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function XR(n,e){let t=K(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(r)&&(i=!0);o.z_=r}}i&&ip(t)}function ZR(n,e,t){let i=K(n),r=i.queries.get(e);if(r)for(let s of r.j_)s.onError(t);i.queries.delete(e)}function ip(n){n.Y_.forEach(e=>{e.next()})}var bf,vv;(vv=bf||(bf={})).ea="default",vv.Cache="cache";var Tf=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new _r(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=_r.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bf.Cache}};var Cc=class{constructor(e){this.key=e}},Sc=class{constructor(e){this.key=e}},Af=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=te(),this.mutatedKeys=te(),this.Aa=$v(e),this.Ra=new Tc(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new Ac,r=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,g)=>{let I=r.get(f),S=Lc(this.query,g)?g:null,P=!!I&&this.mutatedKeys.has(I.key),O=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),D=!1;I&&S?I.data.isEqual(S.data)?P!==O&&(i.track({type:3,doc:S}),D=!0):this.ga(I,S)||(i.track({type:2,doc:S}),D=!0,(l&&this.Aa(S,l)>0||h&&this.Aa(S,h)<0)&&(c=!0)):!I&&S?(i.track({type:0,doc:S}),D=!0):I&&!S&&(i.track({type:1,doc:I}),D=!0,(l||h)&&(c=!0)),D&&(S?(o=o.add(S),s=O?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{Ra:o,fa:i,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((f,g)=>function(S,P){let O=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return O(S)-O(P)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(i),r=r!=null&&r;let c=t&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,h=l!==this.Ea;return this.Ea=l,o.length!==0||h?{snapshot:new _r(this.query,e.Ra,s,o,e.mutatedKeys,l===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ac,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=te(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new Sc(i))}),this.da.forEach(i=>{e.has(i)||t.push(new Cc(i))}),t}ba(e){this.Ta=e.Ts,this.da=te();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return _r.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Cf=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},Sf=class{constructor(e){this.key=e,this.va=!1}},Rf=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Vn(c=>Bv(c),Fc),this.Ma=new Map,this.xa=new Set,this.Oa=new be(B.comparator),this.Na=new Map,this.La=new so,this.Ba={},this.ka=new Map,this.qa=ro.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function eD(n,e,t=!0){return _(this,null,function*(){let i=I0(n),r,s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield m0(i,e,t,!0),r})}function tD(n,e){return _(this,null,function*(){let t=I0(n);yield m0(t,e,!0,!1)})}function m0(n,e,t,i){return _(this,null,function*(){let r=yield VR(n.localStore,Bt(e)),s=r.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current",c;return i&&(c=yield nD(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&u0(n.remoteStore,r),c})}function nD(n,e,t,i,r){return _(this,null,function*(){n.Ka=(g,I,S)=>function(O,D,z,Q){return _(this,null,function*(){let J=D.view.ma(z);J.ns&&(J=yield gv(O.localStore,D.query,!1).then(({documents:E})=>D.view.ma(E,J)));let pe=Q&&Q.targetChanges.get(D.targetId),He=Q&&Q.targetMismatches.get(D.targetId)!=null,le=D.view.applyChanges(J,O.isPrimaryClient,pe,He);return wv(O,D.targetId,le.wa),le.snapshot})}(n,g,I,S);let s=yield gv(n.localStore,e,!0),o=new Af(e,s.Ts),c=o.ma(s.documents),l=no.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),h=o.applyChanges(c,n.isPrimaryClient,l);wv(n,t,h.wa);let f=new Cf(e,t,o);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),h.snapshot})}function iD(n,e,t){return _(this,null,function*(){let i=K(n),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Fc(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield lf(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&Xf(i.remoteStore,r.targetId),Df(i,r.targetId)}).catch(ho))):(Df(i,r.targetId),yield lf(i.localStore,r.targetId,!0))})}function rD(n,e){return _(this,null,function*(){let t=K(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Xf(t.remoteStore,i.targetId))})}function sD(n,e,t){return _(this,null,function*(){let i=dD(n);try{let r=yield function(o,c){let l=K(o),h=Le.now(),f=c.reduce((S,P)=>S.add(P.key),te()),g,I;return l.persistence.runTransaction("Locally write mutations","readwrite",S=>{let P=cn(),O=te();return l.cs.getEntries(S,f).next(D=>{P=D,P.forEach((z,Q)=>{Q.isValidDocument()||(O=O.add(z))})}).next(()=>l.localDocuments.getOverlayedDocuments(S,P)).next(D=>{g=D;let z=[];for(let Q of c){let J=lR(Q,g.get(Q.key).overlayedDocument);J!=null&&z.push(new un(Q.key,J,Nv(J.value.mapValue),ui.exists(!0)))}return l.mutationQueue.addMutationBatch(S,h,z,c)}).next(D=>{I=D;let z=D.applyToLocalDocumentSet(g,O);return l.documentOverlayCache.saveOverlays(S,D.batchId,z)})}).then(()=>({batchId:I.batchId,changes:qv(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,c,l){let h=o.Ba[o.currentUser.toKey()];h||(h=new be(oe)),h=h.insert(c,l),o.Ba[o.currentUser.toKey()]=h}(i,r.batchId,t),yield mo(i,r.changes),yield Bc(i.remoteStore)}catch(r){let s=np(r,"Failed to persist write");t.reject(s)}})}function g0(n,e){return _(this,null,function*(){let t=K(n);try{let i=yield MR(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Na.get(s);o&&(fe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?fe(o.va):r.removedDocuments.size>0&&(fe(o.va),o.va=!1))}),yield mo(t,i,e)}catch(i){yield ho(i)}})}function Iv(n,e,t){let i=K(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&r.push(c.snapshot)}),function(o,c){let l=K(o);l.onlineState=c;let h=!1;l.queries.forEach((f,g)=>{for(let I of g.j_)I.Z_(c)&&(h=!0)}),h&&ip(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function oD(n,e,t){return _(this,null,function*(){let i=K(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Na.get(e),s=r&&r.key;if(s){let o=new be(B.comparator);o=o.insert(s,Ct.newNoDocument(s,X.min()));let c=te().add(s),l=new fc(X.min(),new Map,new be(oe),o,c);yield g0(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),rp(i)}else yield lf(i.localStore,e,!1).then(()=>Df(i,e,t)).catch(ho)})}function aD(n,e){return _(this,null,function*(){let t=K(n),i=e.batch.batchId;try{let r=yield xR(t.localStore,e);y0(t,i,null),_0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield mo(t,r)}catch(r){yield ho(r)}})}function cD(n,e,t){return _(this,null,function*(){let i=K(n);try{let r=yield function(o,c){let l=K(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return l.mutationQueue.lookupMutationBatch(h,c).next(g=>(fe(g!==null),f=g.keys(),l.mutationQueue.removeMutationBatch(h,g))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>l.localDocuments.getDocuments(h,f))})}(i.localStore,e);y0(i,e,t),_0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield mo(i,r)}catch(r){yield ho(r)}})}function _0(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function y0(n,e,t){let i=K(n),r=i.Ba[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Df(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||v0(n,i)})}function v0(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Xf(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),rp(n))}function wv(n,e,t){for(let i of t)i instanceof Cc?(n.La.addReference(i.key,e),uD(n,i)):i instanceof Sc?(j("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||v0(n,i.key)):G()}function uD(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(j("SyncEngine","New document in limbo: "+t),n.xa.add(i),rp(n))}function rp(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new B(ve.fromString(e)),i=n.qa.next();n.Na.set(i,new Sf(t)),n.Oa=n.Oa.insert(t,i),u0(n.remoteStore,new io(Bt(Qf(t.path)),i,"TargetPurposeLimboResolution",Pv.oe))}}function mo(n,e,t){return _(this,null,function*(){let i=K(n),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((c,l)=>{o.push(i.Ka(l,e,t).then(h=>{var f;if((h||t)&&i.isPrimaryClient){let g=h?!h.fromCache:(f=t?.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;i.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(h){r.push(h);let g=of.Wi(l.targetId,h);s.push(g)}}))}),yield Promise.all(o),i.Ca.d_(r),yield function(l,h){return _(this,null,function*(){let f=K(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>M.forEach(h,I=>M.forEach(I.$i,S=>f.persistence.referenceDelegate.addReference(g,I.targetId,S)).next(()=>M.forEach(I.Ui,S=>f.persistence.referenceDelegate.removeReference(g,I.targetId,S)))))}catch(g){if(!fo(g))throw g;j("LocalStore","Failed to update sequence numbers: "+g)}for(let g of h){let I=g.targetId;if(!g.fromCache){let S=f.os.get(I),P=S.snapshotVersion,O=S.withLastLimboFreeSnapshotVersion(P);f.os=f.os.insert(I,O)}}})}(i.localStore,s))})}function lD(n,e){return _(this,null,function*(){let t=K(n);if(!t.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let i=yield a0(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(l=>{l.reject(new L(R.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield mo(t,i.hs)}})}function hD(n,e){let t=K(n),i=t.Na.get(e);if(i&&i.va)return te().add(i.key);{let r=te(),s=t.Ma.get(e);if(!s)return r;for(let o of s){let c=t.Fa.get(o);r=r.unionWith(c.view.Va)}return r}}function I0(n){let e=K(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=g0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oD.bind(null,e),e.Ca.d_=XR.bind(null,e.eventManager),e.Ca.$a=ZR.bind(null,e.eventManager),e}function dD(n){let e=K(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cD.bind(null,e),e}var Rc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){this.serializer=Uc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return kR(this.persistence,new cf,e.initialUser,this.serializer)}createPersistence(e){return new nf(sf.Zr,this.serializer)}createSharedClientState(e){return new hf}terminate(){return _(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Pf=class{initialize(e,t){return _(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Iv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lD.bind(null,this.syncEngine),yield QR(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Ef}()}createDatastore(e){let t=Uc(e.databaseInfo.databaseId),i=function(s){return new pf(s)}(e.databaseInfo);return function(s,o,c,l){return new _f(s,o,c,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,c){return new vf(i,r,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,t=>Iv(this.syncEngine,t,0),function(){return Ic.D()?new Ic:new df}())}createSyncEngine(e,t){return function(r,s,o,c,l,h,f){let g=new Rf(r,s,o,c,l,h);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return _(this,null,function*(){var e,t;yield function(r){return _(this,null,function*(){let s=K(r);j("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield po(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var kf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):on("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var xf=class{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Ne.UNAUTHENTICATED,this.clientId=oc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>_(this,null,function*(){j("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(j("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=np(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function sd(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>_(this,null,function*(){i.isEqual(r)||(yield a0(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Ev(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield pD(n);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>_v(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>_v(e.remoteStore,r)),n._onlineComponents=e})}function fD(n){return n.name==="FirebaseError"?n.code===R.FAILED_PRECONDITION||n.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function pD(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield sd(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!fD(t))throw t;cr("Error using user provided cache. Falling back to memory cache: "+t),yield sd(n,new Rc)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield sd(n,new Rc);return n._offlineComponents})}function w0(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ev(n,n._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield Ev(n,new Pf))),n._onlineComponents})}function mD(n){return w0(n).then(e=>e.syncEngine)}function bv(n){return _(this,null,function*(){let e=yield w0(n),t=e.eventManager;return t.onListen=eD.bind(null,e.syncEngine),t.onUnlisten=iD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=rD.bind(null,e.syncEngine),t})}function E0(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Tv=new Map;function b0(n,e,t){if(!t)throw new L(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gD(n,e,t,i){if(e===!0&&i===!0)throw new L(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Av(n){if(!B.isDocumentKey(n))throw new L(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Cv(n){if(B.isDocumentKey(n))throw new L(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function $c(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":G()}function Xs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new L(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=$c(n);throw new L(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Dc=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new L(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new L(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=E0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new L(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new L(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new L(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},yr=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new L(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new L(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dc(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new od;switch(i.type){case"firstParty":return new ld(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new L(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=Tv.get(t);i&&(j("ComponentProvider","Removing Datastore"),Tv.delete(t),i.terminate())}(this),Promise.resolve()}};function T0(n,e,t,i={}){var r;let s=(n=Xs(n,yr))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&cr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=Ne.MOCK_USER;else{c=E_(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new L(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ne(h)}n._authCredentials=new ad(new sc(c,l))}}var _i=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ct=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Mn=class n extends _i{constructor(e,t,i){super(e,t,Qf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new B(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function A0(n,e,...t){if(n=Fe(n),b0("collection","path",e),n instanceof yr){let i=ve.fromString(e,...t);return Cv(i),new Mn(n,null,i)}{if(!(n instanceof ct||n instanceof Mn))throw new L(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(ve.fromString(e,...t));return Cv(i),new Mn(n.firestore,null,i)}}function C0(n,e,...t){if(n=Fe(n),arguments.length===1&&(e=oc.newId()),b0("doc","path",e),n instanceof yr){let i=ve.fromString(e,...t);return Av(i),new ct(n,null,new B(i))}{if(!(n instanceof ct||n instanceof Mn))throw new L(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(ve.fromString(e,...t));return Av(i),new ct(n.firestore,n instanceof Mn?n.converter:null,new B(i))}}var Mf=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new wc(this,"async_queue_retry"),this.Eu=()=>{let t=rd();t&&j("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=rd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=rd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new sn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return _(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!fo(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(i=>{this.hu=i,this.Pu=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw on("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Pu=!1,i))));return this.au=t,t}enqueueAfterDelay(e,t,i){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let r=If.createAndSchedule(this,e,t,i,s=>this.Vu(s));return this.lu.push(r),r}du(){this.hu&&G()}verifyOperationInProgress(){}mu(){return _(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};function Sv(n){return function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}var vr=class extends yr{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=function(){return new Mf}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||D0(this),this._firestoreClient.terminate()}};function S0(n,e){let t=typeof n=="object"?n:Qi(),i=typeof n=="string"?n:e||"(default)",r=Ms(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=w_("firestore");s&&T0(r,...s)}return r}function R0(n){return n._firestoreClient||D0(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function D0(n){var e,t,i;let r=n._freezeSettings(),s=function(c,l,h,f){return new md(c,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,E0(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new xf(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var oo=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ge.fromBase64String(e))}catch(t){throw new L(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ao=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new L(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Pc=class{constructor(e){this._methodName=e}};var co=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}};var uo=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}};var _D=/^__.*__$/,Nf=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new un(e,this.data,this.fieldMask,t,this.fieldTransforms):new gi(e,this.data,t,this.fieldTransforms)}};function P0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}var Of=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Su({path:i,Du:!1});return r.vu(e),r}Cu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Su({path:i,Du:!1});return r.yu(),r}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return kc(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(P0(this.wu)&&_D.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},Vf=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Uc(e)}Nu(e,t,i,r=!1){return new Of({wu:e,methodName:t,Ou:i,path:at.emptyPath(),Du:!1,xu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function k0(n){let e=n._freezeSettings(),t=Uc(n._databaseId);return new Vf(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yD(n,e,t,i,r,s={}){let o=n.Nu(s.merge||s.mergeFields?2:0,e,t,r);N0("Data must be an object, but it was:",o,i);let c=x0(i,o),l,h;if(s.merge)l=new Ut(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let g of s.mergeFields){let I=ID(e,g,t);if(!o.contains(I))throw new L(R.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);ED(f,I)||f.push(I)}l=new Ut(f),h=o.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,h=o.fieldTransforms;return new Nf(new At(c),l,h)}function vD(n,e,t,i=!1){return sp(t,n.Nu(i?4:3,e))}function sp(n,e){if(M0(n=Fe(n)))return N0("Unsupported field value:",e,n),x0(n,e);if(n instanceof Pc)return function(i,r){if(!P0(r.wu))throw r.Mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Mu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let c of i){let l=sp(c,r.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=Fe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return sR(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Le.fromDate(i);return{timestampValue:_c(r.serializer,s)}}if(i instanceof Le){let s=new Le(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_c(r.serializer,s)}}if(i instanceof co)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof oo)return{bytesValue:e0(r.serializer,i._byteString)};if(i instanceof ct){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Jf(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof uo)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw c.Mu("VectorValues must only contain numeric values.");return Yf(c.serializer,l)})}}}}}}(i,r);throw r.Mu(`Unsupported field value: ${$c(i)}`)}(n,e)}function x0(n,e){let t={};return kv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wr(n,(i,r)=>{let s=sp(r,e.bu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function M0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Le||n instanceof co||n instanceof oo||n instanceof ct||n instanceof Pc||n instanceof uo)}function N0(n,e,t){if(!M0(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=$c(t);throw i==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+i)}}function ID(n,e,t){if((e=Fe(e))instanceof ao)return e._internalPath;if(typeof e=="string")return O0(n,e);throw kc("Field path arguments must be of type string or ",n,!1,void 0,t)}var wD=new RegExp("[~\\*/\\[\\]]");function O0(n,e,t){if(e.search(wD)>=0)throw kc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ao(...e.split("."))._internalPath}catch{throw kc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kc(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new L(R.INVALID_ARGUMENT,c+n+l)}function ED(n,e){return n.some(t=>t.isEqual(e))}var xc=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Ff(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(op("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Ff=class extends xc{data(){return super.data()}};function op(n,e){return typeof e=="string"?O0(n,e):e instanceof ao?e._internalPath:e._delegate._internalPath}function bD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new L(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var lo=class{},Mc=class extends lo{};function V0(n,e,...t){let i=[];e instanceof lo&&i.push(e),i=i.concat(t),function(s){let o=s.filter(l=>l instanceof Uf).length,c=s.filter(l=>l instanceof Lf).length;if(o>1||o>0&&c>0)throw new L(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var Lf=class n extends Mc{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return L0(e._query,t),new _i(e.firestore,e.converter,Rd(e._query,t))}_parse(e){let t=k0(e.firestore);return function(s,o,c,l,h,f,g){let I;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new L(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Dv(g,f);let S=[];for(let P of g)S.push(Rv(l,s,P));I={arrayValue:{values:S}}}else I=Rv(l,s,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Dv(g,f),I=vD(c,o,g,f==="in"||f==="not-in");return Re.create(h,f,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var Uf=class n extends lo{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:St.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r,c=s.getFlattenedFilters();for(let l of c)L0(o,l),o=Rd(o,l)}(e._query,t),new _i(e.firestore,e.converter,Rd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var jf=class n extends Mc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(r,s,o){if(r.startAt!==null)throw new L(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new L(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fi(s,o)}(e._query,this._field,this._direction);return new _i(e.firestore,e.converter,function(r,s){let o=r.explicitOrderBy.concat([s]);return new On(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}};function F0(n,e="asc"){let t=e,i=op("orderBy",n);return jf._create(i,t)}function Rv(n,e,t){if(typeof(t=Fe(t))=="string"){if(t==="")throw new L(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jv(e)&&t.indexOf("/")!==-1)throw new L(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(ve.fromString(t));if(!B.isDocumentKey(i))throw new L(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Zy(n,new B(i))}if(t instanceof ct)return Zy(n,t._key);throw new L(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$c(t)}.`)}function Dv(n,e){if(!Array.isArray(n)||n.length===0)throw new L(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function L0(n,e){let t=function(r,s){for(let o of r)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new L(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Bf=class{convertValue(e,t="none"){switch(di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return wr(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;let s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>_e(o.doubleValue));return new uo(s)}convertGeoPoint(e){return new co(_e(e.latitude),_e(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=Gf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(eo(e));default:return null}}convertTimestamp(e){let t=an(e);return new Le(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=ve.fromString(e);fe(o0(i));let r=new lc(i.get(1),i.get(3)),s=new B(i.popFirst(5));return r.isEqual(t)||on(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function TD(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var ci=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Nc=class extends xc{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ar(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(op("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},ar=class extends Nc{data(e={}){return super.data(e)}},$f=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ci(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new ar(this._firestore,this._userDataWriter,i.key,i,new ci(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new L(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>{let l=new ar(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ci(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new ar(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ci(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),h=-1,f=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:AD(c.type),doc:l,oldIndex:h,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function AD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}var Oc=class extends Bf{constructor(e){super(),this.firestore=e}convertBytes(e){return new oo(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,t)}};function U0(n,e){let t=Xs(n.firestore,vr),i=C0(n),r=TD(n.converter,e);return CD(t,[yD(k0(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,ui.exists(!1))]).then(()=>i)}function j0(n,...e){var t,i,r;n=Fe(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Sv(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Sv(e[o])){let g=e[o];e[o]=(t=g.next)===null||t===void 0?void 0:t.bind(g),e[o+1]=(i=g.error)===null||i===void 0?void 0:i.bind(g),e[o+2]=(r=g.complete)===null||r===void 0?void 0:r.bind(g)}let l,h,f;if(n instanceof ct)h=Xs(n.firestore,vr),f=Qf(n._key.path),l={next:g=>{e[o]&&e[o](SD(h,n,g))},error:e[o+1],complete:e[o+2]};else{let g=Xs(n,_i);h=Xs(g.firestore,vr),f=g._query;let I=new Oc(h);l={next:S=>{e[o]&&e[o](new $f(h,I,g,S))},error:e[o+1],complete:e[o+2]},bD(n._query)}return function(I,S,P,O){let D=new kf(O),z=new Tf(S,D,P);return I.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return YR(yield bv(I),z)})),()=>{D.za(),I.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return JR(yield bv(I),z)}))}}(R0(h),f,c,l)}function CD(n,e){return function(i,r){let s=new sn;return i.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return sD(yield mD(i),r,s)})),s.promise}(R0(n),e)}function SD(n,e,t){let i=t.docs.get(e._key),r=new Oc(n);return new Nc(n,r,e._key,i,new ci(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Ir=r})(Sn),Cn(new ft("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),c=new vr(new cd(i.getProvider("auth-internal")),new dd(i.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new L(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lc(h.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),De(Qy,"4.7.1",e),De(Qy,"4.7.1","esm2017")})();var Rt=class{constructor(e){return e}},B0="firestore",ap=class{constructor(){return Os(B0)}};var cp=new ie("angularfire2.firestore-instances");function RD(n,e){let t=Ma(B0,n,e);return t&&new Rt(t)}function DD(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Rt(i)}}var PD={provide:ap,deps:[[new Je,cp]]},kD={provide:Rt,useFactory:RD,deps:[[new Je,cp],Zt]};function $0(n,...e){return De("angularfire",ei.full,"fst"),_t([kD,PD,{provide:cp,useFactory:DD(n),multi:!0,deps:[ye,yt,Xi,ti,[new Je,qs],[new Je,Ji],...e]}])}var Ln=nt(U0,!0);var ln=nt(A0,!0);var zc=nt(S0,!0);var z0=nt(j0,!0);var q0=nt(F0,!0);var G0=nt(V0,!0);var qc=class n{constructor(e){this.router=e}fireAuth=U(Tt);firestore=U(Rt);login(e,t){return _(this,null,function*(){let i=yield Hy(this.fireAuth,e,t).catch(function(r){});i?(localStorage.setItem("user",JSON.stringify(i.user?.email)),this.logLogin(i),yield this.router.navigateByUrl("/home")):alert("Malas credenciales")})}logLogin(e){return _(this,null,function*(){let t={Usuario:e.user.email,LogInTime:new Date};yield Ln(ln(this.firestore,"LogIn-Logs"),t).then(()=>{console.log("Login logged successfully")}).catch(i=>{console.error("Error logging login: ",i)})})}toRegistro(){return _(this,null,function*(){yield this.router.navigateByUrl("/registro")})}static \u0275fac=function(t){return new(t||n)(se(Ve))};static \u0275cmp=we({type:n,selectors:[["app-login"]],standalone:!0,features:[Hn([]),Ee],decls:26,vars:0,consts:[["userName",""],["userPassword",""],["id","container",1,"container"],[1,"form-container","sign-in-container"],["type","email","placeholder","Email","required","",1,"formControl"],["type","password","placeholder","Password",1,"formControl"],[3,"click"],[1,"inicioRapido"],[1,"overlay-container"],[1,"overlay"],[1,"overlay-panel","overlay-right"],["id","signUp",1,"ghost",3,"click"]],template:function(t,i){if(t&1){let r=xi();k(0,"div",2)(1,"div",3)(2,"h1"),F(3,"Iniciar Sesion"),x(),de(4,"input",4,0)(6,"input",5,1),k(8,"button",6),$("click",function(){Pt(r);let o=et(5),c=et(7);return kt(i.login(o.value,c.value))}),F(9,"Iniciar"),x(),k(10,"div",7)(11,"button",6),$("click",function(){Pt(r);let o=et(5),c=et(7);return o.value="prueba@gmail.com",kt(c.value="123456")}),F(12,"Inicio 1"),x(),k(13,"button",6),$("click",function(){Pt(r);let o=et(5),c=et(7);return o.value="asd@asd.com",kt(c.value="123456")}),F(14,"Inicio 2"),x(),k(15,"button",6),$("click",function(){Pt(r);let o=et(5),c=et(7);return o.value="admin@gmail.com",kt(c.value="123456")}),F(16,"Inicio Admin"),x()()(),k(17,"div",8)(18,"div",9)(19,"div",10)(20,"h1"),F(21,"Bienvenido"),x(),k(22,"p"),F(23,"Si es tu primera visita hace click abajo para registrarte:"),x(),k(24,"button",11),$("click",function(){return Pt(r),kt(i.toRegistro())}),F(25,"Registrarse"),x()()()()()}},styles:['@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%]{background:#f6f5f7;display:flex;justify-content:center;align-items:center;flex-direction:column;font-family:Montserrat,sans-serif;height:100vh;margin:-20px 0 50px}.inicioRapido[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:30px}h1[_ngcontent-%COMP%]{font-weight:700;margin:0}h2[_ngcontent-%COMP%]{text-align:center}p[_ngcontent-%COMP%]{font-size:14px;font-weight:100;line-height:20px;letter-spacing:.5px;margin:20px 0 30px}span[_ngcontent-%COMP%]{font-size:12px}a[_ngcontent-%COMP%]{color:#333;font-size:14px;text-decoration:none;margin:15px 0}button[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #ff4b2b;background-color:#ff4b2b;color:#fff;font-size:12px;font-weight:700;padding:12px 45px;letter-spacing:1px;text-transform:uppercase;transition:transform 80ms ease-in;margin-bottom:10px}button[_ngcontent-%COMP%]:active{transform:scale(.95)}button[_ngcontent-%COMP%]:focus{outline:none}button.ghost[_ngcontent-%COMP%]{background-color:transparent;border-color:#fff}form[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 50px;height:100%;text-align:center}input[_ngcontent-%COMP%]{background-color:#eee;border:none;padding:12px 15px;margin:8px 0;width:100%}.container[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;position:absolute;margin:5% 5% 5% 25%;overflow:hidden;width:50%;height:60%;max-width:100%;min-height:480px}.form-container[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;align-items:center;padding:10% 5% 5%;top:0;height:100%;transition:all .6s ease-in-out}.sign-in-container[_ngcontent-%COMP%]{left:0;width:50%;z-index:2}.container.right-panel-active[_ngcontent-%COMP%]   .sign-in-container[_ngcontent-%COMP%]{transform:translate(100%)}.sign-up-container[_ngcontent-%COMP%]{left:0;width:50%;opacity:0;z-index:1}.container.right-panel-active[_ngcontent-%COMP%]   .sign-up-container[_ngcontent-%COMP%]{transform:translate(100%);opacity:1;z-index:5;animation:_ngcontent-%COMP%_show .6s}@keyframes _ngcontent-%COMP%_show{0%,49.99%{opacity:0;z-index:1}50%,to{opacity:1;z-index:5}}.overlay-container[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;width:50%;height:100%;overflow:hidden;transition:transform .6s ease-in-out;z-index:100}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-container[_ngcontent-%COMP%]{transform:translate(-100%)}.overlay[_ngcontent-%COMP%]{background:#ff416c;background:-webkit-linear-gradient(to right,#ff4b2b,#ff416c);background:linear-gradient(to right,#ff4b2b,#ff416c);background-repeat:no-repeat;background-size:cover;background-position:0 0;color:#fff;position:relative;left:-100%;height:100%;width:200%;transform:translate(0);transition:transform .6s ease-in-out}.container.right-panel-active[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{transform:translate(50%)}.overlay-panel[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 40px;text-align:center;top:0;height:100%;width:50%;transform:translate(0);transition:transform .6s ease-in-out}.overlay-left[_ngcontent-%COMP%]{transform:translate(-20%)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-left[_ngcontent-%COMP%]{transform:translate(0)}.overlay-right[_ngcontent-%COMP%]{right:0;transform:translate(0)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-right[_ngcontent-%COMP%]{transform:translate(20%)}.social-container[_ngcontent-%COMP%]{margin:20px 0}.social-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid #dddddd;border-radius:50%;display:inline-flex;justify-content:center;align-items:center;margin:0 5px;height:40px;width:40px}footer[_ngcontent-%COMP%]{background-color:#222;color:#fff;font-size:14px;bottom:0;position:fixed;left:0;right:0;text-align:center;z-index:999}footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0}footer[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:red}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3c97bf;text-decoration:none}']})};var up;try{up=typeof Intl<"u"&&Intl.v8BreakIterator}catch{up=!1}var _o=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?pg(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||up)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(H(Wt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var go;function xD(){if(go==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>go=!0}))}finally{go=go||!1}return go}function lp(n){return xD()?n:!!n.capture}function H0(n){return n.composedPath?n.composedPath()[0]:n.target}function W0(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function hp(n){return Array.isArray(n)?n:[n]}function dp(n){return n instanceof It?n.nativeElement:n}var Q0=new Set,vi,MD=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):OD}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&ND(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(H(_o),H(Qr,8))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function ND(n,e){if(!Q0.has(n))try{vi||(vi=document.createElement("style"),e&&vi.setAttribute("nonce",e),vi.setAttribute("type","text/css"),document.head.appendChild(vi)),vi.sheet&&(vi.sheet.insertRule(`@media ${n} {body{ }}`,0),Q0.add(n))}catch(t){console.error(t)}}function OD(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var J0=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new ut}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return Y0(hp(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=Y0(hp(i)).map(c=>this._registerQuery(c).observable),o=Ai(s);return o=Bo(o.pipe(_n(1)),o.pipe(Fm(1),Mm(0))),o.pipe(ae(c=>{let l={matches:!1,breakpoints:{}};return c.forEach(({matches:h,query:f})=>{l.matches=l.matches||h,l.breakpoints[f]=h}),l}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new qn(c=>{let l=h=>this._zone.run(()=>c.next(h));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(zo(r),ae(({matches:c})=>({query:i,matches:c})),qo(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};e.\u0275fac=function(r){return new(r||e)(H(MD),H(ye))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Y0(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function eI(n){return n.buttons===0||n.detail===0}function tI(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var Ii=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Ii||{}),X0="cdk-high-contrast-black-on-white",Z0="cdk-high-contrast-white-on-black",fp="cdk-high-contrast-active",nI=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=U(J0).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Ii.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Ii.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Ii.BLACK_ON_WHITE}return Ii.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(fp,X0,Z0),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Ii.BLACK_ON_WHITE?i.add(fp,X0):r===Ii.WHITE_ON_BLACK&&i.add(fp,Z0)}}};e.\u0275fac=function(r){return new(r||e)(H(_o),H(ke))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var pp=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({});let n=e;return n})();function UD(){return!0}var jD=new ie("mat-sanity-checks",{providedIn:"root",factory:UD}),_p=(()=>{let e=class e{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return W0()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(H(nI),H(jD,8),H(ke))},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[pp,pp]});let n=e;return n})();var pt=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(pt||{}),mp=class{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=pt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},iI=lp({passive:!0,capture:!0}),gp=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=H0(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){let s=this._events.get(t);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,iI)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let s=r.get(t);s&&(s.delete(i),s.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,iI)))}},rI={enterDuration:225,exitDuration:150},BD=800,sI=lp({passive:!0,capture:!0}),oI=["mousedown","touchstart"],aI=["mouseup","mouseleave","touchend","touchcancel"],yo=class yo{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=dp(i))}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=V(V({},rI),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let o=i.radius||$D(e,t,r),c=e-r.left,l=t-r.top,h=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${c-o}px`,f.style.top=`${l-o}px`,f.style.height=`${o*2}px`,f.style.width=`${o*2}px`,i.color!=null&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${h}ms`,this._containerElement.appendChild(f);let g=window.getComputedStyle(f),I=g.transitionProperty,S=g.transitionDuration,P=I==="none"||S==="0s"||S==="0s, 0s"||r.width===0&&r.height===0,O=new mp(this,f,i,P);f.style.transform="scale3d(1, 1, 1)",O.state=pt.FADING_IN,i.persistent||(this._mostRecentTransientRipple=O);let D=null;return!P&&(h||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let z=()=>{D&&(D.fallbackTimer=null),clearTimeout(J),this._finishRippleTransition(O)},Q=()=>this._destroyRipple(O),J=setTimeout(Q,h+100);f.addEventListener("transitionend",z),f.addEventListener("transitioncancel",Q),D={onTransitionEnd:z,onTransitionCancel:Q,fallbackTimer:J}}),this._activeRipples.set(O,D),(P||!h)&&this._finishRippleTransition(O),O}fadeOutRipple(e){if(e.state===pt.FADING_OUT||e.state===pt.HIDDEN)return;let t=e.element,i=V(V({},rI),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=pt.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=dp(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,oI.forEach(i=>{yo._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{aI.forEach(t=>{this._triggerElement.addEventListener(t,this,sI)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===pt.FADING_IN?this._startFadeOutTransition(e):e.state===pt.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=pt.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=pt.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=eI(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+BD;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!tI(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===pt.VISIBLE||e.config.terminateOnPointerUp&&e.state===pt.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(oI.forEach(t=>yo._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(aI.forEach(t=>e.removeEventListener(t,this,sI)),this._pointerUpEventsRegistered=!1))}};yo._eventManager=new gp;var cI=yo;function $D(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var uI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[_p,_p]});let n=e;return n})();var Gc=class n{constructor(e){this.router=e}toHome(){return _(this,null,function*(){this.router.navigateByUrl("/home")})}static \u0275fac=function(t){return new(t||n)(se(Ve))};static \u0275cmp=we({type:n,selectors:[["app-quien-soy"]],standalone:!0,features:[Ee],decls:20,vars:0,consts:[[1,"quien-soy"],["src","1000030695.jpg","height","320"],["id","links"],["href","https://www.instagram.com/maxicesa/"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["d","M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"],["href","www.linkedin.com/in/maximiliano-cesa-449785192"],["d","M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"],["href","https://steamcommunity.com/id/MagoHispanico/"],["d","M24 12c0 6.627-5.373 12-12 12-5.782 0-10.608-4.091-11.744-9.537l4.764 2.003c.285 1.441 1.56 2.547 3.115 2.534 1.723-.017 3.105-1.414 3.116-3.129l.007-.003 3.602-2.684c2.304.024 4.14-1.833 4.14-4.091 0-2.26-1.834-4.093-4.093-4.093-2.234 0-4.048 1.791-4.09 4.015l-2.64 3.693c-.668-.014-1.269.169-1.791.51l-6.294-2.646c.708-5.953 5.765-10.572 11.908-10.572 6.627 0 12 5.373 12 12zm-16.577 5.477l-1.544-.649c.38.858 1.236 1.461 2.249 1.457 1.346-.012 2.422-1.11 2.41-2.455-.012-1.329-1.104-2.41-2.432-2.41-.287.001-.57.05-.86.16l1.542.648c.898.378 1.319 1.411.941 2.308-.376.896-1.409 1.318-2.306.941zm7.484-5.602c-1.533 0-2.781-1.249-2.781-2.782 0-1.534 1.248-2.782 2.781-2.782 1.534 0 2.781 1.248 2.781 2.782 0 1.533-1.247 2.782-2.781 2.782zm0-.682c1.159 0 2.1-.942 2.1-2.101 0-1.158-.94-2.102-2.1-2.102s-2.102.943-2.102 2.102c.001 1.159.943 2.101 2.102 2.101z"]],template:function(t,i){t&1&&(k(0,"div",0)(1,"h1"),F(2,"Maximiliano Cesa"),x(),k(3,"h2"),F(4,"\xA1El desarrollador mas mediocre imaginable!"),x(),de(5,"img",1),k(6,"div",2)(7,"a",3),Di(),k(8,"svg",4),de(9,"path",5),x()(),Pi(),k(10,"a",6),Di(),k(11,"svg",4),de(12,"path",7),x()(),Pi(),k(13,"a",8),Di(),k(14,"svg",4),de(15,"path",9),x()()(),Pi(),k(16,"h2"),F(17,"Proximamente: Una copia online del juego mas vendido (creo) de todos los tiempos:"),x(),k(18,"h1"),F(19,"Tetris"),x()())},dependencies:[uI],styles:[".quien-soy[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}#links[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;max-width:240px;margin:0 auto;padding-top:10px}#links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:inline-block}img[_ngcontent-%COMP%]{display:block;margin:0 auto;border-width:2px;border-style:solid;border-color:#000}"]})};var zD=()=>["/juegos/ahorcado"],qD=()=>["/juegos/mayoromenor"],GD=()=>["/juegos/preguntados"],Hc=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["app-home"]],standalone:!0,features:[Ee],decls:17,vars:6,consts:[[1,"juegos"],["id","wrapper"],["id","gallery"],[3,"routerLink"]],template:function(t,i){t&1&&(k(0,"div",0)(1,"div",1)(2,"section")(3,"ul",2)(4,"li")(5,"a",3)(6,"p"),F(7,"Ahorcado"),x()()(),k(8,"li")(9,"a",3)(10,"p"),F(11,"Mayor Menor"),x()()(),k(12,"li")(13,"a",3)(14,"p"),F(15,"Preguntados"),x()()()()()(),de(16,"router-outlet"),x()),t&2&&(ge(5),Ze("routerLink",vn(3,zD)),ge(4),Ze("routerLink",vn(4,qD)),ge(4),Ze("routerLink",vn(5,GD)))},dependencies:[wt,Ca,Ts,Aa]})};function HD(n,e){n&1&&(k(0,"label",14),F(1,"Este correo ya esta registrado!"),x())}function WD(n,e){n&1&&(k(0,"label",15),F(1,"Las contrase\xF1as no coinciden!"),x())}var Wc=class n{constructor(e){this.router=e}fireAuth=U(Tt);pswdDontMatch=!1;mailAlreadyRegistered=!1;ngOnInit(){}register(e,t,i){return _(this,null,function*(){if(t!==i)this.pswdDontMatch=!0;else{this.pswdDontMatch=!1;try{(yield zy(this.fireAuth,e,t))&&this.router.navigateByUrl("/home")}catch(r){r instanceof tt&&r.code==="auth/email-already-in-use"?this.mailAlreadyRegistered=!0:console.error("Registration error:",r)}}})}static \u0275fac=function(t){return new(t||n)(se(Ve))};static \u0275cmp=we({type:n,selectors:[["app-registro"]],standalone:!0,features:[Ee],decls:23,vars:2,consts:[["userName",""],["userPassword",""],["confirmPassword",""],["id","container",1,"container"],[1,"form-container"],["type","email","placeholder","Email","required","",1,"formControl"],[3,"ngIf"],["type","password","placeholder","Password",1,"formControl"],["type","password","placeholder","Confirm Password",1,"formControl"],[3,"click"],[1,"overlay-container"],[1,"overlay"],[1,"overlay-panel","overlay-right"],["id","signUp","routerLink","/login",1,"ghost"],[1,"passwordMatch"],[1,"pswdMatch"]],template:function(t,i){if(t&1){let r=xi();k(0,"div",3)(1,"div",4)(2,"h1"),F(3,"Registro"),x(),de(4,"input",5,0),Kt(6,HD,2,0,"ng-template",6),de(7,"input",7,1)(9,"input",8,2),Kt(11,WD,2,0,"ng-template",6),k(12,"button",9),$("click",function(){Pt(r);let o=et(5),c=et(8),l=et(10);return kt(i.register(o.value,c.value,l.value))}),F(13,"Registrarse"),x()(),k(14,"div",10)(15,"div",11)(16,"div",12)(17,"h1"),F(18,"Bienvenido!"),x(),k(19,"p"),F(20,"Si ya tenes una cuenta por favor hace click en ingresar!"),x(),k(21,"button",13),F(22,"Ingresar"),x()()()()()}t&2&&(ge(6),Ze("ngIf",i.mailAlreadyRegistered),ge(5),Ze("ngIf",i.pswdDontMatch))},dependencies:[wt,na],styles:['@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{box-sizing:border-box}.pswdMatch[_ngcontent-%COMP%]{color:red;font-size:small}body[_ngcontent-%COMP%]{background:#f6f5f7;display:flex;justify-content:center;align-items:center;flex-direction:column;font-family:Montserrat,sans-serif;height:100vh;margin:-20px 0 50px}h1[_ngcontent-%COMP%]{font-weight:700;margin:0}h2[_ngcontent-%COMP%]{text-align:center}p[_ngcontent-%COMP%]{font-size:14px;font-weight:100;line-height:20px;letter-spacing:.5px;margin:20px 0 30px}span[_ngcontent-%COMP%]{font-size:12px}a[_ngcontent-%COMP%]{color:#333;font-size:14px;text-decoration:none;margin:15px 0}button[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #ff4b2b;background-color:#ff4b2b;color:#fff;font-size:12px;font-weight:700;padding:12px 45px;letter-spacing:1px;text-transform:uppercase;transition:transform 80ms ease-in}button[_ngcontent-%COMP%]:active{transform:scale(.95)}button[_ngcontent-%COMP%]:focus{outline:none}button.ghost[_ngcontent-%COMP%]{background-color:transparent;border-color:#fff}form[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 50px;height:100%;text-align:center}input[_ngcontent-%COMP%]{background-color:#eee;border:none;padding:12px 15px;margin:8px 0;width:100%}.container[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;position:absolute;margin:10% 10% 10% 25%;overflow:hidden;width:50%;height:60%;max-width:100%;min-height:480px}.form-container[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;align-items:center;padding:20% 5% 5%;top:0;height:100%;transition:all .6s ease-in-out;left:0;width:50%}.container.right-panel-active[_ngcontent-%COMP%]   .sign-in-container[_ngcontent-%COMP%]{transform:translate(100%)}.sign-up-container[_ngcontent-%COMP%]{left:0;width:50%;opacity:0;z-index:1}.container.right-panel-active[_ngcontent-%COMP%]   .sign-up-container[_ngcontent-%COMP%]{transform:translate(100%);opacity:1;z-index:5;animation:_ngcontent-%COMP%_show .6s}@keyframes _ngcontent-%COMP%_show{0%,49.99%{opacity:0;z-index:1}50%,to{opacity:1;z-index:5}}.overlay-container[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;width:50%;height:100%;overflow:hidden;transition:transform .6s ease-in-out;z-index:100}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-container[_ngcontent-%COMP%]{transform:translate(-100%)}.overlay[_ngcontent-%COMP%]{background:#ff416c;background:-webkit-linear-gradient(to right,#ff4b2b,#ff416c);background:linear-gradient(to right,#ff4b2b,#ff416c);background-repeat:no-repeat;background-size:cover;background-position:0 0;color:#fff;position:relative;left:-100%;height:100%;width:200%;transform:translate(0);transition:transform .6s ease-in-out}.container.right-panel-active[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{transform:translate(50%)}.overlay-panel[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 40px;text-align:center;top:0;height:100%;width:50%;transform:translate(0);transition:transform .6s ease-in-out}.overlay-left[_ngcontent-%COMP%]{transform:translate(-20%)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-left[_ngcontent-%COMP%]{transform:translate(0)}.overlay-right[_ngcontent-%COMP%]{right:0;transform:translate(0)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-right[_ngcontent-%COMP%]{transform:translate(20%)}.social-container[_ngcontent-%COMP%]{margin:20px 0}.social-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid #dddddd;border-radius:50%;display:inline-flex;justify-content:center;align-items:center;margin:0 5px;height:40px;width:40px}footer[_ngcontent-%COMP%]{background-color:#222;color:#fff;font-size:14px;bottom:0;position:fixed;left:0;right:0;text-align:center;z-index:999}footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0}footer[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:red}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3c97bf;text-decoration:none}']})};var lI="html[_ngcontent-%COMP%]{text-align:center;background-color:#fff;font-size:1vh;display:flex;flex-direction:column;align-items:center}@media (max-width: 66vh){html[_ngcontent-%COMP%]{font-size:1.5vw}}body[_ngcontent-%COMP%]{color:#cacaca;font-family:Cabin Sketch,Arial;margin:0;box-sizing:border-box;height:100vh;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-around}@media (max-width: 100vh){body[_ngcontent-%COMP%]{width:100vw}}svg[_ngcontent-%COMP%]{height:36vh}@media (max-width: 40vh){svg[_ngcontent-%COMP%]{height:90vw}}h1[_ngcontent-%COMP%]{font-size:5rem;font-weight:100;margin:2.5rem 0}h2[_ngcontent-%COMP%]{font-size:2rem;text-decoration:underline;cursor:pointer;font-weight:100;margin:1.7rem}h4[_ngcontent-%COMP%]{font-size:1rem}#keypad[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:6.4rem;padding:.3rem 1rem;cursor:pointer}#keypad[_ngcontent-%COMP%]   a.finished[_ngcontent-%COMP%]{cursor:default}#guessing[_ngcontent-%COMP%]{font-size:3rem;margin:2.4rem auto}#keypad[_ngcontent-%COMP%]   .correct-letter[_ngcontent-%COMP%]{color:#89d47b;cursor:no-drop}#keypad[_ngcontent-%COMP%]   .incorrect-letter[_ngcontent-%COMP%]{color:#f57b7b;cursor:no-drop}.hidden[_ngcontent-%COMP%]{display:none}[status=escaped][_ngcontent-%COMP%]{color:#89d47b}[status=hanged][_ngcontent-%COMP%]{color:#f57b7b}#tally[_ngcontent-%COMP%]{margin-bottom:1rem}span[_ngcontent-%COMP%]{font-size:3.3rem}#wins[_ngcontent-%COMP%], #losses[_ngcontent-%COMP%]{margin-right:4rem}a[_ngcontent-%COMP%]:hover{color:#fff}a[_ngcontent-%COMP%]:active{position:relative;top:2px}svg[_ngcontent-%COMP%]{stroke:#cacaca;stroke-width:3.8;stroke-linecap:round}",Kc=class n{afs=U(Rt);constructor(){}ngOnInit(){}wins=0;losses=0;abortions=0;gameInProcess;answer;maskedAnswer;wrongGuesses;masthead=document.querySelector("h1");commonWords=["jirafa","elefante","perro","ahora","camioneta","ahorcado","edificio","dinosaurio","computadora","programador","escalera","cuchillo","zorro","botella","persona"];newGame(){this.gameInProcess==!0&&this.aborted(),this.gameInProcess=!0,this.answer=this.newRandomWord(),this.wrongGuesses=0,this.maskedAnswer=[];for(var e of this.answer)this.maskedAnswer.push("_");this.updateDisplayWord(),this.hang()}newRandomWord(){return this.commonWords[Math.floor(Math.random()*this.commonWords.length)]}verifyGuess(e){if(String(this.answer).toLowerCase().includes(e)){for(var t in this.maskedAnswer)this.answer[t]==e&&(this.maskedAnswer[t]=this.answer[t]);this.updateDisplayWord(),this.maskedAnswer.includes("_")==!1&&this.escaped()}else this.wrongGuesses++,this.hang()}updateDisplayWord(){var e="";for(var t of this.maskedAnswer)e+=t+" ";e.slice(0,-1),document.querySelector("#guessing").textContent=e}aborted(){this.abortions++,this.unhideAll(".abortions")}hang(){switch(this.wrongGuesses){case 0:this.hideAll("svg *");break;case 1:this.unhideAll(".gallows");break;case 2:this.unhide("#head");break;case 3:this.unhide("#body");break;case 4:this.unhide("#left-arm");break;case 5:this.unhide("#right-arm");break;case 6:this.unhide("#left-leg");break;case 7:this.unhide("#right-leg"),this.hanged();break;default:this.newGame()}}hanged(){this.gameInProcess=!1,alert("Fallaste! La respuesta correcta era: "+this.answer),this.wins=0,this.unhideAll(".losses");var e="";for(var t of this.answer)e+=t+" ";e.slice(0,-1),document.querySelector("#guessing").textContent=e;var i=ln(this.afs,"puntajesAhorcado"),r={nombre:localStorage.getItem("user"),fecha:Date.now(),puntaje:this.wins};Ln(i,r)}escaped(){this.gameInProcess=!1,alert("Felicitaciones, ganaste!!"),this.wins++,this.newGame()}resetKeypad(){document.querySelectorAll("#keypad div").forEach(e=>e.innerText=""),this.populateRow(1,"QWERTYUIOP"),this.populateRow(2,"ASDFGHJKL"),this.populateRow(3,"ZXCVBNM")}populateRow(e,t){for(let i of t){let r=document.createElement("a");document.querySelector("#keypad--row"+e).insertAdjacentHTML("beforeend","<a #"+i.toLowerCase()+" (click) = 'verifyGuess("+i.toLowerCase()+".id)' >"+i+"</a>")}}unhide(e){document.querySelector(e).classList.toggle("hidden",!1)}hideAll(e){document.querySelectorAll(e).forEach(t=>t.classList.toggle("hidden",!0))}unhideAll(e){document.querySelectorAll(e).forEach(t=>t.classList.toggle("hidden",!1))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["app-ahorcado"]],standalone:!0,features:[Ee],decls:83,vars:1,consts:[["lang","en"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1, shrink-to-fit=no"],["href",qm`https://fonts.googleapis.com/css?family=Cabin+Sketch`,"rel","stylesheet"],["viewBox","0 0 225 250"],["x1","2","x2","210","y1","9","y2","9",1,"gallows"],["x1","20","x2","20","y1","245","y2","9",1,"gallows"],["x1","50","x2","20","y1","9","y2","40",1,"gallows"],["id","head","cx","115","cy","67","r","25","fill","none"],["id","body","x1","115","x2","115","y1","173","y2","93"],["id","left-arm","x1","115","x2","75","y1","116","y2","105"],["id","right-arm","x1","115","x2","155","y1","116","y2","105"],["id","left-leg","x1","115","x2","85","y1","173","y2","220"],["id","right-leg","x1","145","x2","115","y1","220","y2","173"],["id","guessing"],["id","keypad"],["id","keypad--row1"],[3,"click"],["id","keypad--row2"],["id","keypad--row3"],["id","new-game",3,"click"]],template:function(t,i){t&1&&(k(0,"html",0)(1,"head"),de(2,"meta",1)(3,"meta",2),k(4,"title"),F(5,"Ahorcado!!"),x(),de(6,"link",3),x(),k(7,"body")(8,"h1"),F(9,"Ahorcado"),x(),Di(),k(10,"svg",4),de(11,"line",5)(12,"line",6)(13,"line",7)(14,"circle",8)(15,"line",9)(16,"line",10)(17,"line",11)(18,"line",12)(19,"line",13),x(),Pi(),de(20,"div",14),k(21,"div",15)(22,"div",16)(23,"button",17),$("click",function(){return i.verifyGuess("q")}),F(24,"Q"),x(),k(25,"button",17),$("click",function(){return i.verifyGuess("w")}),F(26,"W"),x(),k(27,"button",17),$("click",function(){return i.verifyGuess("e")}),F(28,"E"),x(),k(29,"button",17),$("click",function(){return i.verifyGuess("r")}),F(30,"R"),x(),k(31,"button",17),$("click",function(){return i.verifyGuess("t")}),F(32,"T"),x(),k(33,"button",17),$("click",function(){return i.verifyGuess("y")}),F(34,"Y"),x(),k(35,"button",17),$("click",function(){return i.verifyGuess("u")}),F(36,"U"),x(),k(37,"button",17),$("click",function(){return i.verifyGuess("i")}),F(38,"I"),x(),k(39,"button",17),$("click",function(){return i.verifyGuess("o")}),F(40,"O"),x(),k(41,"button",17),$("click",function(){return i.verifyGuess("p")}),F(42,"P"),x()(),k(43,"div",18)(44,"button",17),$("click",function(){return i.verifyGuess("a")}),F(45,"A"),x(),k(46,"button",17),$("click",function(){return i.verifyGuess("s")}),F(47,"S"),x(),k(48,"button",17),$("click",function(){return i.verifyGuess("d")}),F(49,"D"),x(),k(50,"button",17),$("click",function(){return i.verifyGuess("f")}),F(51,"F"),x(),k(52,"button",17),$("click",function(){return i.verifyGuess("g")}),F(53,"G"),x(),k(54,"button",17),$("click",function(){return i.verifyGuess("h")}),F(55,"H"),x(),k(56,"button",17),$("click",function(){return i.verifyGuess("j")}),F(57,"J"),x(),k(58,"button",17),$("click",function(){return i.verifyGuess("k")}),F(59,"K"),x(),k(60,"button",17),$("click",function(){return i.verifyGuess("l")}),F(61,"L"),x()(),k(62,"div",19)(63,"button",17),$("click",function(){return i.verifyGuess("z")}),F(64,"Z"),x(),k(65,"button",17),$("click",function(){return i.verifyGuess("x")}),F(66,"X"),x(),k(67,"button",17),$("click",function(){return i.verifyGuess("c")}),F(68,"C"),x(),k(69,"button",17),$("click",function(){return i.verifyGuess("v")}),F(70,"V"),x(),k(71,"button",17),$("click",function(){return i.verifyGuess("b")}),F(72,"B"),x(),k(73,"button",17),$("click",function(){return i.verifyGuess("n")}),F(74,"N"),x(),k(75,"button",17),$("click",function(){return i.verifyGuess("m")}),F(76,"M"),x()()(),k(77,"h2",20),$("click",function(){return i.newGame()}),k(78,"a"),F(79,"Juego Nuevo"),x()(),de(80,"br"),k(81,"h4"),F(82),x()()()),t&2&&(ge(82),xt("Victorias consecutivas: ",i.wins,""))},styles:[lI,lI]})};var Qc=class n{itemImageUrl="cartas.jpg";cartas=new Array;right=0;bottom=0;aciertos=0;numeroAnterior=0;afs=U(Rt);constructor(){}ngOnInit(){var e=Math.trunc(Math.random()*52);this.numeroAnterior=e%13,this.right=225*(e%13),this.bottom=Math.trunc(e/13)*315}getSpriteStyle=function(e){var t=Math.trunc(e/13);return console.log("background-position: "+225*(e%13)+" "+t*315+"px;"),"background-position: "+225*(e%13)+" "+t*315+"px;"};apuestaMayor(){var e=Math.trunc(Math.random()*52);this.numeroAnterior<=e%13?this.aciertos++:this.perdio(),this.numeroAnterior=e%13,this.right=225*(e%13),this.bottom=Math.trunc(e/13)*315}apuestaMenor(){var e=Math.trunc(Math.random()*52);this.numeroAnterior>=e%13?this.aciertos++:this.perdio(),this.right=225*(e%13),this.numeroAnterior=e%13,this.bottom=Math.trunc(e/13)*315}perdio(){var e=ln(this.afs,"puntajesMayorMenor"),t={nombre:localStorage.getItem("user"),fecha:Date.now(),puntaje:this.aciertos};Ln(e,t),this.aciertos=0}cartaRandom(){var e=document.getElementsByClassName("carta")[0],t=Math.trunc(Math.random()*52);this.right=225*(t%13),this.bottom=Math.trunc(t/13)*315,this.numeroAnterior=t%13}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["app-mayormenor"]],standalone:!0,features:[Ee],decls:15,vars:9,consts:[[1,"carta"],[1,"interfaz"],[3,"click"]],template:function(t,i){t&1&&(k(0,"div",0),de(1,"div",0),x(),k(2,"div",1)(3,"Label"),F(4,"Indique si la proxima carta sera mayor o menor:"),x(),de(5,"br"),k(6,"button",2),$("click",function(){return i.apuestaMayor()}),F(7,"Mayor"),x(),k(8,"button",2),$("click",function(){return i.apuestaMenor()}),F(9,"Menor"),x(),de(10,"br"),k(11,"Label"),F(12),x(),k(13,"button",2),$("click",function(){return i.cartaRandom()}),F(14,"Carta Random"),x()()),t&2&&(ge(),Ym("background","url(cartas.jpg)")("width",225,"px")("height",315,"px")("background-position","right "+i.right+"px bottom "+i.bottom+"px"),ge(11),xt("Total de Aciertos Seguidos: ",i.aciertos,""))},dependencies:[wt],styles:["element.syle[_ngcontent-%COMP%]{background-position-x:225px;background-position-y:315px}.interfaz[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;color:#fff}.interfaz[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#000}.carta[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}"]})};var yI=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(se(Jr),se(It))},e.\u0275dir=ht({type:e});let n=e;return n})(),KD=(()=>{let e=class e extends yI{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Kr(e)))(s||e)}})(),e.\u0275dir=ht({type:e,features:[Xr]});let n=e;return n})(),vI=new ie("");var QD={provide:vI,useExisting:Bu(()=>eu),multi:!0};function YD(){let n=Oi()?Oi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var JD=new ie(""),eu=(()=>{let e=class e extends yI{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!YD())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(se(Jr),se(It),se(JD,8))},e.\u0275dir=ht({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&$("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[Hn([QD]),Xr]});let n=e;return n})();var XD=new ie(""),ZD=new ie("");function II(n){return n!=null}function wI(n){return Zo(n)?Qe(n):n}function EI(n){let e={};return n.forEach(t=>{e=t!=null?V(V({},e),t):e}),Object.keys(e).length===0?null:e}function bI(n,e){return e.map(t=>t(n))}function eP(n){return!n.validate}function TI(n){return n.map(e=>eP(e)?e:t=>e.validate(t))}function tP(n){if(!n)return null;let e=n.filter(II);return e.length==0?null:function(t){return EI(bI(t,e))}}function AI(n){return n!=null?tP(TI(n)):null}function nP(n){if(!n)return null;let e=n.filter(II);return e.length==0?null:function(t){let i=bI(t,e).map(wI);return xm(i).pipe(ae(EI))}}function CI(n){return n!=null?nP(TI(n)):null}function hI(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function iP(n){return n._rawValidators}function rP(n){return n._rawAsyncValidators}function yp(n){return n?Array.isArray(n)?n:[n]:[]}function Jc(n,e){return Array.isArray(n)?n.includes(e):n===e}function dI(n,e){let t=yp(e);return yp(n).forEach(r=>{Jc(t,r)||t.push(r)}),t}function fI(n,e){return yp(e).filter(t=>!Jc(n,t))}var Xc=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=AI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=CI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},vp=class extends Xc{get formDirective(){return null}get path(){return null}},bo=class extends Xc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ip=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},sP={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},qO=ce(V({},sP),{"[class.ng-submitted]":"isSubmitted"}),SI=(()=>{let e=class e extends Ip{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(se(bo,2))},e.\u0275dir=ht({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&Yo("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Xr]});let n=e;return n})();var vo="VALID",Yc="INVALID",br="PENDING",Io="DISABLED",Ar=class{},Zc=class extends Ar{constructor(e,t){super(),this.value=e,this.source=t}},wo=class extends Ar{constructor(e,t){super(),this.pristine=e,this.source=t}},Eo=class extends Ar{constructor(e,t){super(),this.touched=e,this.source=t}},Tr=class extends Ar{constructor(e,t){super(),this.status=e,this.source=t}};function oP(n){return(tu(n)?n.validators:n)||null}function aP(n){return Array.isArray(n)?AI(n):n||null}function cP(n,e){return(tu(e)?e.asyncValidators:n)||null}function uP(n){return Array.isArray(n)?CI(n):n||null}function tu(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var wp=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ta(()=>this.statusReactive()),this.statusReactive=Qo(void 0),this._pristine=ta(()=>this.pristineReactive()),this.pristineReactive=Qo(!0),this._touched=ta(()=>this.touchedReactive()),this.touchedReactive=Qo(!1),this._events=new ut,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Wn(this.statusReactive)}set status(e){Wn(()=>this.statusReactive.set(e))}get valid(){return this.status===vo}get invalid(){return this.status===Yc}get pending(){return this.status==br}get disabled(){return this.status===Io}get enabled(){return this.status!==Io}get pristine(){return Wn(this.pristineReactive)}set pristine(e){Wn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Wn(this.touchedReactive)}set touched(e){Wn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(dI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(dI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(fI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(fI(e,this._rawAsyncValidators))}hasValidator(e){return Jc(this._rawValidators,e)}hasAsyncValidator(e){return Jc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ce(V({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Eo(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Eo(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ce(V({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new wo(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new wo(!0,i))}markAsPending(e={}){this.status=br;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Tr(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ce(V({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Io,this.errors=null,this._forEachChild(r=>{r.disable(ce(V({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Zc(this.value,i)),this._events.next(new Tr(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=vo,this._forEachChild(i=>{i.enable(ce(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vo||this.status===br)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Zc(this.value,t)),this._events.next(new Tr(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ce(V({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Io:vo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=br,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=wI(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Tr(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new vt,this.statusChanges=new vt}_calculateStatus(){return this._allControlsDisabled()?Io:this.errors?Yc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(br)?br:this._anyControlsHaveStatus(Yc)?Yc:vo}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new wo(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Eo(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){tu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=aP(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=uP(this._rawAsyncValidators)}};var RI=new ie("CallSetDisabledState",{providedIn:"root",factory:()=>Ep}),Ep="always";function lP(n,e){return[...e.path,n]}function hP(n,e,t=Ep){fP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),pP(n,e),gP(n,e),mP(n,e),dP(n,e)}function pI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dP(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function fP(n,e){let t=iP(n);e.validator!==null?n.setValidators(hI(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=rP(n);e.asyncValidator!==null?n.setAsyncValidators(hI(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();pI(e._rawValidators,r),pI(e._rawAsyncValidators,r)}function pP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&DI(n,e)})}function mP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&DI(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function DI(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function gP(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function _P(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function yP(n){return Object.getPrototypeOf(n.constructor)===KD}function vP(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===eu?t=s:yP(s)?i=s:r=s}),r||i||t||null}function mI(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function gI(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var IP=class extends wp{constructor(e=null,t,i){super(oP(t),cP(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),tu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(gI(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){mI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){mI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){gI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var wP={provide:bo,useExisting:Bu(()=>bp)},_I=Promise.resolve(),bp=(()=>{let e=class e extends bo{constructor(i,r,s,o,c,l){super(),this._changeDetectorRef=c,this.callSetDisabledState=l,this.control=new IP,this._registered=!1,this.name="",this.update=new vt,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=vP(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),_P(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){hP(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){_I.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&In(r);_I.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?lP(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(se(vp,9),se(XD,10),se(ZD,10),se(vI,10),se(Ni,8),se(RI,8))},e.\u0275dir=ht({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Hn([wP]),Xr,Ri]});let n=e;return n})();var EP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({});let n=e;return n})();var PI=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:RI,useValue:i.callSetDisabledState??Ep}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[EP]});let n=e;return n})();var nu={apiKey:"AIzaSyArH1Lj3pGRhHUfPD6oLZKh-WmzJO1hc78",authDomain:"tp-labo4-7b1a6.firebaseapp.com",projectId:"tp-labo4-7b1a6",storageBucket:"tp-labo4-7b1a6.appspot.com",messagingSenderId:"671600234993",appId:"1:671600234993:web:3d27fe521fa3d244063450"};var iu=class n{db=zc(Ns(nu));constructor(){}sendMessage(e){return _(this,null,function*(){let t=ln(this.db,"messages");yield Ln(t,ce(V({},e),{timestamp:new Date}))})}getMessages(){let e=ln(this.db,"messages"),t=G0(e,q0("timestamp"));return new qn(i=>({unsubscribe:z0(t,s=>{let o=s.docs.map(c=>V({id:c.id},c.data()));i.next(o)})}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})};function AP(n,e){if(n&1&&(k(0,"div")(1,"strong"),F(2),x(),F(3),x()),n&2){let t=e.$implicit;ge(2),xt("",t.sender,":"),ge(),xt(" ",t.content," ")}}var ru=class n{constructor(e){this.chatService=e}messages=[];newMessage="";sender=localStorage.getItem("user")||"Guest";ngOnInit(){this.chatService.getMessages().subscribe(e=>{this.messages=e})}sendMessage(){this.newMessage.trim()&&(this.chatService.sendMessage({content:this.newMessage,sender:this.sender,timestamp:new Date}),this.newMessage="")}static \u0275fac=function(t){return new(t||n)(se(iu))};static \u0275cmp=we({type:n,selectors:[["app-chat"]],standalone:!0,features:[Ee],decls:6,vars:2,consts:[[1,"chat-container"],[1,"messages"],[4,"ngFor","ngForOf"],["placeholder","Escribi tu mensaje...",3,"ngModelChange","ngModel"],[3,"click"]],template:function(t,i){t&1&&(k(0,"div",0)(1,"div",1),Kt(2,AP,4,2,"div",2),x(),k(3,"input",3),Zm("ngModelChange",function(s){return Xm(i.newMessage,s)||(i.newMessage=s),s}),x(),k(4,"button",4),$("click",function(){return i.sendMessage()}),F(5,"Enviar"),x()()),t&2&&(ge(2),Ze("ngForOf",i.messages),ge(),Jm("ngModel",i.newMessage))},dependencies:[wt,dg,PI,eu,SI,bp],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;display:flex;justify-content:center;align-items:center;background-color:#f4f4f9}.chat-container[_ngcontent-%COMP%]{width:400px;border:1px solid #ccc;padding:10px;background-color:#fff;box-shadow:0 4px 10px #0000001a;display:flex;flex-direction:column}.messages[_ngcontent-%COMP%]{height:400px;overflow-y:scroll;border-bottom:1px solid #ccc;margin-bottom:10px}input[_ngcontent-%COMP%]{width:calc(100% - 70px);padding:10px;margin-right:10px;border:1px solid #ccc;border-radius:4px;outline:none}button[_ngcontent-%COMP%]{padding:10px;border:none;background-color:#007bff;color:#fff;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})};var kI=[{path:"",component:qc},{path:"",redirectTo:"login",pathMatch:"full"},{path:"home",component:Hc},{path:"quien-soy",component:Gc},{path:"registro",component:Wc},{path:"chat",component:ru},{path:"juegos/ahorcado",component:Kc},{path:"juegos/mayoromenor",component:Qc}];var CP="@",SP=(()=>{let e=class e{constructor(i,r,s,o,c){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=c,this._rendererFactoryPromise=null,this.scheduler=U(Hm,{optional:!0}),this.loadingSchedulerFn=U(RP,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let i=()=>this.moduleImpl??import("./chunk-SSNYYCIO.js").then(s=>s),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(i):r=i(),r.catch(s=>{throw new Te(5300,!1)}).then(({\u0275createEngine:s,\u0275AnimationRendererFactory:o})=>{this._engine=s(this.animationType,this.doc);let c=new o(this.delegate,this._engine,this.zone);return this.delegate=c,c})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new Tp(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(c=>{let l=c.createRenderer(i,r);o.use(l),this.scheduler?.notify(10)}).catch(c=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){Wo()},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),Tp=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(CP)}},RP=new ie("");function xI(n="animations"){return Km("NgAsyncAnimations"),_t([{provide:Ko,useFactory:(e,t,i)=>new SP(e,t,i,n),deps:[ke,ra,ye]},{provide:qu,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var MI={providers:[ng({eventCoalescing:!0}),f_(kI),xI(),G_(()=>H_(nu)),$y(()=>qy()),$0(()=>zc())]};var DP=()=>["/quien-soy"],PP=()=>["/home"],kP=()=>["/chat"];function xP(n,e){if(n&1){let t=xi();k(0,"div")(1,"h1"),F(2),x(),k(3,"a",4),$("click",function(){Pt(t);let r=Jo();return kt(r.logOff())}),F(4,"Log-Out"),x()()}if(n&2){let t=Jo();ge(2),xt("Bienvenido, ",t.userName,"!")}}function MP(n,e){n&1&&(k(0,"h2"),F(1,"No estas Logeado."),x(),k(2,"a"),F(3,"LogIn"),x(),k(4,"a"),F(5,"Registrarse"),x())}var su=class n{constructor(e){this.router=e;this.user=this.auth.currentUser,this.userName=""}user;userName;auth=U(Tt);ngOnInit(){Gy(this.auth,e=>{this.user?.email?this.userName=this.user.email:this.userName="Guest"})}logOff(){return _(this,null,function*(){yield this.auth.signOut().then(()=>{this.router.navigateByUrl("")})})}static \u0275fac=function(t){return new(t||n)(se(Ve))};static \u0275cmp=we({type:n,selectors:[["app-navbar"]],standalone:!0,features:[Ee],decls:14,vars:8,consts:[["noUser",""],["id","navbar",1,"navbar"],[4,"ngIf","ngIfElse"],[3,"routerLink"],[3,"click"]],template:function(t,i){if(t&1&&(k(0,"nav",1)(1,"ul")(2,"li"),Kt(3,xP,5,1,"div",2),x(),k(4,"li"),Kt(5,MP,6,0,"ng-template",null,0,eg),x(),k(7,"li")(8,"a",3),F(9,"\xBFQuien Soy?"),x(),k(10,"a",3),F(11,"Home"),x(),k(12,"a",3),F(13,"Chatroom"),x()()()()),t&2){let r=et(6);ge(3),Ze("ngIf",i.userName)("ngIfElse",r),ge(5),Ze("routerLink",vn(5,DP)),ge(2),Ze("routerLink",vn(6,PP)),ge(2),Ze("routerLink",vn(7,kP))}},dependencies:[wt,na,Ca,Aa],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f4f4f9;margin:0;padding:0;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh}nav[_ngcontent-%COMP%]{background-color:#333;padding:10px 0;box-shadow:0 4px 6px #0000001a;position:fixed;top:0;width:100%;z-index:1000}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;display:flex;justify-content:space-around;align-items:center}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;padding:5px;color:#fff;font-weight:700;transition:color .3s ease}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f4f4f9;text-decoration:underline}nav[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:1.5rem}nav[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#bbb;margin:0;font-size:1.2rem}nav[_ngcontent-%COMP%]   .noUser[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:10px;color:#ff6f61;font-weight:700}.noUser[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ff3b28}h2[_ngcontent-%COMP%]{color:#ff6f61;font-size:2rem;margin-top:20px;text-align:center}@media (max-width: 768px){nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{flex-direction:column}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 0}h2[_ngcontent-%COMP%]{font-size:1.5rem}}body[_ngcontent-%COMP%]{padding-top:60px}']})};var ou=class n{title="TP-Sala-De-Juegos";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["app-root"]],standalone:!0,features:[Ee],decls:2,vars:0,template:function(t,i){t&1&&de(0,"app-navbar")(1,"router-outlet")},dependencies:[Ts,su]})};bg(ou,MI).catch(n=>console.error(n));
