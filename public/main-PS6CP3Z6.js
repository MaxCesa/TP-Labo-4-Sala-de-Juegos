import{$ as gu,$a as pa,$b as Gg,A as hu,Aa as ua,Ab as bu,B as sa,Ba as Ig,Bb as ya,C as du,Ca as Mt,Cb as va,D as hg,Da as yu,Db as wa,E as Dt,Ea as ls,Eb as Og,F as ji,Fa as vu,Fb as Hi,G as Cn,Ga as Eg,Gb as Ng,H as dg,Ha as bg,Hb as Vg,I as fu,Ia as us,Ib as kn,J as Sn,Ja as J,Jb as Ia,K as fg,Ka as he,Kb as ai,L as Bi,La as ha,Lb as Fg,M as Rn,Ma as Tg,Mb as Ki,N as pu,Na as da,Nb as Lg,O as pg,Oa as hs,Ob as Ug,P as mg,Pa as Ag,Pb as xe,Q as gg,Qa as wu,Qb as jg,R as oa,Ra as fa,Rb as ms,S as ht,Sa as ds,Sb as Bg,T as aa,Ta as fs,Tb as zg,U as Ve,Ua as Cg,Ub as gs,V as Ce,Va as Iu,Vb as Ea,W as mu,Wa as Ue,Wb as ba,X as W,Xa as Eu,Xb as bt,Y as Xe,Ya as Gi,Yb as $g,Z as _g,Za as de,Zb as ke,_ as se,_a as Sg,_b as qg,a as F,aa as z,ab as D,ac as Ta,b as ge,ba as L,bb as P,bc as Wg,ca as st,cb as oe,cc as Aa,d as Tn,da as yg,db as ft,e as _,ea as as,eb as $,f as sg,fa as we,fb as Ge,g as og,ga as Ze,gb as si,h as Bt,ha as It,hb as Dn,i as ou,ia as dt,ib as Pn,j as au,ja as vg,jb as ne,k as vt,ka as ri,kb as M,l as wt,la as Et,lb as ma,m as ag,ma as zi,mb as ot,n as cg,na as ee,nb as Rg,o as An,oa as te,ob as Dg,p as cu,pa as $i,pb as Pg,q as lu,qa as qi,qb as oi,r as uu,ra as cs,rb as Ie,s as qe,sa as _u,sb as pt,t as K,ta as Pt,tb as kg,u as os,ua as ca,ub as xg,v as lg,va as kt,vb as ps,w as ug,wa as be,wb as Wi,x as ce,xa as la,xb as Mg,y as Ui,ya as xt,yb as ga,z as ut,za as wg,zb as _a}from"./chunk-X5PNKEAD.js";var ys=class{},Sa=class{},nn=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Au=class{encodeKey(e){return Hg(e)}encodeValue(e){return Hg(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function nE(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,c]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(c),t.set(o,l)}),t}var iE=/%(\d[a-f0-9])/gi,rE={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Hg(n){return encodeURIComponent(n).replace(iE,(e,t)=>rE[t]??e)}function Ca(n){return`${n}`}var Mn=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Au,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=nE(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(Ca):[Ca(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Ca(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Ca(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Cu=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function sE(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Kg(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Qg(n){return typeof Blob<"u"&&n instanceof Blob}function Yg(n){return typeof FormData<"u"&&n instanceof FormData}function oE(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var _s=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(sE(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new nn,this.context??=new Cu,!this.params)this.params=new Mn,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),l=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Kg(this.body)||Qg(this.body)||Yg(this.body)||oE(this.body)?this.body:this.body instanceof Mn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Yg(this.body)?null:Qg(this.body)?this.body.type||null:Kg(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Mn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,h=e.headers||this.headers,f=e.params||this.params,m=e.context??this.context;return e.setHeaders!==void 0&&(h=Object.keys(e.setHeaders).reduce((w,C)=>w.set(C,e.setHeaders[C]),h)),e.setParams&&(f=Object.keys(e.setParams).reduce((w,C)=>w.set(C,e.setParams[C]),f)),new n(t,i,o,{params:f,headers:h,context:m,reportProgress:l,responseType:r,withCredentials:c,transferCache:s})}},On=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(On||{}),vs=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new nn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Ra=class n extends vs{constructor(e={}){super(e),this.type=On.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ws=class n extends vs{constructor(e={}){super(e),this.type=On.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},xn=class extends vs{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},e_=200,aE=204;function Tu(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Du=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof _s)o=i;else{let h;s.headers instanceof nn?h=s.headers:h=new nn(s.headers);let f;s.params&&(s.params instanceof Mn?f=s.params:f=new Mn({fromObject:s.params})),o=new _s(i,r,s.body!==void 0?s.body:null,{headers:h,context:s.context,params:f,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let c=K(o).pipe(Cn(h=>this.handler.handle(h)));if(i instanceof _s||s.observe==="events")return c;let l=c.pipe(Dt(h=>h instanceof ws));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(ce(h=>{if(h.body!==null&&!(h.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return h.body}));case"blob":return l.pipe(ce(h=>{if(h.body!==null&&!(h.body instanceof Blob))throw new Error("Response is not a Blob.");return h.body}));case"text":return l.pipe(ce(h=>{if(h.body!==null&&typeof h.body!="string")throw new Error("Response is not a string.");return h.body}));case"json":default:return l.pipe(ce(h=>h.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new Mn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,Tu(s,r))}post(i,r,s={}){return this.request("POST",i,Tu(s,r))}put(i,r,s={}){return this.request("PUT",i,Tu(s,r))}};e.\u0275fac=function(r){return new(r||e)(z(ys))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),cE=/^\)\]\}',?\n/,lE="X-Request-URL";function Jg(n){if(n.url)return n.url;let e=lE.toLocaleLowerCase();return n.headers.get(e)}var uE=(()=>{let e=class e{constructor(){this.fetchImpl=L(Su,{optional:!0})?.fetch??((...i)=>globalThis.fetch(...i)),this.ngZone=L(be)}handle(i){return new Bt(r=>{let s=new AbortController;return this.doRequest(i,s.signal,r).then(Ru,o=>r.error(new xn({error:o}))),()=>s.abort()})}doRequest(i,r,s){return _(this,null,function*(){let o=this.createRequestInit(i),c;try{let k=this.ngZone.runOutsideAngular(()=>this.fetchImpl(i.urlWithParams,F({signal:r},o)));hE(k),s.next({type:On.Sent}),c=yield k}catch(k){s.error(new xn({error:k,status:k.status??0,statusText:k.statusText,url:i.urlWithParams,headers:k.headers}));return}let l=new nn(c.headers),h=c.statusText,f=Jg(c)??i.urlWithParams,m=c.status,w=null;if(i.reportProgress&&s.next(new Ra({headers:l,status:m,statusText:h,url:f})),c.body){let k=c.headers.get("content-length"),N=[],R=c.body.getReader(),U=0,q,H,Z=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>_(this,null,function*(){for(;;){let{done:ae,value:E}=yield R.read();if(ae)break;if(N.push(E),U+=E.length,i.reportProgress){H=i.responseType==="text"?(H??"")+(q??=new TextDecoder).decode(E,{stream:!0}):void 0;let g=()=>s.next({type:On.DownloadProgress,total:k?+k:void 0,loaded:U,partialText:H});Z?Z.run(g):g()}}}));let Pe=this.concatChunks(N,U);try{let ae=c.headers.get("Content-Type")??"";w=this.parseBody(i,Pe,ae)}catch(ae){s.error(new xn({error:ae,headers:new nn(c.headers),status:c.status,statusText:c.statusText,url:Jg(c)??i.urlWithParams}));return}}m===0&&(m=w?e_:0),m>=200&&m<300?(s.next(new ws({body:w,headers:l,status:m,statusText:h,url:f})),s.complete()):s.error(new xn({error:w,headers:l,status:m,statusText:h,url:f}))})}parseBody(i,r,s){switch(i.responseType){case"json":let o=new TextDecoder().decode(r).replace(cE,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:s});case"arraybuffer":return r.buffer}}createRequestInit(i){let r={},s=i.withCredentials?"include":void 0;if(i.headers.forEach((o,c)=>r[o]=c.join(",")),i.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!i.headers.has("Content-Type")){let o=i.detectContentTypeHeader();o!==null&&(r["Content-Type"]=o)}return{body:i.serializeBody(),method:i.method,headers:r,credentials:s}}concatChunks(i,r){let s=new Uint8Array(r),o=0;for(let c of i)s.set(c,o),o+=c.length;return s}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),Su=class{};function Ru(){}function hE(n){n.then(Ru,Ru)}function dE(n,e){return e(n)}function fE(n,e,t){return(i,r)=>Et(t,()=>e(i,s=>n(s,r)))}var t_=new se(""),pE=new se(""),mE=new se("",{providedIn:"root",factory:()=>!0});var Xg=(()=>{let e=class e extends ys{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=L(ca),this.contributeToStability=L(mE)}handle(i){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(t_),...this.injector.get(pE,[])]));this.chain=r.reduceRight((s,o)=>fE(s,o,this.injector),dE)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(i,s=>this.backend.handle(s)).pipe(Bi(()=>this.pendingTasks.remove(r)))}else return this.chain(i,r=>this.backend.handle(r))}};e.\u0275fac=function(r){return new(r||e)(z(Sa),z(ri))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();var gE=/^\)\]\}',?\n/;function _E(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var Zg=(()=>{let e=class e{constructor(i){this.xhrFactory=i}handle(i){if(i.method==="JSONP")throw new Ce(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?qe(r.\u0275loadImpl()):K(null)).pipe(ht(()=>new Bt(o=>{let c=r.build();if(c.open(i.method,i.urlWithParams),i.withCredentials&&(c.withCredentials=!0),i.headers.forEach((R,U)=>c.setRequestHeader(R,U.join(","))),i.headers.has("Accept")||c.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){let R=i.detectContentTypeHeader();R!==null&&c.setRequestHeader("Content-Type",R)}if(i.responseType){let R=i.responseType.toLowerCase();c.responseType=R!=="json"?R:"text"}let l=i.serializeBody(),h=null,f=()=>{if(h!==null)return h;let R=c.statusText||"OK",U=new nn(c.getAllResponseHeaders()),q=_E(c)||i.url;return h=new Ra({headers:U,status:c.status,statusText:R,url:q}),h},m=()=>{let{headers:R,status:U,statusText:q,url:H}=f(),Z=null;U!==aE&&(Z=typeof c.response>"u"?c.responseText:c.response),U===0&&(U=Z?e_:0);let Pe=U>=200&&U<300;if(i.responseType==="json"&&typeof Z=="string"){let ae=Z;Z=Z.replace(gE,"");try{Z=Z!==""?JSON.parse(Z):null}catch(E){Z=ae,Pe&&(Pe=!1,Z={error:E,text:Z})}}Pe?(o.next(new ws({body:Z,headers:R,status:U,statusText:q,url:H||void 0})),o.complete()):o.error(new xn({error:Z,headers:R,status:U,statusText:q,url:H||void 0}))},w=R=>{let{url:U}=f(),q=new xn({error:R,status:c.status||0,statusText:c.statusText||"Unknown Error",url:U||void 0});o.error(q)},C=!1,k=R=>{C||(o.next(f()),C=!0);let U={type:On.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(U.total=R.total),i.responseType==="text"&&c.responseText&&(U.partialText=c.responseText),o.next(U)},N=R=>{let U={type:On.UploadProgress,loaded:R.loaded};R.lengthComputable&&(U.total=R.total),o.next(U)};return c.addEventListener("load",m),c.addEventListener("error",w),c.addEventListener("timeout",w),c.addEventListener("abort",w),i.reportProgress&&(c.addEventListener("progress",k),l!==null&&c.upload&&c.upload.addEventListener("progress",N)),c.send(l),o.next({type:On.Sent}),()=>{c.removeEventListener("error",w),c.removeEventListener("abort",w),c.removeEventListener("load",m),c.removeEventListener("timeout",w),i.reportProgress&&(c.removeEventListener("progress",k),l!==null&&c.upload&&c.upload.removeEventListener("progress",N)),c.readyState!==c.DONE&&c.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(z(Aa))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),n_=new se(""),yE="XSRF-TOKEN",vE=new se("",{providedIn:"root",factory:()=>yE}),wE="X-XSRF-TOKEN",IE=new se("",{providedIn:"root",factory:()=>wE}),Da=class{},EE=(()=>{let e=class e{constructor(i,r,s){this.doc=i,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ea(i,this.cookieName),this.lastCookieString=i),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(z(xe),z(Mt),z(vE))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function bE(n,e){let t=n.url.toLowerCase();if(!L(n_)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=L(Da).getToken(),r=L(IE);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}function i_(...n){let e=[Du,Zg,Xg,{provide:ys,useExisting:Xg},{provide:Sa,useFactory:()=>L(uE,{optional:!0})??L(Zg)},{provide:t_,useValue:bE,multi:!0},{provide:n_,useValue:!0},{provide:Da,useClass:EE}];for(let t of n)e.push(...t.\u0275providers);return dt(e)}var xu=class extends Ug{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Mu=class n extends xu{static makeCurrent(){Lg(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=AE();return t==null?null:CE(t)}resetBaseElement(){Is=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ea(document.cookie,e)}},Is=null;function AE(){return Is=Is||document.querySelector("base"),Is?Is.getAttribute("href"):null}function CE(n){return new URL(n,document.baseURI).pathname}var SE=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),Pa=new se(""),o_=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new Ce(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(z(Pa),z(be))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),Es=class{constructor(e){this._doc=e}},Pu="ng-app-id",a_=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ta(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Pu}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(Pu),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(Pu,this.appId),i.appendChild(c),c}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,c=o.get(r)?.elements;c?c.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(z(xe),z(ua),z(ls,8),z(Mt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),ku={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Nu=/%COMP%/g,c_="%COMP%",RE=`_nghost-${c_}`,DE=`_ngcontent-${c_}`,PE=!0,kE=new se("",{providedIn:"root",factory:()=>PE});function xE(n){return DE.replace(Nu,n)}function ME(n){return RE.replace(Nu,n)}function l_(n,e){return e.map(t=>t.replace(Nu,n))}var ka=(()=>{let e=class e{constructor(i,r,s,o,c,l,h,f=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=l,this.ngZone=h,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Ta(l),this.defaultRenderer=new bs(i,c,h,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===as.ShadowDom&&(r=ge(F({},r),{encapsulation:as.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof xa?s.applyToHost(i):s instanceof Ts&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let c=this.doc,l=this.ngZone,h=this.eventManager,f=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,w=this.platformIsServer;switch(r.encapsulation){case as.Emulated:o=new xa(h,f,r,this.appId,m,c,l,w);break;case as.ShadowDom:return new Ou(h,f,i,r,c,l,this.nonce,w);default:o=new Ts(h,f,r,m,c,l,w);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(z(o_),z(a_),z(ua),z(kE),z(xe),z(Mt),z(be),z(ls))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),bs=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ku[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(r_(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(r_(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Ce(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=ku[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=ku[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(us.DashCase|us.Important)?e.style.setProperty(t,i,r&us.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&us.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=Ki().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function r_(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ou=class extends bs{constructor(e,t,i,r,s,o,c,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=l_(r.id,r.styles);for(let f of h){let m=document.createElement("style");c&&m.setAttribute("nonce",c),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ts=class extends bs{constructor(e,t,i,r,s,o,c,l){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?l_(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},xa=class extends Ts{constructor(e,t,i,r,s,o,c,l){let h=r+"-"+i.id;super(e,t,i,s,o,c,l,h),this.contentAttr=xE(h),this.hostAttr=ME(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},OE=(()=>{let e=class e extends Es{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(z(xe))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),NE=(()=>{let e=class e extends Es{constructor(i){super(i),this.delegate=L(Vg,{optional:!0})}supports(i){return this.delegate?this.delegate.supports(i):!1}addEventListener(i,r,s){return this.delegate.addEventListener(i,r,s)}removeEventListener(i,r,s){return this.delegate.removeEventListener(i,r,s)}};e.\u0275fac=function(r){return new(r||e)(z(xe))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),s_=["alt","control","meta","shift"],VE={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},FE={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},LE=(()=>{let e=class e extends Es{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),c=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ki().onAndCancel(i,o.domEventName,c))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),c="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),c="code."),s_.forEach(f=>{let m=r.indexOf(f);m>-1&&(r.splice(m,1),c+=f+".")}),c+=o,r.length!=0||o.length===0)return null;let h={};return h.domEventName=s,h.fullKey=c,h}static matchEventFullKeyCode(i,r){let s=VE[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),s_.forEach(c=>{if(c!==s){let l=FE[c];l(i)&&(o+=c+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(z(xe))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function u_(n,e){return Ng(F({rootComponent:n},UE(e)))}function UE(n){return{appProviders:[...qE,...n?.providers??[]],platformProviders:$E}}function jE(){Mu.makeCurrent()}function BE(){return new la}function zE(){return wg(document),document}var $E=[{provide:Mt,useValue:qg},{provide:Ig,useValue:jE,multi:!0},{provide:xe,useFactory:zE,deps:[]}];var qE=[{provide:vg,useValue:"root"},{provide:la,useFactory:BE,deps:[]},{provide:Pa,useClass:OE,multi:!0,deps:[xe,be,Mt]},{provide:Pa,useClass:LE,multi:!0,deps:[xe]},{provide:Pa,useClass:NE,multi:!0},ka,a_,o_,{provide:da,useExisting:ka},{provide:Aa,useClass:SE,deps:[]},[]];var h_=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(z(xe))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var re="primary",Us=Symbol("RouteTitle"),ju=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function er(n){return new ju(n)}function WE(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],c=n[s];if(o[0]===":")r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function HE(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!zt(n[t],e[t]))return!1;return!0}function zt(n,e){let t=n?Bu(n):void 0,i=e?Bu(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!E_(n[r],e[r]))return!1;return!0}function Bu(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function E_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function b_(n){return n.length>0?n[n.length-1]:null}function Ln(n){return lg(n)?n:_a(n)?qe(Promise.resolve(n)):K(n)}var KE={exact:A_,subset:C_},T_={exact:QE,subset:YE,ignored:()=>!0};function d_(n,e,t){return KE[t.paths](n.root,e.root,t.matrixParams)&&T_[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function QE(n,e){return zt(n,e)}function A_(n,e,t){if(!li(n.segments,e.segments)||!Na(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!A_(n.children[i],e.children[i],t))return!1;return!0}function YE(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>E_(n[t],e[t]))}function C_(n,e,t){return S_(n,e,e.segments,t)}function S_(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!li(r,t)||e.hasChildren()||!Na(r,t,i))}else if(n.segments.length===t.length){if(!li(n.segments,t)||!Na(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!C_(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!li(n.segments,r)||!Na(n.segments,r,i)||!n.children[re]?!1:S_(n.children[re],e,s,i)}}function Na(n,e,t){return e.every((i,r)=>T_[t](n[r].parameters,i.parameters))}var sn=class{constructor(e=new _e([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=er(this.queryParams),this._queryParamMap}toString(){return ZE.serialize(this)}},_e=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Va(this)}},ci=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=er(this.parameters),this._parameterMap}toString(){return D_(this)}};function JE(n,e){return li(n,e)&&n.every((t,i)=>zt(t.parameters,e[i].parameters))}function li(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function XE(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===re&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==re&&(t=t.concat(e(r,i)))}),t}var js=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:()=>new tr,providedIn:"root"});let n=e;return n})(),tr=class{parse(e){let t=new $u(e);return new sn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${As(e.root,!0)}`,i=nb(e.queryParams),r=typeof e.fragment=="string"?`#${eb(e.fragment)}`:"";return`${t}${i}${r}`}},ZE=new tr;function Va(n){return n.segments.map(e=>D_(e)).join("/")}function As(n,e){if(!n.hasChildren())return Va(n);if(e){let t=n.children[re]?As(n.children[re],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==re&&i.push(`${r}:${As(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=XE(n,(i,r)=>r===re?[As(n.children[re],!1)]:[`${r}:${As(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${Va(n)}/${t[0]}`:`${Va(n)}/(${t.join("//")})`}}function R_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ma(n){return R_(n).replace(/%3B/gi,";")}function eb(n){return encodeURI(n)}function zu(n){return R_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fa(n){return decodeURIComponent(n)}function f_(n){return Fa(n.replace(/\+/g,"%20"))}function D_(n){return`${zu(n.path)}${tb(n.parameters)}`}function tb(n){return Object.entries(n).map(([e,t])=>`;${zu(e)}=${zu(t)}`).join("")}function nb(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Ma(t)}=${Ma(r)}`).join("&"):`${Ma(t)}=${Ma(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var ib=/^[^\/()?;#]+/;function Vu(n){let e=n.match(ib);return e?e[0]:""}var rb=/^[^\/()?;=#]+/;function sb(n){let e=n.match(rb);return e?e[0]:""}var ob=/^[^=?&#]+/;function ab(n){let e=n.match(ob);return e?e[0]:""}var cb=/^[^&#]+/;function lb(n){let e=n.match(cb);return e?e[0]:""}var $u=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[re]=new _e(e,t)),i}parseSegment(){let e=Vu(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ce(4009,!1);return this.capture(e),new ci(Fa(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=sb(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Vu(this.remaining);r&&(i=r,this.capture(i))}e[Fa(t)]=Fa(i)}parseQueryParam(e){let t=ab(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=lb(this.remaining);o&&(i=o,this.capture(i))}let r=f_(t),s=f_(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Vu(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ce(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=re);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[re]:new _e([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ce(4011,!1)}};function P_(n){return n.segments.length>0?new _e([],{[re]:n}):n}function k_(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=k_(r);if(i===re&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new _e(n.segments,e);return ub(t)}function ub(n){if(n.numberOfChildren===1&&n.children[re]){let e=n.children[re];return new _e(n.segments.concat(e.segments),e.children)}return n}function ui(n){return n instanceof sn}function hb(n,e,t=null,i=null){let r=x_(n);return M_(r,e,t,i)}function x_(n){let e;function t(s){let o={};for(let l of s.children){let h=t(l);o[l.outlet]=h}let c=new _e(s.url,o);return s===n&&(e=c),c}let i=t(n.root),r=P_(i);return e??r}function M_(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Fu(r,r,r,t,i);let s=db(e);if(s.toRoot())return Fu(r,r,new _e([],{}),t,i);let o=fb(s,r,n),c=o.processChildren?Rs(o.segmentGroup,o.index,s.commands):N_(o.segmentGroup,o.index,s.commands);return Fu(r,o.segmentGroup,c,t,i)}function La(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ks(n){return typeof n=="object"&&n!=null&&n.outlets}function Fu(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([l,h])=>{s[l]=Array.isArray(h)?h.map(f=>`${f}`):`${h}`});let o;n===e?o=t:o=O_(n,e,t);let c=P_(k_(o));return new sn(c,s,r)}function O_(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=O_(s,e,t)}),new _e(n.segments,i)}var Ua=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&La(i[0]))throw new Ce(4003,!1);let r=i.find(ks);if(r&&r!==b_(i))throw new Ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function db(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ua(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,h])=>{c[l]=typeof h=="string"?h.split("/"):h}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new Ua(t,e,i)}var Ji=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function fb(n,e,t){if(n.isAbsolute)return new Ji(e,!0,0);if(!t)return new Ji(e,!1,NaN);if(t.parent===null)return new Ji(t,!0,0);let i=La(n.commands[0])?0:1,r=t.segments.length-1+i;return pb(t,r,n.numberOfDoubleDots)}function pb(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Ce(4005,!1);r=i.segments.length}return new Ji(i,!1,r-s)}function mb(n){return ks(n[0])?n[0].outlets:{[re]:n}}function N_(n,e,t){if(n??=new _e([],{}),n.segments.length===0&&n.hasChildren())return Rs(n,e,t);let i=gb(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new _e(n.segments.slice(0,i.pathIndex),{});return s.children[re]=new _e(n.segments.slice(i.pathIndex),n.children),Rs(s,0,r)}else return i.match&&r.length===0?new _e(n.segments,{}):i.match&&!n.hasChildren()?qu(n,e,t):i.match?Rs(n,0,r):qu(n,e,t)}function Rs(n,e,t){if(t.length===0)return new _e(n.segments,{});{let i=mb(t),r={};if(Object.keys(i).some(s=>s!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let s=Rs(n.children[re],e,t);return new _e(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=N_(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new _e(n.segments,r)}}function gb(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],c=t[i];if(ks(c))break;let l=`${c}`,h=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&h&&typeof h=="object"&&h.outlets===void 0){if(!m_(l,h,o))return s;i+=2}else{if(!m_(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function qu(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(ks(s)){let l=_b(s.outlets);return new _e(i,l)}if(r===0&&La(t[0])){let l=n.segments[e];i.push(new ci(l.path,p_(t[0]))),r++;continue}let o=ks(s)?s.outlets[re]:`${s}`,c=r<t.length-1?t[r+1]:null;o&&c&&La(c)?(i.push(new ci(o,p_(c))),r+=2):(i.push(new ci(o,{})),r++)}return new _e(i,{})}function _b(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=qu(new _e([],{}),0,i))}),e}function p_(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function m_(n,e,t){return n==t.path&&zt(e,t.parameters)}var Ds="imperative",je=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(je||{}),Tt=class{constructor(e,t){this.id=e,this.url=t}},nr=class extends Tt{constructor(e,t,i="imperative",r=null){super(e,t),this.type=je.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},At=class extends Tt{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=je.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},gt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(gt||{}),ja=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ja||{}),rn=class extends Tt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=je.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Vn=class extends Tt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=je.NavigationSkipped}},xs=class extends Tt{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=je.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ba=class extends Tt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=je.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gu=class extends Tt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=je.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wu=class extends Tt{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=je.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Hu=class extends Tt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=je.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ku=class extends Tt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=je.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qu=class{constructor(e){this.route=e,this.type=je.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Yu=class{constructor(e){this.route=e,this.type=je.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ju=class{constructor(e){this.snapshot=e,this.type=je.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xu=class{constructor(e){this.snapshot=e,this.type=je.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zu=class{constructor(e){this.snapshot=e,this.type=je.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eh=class{constructor(e){this.snapshot=e,this.type=je.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},za=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=je.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ms=class{},ir=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function yb(n,e){return n.providers&&!n._injector&&(n._injector=Iu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ot(n){return n.outlet||re}function vb(n,e){let t=n.filter(i=>Ot(i)===e);return t.push(...n.filter(i=>Ot(i)!==e)),t}function Bs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var th=class{get injector(){return Bs(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new zs(this.rootInjector),this.attachRef=null}},zs=(()=>{let e=class e{constructor(i){this.rootInjector=i,this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new th(this.rootInjector),this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)(z(ri))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),$a=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=nh(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=nh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=ih(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return ih(e,this._root).map(t=>t.value)}};function nh(n,e){if(n===e.value)return e;for(let t of e.children){let i=nh(n,t);if(i)return i}return null}function ih(n,e){if(n===e.value)return[e];for(let t of e.children){let i=ih(n,t);if(i.length)return i.unshift(e),i}return[]}var mt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Yi(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var qa=class extends $a{constructor(e,t){super(e),this.snapshot=t,dh(this,e)}toString(){return this.snapshot.toString()}};function V_(n){let e=wb(n),t=new wt([new ci("",{})]),i=new wt({}),r=new wt({}),s=new wt({}),o=new wt(""),c=new Fn(t,i,s,o,r,re,n,e.root);return c.snapshot=e.root,new qa(new mt(c,[]),e)}function wb(n){let e={},t={},i={},r="",s=new Xi([],e,i,r,t,re,n,null,{});return new Wa("",new mt(s,[]))}var Fn=class{constructor(e,t,i,r,s,o,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ce(h=>h[Us]))??K(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ce(e=>er(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ce(e=>er(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ga(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:F(F({},e.params),n.params),data:F(F({},e.data),n.data),resolve:F(F(F(F({},n.data),e.data),r?.data),n._resolvedData)}:i={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},r&&L_(r)&&(i.resolve[Us]=r.title),i}var Xi=class{get title(){return this.data?.[Us]}constructor(e,t,i,r,s,o,c,l,h){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=er(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=er(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Wa=class extends $a{constructor(e,t){super(t),this.url=e,dh(this,t)}toString(){return F_(this._root)}};function dh(n,e){e.value._routerState=n,e.children.forEach(t=>dh(n,t))}function F_(n){let e=n.children.length>0?` { ${n.children.map(F_).join(", ")} } `:"";return`${n.value}${e}`}function Lu(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,zt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),zt(e.params,t.params)||n.paramsSubject.next(t.params),HE(e.url,t.url)||n.urlSubject.next(t.url),zt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function rh(n,e){let t=zt(n.params,e.params)&&JE(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||rh(n.parent,e.parent))}function L_(n){return typeof n.title=="string"||n.title===null}var fh=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=re,this.activateEvents=new kt,this.deactivateEvents=new kt,this.attachEvents=new kt,this.detachEvents=new kt,this.parentContexts=L(zs),this.location=L(Ag),this.changeDetector=L(Hi),this.inputBinder=L(Ya,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ce(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new Ce(4013,!1);this._activatedRoute=i;let s=this.location,c=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,h=new sh(i,l,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:h,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=It({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[zi]});let n=e;return n})(),sh=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Fn?this.route:e===zs?this.childContexts:this.parent.get(e,t)}},Ya=new se(""),g_=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,s=Ui([r.queryParams,r.params,r.data]).pipe(ht(([o,c,l],h)=>(l=F(F(F({},o),c),l),h===0?K(l):Promise.resolve(l)))).subscribe(o=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let c=Fg(r.component);if(!c){this.unsubscribeFromRouteData(i);return}for(let{templateName:l}of c.inputs)i.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(i,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function Ib(n,e,t){let i=Os(n,e._root,t?t._root:void 0);return new qa(i,e)}function Os(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=Eb(n,e,t);return new mt(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Os(n,c)),o}}let i=bb(e.value),r=e.children.map(s=>Os(n,s));return new mt(i,r)}}function Eb(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Os(n,i,r);return Os(n,i)})}function bb(n){return new Fn(new wt(n.url),new wt(n.params),new wt(n.queryParams),new wt(n.fragment),new wt(n.data),n.outlet,n.component,n)}var Ns=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},U_="ngNavigationCancelingError";function Ha(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=ui(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=j_(!1,gt.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function j_(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[U_]=!0,t.cancellationCode=e,t}function Tb(n){return B_(n)&&ui(n.url)}function B_(n){return!!n&&n[U_]}var Ab=(n,e,t,i)=>ce(r=>(new oh(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),oh=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Lu(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Yi(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Yi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Yi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Yi(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new eh(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Xu(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(Lu(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),Lu(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},Ka=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Zi=class{constructor(e,t){this.component=e,this.route=t}};function Cb(n,e,t){let i=n._root,r=e?e._root:null;return Cs(i,r,t,[i.value])}function Sb(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function sr(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!_g(n)?n:e.get(n):i}function Cs(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Yi(e);return n.children.forEach(o=>{Rb(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>Ps(c,t.getContext(o),r)),r}function Rb(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=Db(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Ka(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Cs(n,e,c?c.children:null,i,r):Cs(n,e,t,i,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new Zi(c.outlet.component,o))}else o&&Ps(e,c,r),r.canActivateChecks.push(new Ka(i)),s.component?Cs(n,null,c?c.children:null,i,r):Cs(n,null,t,i,r);return r}function Db(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!li(n.url,e.url);case"pathParamsOrQueryParamsChange":return!li(n.url,e.url)||!zt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rh(n,e)||!zt(n.queryParams,e.queryParams);case"paramsChange":default:return!rh(n,e)}}function Ps(n,e,t){let i=Yi(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Ps(o,e.children.getContext(s),t):Ps(o,null,t):Ps(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Zi(e.outlet.component,r)):t.canDeactivateChecks.push(new Zi(null,r)):t.canDeactivateChecks.push(new Zi(null,r))}function $s(n){return typeof n=="function"}function Pb(n){return typeof n=="boolean"}function kb(n){return n&&$s(n.canLoad)}function xb(n){return n&&$s(n.canActivate)}function Mb(n){return n&&$s(n.canActivateChild)}function Ob(n){return n&&$s(n.canDeactivate)}function Nb(n){return n&&$s(n.canMatch)}function z_(n){return n instanceof ug||n?.name==="EmptyError"}var Oa=Symbol("INITIAL_VALUE");function rr(){return ht(n=>Ui(n.map(e=>e.pipe(Sn(1),oa(Oa)))).pipe(ce(e=>{for(let t of e)if(t!==!0){if(t===Oa)return Oa;if(t===!1||Vb(t))return t}return!0}),Dt(e=>e!==Oa),Sn(1)))}function Vb(n){return ui(n)||n instanceof Ns}function Fb(n,e){return ut(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?K(ge(F({},t),{guardsResult:!0})):Lb(o,i,r,n).pipe(ut(c=>c&&Pb(c)?Ub(i,s,n,e):K(c)),ce(c=>ge(F({},t),{guardsResult:c})))})}function Lb(n,e,t,i){return qe(n).pipe(ut(r=>qb(r.component,r.route,t,e,i)),Rn(r=>r!==!0,!0))}function Ub(n,e,t,i){return qe(e).pipe(Cn(r=>sa(Bb(r.route.parent,i),jb(r.route,i),$b(n,r.path,t),zb(n,r.route,t))),Rn(r=>r!==!0,!0))}function jb(n,e){return n!==null&&e&&e(new Zu(n)),K(!0)}function Bb(n,e){return n!==null&&e&&e(new Ju(n)),K(!0)}function zb(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return K(!0);let r=i.map(s=>du(()=>{let o=Bs(e)??t,c=sr(s,o),l=xb(c)?c.canActivate(e,n):Et(o,()=>c(e,n));return Ln(l).pipe(Rn())}));return K(r).pipe(rr())}function $b(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Sb(o)).filter(o=>o!==null).map(o=>du(()=>{let c=o.guards.map(l=>{let h=Bs(o.node)??t,f=sr(l,h),m=Mb(f)?f.canActivateChild(i,n):Et(h,()=>f(i,n));return Ln(m).pipe(Rn())});return K(c).pipe(rr())}));return K(s).pipe(rr())}function qb(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return K(!0);let o=s.map(c=>{let l=Bs(e)??r,h=sr(c,l),f=Ob(h)?h.canDeactivate(n,e,t,i):Et(l,()=>h(n,e,t,i));return Ln(f).pipe(Rn())});return K(o).pipe(rr())}function Gb(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return K(!0);let s=r.map(o=>{let c=sr(o,n),l=kb(c)?c.canLoad(e,t):Et(n,()=>c(e,t));return Ln(l)});return K(s).pipe(rr(),$_(i))}function $_(n){return og(Ve(e=>{if(typeof e!="boolean")throw Ha(n,e)}),ce(e=>e===!0))}function Wb(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return K(!0);let s=r.map(o=>{let c=sr(o,n),l=Nb(c)?c.canMatch(e,t):Et(n,()=>c(e,t));return Ln(l)});return K(s).pipe(rr(),$_(i))}var Vs=class{constructor(e){this.segmentGroup=e||null}},Fs=class extends Error{constructor(e){super(),this.urlTree=e}};function Qi(n){return os(new Vs(n))}function Hb(n){return os(new Ce(4e3,!1))}function Kb(n){return os(j_(!1,gt.GuardRejected))}var ah=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return K(i);if(r.numberOfChildren>1||!r.children[re])return Hb(`${e.redirectTo}`);r=r.children[re]}}applyRedirectCommands(e,t,i,r,s){if(typeof t!="string"){let c=t,{queryParams:l,fragment:h,routeConfig:f,url:m,outlet:w,params:C,data:k,title:N}=r,R=Et(s,()=>c({params:C,data:k,queryParams:l,fragment:h,routeConfig:f,url:m,outlet:w,title:N}));if(R instanceof sn)throw new Fs(R);t=R}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Fs(o);return o}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new sn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);i[r]=t[c]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,i,r)}),new _e(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Ce(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},ch={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Qb(n,e,t,i,r){let s=q_(n,e,t);return s.matched?(i=yb(e,i),Wb(i,e,t,r).pipe(ce(o=>o===!0?s:F({},ch)))):K(s)}function q_(n,e,t){if(e.path==="**")return Yb(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?F({},ch):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||WE)(t,n,e);if(!r)return F({},ch);let s={};Object.entries(r.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=r.consumed.length>0?F(F({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function Yb(n){return{matched:!0,parameters:n.length>0?b_(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function __(n,e,t,i){return t.length>0&&Zb(n,t,i)?{segmentGroup:new _e(e,Xb(i,new _e(t,n.children))),slicedSegments:[]}:t.length===0&&eT(n,t,i)?{segmentGroup:new _e(n.segments,Jb(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new _e(n.segments,n.children),slicedSegments:t}}function Jb(n,e,t,i){let r={};for(let s of t)if(Ja(n,e,s)&&!i[Ot(s)]){let o=new _e([],{});r[Ot(s)]=o}return F(F({},i),r)}function Xb(n,e){let t={};t[re]=e;for(let i of n)if(i.path===""&&Ot(i)!==re){let r=new _e([],{});t[Ot(i)]=r}return t}function Zb(n,e,t){return t.some(i=>Ja(n,e,i)&&Ot(i)!==re)}function eT(n,e,t){return t.some(i=>Ja(n,e,i))}function Ja(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function tT(n,e,t){return e.length===0&&!n.children[t]}var lh=class{};function nT(n,e,t,i,r,s,o="emptyOnly"){return new uh(n,e,t,i,r,o,s).recognize()}var iT=31,uh=class{constructor(e,t,i,r,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new ah(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Ce(4002,`'${e.segmentGroup}'`)}recognize(){let e=__(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ce(({children:t,rootSnapshot:i})=>{let r=new mt(i,t),s=new Wa("",r),o=hb(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Xi([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,t).pipe(ce(i=>({children:i,rootSnapshot:t})),ji(i=>{if(i instanceof Fs)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Vs?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(ce(o=>o instanceof mt?[o]:[]))}processChildren(e,t,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return qe(s).pipe(Cn(o=>{let c=i.children[o],l=vb(t,o);return this.processSegmentGroup(e,l,c,o,r)}),mg((o,c)=>(o.push(...c),o)),fu(null),pg(),ut(o=>{if(o===null)return Qi(i);let c=G_(o);return rT(c),K(c)}))}processSegment(e,t,i,r,s,o,c){return qe(t).pipe(Cn(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,s,o,c).pipe(ji(h=>{if(h instanceof Vs)return K(null);throw h}))),Rn(l=>!!l),ji(l=>{if(z_(l))return tT(i,r,s)?K(new lh):Qi(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,s,o,c,l){return Ot(i)!==o&&(o===re||!Ja(r,s,i))?Qi(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,l):Qi(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,c){let{matched:l,parameters:h,consumedSegments:f,positionalParamSegments:m,remainingSegments:w}=q_(t,r,s);if(!l)return Qi(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>iT&&(this.allowRedirects=!1));let C=new Xi(s,h,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,y_(r),Ot(r),r.component??r._loadedComponent??null,r,v_(r)),k=Ga(C,c,this.paramsInheritanceStrategy);C.params=Object.freeze(k.params),C.data=Object.freeze(k.data);let N=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,m,C,e);return this.applyRedirects.lineralizeSegments(r,N).pipe(ut(R=>this.processSegment(e,i,t,R.concat(w),o,!1,c)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let c=Qb(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),c.pipe(ht(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(ht(({routes:h})=>{let f=i._loadedInjector??e,{parameters:m,consumedSegments:w,remainingSegments:C}=l,k=new Xi(w,m,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,y_(i),Ot(i),i.component??i._loadedComponent??null,i,v_(i)),N=Ga(k,o,this.paramsInheritanceStrategy);k.params=Object.freeze(N.params),k.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:U}=__(t,w,C,h);if(U.length===0&&R.hasChildren())return this.processChildren(f,h,R,k).pipe(ce(H=>new mt(k,H)));if(h.length===0&&U.length===0)return K(new mt(k,[]));let q=Ot(i)===s;return this.processSegment(f,h,R,U,q?re:s,!0,k).pipe(ce(H=>new mt(k,H instanceof mt?[H]:[])))}))):Qi(t)))}getChildConfig(e,t,i){return t.children?K({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?K({routes:t._loadedRoutes,injector:t._loadedInjector}):Gb(e,t,i,this.urlSerializer).pipe(ut(r=>r?this.configLoader.loadChildren(e,t).pipe(Ve(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):Kb(t))):K({routes:[],injector:e})}};function rT(n){n.sort((e,t)=>e.value.outlet===re?-1:t.value.outlet===re?1:e.value.outlet.localeCompare(t.value.outlet))}function sT(n){let e=n.value.routeConfig;return e&&e.path===""}function G_(n){let e=[],t=new Set;for(let i of n){if(!sT(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=G_(i.children);e.push(new mt(i.value,r))}return e.filter(i=>!t.has(i))}function y_(n){return n.data||{}}function v_(n){return n.resolve||{}}function oT(n,e,t,i,r,s){return ut(o=>nT(n,e,t,i,o.extractedUrl,r,s).pipe(ce(({state:c,tree:l})=>ge(F({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function aT(n,e){return ut(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return K(t);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let h of W_(l))o.add(h);let c=0;return qe(o).pipe(Cn(l=>s.has(l)?cT(l,i,n,e):(l.data=Ga(l,l.parent,n).resolve,K(void 0))),Ve(()=>c++),pu(1),ut(l=>c===o.size?K(t):An))})}function W_(n){let e=n.children.map(t=>W_(t)).flat();return[n,...e]}function cT(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!L_(r)&&(s[Us]=r.title),lT(s,n,e,i).pipe(ce(o=>(n._resolvedData=o,n.data=Ga(n,n.parent,t).resolve,null)))}function lT(n,e,t,i){let r=Bu(n);if(r.length===0)return K({});let s={};return qe(r).pipe(ut(o=>uT(n[o],e,t,i).pipe(Rn(),Ve(c=>{if(c instanceof Ns)throw Ha(new tr,c);s[o]=c}))),pu(1),fg(s),ji(o=>z_(o)?An:os(o)))}function uT(n,e,t,i){let r=Bs(e)??i,s=sr(n,r),o=s.resolve?s.resolve(e,t):Et(r,()=>s(e,t));return Ln(o)}function Uu(n){return ht(e=>{let t=n(e);return t?qe(t).pipe(ce(()=>e)):K(e)})}var H_=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(i){return i.data[Us]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:()=>L(hT),providedIn:"root"});let n=e;return n})(),hT=(()=>{let e=class e extends H_{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(z(h_))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),qs=new se("",{providedIn:"root",factory:()=>({})}),dT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=we({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ie],decls:1,vars:0,template:function(r,s){r&1&&oe(0,"router-outlet")},dependencies:[fh],encapsulation:2});let n=e;return n})();function ph(n){let e=n.children&&n.children.map(ph),t=e?ge(F({},n),{children:e}):F({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==re&&(t.component=dT),t}var Ls=new se(""),mh=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(wa)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return K(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Ln(i.loadComponent()).pipe(ce(K_),Ve(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Bi(()=>{this.componentLoaders.delete(i)})),s=new au(r,()=>new vt).pipe(ou());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return K({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=fT(r,this.compiler,i,this.onLoadEndListener).pipe(Bi(()=>{this.childrenLoaders.delete(r)})),c=new au(o,()=>new vt).pipe(ou());return this.childrenLoaders.set(r,c),c}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function fT(n,e,t,i){return Ln(n.loadChildren()).pipe(ce(K_),ut(r=>r instanceof Cg||Array.isArray(r)?K(r):qe(e.compileModuleAsync(r))),ce(r=>{i&&i(n);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(t).injector,o=s.get(Ls,[],{optional:!0,self:!0}).flat()),{routes:o.map(ph),injector:s}}))}function pT(n){return n&&typeof n=="object"&&"default"in n}function K_(n){return pT(n)?n.default:n}var gh=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:()=>L(mT),providedIn:"root"});let n=e;return n})(),mT=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Q_=new se(""),Y_=new se("");function gT(n,e,t){let i=n.get(Y_),r=n.get(xe);return n.get(be).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(h=>setTimeout(h));let s,o=new Promise(h=>{s=h}),c=r.startViewTransition(()=>(s(),_T(n))),{onViewTransitionCreated:l}=i;return l&&Et(n,()=>l({transition:c,from:e,to:t})),o})}function _T(n){return new Promise(e=>{Eu({read:()=>setTimeout(e)},{injector:n})})}var yT=new se(""),_h=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new vt,this.transitionAbortSubject=new vt,this.configLoader=L(mh),this.environmentInjector=L(ri),this.urlSerializer=L(js),this.rootContexts=L(zs),this.location=L(gs),this.inputBindingEnabled=L(Ya,{optional:!0})!==null,this.titleStrategy=L(H_),this.options=L(qs,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(gh),this.createViewTransition=L(Q_,{optional:!0}),this.navigationErrorHandler=L(yT,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>K(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Qu(s)),r=s=>this.events.next(new Yu(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(ge(F(F({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new wt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ds,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Dt(o=>o.id!==0),ce(o=>ge(F({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ht(o=>{let c=!1,l=!1;return K(o).pipe(ht(h=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",gt.SupersededByNewNavigation),An;this.currentTransition=o,this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,targetBrowserUrl:typeof h.extras.browserUrl=="string"?this.urlSerializer.parse(h.extras.browserUrl):h.extras.browserUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?ge(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=h.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!f&&m!=="reload"){let w="";return this.events.next(new Vn(h.id,this.urlSerializer.serialize(h.rawUrl),w,ja.IgnoredSameUrlNavigation)),h.resolve(!1),An}if(this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return K(h).pipe(ht(w=>{let C=this.transitions?.getValue();return this.events.next(new nr(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),C!==this.transitions?.getValue()?An:Promise.resolve(w)}),oT(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Ve(w=>{o.targetSnapshot=w.targetSnapshot,o.urlAfterRedirects=w.urlAfterRedirects,this.currentNavigation=ge(F({},this.currentNavigation),{finalUrl:w.urlAfterRedirects});let C=new Ba(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(C)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(h.currentRawUrl)){let{id:w,extractedUrl:C,source:k,restoredState:N,extras:R}=h,U=new nr(w,this.urlSerializer.serialize(C),k,N);this.events.next(U);let q=V_(this.rootComponentType).snapshot;return this.currentTransition=o=ge(F({},h),{targetSnapshot:q,urlAfterRedirects:C,extras:ge(F({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=C,K(o)}else{let w="";return this.events.next(new Vn(h.id,this.urlSerializer.serialize(h.extractedUrl),w,ja.IgnoredByUrlHandlingStrategy)),h.resolve(!1),An}}),Ve(h=>{let f=new Gu(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}),ce(h=>(this.currentTransition=o=ge(F({},h),{guards:Cb(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),o)),Fb(this.environmentInjector,h=>this.events.next(h)),Ve(h=>{if(o.guardsResult=h.guardsResult,h.guardsResult&&typeof h.guardsResult!="boolean")throw Ha(this.urlSerializer,h.guardsResult);let f=new Wu(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.events.next(f)}),Dt(h=>h.guardsResult?!0:(this.cancelNavigationTransition(h,"",gt.GuardRejected),!1)),Uu(h=>{if(h.guards.canActivateChecks.length)return K(h).pipe(Ve(f=>{let m=new Hu(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),ht(f=>{let m=!1;return K(f).pipe(aT(this.paramsInheritanceStrategy,this.environmentInjector),Ve({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(f,"",gt.NoDataFromResolver)}}))}),Ve(f=>{let m=new Ku(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}))}),Uu(h=>{let f=m=>{let w=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(m.routeConfig).pipe(Ve(C=>{m.component=C}),ce(()=>{})));for(let C of m.children)w.push(...f(C));return w};return Ui(f(h.targetSnapshot.root)).pipe(fu(null),Sn(1))}),Uu(()=>this.afterPreactivation()),ht(()=>{let{currentSnapshot:h,targetSnapshot:f}=o,m=this.createViewTransition?.(this.environmentInjector,h.root,f.root);return m?qe(m).pipe(ce(()=>o)):K(o)}),ce(h=>{let f=Ib(i.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return this.currentTransition=o=ge(F({},h),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),Ve(()=>{this.events.next(new Ms)}),Ab(this.rootContexts,i.routeReuseStrategy,h=>this.events.next(h),this.inputBindingEnabled),Sn(1),Ve({next:h=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new At(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects))),this.titleStrategy?.updateTitle(h.targetRouterState.snapshot),h.resolve(!0)},complete:()=>{c=!0}}),aa(this.transitionAbortSubject.pipe(Ve(h=>{throw h}))),Bi(()=>{!c&&!l&&this.cancelNavigationTransition(o,"",gt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ji(h=>{if(l=!0,B_(h))this.events.next(new rn(o.id,this.urlSerializer.serialize(o.extractedUrl),h.message,h.cancellationCode)),Tb(h)?this.events.next(new ir(h.url,h.navigationBehaviorOptions)):o.resolve(!1);else{let f=new xs(o.id,this.urlSerializer.serialize(o.extractedUrl),h,o.targetSnapshot??void 0);try{let m=Et(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(m instanceof Ns){let{message:w,cancellationCode:C}=Ha(this.urlSerializer,m);this.events.next(new rn(o.id,this.urlSerializer.serialize(o.extractedUrl),w,C)),this.events.next(new ir(m.redirectTo,m.navigationBehaviorOptions))}else{this.events.next(f);let w=i.errorHandler(h);o.resolve(!!w)}}catch(m){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(m)}}return An}))}))}cancelNavigationTransition(i,r,s){let o=new rn(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let i=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return i.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function vT(n){return n!==Ds}var wT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:()=>L(IT),providedIn:"root"});let n=e;return n})(),hh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},IT=(()=>{let e=class e extends hh{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=cs(e)))(s||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),J_=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:()=>L(ET),providedIn:"root"});let n=e;return n})(),ET=(()=>{let e=class e extends J_{constructor(){super(...arguments),this.location=L(gs),this.urlSerializer=L(js),this.options=L(qs,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(gh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new sn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=V_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof nr)this.stateMemento=this.createStateMemento();else if(i instanceof Vn)this.rawUrlTree=r.initialUrl;else if(i instanceof Ba){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??s,r)}}else i instanceof Ms?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):i instanceof rn&&(i.code===gt.GuardRejected||i.code===gt.NoDataFromResolver)?this.restoreHistory(r):i instanceof xs?this.restoreHistory(r,!0):i instanceof At&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=i instanceof sn?this.urlSerializer.serialize(i):i;if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,c=F(F({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",c)}else{let o=F(F({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=cs(e)))(s||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ss=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ss||{});function X_(n,e){n.events.pipe(Dt(t=>t instanceof At||t instanceof rn||t instanceof xs||t instanceof Vn),ce(t=>t instanceof At||t instanceof Vn?Ss.COMPLETE:(t instanceof rn?t.code===gt.Redirect||t.code===gt.SupersededByNewNavigation:!1)?Ss.REDIRECTING:Ss.FAILED),Dt(t=>t!==Ss.REDIRECTING),Sn(1)).subscribe(()=>{e()})}function bT(n){throw n}var TT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},AT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Fe=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=L(ga),this.stateManager=L(J_),this.options=L(qs,{optional:!0})||{},this.pendingTasks=L(ca),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(_h),this.urlSerializer=L(js),this.location=L(gs),this.urlHandlingStrategy=L(gh),this._events=new vt,this.errorHandler=this.options.errorHandler||bT,this.navigated=!1,this.routeReuseStrategy=L(wT),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(Ls,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(Ya,{optional:!0}),this.eventsSubscription=new sg,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof rn&&r.code!==gt.Redirect&&r.code!==gt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof At)this.navigated=!0;else if(r instanceof ir){let c=r.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),h=F({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||vT(s.source)},c);this.scheduleNavigation(l,Ds,null,h,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}ST(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ds,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let h=F({},s);delete h.navigationId,delete h.\u0275routerPageId,Object.keys(h).length!==0&&(o.state=h)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(ph),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:c,queryParamsHandling:l,preserveFragment:h}=r,f=h?this.currentUrlTree.fragment:c,m=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":m=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let w;try{let C=s?s.snapshot:this.routerState.snapshot.root;w=x_(C)}catch{(typeof i[0]!="string"||i[0][0]!=="/")&&(i=[]),w=this.currentUrlTree.root}return M_(w,i,m,f??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=ui(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Ds,null,r)}navigate(i,r={skipLocationChange:!1}){return CT(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=F({},TT):r===!1?s=F({},AT):s=r,ui(i))return d_(this.currentUrlTree,i,s);let o=this.parseUrl(i);return d_(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,c){if(this.disposed)return Promise.resolve(!1);let l,h,f;c?(l=c.resolve,h=c.reject,f=c.promise):f=new Promise((w,C)=>{l=w,h=C});let m=this.pendingTasks.add();return X_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:h,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(w=>Promise.reject(w))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function CT(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Ce(4008,!1)}function ST(n){return!(n instanceof Ms)&&!(n instanceof ir)}var or=(()=>{let e=class e{constructor(i,r,s,o,c,l){this.router=i,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=c,this.locationStrategy=l,this.href=null,this.onChanges=new vt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let h=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement=h==="a"||h==="area",this.isAnchorElement?this.subscription=i.events.subscribe(f=>{f instanceof At&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ui(i)?this.routerLinkInput=i:this.routerLinkInput=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0"))}onClick(i,r,s,o,c){let l=this.urlTree;if(l===null||this.isAnchorElement&&(i!==0||r||s||o||c||typeof this.target=="string"&&this.target!="_self"))return!0;let h={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,h),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let i=this.urlTree;this.href=i!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(i)):null;let r=this.href===null?null:bg(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(i,r){let s=this.renderer,o=this.el.nativeElement;r!==null?s.setAttribute(o,i,r):s.removeAttribute(o,i)}get urlTree(){return this.routerLinkInput===null?null:ui(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(he(Fe),he(Fn),_u("tabindex"),he(hs),he(xt),he(ms))},e.\u0275dir=It({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&$("click",function(c){return s.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),r&2&&Gi("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",kn],skipLocationChange:[2,"skipLocationChange","skipLocationChange",kn],replaceUrl:[2,"replaceUrl","replaceUrl",kn],routerLink:"routerLink"},standalone:!0,features:[fs,zi]});let n=e;return n})();var Qa=class{};var RT=(()=>{let e=class e{constructor(i,r,s,o,c){this.router=i,this.injector=s,this.preloadingStrategy=o,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Dt(i=>i instanceof At),Cn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let s=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Iu(o.providers,i,`Route: ${o.path}`));let c=o._injector??i,l=o._loadedInjector??c;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(c,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(l,o.children??o._loadedRoutes))}return qe(s).pipe(hu())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(i,r):s=K(null);let o=s.pipe(ut(c=>c===null?K(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??i,c.routes))));if(r.loadComponent&&!r._loadedComponent){let c=this.loader.loadComponent(r);return qe([o,c]).pipe(hu())}else return o})}};e.\u0275fac=function(r){return new(r||e)(z(Fe),z(wa),z(ri),z(Qa),z(mh))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Z_=new se(""),DT=(()=>{let e=class e{constructor(i,r,s,o,c={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=s,this.zone=o,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration||="disabled",c.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof nr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof At?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Vn&&i.code===ja.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof za&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new za(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){ha()},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function ey(n,...e){return dt([{provide:Ls,multi:!0,useValue:n},[],{provide:Fn,useFactory:ty,deps:[Fe]},{provide:ya,multi:!0,useFactory:ny},e.map(t=>t.\u0275providers)])}function ty(n){return n.routerState.root}function Gs(n,e){return{\u0275kind:n,\u0275providers:e}}function ny(){let n=L(Pt);return e=>{let t=n.get(va);if(e!==t.components[0])return;let i=n.get(Fe),r=n.get(iy);n.get(yh)===1&&i.initialNavigation(),n.get(ry,null,gu.Optional)?.setUpPreloading(),n.get(Z_,null,gu.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var iy=new se("",{factory:()=>new vt}),yh=new se("",{providedIn:"root",factory:()=>1});function PT(){return Gs(2,[{provide:yh,useValue:0},{provide:bu,multi:!0,deps:[Pt],useFactory:e=>{let t=e.get(jg,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=e.get(Fe),s=e.get(iy);X_(r,()=>{i(!0)}),e.get(_h).afterPreactivation=()=>(i(!0),s.closed?K(void 0):s),r.initialNavigation()}))}}])}function kT(){return Gs(3,[{provide:bu,multi:!0,useFactory:()=>{let e=L(Fe);return()=>{e.setUpLocationChangeListener()}}},{provide:yh,useValue:2}])}var ry=new se("");function xT(n){return Gs(0,[{provide:ry,useExisting:RT},{provide:Qa,useExisting:n}])}function MT(){return Gs(8,[g_,{provide:Ya,useExisting:g_}])}function OT(n){let e=[{provide:Q_,useValue:gT},{provide:Y_,useValue:F({skipNextTransition:!!n?.skipInitialTransition},n)}];return Gs(9,e)}var w_=new se("ROUTER_FORROOT_GUARD"),NT=[gs,{provide:js,useClass:tr},Fe,zs,{provide:Fn,useFactory:ty,deps:[Fe]},mh,[]],Xa=(()=>{let e=class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[NT,[],{provide:Ls,multi:!0,useValue:i},{provide:w_,useFactory:UT,deps:[[Fe,new st,new yg]]},{provide:qs,useValue:r||{}},r?.useHash?FT():LT(),VT(),r?.preloadingStrategy?xT(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?jT(r):[],r?.bindToComponentInputs?MT().\u0275providers:[],r?.enableViewTransitions?OT().\u0275providers:[],BT()]}}static forChild(i){return{ngModule:e,providers:[{provide:Ls,multi:!0,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)(z(w_,8))},e.\u0275mod=Ze({type:e}),e.\u0275inj=Xe({});let n=e;return n})();function VT(){return{provide:Z_,useFactory:()=>{let n=L(Wg),e=L(be),t=L(qs),i=L(_h),r=L(js);return t.scrollOffset&&n.setOffset(t.scrollOffset),new DT(r,i,n,e,t)}}}function FT(){return{provide:ms,useClass:zg}}function LT(){return{provide:ms,useClass:Bg}}function UT(n){return"guarded"}function jT(n){return[n.initialNavigation==="disabled"?kT().\u0275providers:[],n.initialNavigation==="enabledBlocking"?PT().\u0275providers:[]]}var I_=new se("");function BT(){return[{provide:I_,useFactory:ny},{provide:ya,multi:!0,useExisting:I_}]}var oy=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},zT=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],c=n[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ay={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,c=o?n[r+1]:0,l=r+2<n.length,h=l?n[r+2]:0,f=s>>2,m=(s&3)<<4|c>>4,w=(c&15)<<2|h>>6,C=h&63;l||(C=64,o||(w=64)),i.push(t[f],t[m],t[w],t[C])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(oy(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):zT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let h=r<n.length?t[n.charAt(r)]:64;++r;let m=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||h==null||m==null)throw new wh;let w=s<<2|c>>4;if(i.push(w),h!==64){let C=c<<4&240|h>>2;if(i.push(C),m!==64){let k=h<<6&192|m;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},wh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$T=function(n){let e=oy(n);return ay.encodeByteArray(e,!0)},Ws=function(n){return $T(n).replace(/\./g,"")},Eh=function(n){try{return ay.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function qT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var GT=()=>qT().__FIREBASE_DEFAULTS__,WT=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},HT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Eh(n[1]);return e&&JSON.parse(e)},ec=()=>{try{return GT()||WT()||HT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},bh=n=>{var e,t;return(t=(e=ec())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},cy=n=>{let e=bh(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Th=()=>{var n;return(n=ec())===null||n===void 0?void 0:n.config},Ah=n=>{var e;return(e=ec())===null||e===void 0?void 0:e[`_${n}`]};var Za=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function ly(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ws(JSON.stringify(t)),Ws(JSON.stringify(o)),""].join(".")}function Be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function KT(){var n;let e=(n=ec())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hy(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function dy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fy(){let n=Be();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function py(){return!KT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ch(){try{return typeof indexedDB=="object"}catch{return!1}}function my(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var QT="FirebaseError",at=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=QT,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,on.prototype.create)}},on=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?YT(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new at(r,c,i)}};function YT(n,e){return n.replace(JT,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var JT=/\{\$([^}]+)}/g;function gy(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function hi(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(sy(s)&&sy(o)){if(!hi(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function sy(n){return n!==null&&typeof n=="object"}function Hs(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function cr(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function lr(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function _y(n,e){let t=new Ih(n,e);return t.subscribe.bind(t)}var Ih=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");XT(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=vh),r.error===void 0&&(r.error=vh),r.complete===void 0&&(r.complete=vh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function XT(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function vh(){}var _x=4*60*60*1e3;function We(n){return n&&n._delegate?n._delegate:n}var Ct=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var di="[DEFAULT]";var Sh=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Za;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eA(e))try{this.getOrInitializeService({instanceIdentifier:di})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=di){return this.instances.has(e)}getOptions(e=di){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ZT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=di){return this.component?this.component.multipleInstances?e:di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ZT(n){return n===di?void 0:n}function eA(n){return n.instantiationMode==="EAGER"}var tc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Sh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var tA=[],le=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(le||{}),nA={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},iA=le.INFO,rA={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},sA=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=rA[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Un=class{constructor(e){this.name=e,this._logLevel=iA,this._logHandler=sA,this._userLogHandler=null,tA.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var oA=(n,e)=>e.some(t=>n instanceof t),yy,vy;function aA(){return yy||(yy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cA(){return vy||(vy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var wy=new WeakMap,Dh=new WeakMap,Iy=new WeakMap,Rh=new WeakMap,kh=new WeakMap;function lA(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t($t(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&wy.set(t,n)}).catch(()=>{}),kh.set(e,n),e}function uA(n){if(Dh.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Dh.set(n,e)}var Ph={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Dh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Iy.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $t(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Ey(n){Ph=n(Ph)}function hA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(nc(this),e,...t);return Iy.set(i,e.sort?e.sort():[e]),$t(i)}:cA().includes(n)?function(...e){return n.apply(nc(this),e),$t(wy.get(this))}:function(...e){return $t(n.apply(nc(this),e))}}function dA(n){return typeof n=="function"?hA(n):(n instanceof IDBTransaction&&uA(n),oA(n,aA())?new Proxy(n,Ph):n)}function $t(n){if(n instanceof IDBRequest)return lA(n);if(Rh.has(n))return Rh.get(n);let e=dA(n);return e!==n&&(Rh.set(n,e),kh.set(e,n)),e}var nc=n=>kh.get(n);function Ty(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),c=$t(o);return i&&o.addEventListener("upgradeneeded",l=>{i($t(o.result),l.oldVersion,l.newVersion,$t(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}var fA=["get","getKey","getAll","getAllKeys","count"],pA=["put","add","delete","clear"],xh=new Map;function by(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xh.get(e))return xh.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=pA.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||fA.includes(t)))return;let s=function(o,...c){return _(this,null,function*(){let l=this.transaction(o,r?"readwrite":"readonly"),h=l.store;return i&&(h=h.index(c.shift())),(yield Promise.all([h[t](...c),r&&l.done]))[0]})};return xh.set(e,s),s}Ey(n=>ge(F({},n),{get:(e,t,i)=>by(e,t)||n.get(e,t,i),has:(e,t)=>!!by(e,t)||n.has(e,t)}));var Oh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(mA(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function mA(n){let e=n.getComponent();return e?.type==="VERSION"}var Nh="@firebase/app",Ay="0.10.10";var an=new Un("@firebase/app"),gA="@firebase/app-compat",_A="@firebase/analytics-compat",yA="@firebase/analytics",vA="@firebase/app-check-compat",wA="@firebase/app-check",IA="@firebase/auth",EA="@firebase/auth-compat",bA="@firebase/database",TA="@firebase/database-compat",AA="@firebase/functions",CA="@firebase/functions-compat",SA="@firebase/installations",RA="@firebase/installations-compat",DA="@firebase/messaging",PA="@firebase/messaging-compat",kA="@firebase/performance",xA="@firebase/performance-compat",MA="@firebase/remote-config",OA="@firebase/remote-config-compat",NA="@firebase/storage",VA="@firebase/storage-compat",FA="@firebase/firestore",LA="@firebase/vertexai-preview",UA="@firebase/firestore-compat",jA="firebase",BA="10.13.1";var Vh="[DEFAULT]",zA={[Nh]:"fire-core",[gA]:"fire-core-compat",[yA]:"fire-analytics",[_A]:"fire-analytics-compat",[wA]:"fire-app-check",[vA]:"fire-app-check-compat",[IA]:"fire-auth",[EA]:"fire-auth-compat",[bA]:"fire-rtdb",[TA]:"fire-rtdb-compat",[AA]:"fire-fn",[CA]:"fire-fn-compat",[SA]:"fire-iid",[RA]:"fire-iid-compat",[DA]:"fire-fcm",[PA]:"fire-fcm-compat",[kA]:"fire-perf",[xA]:"fire-perf-compat",[MA]:"fire-rc",[OA]:"fire-rc-compat",[NA]:"fire-gcs",[VA]:"fire-gcs-compat",[FA]:"fire-fst",[UA]:"fire-fst-compat",[LA]:"fire-vertex","fire-js":"fire-js",[jA]:"fire-js-all"};var Ks=new Map,$A=new Map,Fh=new Map;function Cy(n,e){try{n.container.addComponent(e)}catch(t){an.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Bn(n){let e=n.name;if(Fh.has(e))return an.debug(`There were multiple attempts to register component ${e}.`),!1;Fh.set(e,n);for(let t of Ks.values())Cy(t,n);for(let t of $A.values())Cy(t,n);return!0}function Ys(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Nt(n){return n.settings!==void 0}var qA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jn=new on("app","Firebase",qA);var Lh=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ct("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jn.create("app-deleted",{appName:this._name})}};var zn=BA;function Js(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:Vh,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw jn.create("bad-app-name",{appName:String(r)});if(t||(t=Th()),!t)throw jn.create("no-options");let s=Ks.get(r);if(s){if(hi(t,s.options)&&hi(i,s.config))return s;throw jn.create("duplicate-app",{appName:r})}let o=new tc(r);for(let l of Fh.values())o.addComponent(l);let c=new Lh(t,i,o);return Ks.set(r,c),c}function ur(n=Vh){let e=Ks.get(n);if(!e&&n===Vh&&Th())return Js();if(!e)throw jn.create("no-app",{appName:n});return e}function ic(){return Array.from(Ks.values())}function Le(n,e,t){var i;let r=(i=zA[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),an.warn(c.join(" "));return}Bn(new Ct(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var GA="firebase-heartbeat-database",WA=1,Qs="firebase-heartbeat-store",Mh=null;function Py(){return Mh||(Mh=Ty(GA,WA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Qs)}catch(t){console.warn(t)}}}}).catch(n=>{throw jn.create("idb-open",{originalErrorMessage:n.message})})),Mh}function HA(n){return _(this,null,function*(){try{let t=(yield Py()).transaction(Qs),i=yield t.objectStore(Qs).get(ky(n));return yield t.done,i}catch(e){if(e instanceof at)an.warn(e.message);else{let t=jn.create("idb-get",{originalErrorMessage:e?.message});an.warn(t.message)}}})}function Sy(n,e){return _(this,null,function*(){try{let i=(yield Py()).transaction(Qs,"readwrite");yield i.objectStore(Qs).put(e,ky(n)),yield i.done}catch(t){if(t instanceof at)an.warn(t.message);else{let i=jn.create("idb-set",{originalErrorMessage:t?.message});an.warn(i.message)}}})}function ky(n){return`${n.name}!${n.options.appId}`}var KA=1024,QA=30*24*60*60*1e3,Uh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new jh(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ry();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=QA}),this._storage.overwrite(this._heartbeatsCache))}catch(i){an.warn(i)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Ry(),{heartbeatsToSend:i,unsentEntries:r}=YA(this._heartbeatsCache.heartbeats),s=Ws(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return an.warn(t),""}})}};function Ry(){return new Date().toISOString().substring(0,10)}function YA(n,e=KA){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Dy(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Dy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var jh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Ch()?my().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield HA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Sy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Sy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Dy(n){return Ws(JSON.stringify({version:2,heartbeats:n})).length}function JA(n){Bn(new Ct("platform-logger",e=>new Oh(e),"PRIVATE")),Bn(new Ct("heartbeat",e=>new Uh(e),"PRIVATE")),Le(Nh,Ay,n),Le(Nh,Ay,"esm2017"),Le("fire-js","")}JA("");var XA="firebase",ZA="10.13.1";Le(XA,ZA,"app");var pi=new Wi("ANGULARFIRE2_VERSION");function sc(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Xs=(n,e)=>{let t=e?[e]:ic(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},dr=class{constructor(){return Xs(eC)}},eC="app-check";function hr(){}var rc=class{zone;delegate;constructor(e,t=cg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,i)}},Bh=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hr,{},hr,hr)),t.pipe(Ve({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},fr=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new rc(Zone.current)),this.insideAngular=t.run(()=>new rc(Zone.current,ag)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(z(be))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oc(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function tC(n){return oc().ngZone.runOutsideAngular(()=>n())}function fi(n){return oc().ngZone.run(()=>n())}function nC(n){return iC(oc())(n)}function iC(n){return function(t){return t=t.lift(new Bh(n.ngZone)),t.pipe(uu(n.outsideAngular),lu(n.insideAngular))}}var rC=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),fi(()=>n.apply(void 0,i))},ct=(n,e)=>function(){let t,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(t||=fi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hr,{},hr,hr))),i[s]=rC(i[s],t));let r=tC(()=>n.apply(this,i));if(!e)if(r instanceof Bt){let s=oc();return r.pipe(uu(s.outsideAngular),lu(s.insideAngular))}else return fi(()=>r);return r instanceof Bt?r.pipe(nC):r instanceof Promise?fi(()=>new Promise((s,o)=>r.then(c=>fi(()=>s(c)),c=>fi(()=>o(c))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:fi(()=>r)};var cn=class{constructor(e){return e}},mi=class{constructor(){return ic()}};function sC(n){return n&&n.length===1?n[0]:new cn(ur())}var zh=new se("angularfire2._apps"),oC={provide:cn,useFactory:sC,deps:[[new st,zh]]},aC={provide:mi,deps:[[new st,zh]]};function cC(n){return(e,t)=>{let i=t.get(Mt);Le("angularfire",pi.full,"core"),Le("angularfire",pi.full,"app"),Le("angular",Mg.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new cn(r)}}function xy(n,...e){return dt([oC,aC,{provide:zh,useFactory:cC(n),multi:!0,deps:[be,Pt,fr,...e]}])}var My=ct(Js,!0);function Yy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Jy=Yy,Xy=new on("auth","Firebase",Yy());var dc=new Un("@firebase/auth");function lC(n,...e){dc.logLevel<=le.WARN&&dc.warn(`Auth (${zn}): ${n}`,...e)}function cc(n,...e){dc.logLevel<=le.ERROR&&dc.error(`Auth (${zn}): ${n}`,...e)}function Gt(n,...e){throw hd(n,...e)}function gi(n,...e){return hd(n,...e)}function Zy(n,e,t){let i=Object.assign(Object.assign({},Jy()),{[e]:t});return new on("auth","Firebase",i).create(e,{appName:n.name})}function hn(n){return Zy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hd(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Xy.create(n,...e)}function Q(n,e,...t){if(!n)throw hd(e,...t)}function ln(n){let e="INTERNAL ASSERTION FAILED: "+n;throw cc(e),new Error(e)}function qn(n,e){n||ln(e)}function Wh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function uC(){return Oy()==="http:"||Oy()==="https:"}function Oy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function hC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uC()||hy()||"connection"in navigator)?navigator.onLine:!0}function dC(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var _i=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,qn(t>e,"Short delay should be less than long delay!"),this.isMobile=uy()||dy()}get(){return hC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function dd(n,e){qn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var fc=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var fC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var pC=new _i(3e4,6e4);function Gn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Wn(s,o,c,l){return _(this,arguments,function*(n,e,t,i,r={}){return ev(n,r,()=>_(this,null,function*(){let h={},f={};i&&(e==="GET"?f=i:h={body:JSON.stringify(i)});let m=Hs(Object.assign({key:n.config.apiKey},f)).slice(1),w=yield n._getAdditionalHeaders();return w["Content-Type"]="application/json",n.languageCode&&(w["X-Firebase-Locale"]=n.languageCode),fc.fetch()(tv(n,n.config.apiHost,t,m),Object.assign({method:e,headers:w,referrerPolicy:"no-referrer"},h))}))})}function ev(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},fC),e);try{let r=new Hh(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw ac(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ac(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ac(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw ac(n,"user-disabled",o);let f=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Zy(n,f,h);Gt(n,f)}}catch(r){if(r instanceof at)throw r;Gt(n,"network-request-failed",{message:String(r)})}})}function oo(s,o,c,l){return _(this,arguments,function*(n,e,t,i,r={}){let h=yield Wn(n,e,t,i,r);return"mfaPendingCredential"in h&&Gt(n,"multi-factor-auth-required",{_serverResponse:h}),h})}function tv(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?dd(n.config,r):`${n.config.apiScheme}://${r}`}function mC(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Hh=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(gi(this.auth,"network-request-failed")),pC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ac(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=gi(n,e,i);return r.customData._tokenResponse=t,r}function Ny(n){return n!==void 0&&n.enterprise!==void 0}var Kh=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return mC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function gC(n,e){return _(this,null,function*(){return Wn(n,"GET","/v2/recaptchaConfig",Gn(n,e))})}function _C(n,e){return _(this,null,function*(){return Wn(n,"POST","/v1/accounts:delete",e)})}function nv(n,e){return _(this,null,function*(){return Wn(n,"POST","/v1/accounts:lookup",e)})}function Zs(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function fd(n,e=!1){return _(this,null,function*(){let t=We(n),i=yield t.getIdToken(e),r=pd(i);Q(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Zs($h(r.auth_time)),issuedAtTime:Zs($h(r.iat)),expirationTime:Zs($h(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function $h(n){return Number(n)*1e3}function pd(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return cc("JWT malformed, contained fewer than 3 sections"),null;try{let r=Eh(t);return r?JSON.parse(r):(cc("Failed to decode base64 JWT payload"),null)}catch(r){return cc("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Vy(n){let e=pd(n);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function to(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof at&&yC(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function yC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Qh=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var no=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zs(this.lastLoginAt),this.creationTime=Zs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function pc(n){return _(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield to(n,nv(t,{idToken:i}));Q(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?iv(s.providerUserInfo):[],c=vC(n.providerData,o),l=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!c?.length,f=l?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new no(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,m)})}function md(n){return _(this,null,function*(){let e=We(n);yield pc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function vC(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function iv(n){return n.map(e=>{var{providerId:t}=e,i=cu(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function wC(n,e){return _(this,null,function*(){let t=yield ev(n,{},()=>_(this,null,function*(){let i=Hs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=tv(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",fc.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function IC(n,e){return _(this,null,function*(){return Wn(n,"POST","/v2/accounts:revokeToken",Gn(n,e))})}var eo=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Q(e.length!==0,"internal-error");let t=Vy(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield wC(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(Q(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Q(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ln("not implemented")}};function $n(n,e){Q(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var pr=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=cu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new no(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield to(this,this.stsTokenManager.getToken(this.auth,e));return Q(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return fd(this,e)}reload(){return md(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield pc(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Nt(this.auth.app))return Promise.reject(hn(this.auth));let e=yield this.getIdToken();return yield to(this,_C(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,c,l,h,f;let m=(i=t.displayName)!==null&&i!==void 0?i:void 0,w=(r=t.email)!==null&&r!==void 0?r:void 0,C=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,k=(o=t.photoURL)!==null&&o!==void 0?o:void 0,N=(c=t.tenantId)!==null&&c!==void 0?c:void 0,R=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,U=(h=t.createdAt)!==null&&h!==void 0?h:void 0,q=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:H,emailVerified:Z,isAnonymous:Pe,providerData:ae,stsTokenManager:E}=t;Q(H&&E,e,"internal-error");let g=eo.fromJSON(this.name,E);Q(typeof H=="string",e,"internal-error"),$n(m,e.name),$n(w,e.name),Q(typeof Z=="boolean",e,"internal-error"),Q(typeof Pe=="boolean",e,"internal-error"),$n(C,e.name),$n(k,e.name),$n(N,e.name),$n(R,e.name),$n(U,e.name),$n(q,e.name);let v=new n({uid:H,auth:e,email:w,emailVerified:Z,displayName:m,isAnonymous:Pe,photoURL:k,phoneNumber:C,tenantId:N,stsTokenManager:g,createdAt:U,lastLoginAt:q});return ae&&Array.isArray(ae)&&(v.providerData=ae.map(I=>Object.assign({},I))),R&&(v._redirectEventId=R),v}static _fromIdTokenResponse(e,t,i=!1){return _(this,null,function*(){let r=new eo;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield pc(s),s})}static _fromGetAccountInfoResponse(e,t,i){return _(this,null,function*(){let r=t.users[0];Q(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?iv(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new eo;c.updateFromIdToken(i);let l=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new no(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,h),l})}};var Fy=new Map;function un(n){qn(n instanceof Function,"Expected a class definition");let e=Fy.get(n);return e?(qn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Fy.set(n,e),e)}var EC=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,i){return _(this,null,function*(){this.storage[t]=i})}_get(t){return _(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Yh=EC;function lc(n,e,t){return`firebase:${n}:${e}:${t}`}var mc=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=lc(this.userKey,r.apiKey,s),this.fullPersistenceKey=lc("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?pr._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return _(this,null,function*(){if(!t.length)return new n(un(Yh),e,i);let r=(yield Promise.all(t.map(h=>_(this,null,function*(){if(yield h._isAvailable())return h})))).filter(h=>h),s=r[0]||un(Yh),o=lc(i,e.config.apiKey,e.name),c=null;for(let h of t)try{let f=yield h._get(o);if(f){let m=pr._fromJSON(e,f);h!==s&&(c=m),s=h;break}}catch{}let l=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,i):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(h=>_(this,null,function*(){if(h!==s)try{yield h._remove(o)}catch{}}))),new n(s,e,i))})}};function Ly(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(av(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lv(e))return"Blackberry";if(uv(e))return"Webos";if(sv(e))return"Safari";if((e.includes("chrome/")||ov(e))&&!e.includes("edge/"))return"Chrome";if(cv(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function rv(n=Be()){return/firefox\//i.test(n)}function sv(n=Be()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ov(n=Be()){return/crios\//i.test(n)}function av(n=Be()){return/iemobile/i.test(n)}function cv(n=Be()){return/android/i.test(n)}function lv(n=Be()){return/blackberry/i.test(n)}function uv(n=Be()){return/webos/i.test(n)}function gd(n=Be()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bC(n=Be()){var e;return gd(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TC(){return fy()&&document.documentMode===10}function hv(n=Be()){return gd(n)||cv(n)||uv(n)||lv(n)||/windows phone/i.test(n)||av(n)}function dv(n,e=[]){let t;switch(n){case"Browser":t=Ly(Be());break;case"Worker":t=`${Ly(Be())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zn}/${i}`}var Jh=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function AC(t){return _(this,arguments,function*(n,e={}){return Wn(n,"GET","/v2/passwordPolicy",Gn(n,e))})}var CC=6,Xh=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:CC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Zh=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gc(this),this.idTokenSubscription=new gc(this),this.beforeStateQueue=new Jh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=un(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield mc.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield nv(this,{idToken:e}),i=yield pr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(Nt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield pc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=dC()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Nt(this.app))return Promise.reject(hn(this));let t=e?We(e):null;return t&&Q(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Nt(this.app)?Promise.reject(hn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Nt(this.app)?Promise.reject(hn(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(un(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield AC(this),t=new Xh(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new on("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield IC(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&un(e)||this._popupRedirectResolver;Q(t,this,"argument-error"),this.redirectPersistenceManager=yield mc.create(this,[un(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,i,r);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return _(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&lC(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function vi(n){return We(n)}var gc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=_y(t=>this.observer=t)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var bc={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SC(n){bc=n}function fv(n){return bc.loadJS(n)}function RC(){return bc.recaptchaEnterpriseScript}function DC(){return bc.gapiScript}function pv(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var PC="recaptcha-enterprise",kC="NO_RECAPTCHA",ed=class{constructor(e){this.type=PC,this.auth=vi(e)}verify(e="verify",t=!1){return _(this,null,function*(){function i(s){return _(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>_(this,null,function*(){gC(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let h=new Kh(l);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(l=>{c(l)})}))})}function r(s,o,c){let l=window.grecaptcha;Ny(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(kC)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(c=>{if(!t&&Ny(window.grecaptcha))r(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=RC();l.length!==0&&(l+=c),fv(l).then(()=>{r(c,s,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})})}};function Uy(n,e,t,i=!1){return _(this,null,function*(){let r=new ed(n),s;try{s=yield r.verify(t)}catch{s=yield r.verify(t,!0)}let o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function td(n,e,t,i){return _(this,null,function*(){var r;if(!((r=n._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield Uy(n,e,t,t==="getOobCode");return i(n,s)}else return i(n,e).catch(s=>_(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield Uy(n,e,t,t==="getOobCode");return i(n,o)}else return Promise.reject(s)}))})}function _d(n,e){let t=Ys(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(hi(s,e??{}))return r;Gt(r,"already-initialized")}return t.initialize({options:e})}function xC(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(un);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function yd(n,e,t){let i=vi(n);Q(i._canInitEmulator,i,"emulator-config-failed"),Q(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=mv(e),{host:o,port:c}=MC(e),l=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||OC()}function mv(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function MC(n){let e=mv(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:jy(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:jy(o)}}}function jy(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function OC(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var io=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ln("not implemented")}_getIdTokenResponse(e){return ln("not implemented")}_linkToIdToken(e,t){return ln("not implemented")}_getReauthenticationResolver(e){return ln("not implemented")}};function NC(n,e){return _(this,null,function*(){return Wn(n,"POST","/v1/accounts:signUp",e)})}function VC(n,e){return _(this,null,function*(){return oo(n,"POST","/v1/accounts:signInWithPassword",Gn(n,e))})}function FC(n,e){return _(this,null,function*(){return oo(n,"POST","/v1/accounts:signInWithEmailLink",Gn(n,e))})}function LC(n,e){return _(this,null,function*(){return oo(n,"POST","/v1/accounts:signInWithEmailLink",Gn(n,e))})}var ro=class n extends io{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return td(e,t,"signInWithPassword",VC);case"emailLink":return FC(e,{email:this._email,oobCode:this._password});default:Gt(e,"internal-error")}})}_linkToIdToken(e,t){return _(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return td(e,i,"signUpPassword",NC);case"emailLink":return LC(e,{idToken:t,email:this._email,oobCode:this._password});default:Gt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function qh(n,e){return _(this,null,function*(){return oo(n,"POST","/v1/accounts:signInWithIdp",Gn(n,e))})}function UC(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jC(n){let e=cr(lr(n)).link,t=e?cr(lr(e)).deep_link_id:null,i=cr(lr(n)).deep_link_id;return(i?cr(lr(i)).link:null)||i||t||e||n}var _c=class n{constructor(e){var t,i,r,s,o,c;let l=cr(lr(e)),h=(t=l.apiKey)!==null&&t!==void 0?t:null,f=(i=l.oobCode)!==null&&i!==void 0?i:null,m=UC((r=l.mode)!==null&&r!==void 0?r:null);Q(h&&f&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=f,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=jC(e);try{return new n(t)}catch{return null}}};var gv=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return ro._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let r=_c.parseLink(i);return Q(r,"argument-error"),ro._fromEmailAndCode(t,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),yc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var nd=class extends yc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function BC(n,e){return _(this,null,function*(){return oo(n,"POST","/v1/accounts:signUp",Gn(n,e))})}var mr=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return _(this,null,function*(){let s=yield pr._fromIdTokenResponse(e,i,r),o=By(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return _(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=By(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function By(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var id=class n extends at{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function _v(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?id._fromErrorAndOperation(n,s,e,i):s})}function zC(n,e,t=!1){return _(this,null,function*(){let i=yield to(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return mr._forOperation(n,"link",i)})}function $C(n,e,t=!1){return _(this,null,function*(){let{auth:i}=n;if(Nt(i.app))return Promise.reject(hn(i));let r="reauthenticate";try{let s=yield to(n,_v(i,r,e,n),t);Q(s.idToken,i,"internal-error");let o=pd(s.idToken);Q(o,i,"internal-error");let{sub:c}=o;return Q(n.uid===c,i,"user-mismatch"),mr._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Gt(i,"user-mismatch"),s}})}function yv(n,e,t=!1){return _(this,null,function*(){if(Nt(n.app))return Promise.reject(hn(n));let i="signIn",r=yield _v(n,i,e),s=yield mr._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function vd(n,e){return _(this,null,function*(){return yv(vi(n),e)})}function vv(n){return _(this,null,function*(){let e=vi(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function wd(n,e,t){return _(this,null,function*(){if(Nt(n.app))return Promise.reject(hn(n));let i=vi(n),o=yield td(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BC).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&vv(n),l}),c=yield mr._fromIdTokenResponse(i,"signIn",o);return yield i._updateCurrentUser(c.user),c})}function Id(n,e,t){return Nt(n.app)?Promise.reject(hn(n)):vd(We(n),gv.credential(e,t)).catch(i=>_(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&vv(n),i}))}function Ed(n,e,t,i){return We(n).onIdTokenChanged(e,t,i)}function bd(n,e,t){return We(n).beforeAuthStateChanged(e,t)}function Td(n,e,t,i){return We(n).onAuthStateChanged(e,t,i)}var vc="__sak";var wc=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vc,"1"),this.storage.removeItem(vc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var qC=1e3,GC=10,WC=(()=>{class n extends wc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hv(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((c,l,h)=>{this.notifyListeners(c,h)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);TC()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,GC):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},qC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return _(this,null,function*(){yield Tn(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return _(this,null,function*(){let i=yield Tn(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return _(this,null,function*(){yield Tn(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),wv=WC;var HC=(()=>{class n extends wc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),Ad=HC;function KC(n){return Promise.all(n.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var QC=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(f=>_(this,null,function*(){return f(i.origin,o)})),h=yield KC(l);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Iv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var rd=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return _(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let h=Iv("",20);r.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(m){let w=m;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(w.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function qt(){return window}function YC(n){qt().location.href=n}function Ev(){return typeof qt().WorkerGlobalScope<"u"&&typeof qt().importScripts=="function"}function JC(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function XC(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ZC(){return Ev()?self:null}var bv="firebaseLocalStorageDb",eS=1,Ic="firebaseLocalStorage",Tv="fbase_key",yi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Tc(n,e){return n.transaction([Ic],e?"readwrite":"readonly").objectStore(Ic)}function tS(){let n=indexedDB.deleteDatabase(bv);return new yi(n).toPromise()}function sd(){let n=indexedDB.open(bv,eS);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Ic,{keyPath:Tv})}catch(r){t(r)}}),n.addEventListener("success",()=>_(this,null,function*(){let i=n.result;i.objectStoreNames.contains(Ic)?e(i):(i.close(),yield tS(),e(yield sd()))}))})}function zy(n,e,t){return _(this,null,function*(){let i=Tc(n,!0).put({[Tv]:e,value:t});return new yi(i).toPromise()})}function nS(n,e){return _(this,null,function*(){let t=Tc(n,!1).get(e),i=yield new yi(t).toPromise();return i===void 0?null:i.value})}function $y(n,e){let t=Tc(n,!0).delete(e);return new yi(t).toPromise()}var iS=800,rS=3,sS=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield sd(),this.db)})}_withRetries(t){return _(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>rS)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return Ev()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=QC._getInstance(ZC()),this.receiver._subscribe("keyChanged",(t,i)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,i;if(this.activeServiceWorker=yield JC(),!this.activeServiceWorker)return;this.sender=new rd(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||XC()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield sd();return yield zy(t,vc,"1"),yield $y(t,vc),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>zy(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let i=yield this._withRetries(r=>nS(r,t));return this.localCache[t]=i,i})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>$y(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(s=>{let o=Tc(s,!1).getAll();return new yi(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),iS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Av=sS;var uM=pv("rcb"),hM=new _i(3e4,6e4);function oS(n,e){return e?un(e):(Q(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var so=class extends io{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qh(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function aS(n){return yv(n.auth,new so(n),n.bypassAuthState)}function cS(n){let{auth:e,user:t}=n;return Q(t,e,"internal-error"),$C(t,new so(n),n.bypassAuthState)}function lS(n){return _(this,null,function*(){let{auth:e,user:t}=n;return Q(t,e,"internal-error"),zC(t,new so(n),n.bypassAuthState)})}var od=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(h){this.reject(h)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aS;case"linkViaPopup":case"linkViaRedirect":return lS;case"reauthViaPopup":case"reauthViaRedirect":return cS;default:Gt(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var dM=new _i(2e3,1e4);var uS="pendingRedirect",uc=new Map,ad=class n extends od{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return _(this,null,function*(){let e=uc.get(this.auth._key());if(!e){try{let i=(yield hS(this.resolver,this.auth))?yield Tn(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}uc.set(this.auth._key(),e)}return this.bypassAuthState||uc.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Tn(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Tn(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function hS(n,e){return _(this,null,function*(){let t=pS(e),i=fS(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function dS(n,e){uc.set(n._key(),e)}function fS(n){return un(n._redirectPersistence)}function pS(n){return lc(uS,n.config.apiKey,n.name)}function mS(n,e,t=!1){return _(this,null,function*(){if(Nt(n.app))return Promise.reject(hn(n));let i=vi(n),r=oS(i,e),o=yield new ad(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var gS=10*60*1e3,cd=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_S(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Cv(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(gi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gS&&this.cachedEventUids.clear(),this.cachedEventUids.has(qy(e))}saveEventToCache(e){this.cachedEventUids.add(qy(e)),this.lastProcessedEventTime=Date.now()}};function qy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Cv({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function _S(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cv(n);default:return!1}}function yS(t){return _(this,arguments,function*(n,e={}){return Wn(n,"GET","/v1/projects",e)})}var vS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wS=/^https?/;function IS(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield yS(n);for(let t of e)try{if(ES(t))return}catch{}Gt(n,"unauthorized-domain")})}function ES(n){let e=Wh(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!wS.test(t))return!1;if(vS.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var bS=new _i(3e4,6e4);function Gy(){let n=qt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function TS(n){return new Promise((e,t)=>{var i,r,s;function o(){Gy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gy(),t(gi(n,"network-request-failed"))},timeout:bS.get()})}if(!((r=(i=qt().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=qt().gapi)===null||s===void 0)&&s.load)o();else{let c=pv("iframefcb");return qt()[c]=()=>{gapi.load?o():t(gi(n,"network-request-failed"))},fv(`${DC()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw hc=null,e})}var hc=null;function AS(n){return hc=hc||TS(n),hc}var CS=new _i(5e3,15e3),SS="__/auth/iframe",RS="emulator/auth/iframe",DS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kS(n){let e=n.config;Q(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?dd(e,RS):`https://${n.config.authDomain}/${SS}`,i={apiKey:e.apiKey,appName:n.name,v:zn},r=PS.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${Hs(i).slice(1)}`}function xS(n){return _(this,null,function*(){let e=yield AS(n),t=qt().gapi;return Q(t,n,"internal-error"),e.open({where:document.body,url:kS(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DS,dontclear:!0},i=>new Promise((r,s)=>_(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=gi(n,"network-request-failed"),c=qt().setTimeout(()=>{s(o)},CS.get());function l(){qt().clearTimeout(c),r(i)}i.ping(l).then(l,()=>{s(o)})})))})}var MS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OS=500,NS=600,VS="_blank",FS="http://localhost",Ec=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function LS(n,e,t,i=OS,r=NS){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},MS),{width:i.toString(),height:r.toString(),top:s,left:o}),h=Be().toLowerCase();t&&(c=ov(h)?VS:t),rv(h)&&(e=e||FS,l.scrollbars="yes");let f=Object.entries(l).reduce((w,[C,k])=>`${w}${C}=${k},`,"");if(bC(h)&&c!=="_self")return US(e||"",c),new Ec(null);let m=window.open(e||"",c,f);Q(m,n,"popup-blocked");try{m.focus()}catch{}return new Ec(m)}function US(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var jS="__/auth/handler",BS="emulator/auth/handler",zS=encodeURIComponent("fac");function Wy(n,e,t,i,r,s){return _(this,null,function*(){Q(n.config.authDomain,n,"auth-domain-config-required"),Q(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:zn,eventId:r};if(e instanceof yc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",gy(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,m]of Object.entries(s||{}))o[f]=m}if(e instanceof nd){let f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let l=yield n._getAppCheckToken(),h=l?`#${zS}=${encodeURIComponent(l)}`:"";return`${$S(n)}?${Hs(c).slice(1)}${h}`})}function $S({config:n}){return n.emulator?dd(n,BS):`https://${n.authDomain}/${jS}`}var Gh="webStorageSupport",ld=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ad,this._completeRedirectFn=mS,this._overrideRedirectResult=dS}_openPopup(e,t,i,r){return _(this,null,function*(){var s;qn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Wy(e,t,i,Wh(),r);return LS(e,o,Iv())})}_openRedirect(e,t,i,r){return _(this,null,function*(){yield this._originValidation(e);let s=yield Wy(e,t,i,Wh(),r);return YC(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(qn(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return _(this,null,function*(){let t=yield xS(e),i=new cd(e);return t.register("authEvent",r=>(Q(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gh,{type:Gh},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[Gh];o!==void 0&&t(!!o),Gt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=IS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hv()||sv()||gd()}},Sv=ld;var Hy="@firebase/auth",Ky="1.7.8";var ud=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function qS(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GS(n){Bn(new Ct("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dv(n)},h=new Zh(i,r,s,l);return xC(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Bn(new Ct("auth-internal",e=>{let t=vi(e.getProvider("auth").getImmediate());return(i=>new ud(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Le(Hy,Ky,qS(n)),Le(Hy,Ky,"esm2017")}var WS=5*60,HS=Ah("authIdTokenMaxAge")||WS,Qy=null,KS=n=>e=>_(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>HS)return;let r=t?.token;Qy!==r&&(Qy=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function Cd(n=ur()){let e=Ys(n,"auth");if(e.isInitialized())return e.getImmediate();let t=_d(n,{popupRedirectResolver:Sv,persistence:[Av,wv,Ad]}),i=Ah("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=KS(s.toString());bd(t,o,()=>o(t.currentUser)),Ed(t,c=>o(c))}}let r=bh("auth");return r&&yd(t,`http://${r}`),t}function QS(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}SC({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=gi("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",QS().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GS("Browser");var Rv="auth",Vt=class{constructor(e){return e}},ao=class{constructor(){return Xs(Rv)}};var Sd=new se("angularfire2.auth-instances");function UR(n,e){let t=sc(Rv,n,e);return t&&new Vt(t)}function jR(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Vt(i)}}var BR={provide:ao,deps:[[new st,Sd]]},zR={provide:Vt,useFactory:UR,deps:[[new st,Sd],cn]};function Dv(n,...e){return Le("angularfire",pi.full,"auth"),dt([zR,BR,{provide:Sd,useFactory:jR(n),multi:!0,deps:[be,Pt,fr,mi,[new st,dr],...e]}])}var Pv=ct(wd,!0);var kv=ct(Cd,!0);var xv=ct(Td,!0);var Mv=ct(Id,!0);var Ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Nv={};var Hn,Rd;(function(){var n;function e(E,g){function v(){}v.prototype=g.prototype,E.D=g.prototype,E.prototype=new v,E.prototype.constructor=E,E.C=function(I,b,A){for(var y=Array(arguments.length-2),Zt=2;Zt<arguments.length;Zt++)y[Zt-2]=arguments[Zt];return g.prototype[b].apply(I,y)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,g,v){v||(v=0);var I=Array(16);if(typeof g=="string")for(var b=0;16>b;++b)I[b]=g.charCodeAt(v++)|g.charCodeAt(v++)<<8|g.charCodeAt(v++)<<16|g.charCodeAt(v++)<<24;else for(b=0;16>b;++b)I[b]=g[v++]|g[v++]<<8|g[v++]<<16|g[v++]<<24;g=E.g[0],v=E.g[1],b=E.g[2];var A=E.g[3],y=g+(A^v&(b^A))+I[0]+3614090360&4294967295;g=v+(y<<7&4294967295|y>>>25),y=A+(b^g&(v^b))+I[1]+3905402710&4294967295,A=g+(y<<12&4294967295|y>>>20),y=b+(v^A&(g^v))+I[2]+606105819&4294967295,b=A+(y<<17&4294967295|y>>>15),y=v+(g^b&(A^g))+I[3]+3250441966&4294967295,v=b+(y<<22&4294967295|y>>>10),y=g+(A^v&(b^A))+I[4]+4118548399&4294967295,g=v+(y<<7&4294967295|y>>>25),y=A+(b^g&(v^b))+I[5]+1200080426&4294967295,A=g+(y<<12&4294967295|y>>>20),y=b+(v^A&(g^v))+I[6]+2821735955&4294967295,b=A+(y<<17&4294967295|y>>>15),y=v+(g^b&(A^g))+I[7]+4249261313&4294967295,v=b+(y<<22&4294967295|y>>>10),y=g+(A^v&(b^A))+I[8]+1770035416&4294967295,g=v+(y<<7&4294967295|y>>>25),y=A+(b^g&(v^b))+I[9]+2336552879&4294967295,A=g+(y<<12&4294967295|y>>>20),y=b+(v^A&(g^v))+I[10]+4294925233&4294967295,b=A+(y<<17&4294967295|y>>>15),y=v+(g^b&(A^g))+I[11]+2304563134&4294967295,v=b+(y<<22&4294967295|y>>>10),y=g+(A^v&(b^A))+I[12]+1804603682&4294967295,g=v+(y<<7&4294967295|y>>>25),y=A+(b^g&(v^b))+I[13]+4254626195&4294967295,A=g+(y<<12&4294967295|y>>>20),y=b+(v^A&(g^v))+I[14]+2792965006&4294967295,b=A+(y<<17&4294967295|y>>>15),y=v+(g^b&(A^g))+I[15]+1236535329&4294967295,v=b+(y<<22&4294967295|y>>>10),y=g+(b^A&(v^b))+I[1]+4129170786&4294967295,g=v+(y<<5&4294967295|y>>>27),y=A+(v^b&(g^v))+I[6]+3225465664&4294967295,A=g+(y<<9&4294967295|y>>>23),y=b+(g^v&(A^g))+I[11]+643717713&4294967295,b=A+(y<<14&4294967295|y>>>18),y=v+(A^g&(b^A))+I[0]+3921069994&4294967295,v=b+(y<<20&4294967295|y>>>12),y=g+(b^A&(v^b))+I[5]+3593408605&4294967295,g=v+(y<<5&4294967295|y>>>27),y=A+(v^b&(g^v))+I[10]+38016083&4294967295,A=g+(y<<9&4294967295|y>>>23),y=b+(g^v&(A^g))+I[15]+3634488961&4294967295,b=A+(y<<14&4294967295|y>>>18),y=v+(A^g&(b^A))+I[4]+3889429448&4294967295,v=b+(y<<20&4294967295|y>>>12),y=g+(b^A&(v^b))+I[9]+568446438&4294967295,g=v+(y<<5&4294967295|y>>>27),y=A+(v^b&(g^v))+I[14]+3275163606&4294967295,A=g+(y<<9&4294967295|y>>>23),y=b+(g^v&(A^g))+I[3]+4107603335&4294967295,b=A+(y<<14&4294967295|y>>>18),y=v+(A^g&(b^A))+I[8]+1163531501&4294967295,v=b+(y<<20&4294967295|y>>>12),y=g+(b^A&(v^b))+I[13]+2850285829&4294967295,g=v+(y<<5&4294967295|y>>>27),y=A+(v^b&(g^v))+I[2]+4243563512&4294967295,A=g+(y<<9&4294967295|y>>>23),y=b+(g^v&(A^g))+I[7]+1735328473&4294967295,b=A+(y<<14&4294967295|y>>>18),y=v+(A^g&(b^A))+I[12]+2368359562&4294967295,v=b+(y<<20&4294967295|y>>>12),y=g+(v^b^A)+I[5]+4294588738&4294967295,g=v+(y<<4&4294967295|y>>>28),y=A+(g^v^b)+I[8]+2272392833&4294967295,A=g+(y<<11&4294967295|y>>>21),y=b+(A^g^v)+I[11]+1839030562&4294967295,b=A+(y<<16&4294967295|y>>>16),y=v+(b^A^g)+I[14]+4259657740&4294967295,v=b+(y<<23&4294967295|y>>>9),y=g+(v^b^A)+I[1]+2763975236&4294967295,g=v+(y<<4&4294967295|y>>>28),y=A+(g^v^b)+I[4]+1272893353&4294967295,A=g+(y<<11&4294967295|y>>>21),y=b+(A^g^v)+I[7]+4139469664&4294967295,b=A+(y<<16&4294967295|y>>>16),y=v+(b^A^g)+I[10]+3200236656&4294967295,v=b+(y<<23&4294967295|y>>>9),y=g+(v^b^A)+I[13]+681279174&4294967295,g=v+(y<<4&4294967295|y>>>28),y=A+(g^v^b)+I[0]+3936430074&4294967295,A=g+(y<<11&4294967295|y>>>21),y=b+(A^g^v)+I[3]+3572445317&4294967295,b=A+(y<<16&4294967295|y>>>16),y=v+(b^A^g)+I[6]+76029189&4294967295,v=b+(y<<23&4294967295|y>>>9),y=g+(v^b^A)+I[9]+3654602809&4294967295,g=v+(y<<4&4294967295|y>>>28),y=A+(g^v^b)+I[12]+3873151461&4294967295,A=g+(y<<11&4294967295|y>>>21),y=b+(A^g^v)+I[15]+530742520&4294967295,b=A+(y<<16&4294967295|y>>>16),y=v+(b^A^g)+I[2]+3299628645&4294967295,v=b+(y<<23&4294967295|y>>>9),y=g+(b^(v|~A))+I[0]+4096336452&4294967295,g=v+(y<<6&4294967295|y>>>26),y=A+(v^(g|~b))+I[7]+1126891415&4294967295,A=g+(y<<10&4294967295|y>>>22),y=b+(g^(A|~v))+I[14]+2878612391&4294967295,b=A+(y<<15&4294967295|y>>>17),y=v+(A^(b|~g))+I[5]+4237533241&4294967295,v=b+(y<<21&4294967295|y>>>11),y=g+(b^(v|~A))+I[12]+1700485571&4294967295,g=v+(y<<6&4294967295|y>>>26),y=A+(v^(g|~b))+I[3]+2399980690&4294967295,A=g+(y<<10&4294967295|y>>>22),y=b+(g^(A|~v))+I[10]+4293915773&4294967295,b=A+(y<<15&4294967295|y>>>17),y=v+(A^(b|~g))+I[1]+2240044497&4294967295,v=b+(y<<21&4294967295|y>>>11),y=g+(b^(v|~A))+I[8]+1873313359&4294967295,g=v+(y<<6&4294967295|y>>>26),y=A+(v^(g|~b))+I[15]+4264355552&4294967295,A=g+(y<<10&4294967295|y>>>22),y=b+(g^(A|~v))+I[6]+2734768916&4294967295,b=A+(y<<15&4294967295|y>>>17),y=v+(A^(b|~g))+I[13]+1309151649&4294967295,v=b+(y<<21&4294967295|y>>>11),y=g+(b^(v|~A))+I[4]+4149444226&4294967295,g=v+(y<<6&4294967295|y>>>26),y=A+(v^(g|~b))+I[11]+3174756917&4294967295,A=g+(y<<10&4294967295|y>>>22),y=b+(g^(A|~v))+I[2]+718787259&4294967295,b=A+(y<<15&4294967295|y>>>17),y=v+(A^(b|~g))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+g&4294967295,E.g[1]=E.g[1]+(b+(y<<21&4294967295|y>>>11))&4294967295,E.g[2]=E.g[2]+b&4294967295,E.g[3]=E.g[3]+A&4294967295}i.prototype.u=function(E,g){g===void 0&&(g=E.length);for(var v=g-this.blockSize,I=this.B,b=this.h,A=0;A<g;){if(b==0)for(;A<=v;)r(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<g;)if(I[b++]=E.charCodeAt(A++),b==this.blockSize){r(this,I),b=0;break}}else for(;A<g;)if(I[b++]=E[A++],b==this.blockSize){r(this,I),b=0;break}}this.h=b,this.o+=g},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var g=1;g<E.length-8;++g)E[g]=0;var v=8*this.o;for(g=E.length-8;g<E.length;++g)E[g]=v&255,v/=256;for(this.u(E),E=Array(16),g=v=0;4>g;++g)for(var I=0;32>I;I+=8)E[v++]=this.g[g]>>>I&255;return E};function s(E,g){var v=c;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=g(E)}function o(E,g){this.h=g;for(var v=[],I=!0,b=E.length-1;0<=b;b--){var A=E[b]|0;I&&A==g||(v[b]=A,I=!1)}this.g=v}var c={};function l(E){return-128<=E&&128>E?s(E,function(g){return new o([g|0],0>g?-1:0)}):new o([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return R(h(-E));for(var g=[],v=1,I=0;E>=v;I++)g[I]=E/v|0,v*=4294967296;return new o(g,0)}function f(E,g){if(E.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(E.charAt(0)=="-")return R(f(E.substring(1),g));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=h(Math.pow(g,8)),I=m,b=0;b<E.length;b+=8){var A=Math.min(8,E.length-b),y=parseInt(E.substring(b,b+A),g);8>A?(A=h(Math.pow(g,A)),I=I.j(A).add(h(y))):(I=I.j(v),I=I.add(h(y)))}return I}var m=l(0),w=l(1),C=l(16777216);n=o.prototype,n.m=function(){if(N(this))return-R(this).m();for(var E=0,g=1,v=0;v<this.g.length;v++){var I=this.i(v);E+=(0<=I?I:4294967296+I)*g,g*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(k(this))return"0";if(N(this))return"-"+R(this).toString(E);for(var g=h(Math.pow(E,6)),v=this,I="";;){var b=Z(v,g).g;v=U(v,b.j(g));var A=((0<v.g.length?v.g[0]:v.h)>>>0).toString(E);if(v=b,k(v))return A+I;for(;6>A.length;)A="0"+A;I=A+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function k(E){if(E.h!=0)return!1;for(var g=0;g<E.g.length;g++)if(E.g[g]!=0)return!1;return!0}function N(E){return E.h==-1}n.l=function(E){return E=U(this,E),N(E)?-1:k(E)?0:1};function R(E){for(var g=E.g.length,v=[],I=0;I<g;I++)v[I]=~E.g[I];return new o(v,~E.h).add(w)}n.abs=function(){return N(this)?R(this):this},n.add=function(E){for(var g=Math.max(this.g.length,E.g.length),v=[],I=0,b=0;b<=g;b++){var A=I+(this.i(b)&65535)+(E.i(b)&65535),y=(A>>>16)+(this.i(b)>>>16)+(E.i(b)>>>16);I=y>>>16,A&=65535,y&=65535,v[b]=y<<16|A}return new o(v,v[v.length-1]&-2147483648?-1:0)};function U(E,g){return E.add(R(g))}n.j=function(E){if(k(this)||k(E))return m;if(N(this))return N(E)?R(this).j(R(E)):R(R(this).j(E));if(N(E))return R(this.j(R(E)));if(0>this.l(C)&&0>E.l(C))return h(this.m()*E.m());for(var g=this.g.length+E.g.length,v=[],I=0;I<2*g;I++)v[I]=0;for(I=0;I<this.g.length;I++)for(var b=0;b<E.g.length;b++){var A=this.i(I)>>>16,y=this.i(I)&65535,Zt=E.i(b)>>>16,Br=E.i(b)&65535;v[2*I+2*b]+=y*Br,q(v,2*I+2*b),v[2*I+2*b+1]+=A*Br,q(v,2*I+2*b+1),v[2*I+2*b+1]+=y*Zt,q(v,2*I+2*b+1),v[2*I+2*b+2]+=A*Zt,q(v,2*I+2*b+2)}for(I=0;I<g;I++)v[I]=v[2*I+1]<<16|v[2*I];for(I=g;I<2*g;I++)v[I]=0;return new o(v,0)};function q(E,g){for(;(E[g]&65535)!=E[g];)E[g+1]+=E[g]>>>16,E[g]&=65535,g++}function H(E,g){this.g=E,this.h=g}function Z(E,g){if(k(g))throw Error("division by zero");if(k(E))return new H(m,m);if(N(E))return g=Z(R(E),g),new H(R(g.g),R(g.h));if(N(g))return g=Z(E,R(g)),new H(R(g.g),g.h);if(30<E.g.length){if(N(E)||N(g))throw Error("slowDivide_ only works with positive integers.");for(var v=w,I=g;0>=I.l(E);)v=Pe(v),I=Pe(I);var b=ae(v,1),A=ae(I,1);for(I=ae(I,2),v=ae(v,2);!k(I);){var y=A.add(I);0>=y.l(E)&&(b=b.add(v),A=y),I=ae(I,1),v=ae(v,1)}return g=U(E,b.j(g)),new H(b,g)}for(b=m;0<=E.l(g);){for(v=Math.max(1,Math.floor(E.m()/g.m())),I=Math.ceil(Math.log(v)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),A=h(v),y=A.j(g);N(y)||0<y.l(E);)v-=I,A=h(v),y=A.j(g);k(A)&&(A=w),b=b.add(A),E=U(E,y)}return new H(b,E)}n.A=function(E){return Z(this,E).h},n.and=function(E){for(var g=Math.max(this.g.length,E.g.length),v=[],I=0;I<g;I++)v[I]=this.i(I)&E.i(I);return new o(v,this.h&E.h)},n.or=function(E){for(var g=Math.max(this.g.length,E.g.length),v=[],I=0;I<g;I++)v[I]=this.i(I)|E.i(I);return new o(v,this.h|E.h)},n.xor=function(E){for(var g=Math.max(this.g.length,E.g.length),v=[],I=0;I<g;I++)v[I]=this.i(I)^E.i(I);return new o(v,this.h^E.h)};function Pe(E){for(var g=E.g.length+1,v=[],I=0;I<g;I++)v[I]=E.i(I)<<1|E.i(I-1)>>>31;return new o(v,E.h)}function ae(E,g){var v=g>>5;g%=32;for(var I=E.g.length-v,b=[],A=0;A<I;A++)b[A]=0<g?E.i(A+v)>>>g|E.i(A+v+1)<<32-g:E.i(A+v);return new o(b,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Rd=Nv.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Hn=Nv.Integer=o}).apply(typeof Ov<"u"?Ov:typeof self<"u"?self:typeof window<"u"?window:{});var Ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dn={};var Dd,Pd,gr,kd,co,Cc,xd,Md,Od;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,d){return a==Array.prototype||a==Object.prototype||(a[u]=d.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ac=="object"&&Ac];for(var u=0;u<a.length;++u){var d=a[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var i=t(this);function r(a,u){if(u)e:{var d=i;a=a.split(".");for(var p=0;p<a.length-1;p++){var T=a[p];if(!(T in d))break e;d=d[T]}a=a[a.length-1],p=d[a],u=u(p),u!=p&&u!=null&&e(d,a,{configurable:!0,writable:!0,value:u})}}function s(a,u){a instanceof String&&(a+="");var d=0,p=!1,T={next:function(){if(!p&&d<a.length){var S=d++;return{value:u(S,a[S]),done:!1}}return p=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}r("Array.prototype.values",function(a){return a||function(){return s(this,function(u,d){return d})}});var o=o||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function h(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function f(a,u,d){return a.call.apply(a.bind,arguments)}function m(a,u,d){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,p),a.apply(u,T)}}return function(){return a.apply(u,arguments)}}function w(a,u,d){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,w.apply(null,arguments)}function C(a,u){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function k(a,u){function d(){}d.prototype=u.prototype,a.aa=u.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(p,T,S){for(var V=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)V[ye-2]=arguments[ye];return u.prototype[T].apply(p,V)}}function N(a){let u=a.length;if(0<u){let d=Array(u);for(let p=0;p<u;p++)d[p]=a[p];return d}return[]}function R(a,u){for(let d=1;d<arguments.length;d++){let p=arguments[d];if(l(p)){let T=a.length||0,S=p.length||0;a.length=T+S;for(let V=0;V<S;V++)a[T+V]=p[V]}else a.push(p)}}class U{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function q(a){return/^[\s\xa0]*$/.test(a)}function H(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function Z(a){return Z[" "](a),a}Z[" "]=function(){};var Pe=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function ae(a,u,d){for(let p in a)u.call(d,a[p],p,a)}function E(a,u){for(let d in a)u.call(void 0,a[d],d,a)}function g(a){let u={};for(let d in a)u[d]=a[d];return u}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,u){let d,p;for(let T=1;T<arguments.length;T++){p=arguments[T];for(d in p)a[d]=p[d];for(let S=0;S<v.length;S++)d=v[S],Object.prototype.hasOwnProperty.call(p,d)&&(a[d]=p[d])}}function b(a){var u=1;a=a.split(":");let d=[];for(;0<u&&a.length;)d.push(a.shift()),u--;return a.length&&d.push(a.join(":")),d}function A(a){c.setTimeout(()=>{throw a},0)}function y(){var a=Nl;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class Zt{constructor(){this.h=this.g=null}add(u,d){let p=Br.get();p.set(u,d),this.h?this.h.next=p:this.g=p,this.h=p}}var Br=new U(()=>new II,a=>a.reset());class II{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let zr,$r=!1,Nl=new Zt,rm=()=>{let a=c.Promise.resolve(void 0);zr=()=>{a.then(EI)}};var EI=()=>{for(var a;a=y();){try{a.h.call(a.g)}catch(d){A(d)}var u=Br;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}$r=!1};function wn(){this.s=this.s,this.C=this.C}wn.prototype.s=!1,wn.prototype.ma=function(){this.s||(this.s=!0,this.N())},wn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ke(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}Ke.prototype.h=function(){this.defaultPrevented=!0};var bI=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let d=()=>{};c.addEventListener("test",d,u),c.removeEventListener("test",d,u)}catch{}return a}();function qr(a,u){if(Ke.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(Pe){e:{try{Z(u.nodeName);var T=!0;break e}catch{}T=!1}T||(u=null)}}else d=="mouseover"?u=a.fromElement:d=="mouseout"&&(u=a.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:TI[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&qr.aa.h.call(this)}}k(qr,Ke);var TI={2:"touch",3:"pen",4:"mouse"};qr.prototype.h=function(){qr.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Gr="closure_listenable_"+(1e6*Math.random()|0),AI=0;function CI(a,u,d,p,T){this.listener=a,this.proxy=null,this.src=u,this.type=d,this.capture=!!p,this.ha=T,this.key=++AI,this.da=this.fa=!1}function zo(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function $o(a){this.src=a,this.g={},this.h=0}$o.prototype.add=function(a,u,d,p,T){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var V=Fl(a,u,p,T);return-1<V?(u=a[V],d||(u.fa=!1)):(u=new CI(u,this.src,S,!!p,T),u.fa=d,a.push(u)),u};function Vl(a,u){var d=u.type;if(d in a.g){var p=a.g[d],T=Array.prototype.indexOf.call(p,u,void 0),S;(S=0<=T)&&Array.prototype.splice.call(p,T,1),S&&(zo(u),a.g[d].length==0&&(delete a.g[d],a.h--))}}function Fl(a,u,d,p){for(var T=0;T<a.length;++T){var S=a[T];if(!S.da&&S.listener==u&&S.capture==!!d&&S.ha==p)return T}return-1}var Ll="closure_lm_"+(1e6*Math.random()|0),Ul={};function sm(a,u,d,p,T){if(p&&p.once)return am(a,u,d,p,T);if(Array.isArray(u)){for(var S=0;S<u.length;S++)sm(a,u[S],d,p,T);return null}return d=$l(d),a&&a[Gr]?a.K(u,d,h(p)?!!p.capture:!!p,T):om(a,u,d,!1,p,T)}function om(a,u,d,p,T,S){if(!u)throw Error("Invalid event type");var V=h(T)?!!T.capture:!!T,ye=Bl(a);if(ye||(a[Ll]=ye=new $o(a)),d=ye.add(u,d,p,V,S),d.proxy)return d;if(p=SI(),d.proxy=p,p.src=a,p.listener=d,a.addEventListener)bI||(T=V),T===void 0&&(T=!1),a.addEventListener(u.toString(),p,T);else if(a.attachEvent)a.attachEvent(lm(u.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function SI(){function a(d){return u.call(a.src,a.listener,d)}let u=RI;return a}function am(a,u,d,p,T){if(Array.isArray(u)){for(var S=0;S<u.length;S++)am(a,u[S],d,p,T);return null}return d=$l(d),a&&a[Gr]?a.L(u,d,h(p)?!!p.capture:!!p,T):om(a,u,d,!0,p,T)}function cm(a,u,d,p,T){if(Array.isArray(u))for(var S=0;S<u.length;S++)cm(a,u[S],d,p,T);else p=h(p)?!!p.capture:!!p,d=$l(d),a&&a[Gr]?(a=a.i,u=String(u).toString(),u in a.g&&(S=a.g[u],d=Fl(S,d,p,T),-1<d&&(zo(S[d]),Array.prototype.splice.call(S,d,1),S.length==0&&(delete a.g[u],a.h--)))):a&&(a=Bl(a))&&(u=a.g[u.toString()],a=-1,u&&(a=Fl(u,d,p,T)),(d=-1<a?u[a]:null)&&jl(d))}function jl(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[Gr])Vl(u.i,a);else{var d=a.type,p=a.proxy;u.removeEventListener?u.removeEventListener(d,p,a.capture):u.detachEvent?u.detachEvent(lm(d),p):u.addListener&&u.removeListener&&u.removeListener(p),(d=Bl(u))?(Vl(d,a),d.h==0&&(d.src=null,u[Ll]=null)):zo(a)}}}function lm(a){return a in Ul?Ul[a]:Ul[a]="on"+a}function RI(a,u){if(a.da)a=!0;else{u=new qr(u,this);var d=a.listener,p=a.ha||a.src;a.fa&&jl(a),a=d.call(p,u)}return a}function Bl(a){return a=a[Ll],a instanceof $o?a:null}var zl="__closure_events_fn_"+(1e9*Math.random()>>>0);function $l(a){return typeof a=="function"?a:(a[zl]||(a[zl]=function(u){return a.handleEvent(u)}),a[zl])}function Qe(){wn.call(this),this.i=new $o(this),this.M=this,this.F=null}k(Qe,wn),Qe.prototype[Gr]=!0,Qe.prototype.removeEventListener=function(a,u,d,p){cm(this,a,u,d,p)};function it(a,u){var d,p=a.F;if(p)for(d=[];p;p=p.F)d.push(p);if(a=a.M,p=u.type||u,typeof u=="string")u=new Ke(u,a);else if(u instanceof Ke)u.target=u.target||a;else{var T=u;u=new Ke(p,a),I(u,T)}if(T=!0,d)for(var S=d.length-1;0<=S;S--){var V=u.g=d[S];T=qo(V,p,!0,u)&&T}if(V=u.g=a,T=qo(V,p,!0,u)&&T,T=qo(V,p,!1,u)&&T,d)for(S=0;S<d.length;S++)V=u.g=d[S],T=qo(V,p,!1,u)&&T}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var d=a.g[u],p=0;p<d.length;p++)zo(d[p]);delete a.g[u],a.h--}}this.F=null},Qe.prototype.K=function(a,u,d,p){return this.i.add(String(a),u,!1,d,p)},Qe.prototype.L=function(a,u,d,p){return this.i.add(String(a),u,!0,d,p)};function qo(a,u,d,p){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var T=!0,S=0;S<u.length;++S){var V=u[S];if(V&&!V.da&&V.capture==d){var ye=V.listener,$e=V.ha||V.src;V.fa&&Vl(a.i,V),T=ye.call($e,p)!==!1&&T}}return T&&!p.defaultPrevented}function um(a,u,d){if(typeof a=="function")d&&(a=w(a,d));else if(a&&typeof a.handleEvent=="function")a=w(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function hm(a){a.g=um(()=>{a.g=null,a.i&&(a.i=!1,hm(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class DI extends wn{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:hm(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(a){wn.call(this),this.h=a,this.g={}}k(Wr,wn);var dm=[];function fm(a){ae(a.g,function(u,d){this.g.hasOwnProperty(d)&&jl(u)},a),a.g={}}Wr.prototype.N=function(){Wr.aa.N.call(this),fm(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ql=c.JSON.stringify,PI=c.JSON.parse,kI=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Gl(){}Gl.prototype.h=null;function pm(a){return a.h||(a.h=a.i())}function mm(){}var Hr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wl(){Ke.call(this,"d")}k(Wl,Ke);function Hl(){Ke.call(this,"c")}k(Hl,Ke);var ei={},gm=null;function Go(){return gm=gm||new Qe}ei.La="serverreachability";function _m(a){Ke.call(this,ei.La,a)}k(_m,Ke);function Kr(a){let u=Go();it(u,new _m(u))}ei.STAT_EVENT="statevent";function ym(a,u){Ke.call(this,ei.STAT_EVENT,a),this.stat=u}k(ym,Ke);function rt(a){let u=Go();it(u,new ym(u,a))}ei.Ma="timingevent";function vm(a,u){Ke.call(this,ei.Ma,a),this.size=u}k(vm,Ke);function Qr(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function Yr(){this.g=!0}Yr.prototype.xa=function(){this.g=!1};function xI(a,u,d,p,T,S){a.info(function(){if(a.g)if(S)for(var V="",ye=S.split("&"),$e=0;$e<ye.length;$e++){var pe=ye[$e].split("=");if(1<pe.length){var Ye=pe[0];pe=pe[1];var Je=Ye.split("_");V=2<=Je.length&&Je[1]=="type"?V+(Ye+"="+pe+"&"):V+(Ye+"=redacted&")}}else V=null;else V=S;return"XMLHTTP REQ ("+p+") [attempt "+T+"]: "+u+`
`+d+`
`+V})}function MI(a,u,d,p,T,S,V){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+T+"]: "+u+`
`+d+`
`+S+" "+V})}function Ni(a,u,d,p){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+NI(a,d)+(p?" "+p:"")})}function OI(a,u){a.info(function(){return"TIMEOUT: "+u})}Yr.prototype.info=function(){};function NI(a,u){if(!a.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var p=d[a];if(!(2>p.length)){var T=p[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var V=1;V<T.length;V++)T[V]=""}}}}return ql(d)}catch{return u}}var Wo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kl;function Ho(){}k(Ho,Gl),Ho.prototype.g=function(){return new XMLHttpRequest},Ho.prototype.i=function(){return{}},Kl=new Ho;function In(a,u,d,p){this.j=a,this.i=u,this.l=d,this.R=p||1,this.U=new Wr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Im}function Im(){this.i=null,this.g="",this.h=!1}var Em={},Ql={};function Yl(a,u,d){a.L=1,a.v=Jo(en(u)),a.m=d,a.P=!0,bm(a,null)}function bm(a,u){a.F=Date.now(),Ko(a),a.A=en(a.v);var d=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),Fm(d.i,"t",p),a.C=0,d=a.j.J,a.h=new Im,a.g=tg(a.j,d?u:null,!a.m),0<a.O&&(a.M=new DI(w(a.Y,a,a.g),a.O)),u=a.U,d=a.g,p=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(dm[0]=T.toString()),T=dm);for(var S=0;S<T.length;S++){var V=sm(d,T[S],p||u.handleEvent,!1,u.h||u);if(!V)break;u.g[V.key]=V}u=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),Kr(),xI(a.i,a.u,a.A,a.l,a.R,a.m)}In.prototype.ca=function(a){a=a.target;let u=this.M;u&&tn(a)==3?u.j():this.Y(a)},In.prototype.Y=function(a){try{if(a==this.g)e:{let Je=tn(this.g);var u=this.g.Ba();let Li=this.g.Z();if(!(3>Je)&&(Je!=3||this.g&&(this.h.h||this.g.oa()||qm(this.g)))){this.J||Je!=4||u==7||(u==8||0>=Li?Kr(3):Kr(2)),Jl(this);var d=this.g.Z();this.X=d;t:if(Tm(this)){var p=qm(this.g);a="";var T=p.length,S=tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ti(this),Jr(this);var V="";break t}this.h.i=new c.TextDecoder}for(u=0;u<T;u++)this.h.h=!0,a+=this.h.i.decode(p[u],{stream:!(S&&u==T-1)});p.length=0,this.h.g+=a,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=d==200,MI(this.i,this.u,this.A,this.l,this.R,Je,d),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,$e=this.g;if((ye=$e.g?$e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(ye)){var pe=ye;break t}}pe=null}if(d=pe)Ni(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xl(this,d);else{this.o=!1,this.s=3,rt(12),ti(this),Jr(this);break e}}if(this.P){d=!0;let Rt;for(;!this.J&&this.C<V.length;)if(Rt=VI(this,V),Rt==Ql){Je==4&&(this.s=4,rt(14),d=!1),Ni(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==Em){this.s=4,rt(15),Ni(this.i,this.l,V,"[Invalid Chunk]"),d=!1;break}else Ni(this.i,this.l,Rt,null),Xl(this,Rt);if(Tm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||V.length!=0||this.h.h||(this.s=1,rt(16),d=!1),this.o=this.o&&d,!d)Ni(this.i,this.l,V,"[Invalid Chunked Response]"),ti(this),Jr(this);else if(0<V.length&&!this.W){this.W=!0;var Ye=this.j;Ye.g==this&&Ye.ba&&!Ye.M&&(Ye.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),ru(Ye),Ye.M=!0,rt(11))}}else Ni(this.i,this.l,V,null),Xl(this,V);Je==4&&ti(this),this.o&&!this.J&&(Je==4?Jm(this.j,this):(this.o=!1,Ko(this)))}else ZI(this.g),d==400&&0<V.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),ti(this),Jr(this)}}}catch{}finally{}};function Tm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function VI(a,u){var d=a.C,p=u.indexOf(`
`,d);return p==-1?Ql:(d=Number(u.substring(d,p)),isNaN(d)?Em:(p+=1,p+d>u.length?Ql:(u=u.slice(p,p+d),a.C=p+d,u)))}In.prototype.cancel=function(){this.J=!0,ti(this)};function Ko(a){a.S=Date.now()+a.I,Am(a,a.I)}function Am(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Qr(w(a.ba,a),u)}function Jl(a){a.B&&(c.clearTimeout(a.B),a.B=null)}In.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(OI(this.i,this.A),this.L!=2&&(Kr(),rt(17)),ti(this),this.s=2,Jr(this)):Am(this,this.S-a)};function Jr(a){a.j.G==0||a.J||Jm(a.j,a)}function ti(a){Jl(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,fm(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function Xl(a,u){try{var d=a.j;if(d.G!=0&&(d.g==a||Zl(d.h,a))){if(!a.K&&Zl(d.h,a)&&d.G==3){try{var p=d.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var T=p;if(T[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)na(d),ea(d);else break e;iu(d),rt(18)}}else d.za=T[1],0<d.za-d.T&&37500>T[2]&&d.F&&d.v==0&&!d.C&&(d.C=Qr(w(d.Za,d),6e3));if(1>=Rm(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else ii(d,11)}else if((a.K||d.g==a)&&na(d),!q(u))for(T=d.Da.g.parse(u),u=0;u<T.length;u++){let pe=T[u];if(d.T=pe[0],pe=pe[1],d.G==2)if(pe[0]=="c"){d.K=pe[1],d.ia=pe[2];let Ye=pe[3];Ye!=null&&(d.la=Ye,d.j.info("VER="+d.la));let Je=pe[4];Je!=null&&(d.Aa=Je,d.j.info("SVER="+d.Aa));let Li=pe[5];Li!=null&&typeof Li=="number"&&0<Li&&(p=1.5*Li,d.L=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;let Rt=a.g;if(Rt){let ra=Rt.g?Rt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ra){var S=p.h;S.g||ra.indexOf("spdy")==-1&&ra.indexOf("quic")==-1&&ra.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(eu(S,S.h),S.h=null))}if(p.D){let su=Rt.g?Rt.g.getResponseHeader("X-HTTP-Session-Id"):null;su&&(p.ya=su,Ee(p.I,p.D,su))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),p=d;var V=a;if(p.qa=eg(p,p.J?p.ia:null,p.W),V.K){Dm(p.h,V);var ye=V,$e=p.L;$e&&(ye.I=$e),ye.B&&(Jl(ye),Ko(ye)),p.g=V}else Qm(p);0<d.i.length&&ta(d)}else pe[0]!="stop"&&pe[0]!="close"||ii(d,7);else d.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?ii(d,7):nu(d):pe[0]!="noop"&&d.l&&d.l.ta(pe),d.v=0)}}Kr(4)}catch{}}var FI=class{constructor(a,u){this.g=a,this.map=u}};function Cm(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Rm(a){return a.h?1:a.g?a.g.size:0}function Zl(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function eu(a,u){a.g?a.g.add(u):a.h=u}function Dm(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}Cm.prototype.cancel=function(){if(this.i=Pm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Pm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let d of a.g.values())u=u.concat(d.D);return u}return N(a.i)}function LI(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],d=a.length,p=0;p<d;p++)u.push(a[p]);return u}u=[],d=0;for(p in a)u[d++]=a[p];return u}function UI(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var d=0;d<a;d++)u.push(d);return u}u=[],d=0;for(let p in a)u[d++]=p;return u}}}function km(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var d=UI(a),p=LI(a),T=p.length,S=0;S<T;S++)u.call(void 0,p[S],d&&d[S],a)}var xm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jI(a,u){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var p=a[d].indexOf("="),T=null;if(0<=p){var S=a[d].substring(0,p);T=a[d].substring(p+1)}else S=a[d];u(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function ni(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ni){this.h=a.h,Qo(this,a.j),this.o=a.o,this.g=a.g,Yo(this,a.s),this.l=a.l;var u=a.i,d=new es;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),Mm(this,d),this.m=a.m}else a&&(u=String(a).match(xm))?(this.h=!1,Qo(this,u[1]||"",!0),this.o=Xr(u[2]||""),this.g=Xr(u[3]||"",!0),Yo(this,u[4]),this.l=Xr(u[5]||"",!0),Mm(this,u[6]||"",!0),this.m=Xr(u[7]||"")):(this.h=!1,this.i=new es(null,this.h))}ni.prototype.toString=function(){var a=[],u=this.j;u&&a.push(Zr(u,Om,!0),":");var d=this.g;return(d||u=="file")&&(a.push("//"),(u=this.o)&&a.push(Zr(u,Om,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Zr(d,d.charAt(0)=="/"?$I:zI,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Zr(d,GI)),a.join("")};function en(a){return new ni(a)}function Qo(a,u,d){a.j=d?Xr(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function Yo(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function Mm(a,u,d){u instanceof es?(a.i=u,WI(a.i,a.h)):(d||(u=Zr(u,qI)),a.i=new es(u,a.h))}function Ee(a,u,d){a.i.set(u,d)}function Jo(a){return Ee(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Xr(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Zr(a,u,d){return typeof a=="string"?(a=encodeURI(a).replace(u,BI),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function BI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Om=/[#\/\?@]/g,zI=/[#\?:]/g,$I=/[#\?]/g,qI=/[#\?@]/g,GI=/#/g;function es(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function En(a){a.g||(a.g=new Map,a.h=0,a.i&&jI(a.i,function(u,d){a.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=es.prototype,n.add=function(a,u){En(this),this.i=null,a=Vi(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(u),this.h+=1,this};function Nm(a,u){En(a),u=Vi(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function Vm(a,u){return En(a),u=Vi(a,u),a.g.has(u)}n.forEach=function(a,u){En(this),this.g.forEach(function(d,p){d.forEach(function(T){a.call(u,T,p,this)},this)},this)},n.na=function(){En(this);let a=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let p=0;p<u.length;p++){let T=a[p];for(let S=0;S<T.length;S++)d.push(u[p])}return d},n.V=function(a){En(this);let u=[];if(typeof a=="string")Vm(this,a)&&(u=u.concat(this.g.get(Vi(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)u=u.concat(a[d])}return u},n.set=function(a,u){return En(this),this.i=null,a=Vi(this,a),Vm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},n.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function Fm(a,u,d){Nm(a,u),0<d.length&&(a.i=null,a.g.set(Vi(a,u),N(d)),a.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var p=u[d];let S=encodeURIComponent(String(p)),V=this.V(p);for(p=0;p<V.length;p++){var T=S;V[p]!==""&&(T+="="+encodeURIComponent(String(V[p]))),a.push(T)}}return this.i=a.join("&")};function Vi(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function WI(a,u){u&&!a.j&&(En(a),a.i=null,a.g.forEach(function(d,p){var T=p.toLowerCase();p!=T&&(Nm(this,p),Fm(this,T,d))},a)),a.j=u}function HI(a,u){let d=new Yr;if(c.Image){let p=new Image;p.onload=C(bn,d,"TestLoadImage: loaded",!0,u,p),p.onerror=C(bn,d,"TestLoadImage: error",!1,u,p),p.onabort=C(bn,d,"TestLoadImage: abort",!1,u,p),p.ontimeout=C(bn,d,"TestLoadImage: timeout",!1,u,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else u(!1)}function KI(a,u){let d=new Yr,p=new AbortController,T=setTimeout(()=>{p.abort(),bn(d,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:p.signal}).then(S=>{clearTimeout(T),S.ok?bn(d,"TestPingServer: ok",!0,u):bn(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(T),bn(d,"TestPingServer: error",!1,u)})}function bn(a,u,d,p,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),p(d)}catch{}}function QI(){this.g=new kI}function YI(a,u,d){let p=d||"";try{km(a,function(T,S){let V=T;h(T)&&(V=ql(T)),u.push(p+S+"="+encodeURIComponent(V))})}catch(T){throw u.push(p+"type="+encodeURIComponent("_badmap")),T}}function ts(a){this.l=a.Ub||null,this.j=a.eb||!1}k(ts,Gl),ts.prototype.g=function(){return new Xo(this.l,this.j)},ts.prototype.i=function(a){return function(){return a}}({});function Xo(a,u){Qe.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Xo,Qe),n=Xo.prototype,n.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,is(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ns(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,is(this)),this.g&&(this.readyState=3,is(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?ns(this):is(this),this.readyState==3&&Lm(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,ns(this))},n.Qa=function(a){this.g&&(this.response=a,ns(this))},n.ga=function(){this.g&&ns(this)};function ns(a){a.readyState=4,a.l=null,a.j=null,a.v=null,is(a)}n.setRequestHeader=function(a,u){this.u.append(a,u)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=u.next();return a.join(`\r
`)};function is(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Xo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Um(a){let u="";return ae(a,function(d,p){u+=p,u+=":",u+=d,u+=`\r
`}),u}function tu(a,u,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=Um(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):Ee(a,u,d))}function Re(a){Qe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Re,Qe);var JI=/^https?$/i,XI=["POST","PUT"];n=Re.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,u,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kl.g(),this.v=this.o?pm(this.o):pm(Kl),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(S){jm(this,S);return}if(a=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var T in p)d.set(T,p[T]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let S of p.keys())d.set(S,p.get(S));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(S=>S.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(XI,u,void 0))||p||T||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,V]of d)this.g.setRequestHeader(S,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$m(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){jm(this,S)}};function jm(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,Bm(a),Zo(a)}function Bm(a){a.A||(a.A=!0,it(a,"complete"),it(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,it(this,"complete"),it(this,"abort"),Zo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zo(this,!0)),Re.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?zm(this):this.bb())},n.bb=function(){zm(this)};function zm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||tn(a)!=4||a.Z()!=2)){if(a.u&&tn(a)==4)um(a.Ea,0,a);else if(it(a,"readystatechange"),tn(a)==4){a.h=!1;try{let V=a.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var p;if(p=V===0){var T=String(a.D).match(xm)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),p=!JI.test(T?T.toLowerCase():"")}d=p}if(d)it(a,"complete"),it(a,"success");else{a.m=6;try{var S=2<tn(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",Bm(a)}}finally{Zo(a)}}}}function Zo(a,u){if(a.g){$m(a);let d=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||it(a,"ready");try{d.onreadystatechange=p}catch{}}}function $m(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function tn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),PI(u)}};function qm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function ZI(a){let u={};a=(a.g&&2<=tn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(q(a[p]))continue;var d=b(a[p]);let T=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let S=u[T]||[];u[T]=S,S.push(d)}E(u,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rs(a,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||u}function Gm(a){this.Aa=0,this.i=[],this.j=new Yr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rs("baseRetryDelayMs",5e3,a),this.cb=rs("retryDelaySeedMs",1e4,a),this.Wa=rs("forwardChannelMaxRetries",2,a),this.wa=rs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Cm(a&&a.concurrentRequestLimit),this.Da=new QI,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Gm.prototype,n.la=8,n.G=1,n.connect=function(a,u,d,p){rt(0),this.W=a,this.H=u||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.I=eg(this,null,this.W),ta(this)};function nu(a){if(Wm(a),a.G==3){var u=a.U++,d=en(a.I);if(Ee(d,"SID",a.K),Ee(d,"RID",u),Ee(d,"TYPE","terminate"),ss(a,d),u=new In(a,a.j,u),u.L=2,u.v=Jo(en(d)),d=!1,c.navigator&&c.navigator.sendBeacon)try{d=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&c.Image&&(new Image().src=u.v,d=!0),d||(u.g=tg(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Ko(u)}Zm(a)}function ea(a){a.g&&(ru(a),a.g.cancel(),a.g=null)}function Wm(a){ea(a),a.u&&(c.clearTimeout(a.u),a.u=null),na(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function ta(a){if(!Sm(a.h)&&!a.s){a.s=!0;var u=a.Ga;zr||rm(),$r||(zr(),$r=!0),Nl.add(u,a),a.B=0}}function eE(a,u){return Rm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Qr(w(a.Ga,a,u),Xm(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new In(this,this.j,a),S=this.o;if(this.S&&(S?(S=g(S),I(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=Km(this,T,u),d=en(this.I),Ee(d,"RID",a),Ee(d,"CVER",22),this.D&&Ee(d,"X-HTTP-Session-Id",this.D),ss(this,d),S&&(this.O?u="headers="+encodeURIComponent(String(Um(S)))+"&"+u:this.m&&tu(d,this.m,S)),eu(this.h,T),this.Ua&&Ee(d,"TYPE","init"),this.P?(Ee(d,"$req",u),Ee(d,"SID","null"),T.T=!0,Yl(T,d,null)):Yl(T,d,u),this.G=2}}else this.G==3&&(a?Hm(this,a):this.i.length==0||Sm(this.h)||Hm(this))};function Hm(a,u){var d;u?d=u.l:d=a.U++;let p=en(a.I);Ee(p,"SID",a.K),Ee(p,"RID",d),Ee(p,"AID",a.T),ss(a,p),a.m&&a.o&&tu(p,a.m,a.o),d=new In(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),u&&(a.i=u.D.concat(a.i)),u=Km(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),eu(a.h,d),Yl(d,p,u)}function ss(a,u){a.H&&ae(a.H,function(d,p){Ee(u,p,d)}),a.l&&km({},function(d,p){Ee(u,p,d)})}function Km(a,u,d){d=Math.min(a.i.length,d);var p=a.l?w(a.l.Na,a.l,a):null;e:{var T=a.i;let S=-1;for(;;){let V=["count="+d];S==-1?0<d?(S=T[0].g,V.push("ofs="+S)):S=0:V.push("ofs="+S);let ye=!0;for(let $e=0;$e<d;$e++){let pe=T[$e].g,Ye=T[$e].map;if(pe-=S,0>pe)S=Math.max(0,T[$e].g-100),ye=!1;else try{YI(Ye,V,"req"+pe+"_")}catch{p&&p(Ye)}}if(ye){p=V.join("&");break e}}}return a=a.i.splice(0,d),u.D=a,p}function Qm(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;zr||rm(),$r||(zr(),$r=!0),Nl.add(u,a),a.v=0}}function iu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Qr(w(a.Fa,a),Xm(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Ym(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Qr(w(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),ea(this),Ym(this))};function ru(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Ym(a){a.g=new In(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=en(a.qa);Ee(u,"RID","rpc"),Ee(u,"SID",a.K),Ee(u,"AID",a.T),Ee(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ee(u,"TO",a.ja),Ee(u,"TYPE","xmlhttp"),ss(a,u),a.m&&a.o&&tu(u,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Jo(en(u)),d.m=null,d.P=!0,bm(d,a)}n.Za=function(){this.C!=null&&(this.C=null,ea(this),iu(this),rt(19))};function na(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Jm(a,u){var d=null;if(a.g==u){na(a),ru(a),a.g=null;var p=2}else if(Zl(a.h,u))d=u.D,Dm(a.h,u),p=1;else return;if(a.G!=0){if(u.o)if(p==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var T=a.B;p=Go(),it(p,new vm(p,d)),ta(a)}else Qm(a);else if(T=u.s,T==3||T==0&&0<u.X||!(p==1&&eE(a,u)||p==2&&iu(a)))switch(d&&0<d.length&&(u=a.h,u.i=u.i.concat(d)),T){case 1:ii(a,5);break;case 4:ii(a,10);break;case 3:ii(a,6);break;default:ii(a,2)}}}function Xm(a,u){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*u}function ii(a,u){if(a.j.info("Error code "+u),u==2){var d=w(a.fb,a),p=a.Xa;let T=!p;p=new ni(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Qo(p,"https"),Jo(p),T?HI(p.toString(),d):KI(p.toString(),d)}else rt(2);a.G=0,a.l&&a.l.sa(u),Zm(a),Wm(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Zm(a){if(a.G=0,a.ka=[],a.l){let u=Pm(a.h);(u.length!=0||a.i.length!=0)&&(R(a.ka,u),R(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function eg(a,u,d){var p=d instanceof ni?en(d):new ni(d);if(p.g!="")u&&(p.g=u+"."+p.g),Yo(p,p.s);else{var T=c.location;p=T.protocol,u=u?u+"."+T.hostname:T.hostname,T=+T.port;var S=new ni(null);p&&Qo(S,p),u&&(S.g=u),T&&Yo(S,T),d&&(S.l=d),p=S}return d=a.D,u=a.ya,d&&u&&Ee(p,d,u),Ee(p,"VER",a.la),ss(a,p),p}function tg(a,u,d){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new Re(new ts({eb:d})):new Re(a.pa),u.Ha(a.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ng(){}n=ng.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ia(){}ia.prototype.g=function(a,u){return new lt(a,u)};function lt(a,u){Qe.call(this),this.g=new Gm(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!q(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!q(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new Fi(this)}k(lt,Qe),lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},lt.prototype.close=function(){nu(this.g)},lt.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=ql(a),a=d);u.i.push(new FI(u.Ya++,a)),u.G==3&&ta(u)},lt.prototype.N=function(){this.g.l=null,delete this.j,nu(this.g),delete this.g,lt.aa.N.call(this)};function ig(a){Wl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(let d in u){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}k(ig,Wl);function rg(){Hl.call(this),this.status=1}k(rg,Hl);function Fi(a){this.g=a}k(Fi,ng),Fi.prototype.ua=function(){it(this.g,"a")},Fi.prototype.ta=function(a){it(this.g,new ig(a))},Fi.prototype.sa=function(a){it(this.g,new rg)},Fi.prototype.ra=function(){it(this.g,"b")},ia.prototype.createWebChannel=ia.prototype.g,lt.prototype.send=lt.prototype.o,lt.prototype.open=lt.prototype.m,lt.prototype.close=lt.prototype.close,Od=dn.createWebChannelTransport=function(){return new ia},Md=dn.getStatEventTarget=function(){return Go()},xd=dn.Event=ei,Cc=dn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wo.NO_ERROR=0,Wo.TIMEOUT=8,Wo.HTTP_ERROR=6,co=dn.ErrorCode=Wo,wm.COMPLETE="complete",kd=dn.EventType=wm,mm.EventType=Hr,Hr.OPEN="a",Hr.CLOSE="b",Hr.ERROR="c",Hr.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,gr=dn.WebChannel=mm,Pd=dn.FetchXmlHttpFactory=ts,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,Dd=dn.XhrIo=Re}).apply(typeof Ac<"u"?Ac:typeof self<"u"?self:typeof window<"u"?window:{});var Vv="@firebase/firestore";var ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ze.UNAUTHENTICATED=new ze(null),ze.GOOGLE_CREDENTIALS=new ze("google-credentials-uid"),ze.FIRST_PARTY=new ze("first-party-uid"),ze.MOCK_USER=new ze("mock-user");var Nr="10.13.1";var Ti=new Un("@firebase/firestore");function lo(){return Ti.logLevel}function B(n,...e){if(Ti.logLevel<=le.DEBUG){let t=e.map(Ep);Ti.debug(`Firestore (${Nr}): ${n}`,...t)}}function pn(n,...e){if(Ti.logLevel<=le.ERROR){let t=e.map(Ep);Ti.error(`Firestore (${Nr}): ${n}`,...t)}}function br(n,...e){if(Ti.logLevel<=le.WARN){let t=e.map(Ep);Ti.warn(`Firestore (${Nr}): ${n}`,...t)}}function Ep(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Y(n="Unexpected state"){let e=`FIRESTORE (${Nr}) INTERNAL ASSERTION FAILED: `+n;throw pn(e),new Error(e)}function ve(n,e){n||Y()}function X(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends at{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var fn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var kc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ud=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ze.UNAUTHENTICATED))}shutdown(){}},jd=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Bd=class{constructor(e){this.t=e,this.currentUser=ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i,r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve(),s=new fn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new fn,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>_(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new fn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ve(typeof i.accessToken=="string"),new kc(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new ze(e)}},zd=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=ze.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},$d=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new zd(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},qd=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Gd=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let i=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ve(typeof t.token=="string"),this.R=t.token,new qd(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function $R(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var xc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=$R(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function me(n,e){return n<e?-1:n>e?1:0}function Tr(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var He=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new j(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ie=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new He(0,0))}static max(){return new n(new He(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Mc=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&Y(),i===void 0?i=e.length-t:i>e.length-t&&Y(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Se=class n extends Mc{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new j(x.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},qR=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_t=class n extends Mc{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return qR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new j(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new j(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new j(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(i+=c,r++):(s(),r++)}if(s(),o)throw new j(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var G=class n{constructor(e){this.path=e}static fromPath(e){return new n(Se.fromString(e))}static fromName(e){return new n(Se.fromString(e).popFirst(5))}static empty(){return new n(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Se.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Se(e.slice()))}};var Wd=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};Wd.UNKNOWN_ID=-1;function GR(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=ie.fromTimestamp(i===1e9?new He(t+1,0):new He(t,i));return new Ai(r,G.empty(),e)}function WR(n){return new Ai(n.readTime,n.key,-1)}var Ai=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(ie.min(),G.empty(),-1)}static max(){return new n(ie.max(),G.empty(),-1)}};function HR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=G.comparator(n.documentKey,e.documentKey),t!==0?t:me(n.largestBatchId,e.largestBatchId))}var KR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Do(n){return _(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==KR)throw n;B("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let h=l;t(e[h]).next(f=>{o[h]=f,++c,c===s&&i(o)},f=>r(f))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function QR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Po(n){return n.name==="IndexedDbTransactionError"}var _0=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function cl(n){return n==null}function _o(n){return n===0&&1/n==-1/0}function YR(n){return typeof n=="number"&&Number.isInteger(n)&&!_o(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var JR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cO=[...JR,"documentOverlays"],XR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ZR=XR,eD=[...ZR,"indexConfiguration","indexState","indexEntries"];var lO=[...eD,"globals"];function Fv(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Vr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function y0(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var De=class n{constructor(e,t){this.comparator=e,this.root=t||Kt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wr(this.root,e,this.comparator,!1)}getReverseIterator(){return new wr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wr(this.root,e,this.comparator,!0)}},wr=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Kt=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();let e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}};Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,t,i,r,s){return this}insert(e,t,i){return new Kt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var tt=class n{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Oc(this.data.getIterator())}getIteratorFrom(e){return new Oc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Oc=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ht=class n{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new n([])}unionWith(e){let t=new tt(_t.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Tr(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Nc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var nt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Nc("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};nt.EMPTY_BYTE_STRING=new nt("");var tD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mn(n){if(ve(!!n),typeof n=="string"){let e=0,t=tD.exec(n);if(ve(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ae(n.seconds),nanos:Ae(n.nanos)}}function Ae(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Qn(n){return typeof n=="string"?nt.fromBase64String(n):nt.fromUint8Array(n)}function bp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Tp(n){let e=n.mapValue.fields.__previous_value__;return bp(e)?Tp(e):e}function yo(n){let e=mn(n.mapValue.fields.__local_write_time__.timestampValue);return new He(e.seconds,e.nanos)}var Kd=class{constructor(e,t,i,r,s,o,c,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h}},Vc=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Sc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ci(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bp(n)?4:w0(n)?9007199254740991:v0(n)?10:11:Y()}function Jt(n,e){if(n===e)return!0;let t=Ci(n);if(t!==Ci(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yo(n).isEqual(yo(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=mn(r.timestampValue),c=mn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return Qn(r.bytesValue).isEqual(Qn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Ae(r.geoPointValue.latitude)===Ae(s.geoPointValue.latitude)&&Ae(r.geoPointValue.longitude)===Ae(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ae(r.integerValue)===Ae(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Ae(r.doubleValue),c=Ae(s.doubleValue);return o===c?_o(o)===_o(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return Tr(n.arrayValue.values||[],e.arrayValue.values||[],Jt);case 10:case 11:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(Fv(o)!==Fv(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Jt(o[l],c[l])))return!1;return!0}(n,e);default:return Y()}}function vo(n,e){return(n.values||[]).find(t=>Jt(t,e))!==void 0}function Ar(n,e){if(n===e)return 0;let t=Ci(n),i=Ci(e);if(t!==i)return me(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return me(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Ae(s.integerValue||s.doubleValue),l=Ae(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return Lv(n.timestampValue,e.timestampValue);case 4:return Lv(yo(n),yo(e));case 5:return me(n.stringValue,e.stringValue);case 6:return function(s,o){let c=Qn(s),l=Qn(o);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let h=0;h<c.length&&h<l.length;h++){let f=me(c[h],l[h]);if(f!==0)return f}return me(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=me(Ae(s.latitude),Ae(o.latitude));return c!==0?c:me(Ae(s.longitude),Ae(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Uv(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,l,h,f;let m=s.fields||{},w=o.fields||{},C=(c=m.value)===null||c===void 0?void 0:c.arrayValue,k=(l=w.value)===null||l===void 0?void 0:l.arrayValue,N=me(((h=C?.values)===null||h===void 0?void 0:h.length)||0,((f=k?.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:Uv(C,k)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Sc.mapValue&&o===Sc.mapValue)return 0;if(s===Sc.mapValue)return 1;if(o===Sc.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),h=o.fields||{},f=Object.keys(h);l.sort(),f.sort();for(let m=0;m<l.length&&m<f.length;++m){let w=me(l[m],f[m]);if(w!==0)return w;let C=Ar(c[l[m]],h[f[m]]);if(C!==0)return C}return me(l.length,f.length)}(n.mapValue,e.mapValue);default:throw Y()}}function Lv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return me(n,e);let t=mn(n),i=mn(e),r=me(t.seconds,i.seconds);return r!==0?r:me(t.nanos,i.nanos)}function Uv(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=Ar(t[r],i[r]);if(s)return s}return me(t.length,i.length)}function Cr(n){return Qd(n)}function Qd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=mn(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Qn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return G.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=Qd(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${Qd(t.fields[o])}`;return r+"}"}(n.mapValue):Y()}function jv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Yd(n){return!!n&&"integerValue"in n}function Ap(n){return!!n&&"arrayValue"in n}function Bv(n){return!!n&&"nullValue"in n}function zv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Dc(n){return!!n&&"mapValue"in n}function v0(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ho(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Vr(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ho(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ho(n.arrayValue.values[t]);return e}return Object.assign({},n)}function w0(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ft=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Dc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ho(t)}setAll(e){let t=_t.emptyPath(),i={},r=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=c.popLast()}o?i[c.lastSegment()]=ho(o):r.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());Dc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Dc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Vr(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(ho(this.value))}};function I0(n){let e=[];return Vr(n.fields,(t,i)=>{let r=new _t([t]);if(Dc(i)){let s=I0(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new Ht(e)}var Lt=class n{constructor(e,t,i,r,s,o,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,ie.min(),ie.min(),ie.min(),Ft.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,ie.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,ie.min(),ie.min(),Ft.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ie.min(),ie.min(),Ft.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Sr=class{constructor(e,t){this.position=e,this.inclusive=t}};function $v(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=G.comparator(G.fromName(o.referenceValue),t.key):i=Ar(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function qv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jt(n.position[t],e.position[t]))return!1;return!0}var Si=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function nD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Fc=class{},Ne=class n extends Fc{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Xd(e,t,i):t==="array-contains"?new tf(e,i):t==="in"?new nf(e,i):t==="not-in"?new rf(e,i):t==="array-contains-any"?new sf(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Zd(e,i):new ef(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ar(t,this.value)):t!==null&&Ci(this.value)===Ci(t)&&this.matchesComparison(Ar(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ut=class n extends Fc{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return E0(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function E0(n){return n.op==="and"}function b0(n){return iD(n)&&E0(n)}function iD(n){for(let e of n.filters)if(e instanceof Ut)return!1;return!0}function Jd(n){if(n instanceof Ne)return n.field.canonicalString()+n.op.toString()+Cr(n.value);if(b0(n))return n.filters.map(e=>Jd(e)).join(",");{let e=n.filters.map(t=>Jd(t)).join(",");return`${n.op}(${e})`}}function T0(n,e){return n instanceof Ne?function(i,r){return r instanceof Ne&&i.op===r.op&&i.field.isEqual(r.field)&&Jt(i.value,r.value)}(n,e):n instanceof Ut?function(i,r){return r instanceof Ut&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,c)=>s&&T0(o,r.filters[c]),!0):!1}(n,e):void Y()}function A0(n){return n instanceof Ne?function(t){return`${t.field.canonicalString()} ${t.op} ${Cr(t.value)}`}(n):n instanceof Ut?function(t){return t.op.toString()+" {"+t.getFilters().map(A0).join(" ,")+"}"}(n):"Filter"}var Xd=class extends Ne{constructor(e,t,i){super(e,t,i),this.key=G.fromName(i.referenceValue)}matches(e){let t=G.comparator(e.key,this.key);return this.matchesComparison(t)}},Zd=class extends Ne{constructor(e,t){super(e,"in",t),this.keys=C0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},ef=class extends Ne{constructor(e,t){super(e,"not-in",t),this.keys=C0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function C0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>G.fromName(i.referenceValue))}var tf=class extends Ne{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Ap(t)&&vo(t.arrayValue,this.value)}},nf=class extends Ne{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&vo(this.value.arrayValue,t)}},rf=class extends Ne{constructor(e,t){super(e,"not-in",t)}matches(e){if(vo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!vo(this.value.arrayValue,t)}},sf=class extends Ne{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Ap(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>vo(this.value.arrayValue,i))}};var of=class{constructor(e,t=null,i=[],r=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function Gv(n,e=null,t=[],i=[],r=null,s=null,o=null){return new of(n,e,t,i,r,s,o)}function Cp(n){let e=X(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Jd(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),cl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Cr(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Cr(i)).join(",")),e.ue=t}return e.ue}function Sp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!T0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qv(n.startAt,e.startAt)&&qv(n.endAt,e.endAt)}function af(n){return G.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Yn=class{constructor(e,t=null,i=[],r=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function rD(n,e,t,i,r,s,o,c){return new Yn(n,e,t,i,r,s,o,c)}function Rp(n){return new Yn(n)}function Wv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function S0(n){return n.collectionGroup!==null}function fo(n){let e=X(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new tt(_t.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Si(s,i))}),t.has(_t.keyField().canonicalString())||e.ce.push(new Si(_t.keyField(),i))}return e.ce}function Qt(n){let e=X(n);return e.le||(e.le=sD(e,fo(n))),e.le}function sD(n,e){if(n.limitType==="F")return Gv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Si(r.field,s)});let t=n.endAt?new Sr(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Sr(n.startAt.position,n.startAt.inclusive):null;return Gv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function cf(n,e){let t=n.filters.concat([e]);return new Yn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function lf(n,e,t){return new Yn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ll(n,e){return Sp(Qt(n),Qt(e))&&n.limitType===e.limitType}function R0(n){return`${Cp(Qt(n))}|lt:${n.limitType}`}function _r(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>A0(r)).join(", ")}]`),cl(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Cr(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Cr(r)).join(",")),`Target(${i})`}(Qt(n))}; limitType=${n.limitType})`}function ul(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):G.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of fo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,c,l){let h=$v(o,c,l);return o.inclusive?h<=0:h<0}(i.startAt,fo(i),r)||i.endAt&&!function(o,c,l){let h=$v(o,c,l);return o.inclusive?h>=0:h>0}(i.endAt,fo(i),r))}(n,e)}function oD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function D0(n){return(e,t)=>{let i=!1;for(let r of fo(n)){let s=aD(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function aD(n,e,t){let i=n.field.isKeyField()?G.comparator(e.key,t.key):function(s,o,c){let l=o.data.field(s),h=c.data.field(s);return l!==null&&h!==null?Ar(l,h):Y()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Y()}}var Jn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Vr(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return y0(this.inner)}size(){return this.innerSize}};var cD=new De(G.comparator);function gn(){return cD}var P0=new De(G.comparator);function uo(...n){let e=P0;for(let t of n)e=e.insert(t.key,t);return e}function k0(n){let e=P0;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function wi(){return po()}function x0(){return po()}function po(){return new Jn(n=>n.toString(),(n,e)=>n.isEqual(e))}var lD=new De(G.comparator),uD=new tt(G.comparator);function ue(...n){let e=uD;for(let t of n)e=e.add(t);return e}var hD=new tt(me);function dD(){return hD}function Dp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_o(e)?"-0":e}}function M0(n){return{integerValue:""+n}}function fD(n,e){return YR(e)?M0(e):Dp(n,e)}var Rr=class{constructor(){this._=void 0}};function pD(n,e,t){return n instanceof Dr?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&bp(s)&&(s=Tp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ri?N0(n,e):n instanceof Di?V0(n,e):function(r,s){let o=O0(r,s),c=Hv(o)+Hv(r.Pe);return Yd(o)&&Yd(r.Pe)?M0(c):Dp(r.serializer,c)}(n,e)}function mD(n,e,t){return n instanceof Ri?N0(n,e):n instanceof Di?V0(n,e):t}function O0(n,e){return n instanceof Pr?function(i){return Yd(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var Dr=class extends Rr{},Ri=class extends Rr{constructor(e){super(),this.elements=e}};function N0(n,e){let t=F0(e);for(let i of n.elements)t.some(r=>Jt(r,i))||t.push(i);return{arrayValue:{values:t}}}var Di=class extends Rr{constructor(e){super(),this.elements=e}};function V0(n,e){let t=F0(e);for(let i of n.elements)t=t.filter(r=>!Jt(r,i));return{arrayValue:{values:t}}}var Pr=class extends Rr{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Hv(n){return Ae(n.integerValue||n.doubleValue)}function F0(n){return Ap(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function gD(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof Ri&&r instanceof Ri||i instanceof Di&&r instanceof Di?Tr(i.elements,r.elements,Jt):i instanceof Pr&&r instanceof Pr?Jt(i.Pe,r.Pe):i instanceof Dr&&r instanceof Dr}(n.transform,e.transform)}var uf=class{constructor(e,t){this.version=e,this.transformResults=t}},bi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Pc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var kr=class{};function L0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Lc(n.key,bi.none()):new Pi(n.key,n.data,bi.none());{let t=n.data,i=Ft.empty(),r=new tt(_t.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new _n(n.key,i,new Ht(r.toArray()),bi.none())}}function _D(n,e,t){n instanceof Pi?function(r,s,o){let c=r.value.clone(),l=Qv(r.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof _n?function(r,s,o){if(!Pc(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=Qv(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(U0(r)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function mo(n,e,t,i){return n instanceof Pi?function(s,o,c,l){if(!Pc(s.precondition,o))return c;let h=s.value.clone(),f=Yv(s.fieldTransforms,l,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,i):n instanceof _n?function(s,o,c,l){if(!Pc(s.precondition,o))return c;let h=Yv(s.fieldTransforms,l,o),f=o.data;return f.setAll(U0(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,i):function(s,o,c){return Pc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function yD(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=O0(i.transform,r||null);s!=null&&(t===null&&(t=Ft.empty()),t.set(i.field,s))}return t||null}function Kv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Tr(i,r,(s,o)=>gD(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Pi=class extends kr{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},_n=class extends kr{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function U0(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function Qv(n,e,t){let i=new Map;ve(n.length===t.length);for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,c=e.data.field(s.field);i.set(s.field,mD(o,c,t[r]))}return i}function Yv(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,pD(s,o,e))}return i}var Lc=class extends kr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},hf=class extends kr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var df=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&_D(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=mo(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=mo(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=x0();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(r.key)?null:c;let l=L0(o,c);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(ie.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&Tr(this.mutations,e.mutations,(t,i)=>Kv(t,i))&&Tr(this.baseMutations,e.baseMutations,(t,i)=>Kv(t,i))}},ff=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){ve(e.mutations.length===i.length);let r=function(){return lD}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var pf=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var mf=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Me,fe;function vD(n){switch(n){default:return Y();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function j0(n){if(n===void 0)return pn("GRPC error has no .code"),x.UNKNOWN;switch(n){case Me.OK:return x.OK;case Me.CANCELLED:return x.CANCELLED;case Me.UNKNOWN:return x.UNKNOWN;case Me.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Me.INTERNAL:return x.INTERNAL;case Me.UNAVAILABLE:return x.UNAVAILABLE;case Me.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Me.NOT_FOUND:return x.NOT_FOUND;case Me.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Me.ABORTED:return x.ABORTED;case Me.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Me.DATA_LOSS:return x.DATA_LOSS;default:return Y()}}(fe=Me||(Me={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var Jv=null;function wD(){return new TextEncoder}var ID=new Hn([4294967295,4294967295],0);function Xv(n){let e=wD().encode(n),t=new Rd;return t.update(e),new Uint8Array(t.digest())}function Zv(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Hn([t,i],0),new Hn([r,s],0)]}var gf=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ii(`Invalid padding: ${t}`);if(i<0)throw new Ii(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ii(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ii(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Hn.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(Hn.fromNumber(i)));return r.compare(ID)===1&&(r=new Hn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Xv(e),[i,r]=Zv(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=Xv(e),[i,r]=Zv(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},Ii=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Uc=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,wo.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(ie.min(),r,new De(me),gn(),ue())}},wo=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,ue(),ue(),ue())}};var Ir=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},jc=class{constructor(e,t){this.targetId=e,this.me=t}},Bc=class{constructor(e,t,i=nt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},zc=class{constructor(){this.fe=0,this.ge=t0(),this.pe=nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),t=ue(),i=ue();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Y()}}),new wo(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=t0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},_f=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=gn(),this.qe=e0(),this.Qe=new De(me)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let s=r.target;if(af(s))if(i===0){let o=new G(s.path);this.Ue(t,o,Lt.newNoDocument(o,ie.min()))}else ve(i===1);else{let o=this.Ye(t);if(o!==i){let c=this.Ze(e),l=c?this.Xe(c,e,o):1;if(l!==0){this.je(t);let h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,h)}Jv?.et(function(f,m,w,C,k){var N,R,U,q,H,Z;let Pe={localCacheCount:f,existenceFilterCount:m.count,databaseId:w.database,projectId:w.projectId},ae=m.unchangedNames;return ae&&(Pe.bloomFilter={applied:k===0,hashCount:(N=ae?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(q=(U=(R=ae?.bits)===null||R===void 0?void 0:R.bitmap)===null||U===void 0?void 0:U.length)!==null&&q!==void 0?q:0,padding:(Z=(H=ae?.bits)===null||H===void 0?void 0:H.padding)!==null&&Z!==void 0?Z:0,mightContain:E=>{var g;return(g=C?.mightContain(E))!==null&&g!==void 0&&g}}),Pe}(o,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,c;try{o=Qn(i).toUint8Array()}catch(l){if(l instanceof Nc)return br("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new gf(o,r,s)}catch(l){return br(l instanceof Ii?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&af(c.target)){let l=new G(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Lt.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let i=ue();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let h=this.Je(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new Uc(e,t,this.Qe,this.ke,i);return this.ke=gn(),this.qe=e0(),this.Qe=new De(me),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new zc,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new tt(me),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||B("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zc),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function e0(){return new De(G.comparator)}function t0(){return new De(G.comparator)}var ED={asc:"ASCENDING",desc:"DESCENDING"},bD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TD={and:"AND",or:"OR"},yf=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function vf(n,e){return n.useProto3Json||cl(e)?e:{value:e}}function $c(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function B0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function AD(n,e){return $c(n,e.toTimestamp())}function Yt(n){return ve(!!n),ie.fromTimestamp(function(t){let i=mn(t);return new He(i.seconds,i.nanos)}(n))}function Pp(n,e){return wf(n,e).canonicalString()}function wf(n,e){let t=function(r){return new Se(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function z0(n){let e=Se.fromString(n);return ve(H0(e)),e}function If(n,e){return Pp(n.databaseId,e.path)}function Nd(n,e){let t=z0(e);if(t.get(1)!==n.databaseId.projectId)throw new j(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new j(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new G(q0(t))}function $0(n,e){return Pp(n.databaseId,e)}function CD(n){let e=z0(n);return e.length===4?Se.emptyPath():q0(e)}function Ef(n){return new Se(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function q0(n){return ve(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function n0(n,e,t){return{name:If(n,e),fields:t.value.mapValue.fields}}function SD(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(ve(f===void 0||typeof f=="string"),nt.fromBase64String(f||"")):(ve(f===void 0||f instanceof Buffer||f instanceof Uint8Array),nt.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){let f=h.code===void 0?x.UNKNOWN:j0(h.code);return new j(f,h.message||"")}(o);t=new Bc(i,r,s,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Nd(n,i.document.name),s=Yt(i.document.updateTime),o=i.document.createTime?Yt(i.document.createTime):ie.min(),c=new Ft({mapValue:{fields:i.document.fields}}),l=Lt.newFoundDocument(r,s,o,c),h=i.targetIds||[],f=i.removedTargetIds||[];t=new Ir(h,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Nd(n,i.document),s=i.readTime?Yt(i.readTime):ie.min(),o=Lt.newNoDocument(r,s),c=i.removedTargetIds||[];t=new Ir([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Nd(n,i.document),s=i.removedTargetIds||[];t=new Ir([],s,r,null)}else{if(!("filter"in e))return Y();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new mf(r,s),c=i.targetId;t=new jc(c,o)}}return t}function RD(n,e){let t;if(e instanceof Pi)t={update:n0(n,e.key,e.value)};else if(e instanceof Lc)t={delete:If(n,e.key)};else if(e instanceof _n)t={update:n0(n,e.key,e.data),updateMask:FD(e.fieldMask)};else{if(!(e instanceof hf))return Y();t={verify:If(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let c=o.transform;if(c instanceof Dr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ri)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Di)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Pr)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Y()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:AD(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(n,e.precondition)),t}function DD(n,e){return n&&n.length>0?(ve(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?Yt(r.updateTime):Yt(s);return o.isEqual(ie.min())&&(o=Yt(s)),new uf(o,r.transformResults||[])}(t,e))):[]}function PD(n,e){return{documents:[$0(n,e.path)]}}function kD(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=$0(n,r);let s=function(h){if(h.length!==0)return W0(Ut.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(h){if(h.length!==0)return h.map(f=>function(w){return{field:yr(w.field),direction:OD(w.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=vf(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:t,parent:r}}function xD(n){let e=CD(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){ve(i===1);let f=t.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){let w=G0(m);return w instanceof Ut&&b0(w)?w.getFilters():[w]}(t.where));let o=[];t.orderBy&&(o=function(m){return m.map(w=>function(k){return new Si(vr(k.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(w))}(t.orderBy));let c=null;t.limit&&(c=function(m){let w;return w=typeof m=="object"?m.value:m,cl(w)?null:w}(t.limit));let l=null;t.startAt&&(l=function(m){let w=!!m.before,C=m.values||[];return new Sr(C,w)}(t.startAt));let h=null;return t.endAt&&(h=function(m){let w=!m.before,C=m.values||[];return new Sr(C,w)}(t.endAt)),rD(e,r,o,s,c,"F",l,h)}function MD(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function G0(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=vr(t.unaryFilter.field);return Ne.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=vr(t.unaryFilter.field);return Ne.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=vr(t.unaryFilter.field);return Ne.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=vr(t.unaryFilter.field);return Ne.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(n):n.fieldFilter!==void 0?function(t){return Ne.create(vr(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ut.create(t.compositeFilter.filters.map(i=>G0(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Y()}}(t.compositeFilter.op))}(n):Y()}function OD(n){return ED[n]}function ND(n){return bD[n]}function VD(n){return TD[n]}function yr(n){return{fieldPath:n.canonicalString()}}function vr(n){return _t.fromServerFormat(n.fieldPath)}function W0(n){return n instanceof Ne?function(t){if(t.op==="=="){if(zv(t.value))return{unaryFilter:{field:yr(t.field),op:"IS_NAN"}};if(Bv(t.value))return{unaryFilter:{field:yr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zv(t.value))return{unaryFilter:{field:yr(t.field),op:"IS_NOT_NAN"}};if(Bv(t.value))return{unaryFilter:{field:yr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yr(t.field),op:ND(t.op),value:t.value}}}(n):n instanceof Ut?function(t){let i=t.getFilters().map(r=>W0(r));return i.length===1?i[0]:{compositeFilter:{op:VD(t.op),filters:i}}}(n):Y()}function FD(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function H0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Io=class n{constructor(e,t,i,r,s=ie.min(),o=ie.min(),c=nt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var bf=class{constructor(e){this.ct=e}};function LD(n){let e=xD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?lf(e,e.limit,"L"):e}var qc=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ae(e.integerValue));else if("doubleValue"in e){let i=Ae(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),_o(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=mn(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Qn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?w0(e)?this.dt(t,Number.MAX_SAFE_INTEGER):v0(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Y()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let s=e.fields||{};this.dt(t,53);let o="value",c=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Ae(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),G.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};qc.vt=new qc;var Tf=class{constructor(){this.un=new Af}addToCollectionParentIndex(e,t){return this.un.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(Ai.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(Ai.min())}updateCollectionGroup(e,t,i){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},Af=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new tt(Se.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new tt(Se.comparator)).toArray()}};var hO=new Uint8Array(0);var Wt=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(41943040,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);var Eo=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Cf=class{constructor(){this.changes=new Jn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?O.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Sf=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Rf=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&mo(i.mutation,r,Ht.empty(),He.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ue()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ue()){let r=wi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=uo();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=wi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ue()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,i,r){let s=gn(),o=po(),c=function(){return po()}();return t.forEach((l,h)=>{let f=i.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof _n)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),mo(f.mutation,h,f.mutation.getFieldMask(),He.now())):o.set(h.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((h,f)=>o.set(h,f)),t.forEach((h,f)=>{var m;return c.set(h,new Sf(f,(m=o.get(h))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,t){let i=po(),r=new De((o,c)=>o-c),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(l=>{let h=t.get(l);if(h===null)return;let f=i.get(l)||Ht.empty();f=c.applyToLocalView(h,f),i.set(l,f);let m=(r.get(c.batchId)||ue()).add(l);r=r.insert(c.batchId,m)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),h=l.key,f=l.value,m=x0();f.forEach(w=>{if(!s.has(w)){let C=L0(t.get(w),i.get(w));C!==null&&m.set(w,C),s=s.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return O.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):S0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):O.resolve(wi()),c=-1,l=s;return o.next(h=>O.forEach(h,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),s.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(w=>{l=l.insert(f,w)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,l,h,ue())).next(f=>({batchId:c,changes:k0(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new G(t)).next(i=>{let r=uo();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=uo();return this.indexManager.getCollectionParents(e,s).next(c=>O.forEach(c,l=>{let h=function(m,w){return new Yn(w,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next(f=>{f.forEach((m,w)=>{o=o.insert(m,w)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,h)=>{let f=h.getKey();o.get(f)===null&&(o=o.insert(f,Lt.newInvalidDocument(f)))});let c=uo();return o.forEach((l,h)=>{let f=s.get(l);f!==void 0&&mo(f.mutation,h,Ht.empty(),He.now()),ul(t,h)&&(c=c.insert(l,h))}),c})}};var Df=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return O.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Yt(r.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:LD(r.bundledQuery),readTime:Yt(r.readTime)}}(t)),O.resolve()}};var Pf=class{constructor(){this.overlays=new De(G.comparator),this.Ir=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let i=wi();return O.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),O.resolve()}getOverlaysForCollection(e,t,i){let r=wi(),s=t.length+1,o=new G(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,h=l.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return O.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new De((h,f)=>h-f),o=this.overlays.getIterator();for(;o.hasNext();){let h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let f=s.get(h.largestBatchId);f===null&&(f=wi(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}let c=wi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,f)=>c.set(h,f)),!(c.size()>=r)););return O.resolve(c)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new pf(t,i));let s=this.Ir.get(t);s===void 0&&(s=ue(),this.Ir.set(t,s)),this.Ir.set(t,s.add(i.key))}};var kf=class{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var bo=class{constructor(){this.Tr=new tt(Oe.Er),this.dr=new tt(Oe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new Oe(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new Oe(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new G(new Se([])),i=new Oe(t,e),r=new Oe(t,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new G(new Se([])),i=new Oe(t,e),r=new Oe(t,e+1),s=ue();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Oe(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},Oe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return G.comparator(e.key,t.key)||me(e.wr,t.wr)}static Ar(e,t){return me(e.wr,t.wr)||G.comparator(e.key,t.key)}};var xf=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new tt(Oe.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new df(s,t,i,r);this.mutationQueue.push(o);for(let c of r)this.br=this.br.add(new Oe(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,t){return O.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.vr(i),s=r<0?0:r;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new Oe(t,0),r=new Oe(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{let c=this.Dr(o.wr);s.push(c)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new tt(me);return t.forEach(r=>{let s=new Oe(r,0),o=new Oe(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{i=i.add(c.wr)})}),O.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;G.isDocumentKey(s)||(s=s.child(""));let o=new Oe(new G(s),0),c=new tt(me);return this.br.forEachWhile(l=>{let h=l.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(c=c.add(l.wr)),!0)},o),O.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){ve(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return O.forEach(t.mutations,r=>{let s=new Oe(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new Oe(t,0),r=this.br.firstAfterOrEqual(i);return O.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Mf=class{constructor(e){this.Mr=e,this.docs=function(){return new De(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return O.resolve(i?i.document.mutableCopy():Lt.newInvalidDocument(t))}getEntries(e,t){let i=gn();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Lt.newInvalidDocument(r))}),O.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=gn(),o=t.path,c=new G(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:h,value:{document:f}}=l.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||HR(WR(f),i)<=0||(r.has(f.key)||ul(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,i,r){Y()}Or(e,t){return O.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Of(this)}getSize(e){return O.resolve(this.size)}},Of=class extends Cf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),O.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Nf=class{constructor(e){this.persistence=e,this.Nr=new Jn(t=>Cp(t),Sp),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new bo,this.targetCount=0,this.kr=Eo.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),O.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Eo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Kn(t),O.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),O.waitFor(s).next(()=>r)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return O.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),O.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return O.resolve(i)}containsKey(e,t){return O.resolve(this.Br.containsKey(t))}};var Vf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new _0(0),this.Kr=!1,this.Kr=!0,this.$r=new kf,this.referenceDelegate=e(this),this.Ur=new Nf(this),this.indexManager=new Tf,this.remoteDocumentCache=function(r){return new Mf(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new bf(t),this.Gr=new Df(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Pf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new xf(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){B("MemoryPersistence","Starting transaction:",e);let r=new Ff(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,t){return O.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},Ff=class extends Hd{constructor(e){super(),this.currentSequenceNumber=e}},Lf=class n{constructor(e){this.persistence=e,this.Jr=new bo,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),O.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),O.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,i=>{let r=G.fromPath(i);return this.ei(e,r).next(s=>{s||t.removeEntry(r,ie.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return O.or([()=>O.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Uf=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=ue(),r=ue();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var jf=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Bf=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return py()?8:QR(Be())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new jf;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(lo()<=le.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",_r(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(lo()<=le.DEBUG&&B("QueryEngine","Query:",_r(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(lo()<=le.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",_r(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qt(t))):O.resolve())}Yi(e,t){if(Wv(t))return O.resolve(null);let i=Qt(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=lf(t,null,"F"),i=Qt(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=ue(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,i).next(l=>{let h=this.ts(t,c);return this.ns(t,h,o,l.readTime)?this.Yi(e,lf(t,null,"F")):this.rs(e,h,t,l)}))})))}Zi(e,t,i,r){return Wv(t)||r.isEqual(ie.min())?O.resolve(null):this.Ji.getDocuments(e,i).next(s=>{let o=this.ts(t,s);return this.ns(t,o,i,r)?O.resolve(null):(lo()<=le.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_r(t)),this.rs(e,o,t,GR(r,-1)).next(c=>c))})}ts(e,t){let i=new tt(D0(e));return t.forEach((r,s)=>{ul(e,s)&&(i=i.add(s))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,i){return lo()<=le.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",_r(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ai.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var zf=class{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new De(me),this._s=new Jn(s=>Cp(s),Sp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function UD(n,e,t,i){return new zf(n,e,t,i)}function K0(n,e){return _(this,null,function*(){let t=X(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],c=[],l=ue();for(let h of r){o.push(h.batchId);for(let f of h.mutations)l=l.add(f.key)}for(let h of s){c.push(h.batchId);for(let f of h.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(i,l).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:c}))})})})}function jD(n,e){let t=X(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,l,h,f){let m=h.batch,w=m.keys(),C=O.resolve();return w.forEach(k=>{C=C.next(()=>f.getEntry(l,k)).next(N=>{let R=h.docVersions.get(k);ve(R!==null),N.version.compareTo(R)<0&&(m.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),f.addEntry(N)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(l,m))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let l=ue();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(l=l.add(c.batch.mutations[h].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function Q0(n){let e=X(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function BD(n,e){let t=X(n),i=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let c=[];e.targetChanges.forEach((f,m)=>{let w=r.get(m);if(!w)return;c.push(t.Ur.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(s,f.addedDocuments,m)));let C=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?C=C.withResumeToken(nt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):f.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(f.resumeToken,i)),r=r.insert(m,C),function(N,R,U){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(w,C,f)&&c.push(t.Ur.updateTargetData(s,C))});let l=gn(),h=ue();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(zD(s,o,e.documentUpdates).next(f=>{l=f.Ps,h=f.Is})),!i.isEqual(ie.min())){let f=t.Ur.getLastRemoteSnapshotVersion(s).next(m=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(f)}return O.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(t.os=r,s))}function zD(n,e,t){let i=ue(),r=ue();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=gn();return t.forEach((c,l)=>{let h=s.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(ie.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):B("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function $D(n,e){let t=X(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function qD(n,e){let t=X(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(s=>s?(r=s,O.resolve(r)):t.Ur.allocateTargetId(i).next(o=>(r=new Io(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function $f(n,e,t){return _(this,null,function*(){let i=X(n),r=i.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Po(o))throw o;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function i0(n,e,t){let i=X(n),r=ie.min(),s=ue();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,h,f){let m=X(l),w=m._s.get(f);return w!==void 0?O.resolve(m.os.get(w)):m.Ur.getTargetData(h,f)}(i,o,Qt(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,t?r:ie.min(),t?s:ue())).next(c=>(GD(i,oD(e),c),{documents:c,Ts:s})))}function GD(n,e,t){let i=n.us.get(e)||ie.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.us.set(e,i)}var Gc=class{constructor(){this.activeTargetIds=dD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var qf=class{constructor(){this.so=new Gc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Gc,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Gf=class{_o(e){}shutdown(){}};var Wc=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Rc=null;function Vd(){return Rc===null?Rc=function(){return 268435456+Math.round(2147483648*Math.random())}():Rc++,"0x"+Rc.toString(16)}var WD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Wf=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var et="WebChannelConnection",Hf=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(t,i,r,s,o){let c=Vd(),l=this.xo(t,i.toUriEncodedString());B("RestConnection",`Sending RPC '${t}' ${c}:`,l,r);let h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(t,l,h,r).then(f=>(B("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw br("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",l,"request:",r),f})}Lo(t,i,r,s,o,c){return this.Mo(t,i,r,s,o)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Nr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}xo(t,i){let r=WD[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){let s=Vd();return new Promise((o,c)=>{let l=new Dd;l.setWithCredentials(!0),l.listenOnce(kd.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case co.NO_ERROR:let f=l.getResponseJson();B(et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case co.TIMEOUT:B(et,`RPC '${e}' ${s} timed out`),c(new j(x.DEADLINE_EXCEEDED,"Request time out"));break;case co.HTTP_ERROR:let m=l.getStatus();if(B(et,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let w=l.getResponseJson();Array.isArray(w)&&(w=w[0]);let C=w?.error;if(C&&C.status&&C.message){let k=function(R){let U=R.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(U)>=0?U:x.UNKNOWN}(C.status);c(new j(k,C.message))}else c(new j(x.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new j(x.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{B(et,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(r);B(et,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",h,i,15)})}Bo(e,t,i){let r=Vd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Od(),c=Md(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.xmlHttpFactory=new Pd({})),this.Oo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;let f=s.join("");B(et,`Creating RPC '${e}' stream ${r}: ${f}`,l);let m=o.createWebChannel(f,l),w=!1,C=!1,k=new Wf({Io:R=>{C?B(et,`Not sending because RPC '${e}' stream ${r} is closed:`,R):(w||(B(et,`Opening RPC '${e}' stream ${r} transport.`),m.open(),w=!0),B(et,`RPC '${e}' stream ${r} sending:`,R),m.send(R))},To:()=>m.close()}),N=(R,U,q)=>{R.listen(U,H=>{try{q(H)}catch(Z){setTimeout(()=>{throw Z},0)}})};return N(m,gr.EventType.OPEN,()=>{C||(B(et,`RPC '${e}' stream ${r} transport opened.`),k.yo())}),N(m,gr.EventType.CLOSE,()=>{C||(C=!0,B(et,`RPC '${e}' stream ${r} transport closed`),k.So())}),N(m,gr.EventType.ERROR,R=>{C||(C=!0,br(et,`RPC '${e}' stream ${r} transport errored:`,R),k.So(new j(x.UNAVAILABLE,"The operation could not be completed")))}),N(m,gr.EventType.MESSAGE,R=>{var U;if(!C){let q=R.data[0];ve(!!q);let H=q,Z=H.error||((U=H[0])===null||U===void 0?void 0:U.error);if(Z){B(et,`RPC '${e}' stream ${r} received error:`,Z);let Pe=Z.status,ae=function(v){let I=Me[v];if(I!==void 0)return j0(I)}(Pe),E=Z.message;ae===void 0&&(ae=x.INTERNAL,E="Unknown error status: "+Pe+" with message "+Z.message),C=!0,k.So(new j(ae,E)),m.close()}else B(et,`RPC '${e}' stream ${r} received:`,q),k.bo(q)}}),N(c,xd.STAT_EVENT,R=>{R.stat===Cc.PROXY?B(et,`RPC '${e}' stream ${r} detected buffering proxy`):R.stat===Cc.NOPROXY&&B(et,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}};function Fd(){return typeof document<"u"?document:null}function hl(n){return new yf(n,!0)}var Hc=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&B("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Kc=class{constructor(e,t,i,r,s,o,c,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Hc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(pn(t.toString()),pn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{let r=new j(x.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Kf=class extends Kc{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=SD(this.serializer,e),i=function(s){if(!("targetChange"in s))return ie.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?Yt(o.readTime):ie.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=Ef(this.serializer),t.addTarget=function(s,o){let c,l=o.target;if(c=af(l)?{documents:PD(s,l)}:{query:kD(s,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=B0(s,o.resumeToken);let h=vf(s,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(ie.min())>0){c.readTime=$c(s,o.snapshotVersion.toTimestamp());let h=vf(s,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);let i=MD(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=Ef(this.serializer),t.removeTarget=e,this.a_(t)}},Qf=class extends Kc{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=DD(e.writeResults,e.commitTime),i=Yt(e.commitTime);return this.listener.g_(i,t)}p_(){let e={};e.database=Ef(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>RD(this.serializer,i))};this.a_(t)}};var Yf=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new j(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,wf(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(x.UNKNOWN,s.toString())})}Lo(e,t,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,wf(t,i),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(x.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Jf=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(pn(t),this.D_=!1):B("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Xf=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(()=>_(this,null,function*(){xi(this)&&(B("RemoteStore","Restarting streams for network reachability change."),yield function(l){return _(this,null,function*(){let h=X(l);h.L_.add(4),yield ko(h),h.q_.set("Unknown"),h.L_.delete(4),yield dl(h)})}(this))}))}),this.q_=new Jf(i,r)}};function dl(n){return _(this,null,function*(){if(xi(n))for(let e of n.B_)yield e(!0)})}function ko(n){return _(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Y0(n,e){let t=X(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Op(t)?Mp(t):Fr(t).r_()&&xp(t,e))}function kp(n,e){let t=X(n),i=Fr(t);t.N_.delete(e),i.r_()&&J0(t,e),t.N_.size===0&&(i.r_()?i.o_():xi(t)&&t.q_.set("Unknown"))}function xp(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fr(n).A_(e)}function J0(n,e){n.Q_.xe(e),Fr(n).R_(e)}function Mp(n){n.Q_=new _f({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Fr(n).start(),n.q_.v_()}function Op(n){return xi(n)&&!Fr(n).n_()&&n.N_.size>0}function xi(n){return X(n).L_.size===0}function X0(n){n.Q_=void 0}function HD(n){return _(this,null,function*(){n.q_.set("Online")})}function KD(n){return _(this,null,function*(){n.N_.forEach((e,t)=>{xp(n,e)})})}function QD(n,e){return _(this,null,function*(){X0(n),Op(n)?(n.q_.M_(e),Mp(n)):n.q_.set("Unknown")})}function YD(n,e,t){return _(this,null,function*(){if(n.q_.set("Online"),e instanceof Bc&&e.state===2&&e.cause)try{yield function(r,s){return _(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.N_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.N_.delete(c),r.Q_.removeTarget(c))})}(n,e)}catch(i){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Qc(n,i)}else if(e instanceof Ir?n.Q_.Ke(e):e instanceof jc?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ie.min()))try{let i=yield Q0(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){let f=s.N_.get(h);f&&s.N_.set(h,f.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,h)=>{let f=s.N_.get(l);if(!f)return;s.N_.set(l,f.withResumeToken(nt.EMPTY_BYTE_STRING,f.snapshotVersion)),J0(s,l);let m=new Io(f.target,l,h,f.sequenceNumber);xp(s,m)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){B("RemoteStore","Failed to raise snapshot:",i),yield Qc(n,i)}})}function Qc(n,e,t){return _(this,null,function*(){if(!Po(e))throw e;n.L_.add(1),yield ko(n),n.q_.set("Offline"),t||(t=()=>Q0(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){B("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield dl(n)}))})}function Z0(n,e){return e().catch(t=>Qc(n,t,e))}function fl(n){return _(this,null,function*(){let e=X(n),t=Xn(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;JD(e);)try{let r=yield $D(e.localStore,i);if(r===null){e.O_.length===0&&t.o_();break}i=r.batchId,XD(e,r)}catch(r){yield Qc(e,r)}ew(e)&&tw(e)})}function JD(n){return xi(n)&&n.O_.length<10}function XD(n,e){n.O_.push(e);let t=Xn(n);t.r_()&&t.V_&&t.m_(e.mutations)}function ew(n){return xi(n)&&!Xn(n).n_()&&n.O_.length>0}function tw(n){Xn(n).start()}function ZD(n){return _(this,null,function*(){Xn(n).p_()})}function eP(n){return _(this,null,function*(){let e=Xn(n);for(let t of n.O_)e.m_(t.mutations)})}function tP(n,e,t){return _(this,null,function*(){let i=n.O_.shift(),r=ff.from(i,e,t);yield Z0(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield fl(n)})}function nP(n,e){return _(this,null,function*(){e&&Xn(n).V_&&(yield function(i,r){return _(this,null,function*(){if(function(o){return vD(o)&&o!==x.ABORTED}(r.code)){let s=i.O_.shift();Xn(i).s_(),yield Z0(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield fl(i)}})}(n,e)),ew(n)&&tw(n)})}function r0(n,e){return _(this,null,function*(){let t=X(n);t.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");let i=xi(t);t.L_.add(3),yield ko(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield dl(t)})}function iP(n,e){return _(this,null,function*(){let t=X(n);e?(t.L_.delete(2),yield dl(t)):e||(t.L_.add(2),yield ko(t),t.q_.set("Unknown"))})}function Fr(n){return n.K_||(n.K_=function(t,i,r){let s=X(t);return s.w_(),new Kf(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:HD.bind(null,n),Ro:KD.bind(null,n),mo:QD.bind(null,n),d_:YD.bind(null,n)}),n.B_.push(e=>_(this,null,function*(){e?(n.K_.s_(),Op(n)?Mp(n):n.q_.set("Unknown")):(yield n.K_.stop(),X0(n))}))),n.K_}function Xn(n){return n.U_||(n.U_=function(t,i,r){let s=X(t);return s.w_(),new Qf(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ZD.bind(null,n),mo:nP.bind(null,n),f_:eP.bind(null,n),g_:tP.bind(null,n)}),n.B_.push(e=>_(this,null,function*(){e?(n.U_.s_(),yield fl(n)):(yield n.U_.stop(),n.O_.length>0&&(B("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Zf=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,c=new n(e,t,o,r,s);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Np(n,e){if(pn("AsyncQueue",`${e}: ${n}`),Po(n))return new j(x.UNAVAILABLE,`${e}: ${n}`);throw n}var Yc=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||G.comparator(t.key,i.key):(t,i)=>G.comparator(t.key,i.key),this.keyedMap=uo(),this.sortedSet=new De(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var Jc=class{constructor(){this.W_=new De(G.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},xr=class n{constructor(e,t,i,r,s,o,c,l,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,Yc.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ll(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var ep=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},tp=class{constructor(){this.queries=s0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let r=X(t),s=r.queries;r.queries=s0(),s.forEach((o,c)=>{for(let l of c.j_)l.onError(i)})})(this,new j(x.ABORTED,"Firestore shutting down"))}};function s0(){return new Jn(n=>R0(n),ll)}function rP(n,e){return _(this,null,function*(){let t=X(n),i=3,r=e.query,s=t.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new ep,i=e.J_()?0:1);try{switch(i){case 0:s.z_=yield t.onListen(r,!0);break;case 1:s.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let c=Np(o,`Initialization of query '${_r(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Vp(t)})}function sP(n,e){return _(this,null,function*(){let t=X(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function oP(n,e){let t=X(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(r)&&(i=!0);o.z_=r}}i&&Vp(t)}function aP(n,e,t){let i=X(n),r=i.queries.get(e);if(r)for(let s of r.j_)s.onError(t);i.queries.delete(e)}function Vp(n){n.Y_.forEach(e=>{e.next()})}var np,o0;(o0=np||(np={})).ea="default",o0.Cache="cache";var ip=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new xr(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=xr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==np.Cache}};var Xc=class{constructor(e){this.key=e}},Zc=class{constructor(e){this.key=e}},rp=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=D0(e),this.Ra=new Yc(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new Jc,r=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,m)=>{let w=r.get(f),C=ul(this.query,m)?m:null,k=!!w&&this.mutatedKeys.has(w.key),N=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),R=!1;w&&C?w.data.isEqual(C.data)?k!==N&&(i.track({type:3,doc:C}),R=!0):this.ga(w,C)||(i.track({type:2,doc:C}),R=!0,(l&&this.Aa(C,l)>0||h&&this.Aa(C,h)<0)&&(c=!0)):!w&&C?(i.track({type:0,doc:C}),R=!0):w&&!C&&(i.track({type:1,doc:w}),R=!0,(l||h)&&(c=!0)),R&&(C?(o=o.add(C),s=N?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{Ra:o,fa:i,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((f,m)=>function(C,k){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return N(C)-N(k)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(i),r=r!=null&&r;let c=t&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,h=l!==this.Ea;return this.Ea=l,o.length!==0||h?{snapshot:new xr(this.query,e.Ra,s,o,e.mutatedKeys,l===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Jc,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ue(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new Zc(i))}),this.da.forEach(i=>{e.has(i)||t.push(new Xc(i))}),t}ba(e){this.Ta=e.Ts,this.da=ue();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return xr.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},sp=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},op=class{constructor(e){this.key=e,this.va=!1}},ap=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Jn(c=>R0(c),ll),this.Ma=new Map,this.xa=new Set,this.Oa=new De(G.comparator),this.Na=new Map,this.La=new bo,this.Ba={},this.ka=new Map,this.qa=Eo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function cP(n,e,t=!0){return _(this,null,function*(){let i=aw(n),r,s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield nw(i,e,t,!0),r})}function lP(n,e){return _(this,null,function*(){let t=aw(n);yield nw(t,e,!0,!1)})}function nw(n,e,t,i){return _(this,null,function*(){let r=yield qD(n.localStore,Qt(e)),s=r.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current",c;return i&&(c=yield uP(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&Y0(n.remoteStore,r),c})}function uP(n,e,t,i,r){return _(this,null,function*(){n.Ka=(m,w,C)=>function(N,R,U,q){return _(this,null,function*(){let H=R.view.ma(U);H.ns&&(H=yield i0(N.localStore,R.query,!1).then(({documents:E})=>R.view.ma(E,H)));let Z=q&&q.targetChanges.get(R.targetId),Pe=q&&q.targetMismatches.get(R.targetId)!=null,ae=R.view.applyChanges(H,N.isPrimaryClient,Z,Pe);return c0(N,R.targetId,ae.wa),ae.snapshot})}(n,m,w,C);let s=yield i0(n.localStore,e,!0),o=new rp(e,s.Ts),c=o.ma(s.documents),l=wo.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),h=o.applyChanges(c,n.isPrimaryClient,l);c0(n,t,h.wa);let f=new sp(e,t,o);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),h.snapshot})}function hP(n,e,t){return _(this,null,function*(){let i=X(n),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!ll(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield $f(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&kp(i.remoteStore,r.targetId),cp(i,r.targetId)}).catch(Do))):(cp(i,r.targetId),yield $f(i.localStore,r.targetId,!0))})}function dP(n,e){return _(this,null,function*(){let t=X(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),kp(t.remoteStore,i.targetId))})}function fP(n,e,t){return _(this,null,function*(){let i=wP(n);try{let r=yield function(o,c){let l=X(o),h=He.now(),f=c.reduce((C,k)=>C.add(k.key),ue()),m,w;return l.persistence.runTransaction("Locally write mutations","readwrite",C=>{let k=gn(),N=ue();return l.cs.getEntries(C,f).next(R=>{k=R,k.forEach((U,q)=>{q.isValidDocument()||(N=N.add(U))})}).next(()=>l.localDocuments.getOverlayedDocuments(C,k)).next(R=>{m=R;let U=[];for(let q of c){let H=yD(q,m.get(q.key).overlayedDocument);H!=null&&U.push(new _n(q.key,H,I0(H.value.mapValue),bi.exists(!0)))}return l.mutationQueue.addMutationBatch(C,h,U,c)}).next(R=>{w=R;let U=R.applyToLocalDocumentSet(m,N);return l.documentOverlayCache.saveOverlays(C,R.batchId,U)})}).then(()=>({batchId:w.batchId,changes:k0(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,c,l){let h=o.Ba[o.currentUser.toKey()];h||(h=new De(me)),h=h.insert(c,l),o.Ba[o.currentUser.toKey()]=h}(i,r.batchId,t),yield xo(i,r.changes),yield fl(i.remoteStore)}catch(r){let s=Np(r,"Failed to persist write");t.reject(s)}})}function iw(n,e){return _(this,null,function*(){let t=X(n);try{let i=yield BD(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Na.get(s);o&&(ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?ve(o.va):r.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),yield xo(t,i,e)}catch(i){yield Do(i)}})}function a0(n,e,t){let i=X(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&r.push(c.snapshot)}),function(o,c){let l=X(o);l.onlineState=c;let h=!1;l.queries.forEach((f,m)=>{for(let w of m.j_)w.Z_(c)&&(h=!0)}),h&&Vp(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function pP(n,e,t){return _(this,null,function*(){let i=X(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Na.get(e),s=r&&r.key;if(s){let o=new De(G.comparator);o=o.insert(s,Lt.newNoDocument(s,ie.min()));let c=ue().add(s),l=new Uc(ie.min(),new Map,new De(me),o,c);yield iw(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),Fp(i)}else yield $f(i.localStore,e,!1).then(()=>cp(i,e,t)).catch(Do)})}function mP(n,e){return _(this,null,function*(){let t=X(n),i=e.batch.batchId;try{let r=yield jD(t.localStore,e);sw(t,i,null),rw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield xo(t,r)}catch(r){yield Do(r)}})}function gP(n,e,t){return _(this,null,function*(){let i=X(n);try{let r=yield function(o,c){let l=X(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return l.mutationQueue.lookupMutationBatch(h,c).next(m=>(ve(m!==null),f=m.keys(),l.mutationQueue.removeMutationBatch(h,m))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>l.localDocuments.getDocuments(h,f))})}(i.localStore,e);sw(i,e,t),rw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield xo(i,r)}catch(r){yield Do(r)}})}function rw(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function sw(n,e,t){let i=X(n),r=i.Ba[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function cp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||ow(n,i)})}function ow(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(kp(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Fp(n))}function c0(n,e,t){for(let i of t)i instanceof Xc?(n.La.addReference(i.key,e),_P(n,i)):i instanceof Zc?(B("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||ow(n,i.key)):Y()}function _P(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(B("SyncEngine","New document in limbo: "+t),n.xa.add(i),Fp(n))}function Fp(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new G(Se.fromString(e)),i=n.qa.next();n.Na.set(i,new op(t)),n.Oa=n.Oa.insert(t,i),Y0(n.remoteStore,new Io(Qt(Rp(t.path)),i,"TargetPurposeLimboResolution",_0.oe))}}function xo(n,e,t){return _(this,null,function*(){let i=X(n),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((c,l)=>{o.push(i.Ka(l,e,t).then(h=>{var f;if((h||t)&&i.isPrimaryClient){let m=h?!h.fromCache:(f=t?.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;i.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(h){r.push(h);let m=Uf.Wi(l.targetId,h);s.push(m)}}))}),yield Promise.all(o),i.Ca.d_(r),yield function(l,h){return _(this,null,function*(){let f=X(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(h,w=>O.forEach(w.$i,C=>f.persistence.referenceDelegate.addReference(m,w.targetId,C)).next(()=>O.forEach(w.Ui,C=>f.persistence.referenceDelegate.removeReference(m,w.targetId,C)))))}catch(m){if(!Po(m))throw m;B("LocalStore","Failed to update sequence numbers: "+m)}for(let m of h){let w=m.targetId;if(!m.fromCache){let C=f.os.get(w),k=C.snapshotVersion,N=C.withLastLimboFreeSnapshotVersion(k);f.os=f.os.insert(w,N)}}})}(i.localStore,s))})}function yP(n,e){return _(this,null,function*(){let t=X(n);if(!t.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());let i=yield K0(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(l=>{l.reject(new j(x.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield xo(t,i.hs)}})}function vP(n,e){let t=X(n),i=t.Na.get(e);if(i&&i.va)return ue().add(i.key);{let r=ue(),s=t.Ma.get(e);if(!s)return r;for(let o of s){let c=t.Fa.get(o);r=r.unionWith(c.view.Va)}return r}}function aw(n){let e=X(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pP.bind(null,e),e.Ca.d_=oP.bind(null,e.eventManager),e.Ca.$a=aP.bind(null,e.eventManager),e}function wP(n){let e=X(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gP.bind(null,e),e}var el=class{constructor(){this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){this.serializer=hl(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return UD(this.persistence,new Bf,e.initialUser,this.serializer)}createPersistence(e){return new Vf(Lf.Zr,this.serializer)}createSharedClientState(e){return new qf}terminate(){return _(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var lp=class{initialize(e,t){return _(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>a0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yP.bind(null,this.syncEngine),yield iP(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new tp}()}createDatastore(e){let t=hl(e.databaseInfo.databaseId),i=function(s){return new Hf(s)}(e.databaseInfo);return function(s,o,c,l){return new Yf(s,o,c,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,c){return new Xf(i,r,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,t=>a0(this.syncEngine,t,0),function(){return Wc.D()?new Wc:new Gf}())}createSyncEngine(e,t){return function(r,s,o,c,l,h,f){let m=new ap(r,s,o,c,l,h);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return _(this,null,function*(){var e,t;yield function(r){return _(this,null,function*(){let s=X(r);B("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield ko(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var up=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):pn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var hp=class{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=ze.UNAUTHENTICATED,this.clientId=xc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>_(this,null,function*(){B("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(B("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new j(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=Np(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Ld(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>_(this,null,function*(){i.isEqual(r)||(yield K0(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function l0(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield EP(n);B("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>r0(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>r0(e.remoteStore,r)),n._onlineComponents=e})}function IP(n){return n.name==="FirebaseError"?n.code===x.FAILED_PRECONDITION||n.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function EP(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ld(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!IP(t))throw t;br("Error using user provided cache. Falling back to memory cache: "+t),yield Ld(n,new el)}}else B("FirestoreClient","Using default OfflineComponentProvider"),yield Ld(n,new el);return n._offlineComponents})}function cw(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),yield l0(n,n._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),yield l0(n,new lp))),n._onlineComponents})}function bP(n){return cw(n).then(e=>e.syncEngine)}function u0(n){return _(this,null,function*(){let e=yield cw(n),t=e.eventManager;return t.onListen=cP.bind(null,e.syncEngine),t.onUnlisten=hP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dP.bind(null,e.syncEngine),t})}function lw(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var h0=new Map;function uw(n,e,t){if(!t)throw new j(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TP(n,e,t,i){if(e===!0&&i===!0)throw new j(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function d0(n){if(!G.isDocumentKey(n))throw new j(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function f0(n){if(G.isDocumentKey(n))throw new j(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function pl(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Y()}function go(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new j(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=pl(n);throw new j(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var tl=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new j(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Mr=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new j(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new j(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tl(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Ud;switch(i.type){case"firstParty":return new $d(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new j(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=h0.get(t);i&&(B("ComponentProvider","Removing Datastore"),h0.delete(t),i.terminate())}(this),Promise.resolve()}};function hw(n,e,t,i={}){var r;let s=(n=go(n,Mr))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&br("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=ze.MOCK_USER;else{c=ly(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new j(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ze(h)}n._authCredentials=new jd(new kc(c,l))}}var ki=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},yt=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Kn=class n extends ki{constructor(e,t,i){super(e,t,Rp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new G(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function dw(n,e,...t){if(n=We(n),uw("collection","path",e),n instanceof Mr){let i=Se.fromString(e,...t);return f0(i),new Kn(n,null,i)}{if(!(n instanceof yt||n instanceof Kn))throw new j(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Se.fromString(e,...t));return f0(i),new Kn(n.firestore,null,i)}}function fw(n,e,...t){if(n=We(n),arguments.length===1&&(e=xc.newId()),uw("doc","path",e),n instanceof Mr){let i=Se.fromString(e,...t);return d0(i),new yt(n,null,new G(i))}{if(!(n instanceof yt||n instanceof Kn))throw new j(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Se.fromString(e,...t));return d0(i),new yt(n.firestore,n instanceof Kn?n.converter:null,new G(i))}}var dp=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Hc(this,"async_queue_retry"),this.Eu=()=>{let t=Fd();t&&B("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=Fd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=Fd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new fn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return _(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Po(e))throw e;B("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(i=>{this.hu=i,this.Pu=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw pn("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Pu=!1,i))));return this.au=t,t}enqueueAfterDelay(e,t,i){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let r=Zf.createAndSchedule(this,e,t,i,s=>this.Vu(s));return this.lu.push(r),r}du(){this.hu&&Y()}verifyOperationInProgress(){}mu(){return _(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};function p0(n){return function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Or=class extends Mr{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=function(){return new dp}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||gw(this),this._firestoreClient.terminate()}};function pw(n,e){let t=typeof n=="object"?n:ur(),i=typeof n=="string"?n:e||"(default)",r=Ys(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=cy("firestore");s&&hw(r,...s)}return r}function mw(n){return n._firestoreClient||gw(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function gw(n){var e,t,i;let r=n._freezeSettings(),s=function(c,l,h,f){return new Kd(c,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,lw(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new hp(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var To=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(nt.fromBase64String(e))}catch(t){throw new j(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ao=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new j(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var nl=class{constructor(e){this._methodName=e}};var Co=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}};var So=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}};var AP=/^__.*__$/,fp=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new _n(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pi(e,this.data,t,this.fieldTransforms)}};function _w(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}var pp=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Su({path:i,Du:!1});return r.vu(e),r}Cu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Su({path:i,Du:!1});return r.yu(),r}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return il(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(_w(this.wu)&&AP.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},mp=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||hl(e)}Nu(e,t,i,r=!1){return new pp({wu:e,methodName:t,Ou:i,path:_t.emptyPath(),Du:!1,xu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function yw(n){let e=n._freezeSettings(),t=hl(n._databaseId);return new mp(n._databaseId,!!e.ignoreUndefinedProperties,t)}function CP(n,e,t,i,r,s={}){let o=n.Nu(s.merge||s.mergeFields?2:0,e,t,r);Iw("Data must be an object, but it was:",o,i);let c=vw(i,o),l,h;if(s.merge)l=new Ht(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let m of s.mergeFields){let w=RP(e,m,t);if(!o.contains(w))throw new j(x.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);PP(f,w)||f.push(w)}l=new Ht(f),h=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,h=o.fieldTransforms;return new fp(new Ft(c),l,h)}function SP(n,e,t,i=!1){return Lp(t,n.Nu(i?4:3,e))}function Lp(n,e){if(ww(n=We(n)))return Iw("Unsupported field value:",e,n),vw(n,e);if(n instanceof nl)return function(i,r){if(!_w(r.wu))throw r.Mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Mu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let c of i){let l=Lp(c,r.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=We(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return fD(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=He.fromDate(i);return{timestampValue:$c(r.serializer,s)}}if(i instanceof He){let s=new He(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:$c(r.serializer,s)}}if(i instanceof Co)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof To)return{bytesValue:B0(r.serializer,i._byteString)};if(i instanceof yt){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Pp(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof So)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw c.Mu("VectorValues must only contain numeric values.");return Dp(c.serializer,l)})}}}}}}(i,r);throw r.Mu(`Unsupported field value: ${pl(i)}`)}(n,e)}function vw(n,e){let t={};return y0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vr(n,(i,r)=>{let s=Lp(r,e.bu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function ww(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof He||n instanceof Co||n instanceof To||n instanceof yt||n instanceof nl||n instanceof So)}function Iw(n,e,t){if(!ww(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=pl(t);throw i==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+i)}}function RP(n,e,t){if((e=We(e))instanceof Ao)return e._internalPath;if(typeof e=="string")return Ew(n,e);throw il("Field path arguments must be of type string or ",n,!1,void 0,t)}var DP=new RegExp("[~\\*/\\[\\]]");function Ew(n,e,t){if(e.search(DP)>=0)throw il(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ao(...e.split("."))._internalPath}catch{throw il(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function il(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new j(x.INVALID_ARGUMENT,c+n+l)}function PP(n,e){return n.some(t=>t.isEqual(e))}var rl=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new gp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Up("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},gp=class extends rl{data(){return super.data()}};function Up(n,e){return typeof e=="string"?Ew(n,e):e instanceof Ao?e._internalPath:e._delegate._internalPath}function kP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new j(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ro=class{},sl=class extends Ro{};function bw(n,e,...t){let i=[];e instanceof Ro&&i.push(e),i=i.concat(t),function(s){let o=s.filter(l=>l instanceof yp).length,c=s.filter(l=>l instanceof _p).length;if(o>1||o>0&&c>0)throw new j(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var _p=class n extends sl{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return Aw(e._query,t),new ki(e.firestore,e.converter,cf(e._query,t))}_parse(e){let t=yw(e.firestore);return function(s,o,c,l,h,f,m){let w;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new j(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){g0(m,f);let C=[];for(let k of m)C.push(m0(l,s,k));w={arrayValue:{values:C}}}else w=m0(l,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||g0(m,f),w=SP(c,o,m,f==="in"||f==="not-in");return Ne.create(h,f,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var yp=class n extends Ro{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Ut.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r,c=s.getFlattenedFilters();for(let l of c)Aw(o,l),o=cf(o,l)}(e._query,t),new ki(e.firestore,e.converter,cf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var vp=class n extends sl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(r,s,o){if(r.startAt!==null)throw new j(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new j(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Si(s,o)}(e._query,this._field,this._direction);return new ki(e.firestore,e.converter,function(r,s){let o=r.explicitOrderBy.concat([s]);return new Yn(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}};function Tw(n,e="asc"){let t=e,i=Up("orderBy",n);return vp._create(i,t)}function m0(n,e,t){if(typeof(t=We(t))=="string"){if(t==="")throw new j(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!S0(e)&&t.indexOf("/")!==-1)throw new j(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(Se.fromString(t));if(!G.isDocumentKey(i))throw new j(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return jv(n,new G(i))}if(t instanceof yt)return jv(n,t._key);throw new j(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pl(t)}.`)}function g0(n,e){if(!Array.isArray(n)||n.length===0)throw new j(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Aw(n,e){let t=function(r,s){for(let o of r)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new j(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var wp=class{convertValue(e,t="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return Vr(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;let s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Ae(o.doubleValue));return new So(s)}convertGeoPoint(e){return new Co(Ae(e.latitude),Ae(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=Tp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(yo(e));default:return null}}convertTimestamp(e){let t=mn(e);return new He(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Se.fromString(e);ve(H0(i));let r=new Vc(i.get(1),i.get(3)),s=new G(i.popFirst(5));return r.isEqual(t)||pn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function xP(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var Ei=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ol=class extends rl{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Er(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(Up("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},Er=class extends ol{data(e={}){return super.data(e)}},Ip=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ei(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Er(this._firestore,this._userDataWriter,i.key,i,new Ei(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new j(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>{let l=new Er(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ei(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new Er(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ei(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),h=-1,f=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:MP(c.type),doc:l,oldIndex:h,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function MP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}var al=class extends wp{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,t)}};function Cw(n,e){let t=go(n.firestore,Or),i=fw(n),r=xP(n.converter,e);return OP(t,[CP(yw(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,bi.exists(!1))]).then(()=>i)}function Sw(n,...e){var t,i,r;n=We(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||p0(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(p0(e[o])){let m=e[o];e[o]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[o+1]=(i=m.error)===null||i===void 0?void 0:i.bind(m),e[o+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}let l,h,f;if(n instanceof yt)h=go(n.firestore,Or),f=Rp(n._key.path),l={next:m=>{e[o]&&e[o](NP(h,n,m))},error:e[o+1],complete:e[o+2]};else{let m=go(n,ki);h=go(m.firestore,Or),f=m._query;let w=new al(h);l={next:C=>{e[o]&&e[o](new Ip(h,w,m,C))},error:e[o+1],complete:e[o+2]},kP(n._query)}return function(w,C,k,N){let R=new up(N),U=new ip(C,R,k);return w.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return rP(yield u0(w),U)})),()=>{R.za(),w.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return sP(yield u0(w),U)}))}}(mw(h),f,c,l)}function OP(n,e){return function(i,r){let s=new fn;return i.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return fP(yield bP(i),r,s)})),s.promise}(mw(n),e)}function NP(n,e,t){let i=t.docs.get(e._key),r=new al(n);return new ol(n,r,e._key,i,new Ei(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Nr=r})(zn),Bn(new Ct("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),c=new Or(new Bd(i.getProvider("auth-internal")),new Gd(i.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new j(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vc(h.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Le(Vv,"4.7.1",e),Le(Vv,"4.7.1","esm2017")})();var jt=class{constructor(e){return e}},Rw="firestore",jp=class{constructor(){return Xs(Rw)}};var Bp=new se("angularfire2.firestore-instances");function VP(n,e){let t=sc(Rw,n,e);return t&&new jt(t)}function FP(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new jt(i)}}var LP={provide:jp,deps:[[new st,Bp]]},UP={provide:jt,useFactory:VP,deps:[[new st,Bp],cn]};function Dw(n,...e){return Le("angularfire",pi.full,"fst"),dt([UP,LP,{provide:Bp,useFactory:FP(n),multi:!0,deps:[be,Pt,fr,mi,[new st,ao],[new st,dr],...e]}])}var Zn=ct(Cw,!0);var yn=ct(dw,!0);var ml=ct(pw,!0);var Pw=ct(Sw,!0);var kw=ct(Tw,!0);var xw=ct(bw,!0);function jP(n,e){if(n&1&&(D(0,"label",13),M(1),P()),n&2){let t=Ge();J(),ma(t.errorLabel)}}var Mo=class n{constructor(e){this.router=e}fireAuth=L(Vt);firestore=L(jt);errorLabel="";errorLogin=!1;login(e,t){return _(this,null,function*(){this.errorLogin=!1;let i=yield Mv(this.fireAuth,e,t).catch(function(r){});i?(localStorage.setItem("user",JSON.stringify(i.user?.email)),yield this.router.navigateByUrl("/home")):(this.errorLabel="Correo o contrase\xF1a incorrectos.",this.errorLogin=!0)})}logLogin(e){return _(this,null,function*(){let t={Usuario:e.user.email,LogInTime:new Date};yield Zn(yn(this.firestore,"LogIn-Logs"),t).then(()=>{console.log("Login logged successfully")}).catch(i=>{console.error("Error logging login: ",i)})})}toRegistro(){return _(this,null,function*(){yield this.router.navigateByUrl("/registro")})}toHome(){return _(this,null,function*(){yield this.router.navigateByUrl("/home")})}static \u0275fac=function(t){return new(t||n)(he(Fe))};static \u0275cmp=we({type:n,selectors:[["app-login"]],standalone:!0,features:[oi([]),Ie],decls:27,vars:1,consts:[["userName",""],["userPassword",""],["id","container",1,"container"],[1,"form-container","sign-in-container"],["type","email","placeholder","Email","required","",1,"formControl"],["type","password","placeholder","Password",1,"formControl"],[3,"ngIf"],[3,"click"],[1,"inicioRapido"],[1,"overlay-container"],[1,"overlay"],[1,"overlay-panel","overlay-right"],["id","signUp",1,"ghost",3,"click"],[1,"errorLabel"]],template:function(t,i){if(t&1){let r=ft();D(0,"div",2)(1,"div",3)(2,"h1"),M(3,"Iniciar Sesion"),P(),oe(4,"input",4,0)(6,"input",5,1),Ue(8,jP,2,1,"ng-template",6),D(9,"button",7),$("click",function(){ee(r);let o=ne(5),c=ne(7);return te(i.login(o.value,c.value))}),M(10,"Iniciar"),P(),D(11,"div",8)(12,"button",7),$("click",function(){ee(r);let o=ne(5),c=ne(7);return o.value="prueba@gmail.com",te(c.value="123456")}),M(13,"Inicio 1"),P(),D(14,"button",7),$("click",function(){return ee(r),te(i.toHome())}),M(15,"Invitado"),P(),D(16,"button",7),$("click",function(){ee(r);let o=ne(5),c=ne(7);return o.value="admin@gmail.com",te(c.value="123456")}),M(17,"Inicio Admin"),P()()(),D(18,"div",9)(19,"div",10)(20,"div",11)(21,"h1"),M(22,"Bienvenido"),P(),D(23,"p"),M(24,"Si es tu primera visita hace click abajo para registrarte:"),P(),D(25,"button",12),$("click",function(){return ee(r),te(i.toRegistro())}),M(26,"Registrarse"),P()()()()()}t&2&&(J(8),de("ngIf",i.errorLogin))},dependencies:[ke,bt],styles:['@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%]{background:#f6f5f7;display:flex;justify-content:center;align-items:center;flex-direction:column;font-family:Montserrat,sans-serif;height:100vh;margin:-20px 0 50px}.inicioRapido[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:30px}h1[_ngcontent-%COMP%]{font-weight:700;margin:0}h2[_ngcontent-%COMP%]{text-align:center}p[_ngcontent-%COMP%]{font-size:14px;font-weight:100;line-height:20px;letter-spacing:.5px;margin:20px 0 30px}span[_ngcontent-%COMP%]{font-size:12px}a[_ngcontent-%COMP%]{color:#333;font-size:14px;text-decoration:none;margin:15px 0}button[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #ff4b2b;background-color:#ff4b2b;color:#fff;font-size:12px;font-weight:700;padding:12px 45px;letter-spacing:1px;text-transform:uppercase;transition:transform 80ms ease-in;margin-bottom:10px}button[_ngcontent-%COMP%]:active{transform:scale(.95)}button[_ngcontent-%COMP%]:focus{outline:none}button.ghost[_ngcontent-%COMP%]{background-color:transparent;border-color:#fff}form[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 50px;height:100%;text-align:center}input[_ngcontent-%COMP%]{background-color:#eee;border:none;padding:12px 15px;margin:8px 0;width:100%}.container[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;position:absolute;margin:5% 5% 5% 25%;overflow:hidden;width:50%;height:60%;max-width:100%;min-height:480px}.form-container[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;align-items:center;padding:10% 5% 5%;top:0;height:100%;transition:all .6s ease-in-out}.sign-in-container[_ngcontent-%COMP%]{left:0;width:50%;z-index:2}.container.right-panel-active[_ngcontent-%COMP%]   .sign-in-container[_ngcontent-%COMP%]{transform:translate(100%)}.sign-up-container[_ngcontent-%COMP%]{left:0;width:50%;opacity:0;z-index:1}.container.right-panel-active[_ngcontent-%COMP%]   .sign-up-container[_ngcontent-%COMP%]{transform:translate(100%);opacity:1;z-index:5;animation:_ngcontent-%COMP%_show .6s}@keyframes _ngcontent-%COMP%_show{0%,49.99%{opacity:0;z-index:1}50%,to{opacity:1;z-index:5}}.overlay-container[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;width:50%;height:100%;overflow:hidden;transition:transform .6s ease-in-out;z-index:100}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-container[_ngcontent-%COMP%]{transform:translate(-100%)}.overlay[_ngcontent-%COMP%]{background:#ff416c;background:-webkit-linear-gradient(to right,#ff4b2b,#ff416c);background:linear-gradient(to right,#ff4b2b,#ff416c);background-repeat:no-repeat;background-size:cover;background-position:0 0;color:#fff;position:relative;left:-100%;height:100%;width:200%;transform:translate(0);transition:transform .6s ease-in-out}.container.right-panel-active[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{transform:translate(50%)}.overlay-panel[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 40px;text-align:center;top:0;height:100%;width:50%;transform:translate(0);transition:transform .6s ease-in-out}.overlay-left[_ngcontent-%COMP%]{transform:translate(-20%)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-left[_ngcontent-%COMP%]{transform:translate(0)}.overlay-right[_ngcontent-%COMP%]{right:0;transform:translate(0)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-right[_ngcontent-%COMP%]{transform:translate(20%)}.social-container[_ngcontent-%COMP%]{margin:20px 0}.social-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid #dddddd;border-radius:50%;display:inline-flex;justify-content:center;align-items:center;margin:0 5px;height:40px;width:40px}footer[_ngcontent-%COMP%]{background-color:#222;color:#fff;font-size:14px;bottom:0;position:fixed;left:0;right:0;text-align:center;z-index:999}footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0}footer[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:red}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3c97bf;text-decoration:none}.errorLabel[_ngcontent-%COMP%]{color:red;font-size:small}']})};var zp;try{zp=typeof Intl<"u"&&Intl.v8BreakIterator}catch{zp=!1}var No=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?Gg(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||zp)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(z(Mt))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Oo;function BP(){if(Oo==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Oo=!0}))}finally{Oo=Oo||!1}return Oo}function $p(n){return BP()?n:!!n.capture}function Mw(n){return n.composedPath?n.composedPath()[0]:n.target}function Ow(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function qp(n){return Array.isArray(n)?n:[n]}function Gp(n){return n instanceof xt?n.nativeElement:n}var Vw=new Set,Mi,zP=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):qP}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&$P(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(z(No),z(ls,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function $P(n,e){if(!Vw.has(n))try{Mi||(Mi=document.createElement("style"),e&&Mi.setAttribute("nonce",e),Mi.setAttribute("type","text/css"),document.head.appendChild(Mi)),Mi.sheet&&(Mi.sheet.insertRule(`@media ${n} {body{ }}`,0),Vw.add(n))}catch(t){console.error(t)}}function qP(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var Lw=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new vt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return Fw(qp(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=Fw(qp(i)).map(c=>this._registerQuery(c).observable),o=Ui(s);return o=sa(o.pipe(Sn(1)),o.pipe(gg(1),dg(0))),o.pipe(ce(c=>{let l={matches:!1,breakpoints:{}};return c.forEach(({matches:h,query:f})=>{l.matches=l.matches||h,l.breakpoints[f]=h}),l}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new Bt(c=>{let l=h=>this._zone.run(()=>c.next(h));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(oa(r),ce(({matches:c})=>({query:i,matches:c})),aa(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};e.\u0275fac=function(r){return new(r||e)(z(zP),z(be))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Fw(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function Bw(n){return n.buttons===0||n.detail===0}function zw(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var Oi=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Oi||{}),Uw="cdk-high-contrast-black-on-white",jw="cdk-high-contrast-white-on-black",Wp="cdk-high-contrast-active",$w=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=L(Lw).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Oi.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Oi.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Oi.BLACK_ON_WHITE}return Oi.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(Wp,Uw,jw),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Oi.BLACK_ON_WHITE?i.add(Wp,Uw):r===Oi.WHITE_ON_BLACK&&i.add(Wp,jw)}}};e.\u0275fac=function(r){return new(r||e)(z(No),z(xe))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Hp=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ze({type:e}),e.\u0275inj=Xe({});let n=e;return n})();function KP(){return!0}var QP=new se("mat-sanity-checks",{providedIn:"root",factory:KP}),Yp=(()=>{let e=class e{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return Ow()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(z($w),z(QP,8),z(xe))},e.\u0275mod=Ze({type:e}),e.\u0275inj=Xe({imports:[Hp,Hp]});let n=e;return n})();var St=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(St||{}),Kp=class{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=St.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},qw=$p({passive:!0,capture:!0}),Qp=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=Mw(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){let s=this._events.get(t);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,qw)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let s=r.get(t);s&&(s.delete(i),s.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,qw)))}},Gw={enterDuration:225,exitDuration:150},YP=800,Ww=$p({passive:!0,capture:!0}),Hw=["mousedown","touchstart"],Kw=["mouseup","mouseleave","touchend","touchcancel"],Vo=class Vo{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Gp(i))}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=F(F({},Gw),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let o=i.radius||JP(e,t,r),c=e-r.left,l=t-r.top,h=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${c-o}px`,f.style.top=`${l-o}px`,f.style.height=`${o*2}px`,f.style.width=`${o*2}px`,i.color!=null&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${h}ms`,this._containerElement.appendChild(f);let m=window.getComputedStyle(f),w=m.transitionProperty,C=m.transitionDuration,k=w==="none"||C==="0s"||C==="0s, 0s"||r.width===0&&r.height===0,N=new Kp(this,f,i,k);f.style.transform="scale3d(1, 1, 1)",N.state=St.FADING_IN,i.persistent||(this._mostRecentTransientRipple=N);let R=null;return!k&&(h||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let U=()=>{R&&(R.fallbackTimer=null),clearTimeout(H),this._finishRippleTransition(N)},q=()=>this._destroyRipple(N),H=setTimeout(q,h+100);f.addEventListener("transitionend",U),f.addEventListener("transitioncancel",q),R={onTransitionEnd:U,onTransitionCancel:q,fallbackTimer:H}}),this._activeRipples.set(N,R),(k||!h)&&this._finishRippleTransition(N),N}fadeOutRipple(e){if(e.state===St.FADING_OUT||e.state===St.HIDDEN)return;let t=e.element,i=F(F({},Gw),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=St.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Gp(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,Hw.forEach(i=>{Vo._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Kw.forEach(t=>{this._triggerElement.addEventListener(t,this,Ww)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===St.FADING_IN?this._startFadeOutTransition(e):e.state===St.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=St.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=St.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=Bw(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+YP;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!zw(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===St.VISIBLE||e.config.terminateOnPointerUp&&e.state===St.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(Hw.forEach(t=>Vo._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(Kw.forEach(t=>e.removeEventListener(t,this,Ww)),this._pointerUpEventsRegistered=!1))}};Vo._eventManager=new Qp;var Qw=Vo;function JP(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var Yw=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ze({type:e}),e.\u0275inj=Xe({imports:[Yp,Yp]});let n=e;return n})();var gl=class n{constructor(e){this.router=e}toHome(){return _(this,null,function*(){this.router.navigateByUrl("/home")})}static \u0275fac=function(t){return new(t||n)(he(Fe))};static \u0275cmp=we({type:n,selectors:[["app-quien-soy"]],standalone:!0,features:[Ie],decls:20,vars:0,consts:[[1,"quien-soy"],["src","1000030695.jpg","height","320"],["id","links"],["href","https://www.instagram.com/maxicesa/"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["d","M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"],["href","www.linkedin.com/in/maximiliano-cesa-449785192"],["d","M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"],["href","https://steamcommunity.com/id/MagoHispanico/"],["d","M24 12c0 6.627-5.373 12-12 12-5.782 0-10.608-4.091-11.744-9.537l4.764 2.003c.285 1.441 1.56 2.547 3.115 2.534 1.723-.017 3.105-1.414 3.116-3.129l.007-.003 3.602-2.684c2.304.024 4.14-1.833 4.14-4.091 0-2.26-1.834-4.093-4.093-4.093-2.234 0-4.048 1.791-4.09 4.015l-2.64 3.693c-.668-.014-1.269.169-1.791.51l-6.294-2.646c.708-5.953 5.765-10.572 11.908-10.572 6.627 0 12 5.373 12 12zm-16.577 5.477l-1.544-.649c.38.858 1.236 1.461 2.249 1.457 1.346-.012 2.422-1.11 2.41-2.455-.012-1.329-1.104-2.41-2.432-2.41-.287.001-.57.05-.86.16l1.542.648c.898.378 1.319 1.411.941 2.308-.376.896-1.409 1.318-2.306.941zm7.484-5.602c-1.533 0-2.781-1.249-2.781-2.782 0-1.534 1.248-2.782 2.781-2.782 1.534 0 2.781 1.248 2.781 2.782 0 1.533-1.247 2.782-2.781 2.782zm0-.682c1.159 0 2.1-.942 2.1-2.101 0-1.158-.94-2.102-2.1-2.102s-2.102.943-2.102 2.102c.001 1.159.943 2.101 2.102 2.101z"]],template:function(t,i){t&1&&(D(0,"div",0)(1,"h1"),M(2,"Maximiliano Cesa"),P(),D(3,"h2"),M(4,"\xA1El desarrollador mas mediocre imaginable!"),P(),oe(5,"img",1),D(6,"div",2)(7,"a",3),$i(),D(8,"svg",4),oe(9,"path",5),P()(),qi(),D(10,"a",6),$i(),D(11,"svg",4),oe(12,"path",7),P()(),qi(),D(13,"a",8),$i(),D(14,"svg",4),oe(15,"path",9),P()()(),qi(),D(16,"h2"),M(17,"Proximamente: Una copia online del juego mas vendido (creo) de todos los tiempos:"),P(),D(18,"h1"),M(19,"Tetris"),P()())},dependencies:[Yw],styles:[".quien-soy[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}#links[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;max-width:240px;margin:0 auto;padding-top:10px}#links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:inline-block}img[_ngcontent-%COMP%]{display:block;margin:0 auto;border-width:2px;border-style:solid;border-color:#000}"]})};var XP=()=>["/juegos/ahorcado"],ZP=()=>["/juegos/mayoromenor"],e1=()=>["/juegos/preguntados2"],t1=()=>["/juegos/tetris"],_l=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["app-home"]],standalone:!0,features:[Ie],decls:10,vars:8,consts:[[1,"home"],[1,"square-container"],[1,"square-link",3,"routerLink"],["src","hangman.png","alt","Ahorcado"],["src","higherlower.png","alt","Mayor o menor"],["src","preguntados.png","alt","Preguntados"],["src","tetris.jpg","alt","Tetris"]],template:function(t,i){t&1&&(D(0,"div",0)(1,"div",1)(2,"a",2),oe(3,"img",3),P(),D(4,"a",2),oe(5,"img",4),P(),D(6,"a",2),oe(7,"img",5),P(),D(8,"a",2),oe(9,"img",6),P()()()),t&2&&(J(2),de("routerLink",pt(4,XP)),J(2),de("routerLink",pt(5,ZP)),J(2),de("routerLink",pt(6,e1)),J(2),de("routerLink",pt(7,t1)))},dependencies:[ke,Xa,or],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;display:flex;justify-content:center;align-items:center}.square-container[_ngcontent-%COMP%]{padding-top:30px;padding-right:30%;padding-left:30%;display:grid;grid-template-columns:repeat(2,auto);gap:20px}.square-link[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.square-link[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;border-radius:30px}"]})};var n1=()=>["/auth"];function i1(n,e){if(n&1&&(D(0,"label",14),M(1),P()),n&2){let t=Ge();J(),ma(t.errorLabel)}}var yl=class n{constructor(e){this.router=e}fireAuth=L(Vt);errorRegistering=!1;errorLabel="";ngOnInit(){}register(e,t,i){return _(this,null,function*(){if(this.errorRegistering=!1,t!==i)this.errorLabel="Las contrase\xF1as no coinciden.",this.errorRegistering=!0;else try{(yield Pv(this.fireAuth,e,t))&&this.router.navigateByUrl("/home")}catch(r){if(r instanceof at)switch(r.code){case"auth/email-already-in-use":this.errorLabel="Este correo electronico ya esta registrado.";break;case"auth/weak-password":this.errorLabel="La contrase\xF1a es muy debil. Usa mas de 6 caracteres.";break;default:this.errorLabel="Error registrandose. Pruebe de nuevo mas tarde.";break}else this.errorLabel="Error registrandose. Pruebe de nuevo mas tarde.";this.errorRegistering=!0}})}static \u0275fac=function(t){return new(t||n)(he(Fe))};static \u0275cmp=we({type:n,selectors:[["app-registro"]],standalone:!0,features:[Ie],decls:22,vars:3,consts:[["userName",""],["userPassword",""],["confirmPassword",""],["id","container",1,"container"],[1,"form-container"],["type","email","placeholder","Email","required","",1,"formControl"],["type","password","placeholder","Password",1,"formControl"],["type","password","placeholder","Confirm Password",1,"formControl"],[3,"ngIf"],[3,"click"],[1,"overlay-container"],[1,"overlay"],[1,"overlay-panel","overlay-right"],["id","signUp",1,"ghost",3,"routerLink"],[1,"errorLabel"]],template:function(t,i){if(t&1){let r=ft();D(0,"div",3)(1,"div",4)(2,"h1"),M(3,"Registro"),P(),oe(4,"input",5,0)(6,"input",6,1)(8,"input",7,2),Ue(10,i1,2,1,"ng-template",8),D(11,"button",9),$("click",function(){ee(r);let o=ne(5),c=ne(7),l=ne(9);return te(i.register(o.value,c.value,l.value))}),M(12,"Registrarse"),P()(),D(13,"div",10)(14,"div",11)(15,"div",12)(16,"h1"),M(17,"Bienvenido!"),P(),D(18,"p"),M(19,"Si ya tenes una cuenta por favor hace click en ingresar!"),P(),D(20,"button",13),M(21,"Ingresar"),P()()()()()}t&2&&(J(10),de("ngIf",i.errorRegistering),J(10),de("routerLink",pt(2,n1)))},dependencies:[ke,bt,or],styles:['@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{box-sizing:border-box}.errorLabel[_ngcontent-%COMP%]{color:red;font-size:small}body[_ngcontent-%COMP%]{background:#f6f5f7;display:flex;justify-content:center;align-items:center;flex-direction:column;font-family:Montserrat,sans-serif;height:100vh;margin:-20px 0 50px}h1[_ngcontent-%COMP%]{font-weight:700;margin:0}h2[_ngcontent-%COMP%]{text-align:center}p[_ngcontent-%COMP%]{font-size:14px;font-weight:100;line-height:20px;letter-spacing:.5px;margin:20px 0 30px}span[_ngcontent-%COMP%]{font-size:12px}a[_ngcontent-%COMP%]{color:#333;font-size:14px;text-decoration:none;margin:15px 0}button[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #ff4b2b;background-color:#ff4b2b;color:#fff;font-size:12px;font-weight:700;padding:12px 45px;letter-spacing:1px;text-transform:uppercase;transition:transform 80ms ease-in}button[_ngcontent-%COMP%]:active{transform:scale(.95)}button[_ngcontent-%COMP%]:focus{outline:none}button.ghost[_ngcontent-%COMP%]{background-color:transparent;border-color:#fff}form[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 50px;height:100%;text-align:center}input[_ngcontent-%COMP%]{background-color:#eee;border:none;padding:12px 15px;margin:8px 0;width:100%}.container[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;position:absolute;margin:10% 10% 10% 25%;overflow:hidden;width:50%;height:60%;max-width:100%;min-height:480px}.form-container[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;align-items:center;padding:20% 5% 5%;top:0;height:100%;transition:all .6s ease-in-out;left:0;width:50%}.container.right-panel-active[_ngcontent-%COMP%]   .sign-in-container[_ngcontent-%COMP%]{transform:translate(100%)}.sign-up-container[_ngcontent-%COMP%]{left:0;width:50%;opacity:0;z-index:1}.container.right-panel-active[_ngcontent-%COMP%]   .sign-up-container[_ngcontent-%COMP%]{transform:translate(100%);opacity:1;z-index:5;animation:_ngcontent-%COMP%_show .6s}@keyframes _ngcontent-%COMP%_show{0%,49.99%{opacity:0;z-index:1}50%,to{opacity:1;z-index:5}}.overlay-container[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;width:50%;height:100%;overflow:hidden;transition:transform .6s ease-in-out;z-index:100}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-container[_ngcontent-%COMP%]{transform:translate(-100%)}.overlay[_ngcontent-%COMP%]{background:#ff416c;background:-webkit-linear-gradient(to right,#ff4b2b,#ff416c);background:linear-gradient(to right,#ff4b2b,#ff416c);background-repeat:no-repeat;background-size:cover;background-position:0 0;color:#fff;position:relative;left:-100%;height:100%;width:200%;transform:translate(0);transition:transform .6s ease-in-out}.container.right-panel-active[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{transform:translate(50%)}.overlay-panel[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 40px;text-align:center;top:0;height:100%;width:50%;transform:translate(0);transition:transform .6s ease-in-out}.overlay-left[_ngcontent-%COMP%]{transform:translate(-20%)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-left[_ngcontent-%COMP%]{transform:translate(0)}.overlay-right[_ngcontent-%COMP%]{right:0;transform:translate(0)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-right[_ngcontent-%COMP%]{transform:translate(20%)}.social-container[_ngcontent-%COMP%]{margin:20px 0}.social-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid #dddddd;border-radius:50%;display:inline-flex;justify-content:center;align-items:center;margin:0 5px;height:40px;width:40px}footer[_ngcontent-%COMP%]{background-color:#222;color:#fff;font-size:14px;bottom:0;position:fixed;left:0;right:0;text-align:center;z-index:999}footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0}footer[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:red}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3c97bf;text-decoration:none}']})};var r1=["keypad"];function s1(n,e){n&1&&oe(0,"label",50)}function o1(n,e){if(n&1&&(D(0,"label"),M(1),P()),n&2){let t=Ge();J(),ot("Perdiste! La palabra era: ",t.answer,"")}}var Jw='@media (max-width: 66vh){html[_ngcontent-%COMP%]{font-size:1.5vw}}body[_ngcontent-%COMP%]{color:#cacaca;font-family:Cabin Sketch,Arial;margin:0;box-sizing:border-box;height:100vh;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-around;text-align:center;background-image:url("./media/pizarrron-6KD7PRQP.jpg");background-position:center;background-size:cover;font-size:1vh}@media (max-width: 100vh){body[_ngcontent-%COMP%]{width:100vw}}svg[_ngcontent-%COMP%]{height:36vh}@media (max-width: 40vh){svg[_ngcontent-%COMP%]{height:90vw}}h1[_ngcontent-%COMP%]{font-size:5rem;font-weight:100;margin:2.5rem 0}h2[_ngcontent-%COMP%]{font-size:2rem;text-decoration:underline;cursor:pointer;font-weight:100;margin:1.7rem}h4[_ngcontent-%COMP%]{font-size:1rem}#keypad[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:6.4rem;padding:.3rem 1rem;cursor:pointer}#keypad[_ngcontent-%COMP%]   a.finished[_ngcontent-%COMP%]{cursor:default}#guessing[_ngcontent-%COMP%]{font-size:3rem;margin:2.4rem auto}#keypad[_ngcontent-%COMP%]   .correct-letter[_ngcontent-%COMP%]{color:#89d47b;cursor:no-drop}#keypad[_ngcontent-%COMP%]   .incorrect-letter[_ngcontent-%COMP%]{color:#f57b7b;cursor:no-drop}.hidden[_ngcontent-%COMP%]{display:none}[status=escaped][_ngcontent-%COMP%]{color:#89d47b}[status=hanged][_ngcontent-%COMP%]{color:#f57b7b}#tally[_ngcontent-%COMP%]{margin-bottom:1rem}span[_ngcontent-%COMP%]{font-size:3.3rem}#wins[_ngcontent-%COMP%], #losses[_ngcontent-%COMP%]{margin-right:4rem}a[_ngcontent-%COMP%]:hover{color:#fff}a[_ngcontent-%COMP%]:active{position:relative;top:2px}svg[_ngcontent-%COMP%]{stroke:#cacaca;stroke-width:3.8;stroke-linecap:round}',vl=class n{afs=L(jt);constructor(){}keypad;ngOnInit(){}wins=0;losses=0;abortions=0;gameInProcess;answer;maskedAnswer;wrongGuesses;masthead=document.querySelector("h1");labelState="hidden";commonWords=["jirafa","elefante","perro","ahora","camioneta","ahorcado","edificio","dinosaurio","computadora","programador","escalera","cuchillo","zorro","botella","persona","hormiga","tejer","transplante","percha","sorpresa","adulto","koala","gobierno","trenza","tumba","tanga","gracias","cabina","escritor","pintor","muletas"];newGame(){this.gameInProcess==!0&&this.aborted(),this.labelState="hidden",this.enableAllButtons(),this.gameInProcess=!0,this.answer=this.newRandomWord(),this.wrongGuesses=0,this.maskedAnswer=[];for(var e of this.answer)this.maskedAnswer.push("_");this.updateDisplayWord(),this.hang()}enableAllButtons(){this.keypad.nativeElement.querySelectorAll("button").forEach(t=>{t.disabled=!1})}newRandomWord(){return this.commonWords[Math.floor(Math.random()*this.commonWords.length)]}verifyGuess(e,t){if(t.disabled=!0,String(this.answer).toLowerCase().includes(e)){for(var i in this.maskedAnswer)this.answer[i]==e&&(this.maskedAnswer[i]=this.answer[i]);this.updateDisplayWord(),this.maskedAnswer.includes("_")==!1&&this.escaped()}else this.wrongGuesses++,this.hang()}updateDisplayWord(){var e="";for(var t of this.maskedAnswer)e+=t+" ";e.slice(0,-1),document.querySelector("#guessing").textContent=e}aborted(){this.abortions++,this.unhideAll(".abortions")}hang(){switch(this.wrongGuesses){case 0:this.hideAll("svg *");break;case 1:this.unhideAll(".gallows");break;case 2:this.unhide("#head");break;case 3:this.unhide("#body");break;case 4:this.unhide("#left-arm");break;case 5:this.unhide("#right-arm");break;case 6:this.unhide("#left-leg");break;case 7:this.unhide("#right-leg"),this.hanged();break;default:this.newGame()}}hanged(){this.gameInProcess=!1,this.labelState="lose",this.wins=0,this.unhideAll(".losses");var e="";for(var t of this.answer)e+=t+" ";e.slice(0,-1),document.querySelector("#guessing").textContent=e;var i=yn(this.afs,"puntajesAhorcado"),r={nombre:localStorage.getItem("user"),fecha:Date.now(),puntaje:this.wins};Zn(i,r)}escaped(){this.gameInProcess=!1,this.wins++,this.newGame()}resetKeypad(){document.querySelectorAll("#keypad div").forEach(e=>e.innerText=""),this.populateRow(1,"QWERTYUIOP"),this.populateRow(2,"ASDFGHJKL"),this.populateRow(3,"ZXCVBNM")}populateRow(e,t){for(let i of t){let r=document.createElement("a");document.querySelector("#keypad--row"+e).insertAdjacentHTML("beforeend","<a #"+i.toLowerCase()+" (click) = 'verifyGuess("+i.toLowerCase()+".id)' >"+i+"</a>")}}unhide(e){document.querySelector(e).classList.toggle("hidden",!1)}hideAll(e){document.querySelectorAll(e).forEach(t=>t.classList.toggle("hidden",!0))}unhideAll(e){document.querySelectorAll(e).forEach(t=>t.classList.toggle("hidden",!1))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["app-ahorcado"]],viewQuery:function(t,i){if(t&1&&si(r1,7),t&2){let r;Dn(r=Pn())&&(i.keypad=r.first)}},standalone:!0,features:[Ie],decls:112,vars:3,consts:[["keypad",""],["q",""],["w",""],["e",""],["r",""],["t",""],["y",""],["u",""],["i",""],["o",""],["p",""],["a",""],["s",""],["d",""],["f",""],["g",""],["h",""],["j",""],["k",""],["l",""],["z",""],["x",""],["c",""],["v",""],["b",""],["n",""],["m",""],["lang","en"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1, shrink-to-fit=no"],["href",Eg`https://fonts.googleapis.com/css?family=Cabin+Sketch`,"rel","stylesheet"],["viewBox","0 0 225 250"],["x1","2","x2","210","y1","9","y2","9",1,"gallows"],["x1","20","x2","20","y1","245","y2","9",1,"gallows"],["x1","50","x2","20","y1","9","y2","40",1,"gallows"],["id","head","cx","115","cy","67","r","25","fill","none"],["id","body","x1","115","x2","115","y1","173","y2","93"],["id","left-arm","x1","115","x2","75","y1","116","y2","105"],["id","right-arm","x1","115","x2","155","y1","116","y2","105"],["id","left-leg","x1","115","x2","85","y1","173","y2","220"],["id","right-leg","x1","145","x2","115","y1","220","y2","173"],["id","guessing"],["id","keypad"],["id","keypad--row1"],[3,"click"],["id","keypad--row2"],["id","keypad--row3"],["id","new-game",3,"click"],["style","display: none;",4,"ngIf"],[4,"ngIf"],[2,"display","none"]],template:function(t,i){if(t&1){let r=ft();D(0,"html",27)(1,"head"),oe(2,"meta",28)(3,"meta",29),D(4,"title"),M(5,"Ahorcado!!"),P(),oe(6,"link",30),P(),D(7,"body")(8,"h1"),M(9,"Ahorcado"),P(),$i(),D(10,"svg",31),oe(11,"line",32)(12,"line",33)(13,"line",34)(14,"circle",35)(15,"line",36)(16,"line",37)(17,"line",38)(18,"line",39)(19,"line",40),P(),qi(),oe(20,"div",41),D(21,"div",42,0)(23,"div",43)(24,"button",44,1),$("click",function(){ee(r);let o=ne(25);return te(i.verifyGuess("q",o))}),M(26,"Q"),P(),D(27,"button",44,2),$("click",function(){ee(r);let o=ne(28);return te(i.verifyGuess("w",o))}),M(29,"W"),P(),D(30,"button",44,3),$("click",function(){ee(r);let o=ne(31);return te(i.verifyGuess("e",o))}),M(32,"E"),P(),D(33,"button",44,4),$("click",function(){ee(r);let o=ne(34);return te(i.verifyGuess("r",o))}),M(35,"R"),P(),D(36,"button",44,5),$("click",function(){ee(r);let o=ne(37);return te(i.verifyGuess("t",o))}),M(38,"T"),P(),D(39,"button",44,6),$("click",function(){ee(r);let o=ne(40);return te(i.verifyGuess("y",o))}),M(41,"Y"),P(),D(42,"button",44,7),$("click",function(){ee(r);let o=ne(43);return te(i.verifyGuess("u",o))}),M(44,"U"),P(),D(45,"button",44,8),$("click",function(){ee(r);let o=ne(46);return te(i.verifyGuess("i",o))}),M(47,"I"),P(),D(48,"button",44,9),$("click",function(){ee(r);let o=ne(49);return te(i.verifyGuess("o",o))}),M(50,"O"),P(),D(51,"button",44,10),$("click",function(){ee(r);let o=ne(52);return te(i.verifyGuess("p",o))}),M(53,"P"),P()(),D(54,"div",45)(55,"button",44,11),$("click",function(){ee(r);let o=ne(56);return te(i.verifyGuess("a",o))}),M(57,"A"),P(),D(58,"button",44,12),$("click",function(){ee(r);let o=ne(59);return te(i.verifyGuess("s",o))}),M(60,"S"),P(),D(61,"button",44,13),$("click",function(){ee(r);let o=ne(62);return te(i.verifyGuess("d",o))}),M(63,"D"),P(),D(64,"button",44,14),$("click",function(){ee(r);let o=ne(65);return te(i.verifyGuess("f",o))}),M(66,"F"),P(),D(67,"button",44,15),$("click",function(){ee(r);let o=ne(68);return te(i.verifyGuess("g",o))}),M(69,"G"),P(),D(70,"button",44,16),$("click",function(){ee(r);let o=ne(71);return te(i.verifyGuess("h",o))}),M(72,"H"),P(),D(73,"button",44,17),$("click",function(){ee(r);let o=ne(74);return te(i.verifyGuess("j",o))}),M(75,"J"),P(),D(76,"button",44,18),$("click",function(){ee(r);let o=ne(77);return te(i.verifyGuess("k",o))}),M(78,"K"),P(),D(79,"button",44,19),$("click",function(){ee(r);let o=ne(80);return te(i.verifyGuess("l",o))}),M(81,"L"),P()(),D(82,"div",46)(83,"button",44,20),$("click",function(){ee(r);let o=ne(84);return te(i.verifyGuess("z",o))}),M(85,"Z"),P(),D(86,"button",44,21),$("click",function(){ee(r);let o=ne(87);return te(i.verifyGuess("x",o))}),M(88,"X"),P(),D(89,"button",44,22),$("click",function(){ee(r);let o=ne(90);return te(i.verifyGuess("c",o))}),M(91,"C"),P(),D(92,"button",44,23),$("click",function(){ee(r);let o=ne(93);return te(i.verifyGuess("v",o))}),M(94,"V"),P(),D(95,"button",44,24),$("click",function(){ee(r);let o=ne(96);return te(i.verifyGuess("b",o))}),M(97,"B"),P(),D(98,"button",44,25),$("click",function(){ee(r);let o=ne(99);return te(i.verifyGuess("n",o))}),M(100,"N"),P(),D(101,"button",44,26),$("click",function(){ee(r);let o=ne(102);return te(i.verifyGuess("m",o))}),M(103,"M"),P()()(),D(104,"h2",47),$("click",function(){return ee(r),te(i.newGame())}),D(105,"a"),M(106,"Juego Nuevo"),P()(),oe(107,"br"),Ue(108,s1,1,0,"label",48)(109,o1,2,1,"label",49),D(110,"h4"),M(111),P()()()}t&2&&(J(108),de("ngIf",i.labelState==="hidden"),J(),de("ngIf",i.labelState==="lose"),J(2),ot("Victorias consecutivas: ",i.wins,""))},dependencies:[ke,bt],styles:[Jw,Jw]})};var wl=class n{itemImageUrl="cartas.jpg";cartas=new Array;right=0;bottom=0;aciertos=0;numeroAnterior=0;afs=L(jt);constructor(){}ngOnInit(){var e=Math.trunc(Math.random()*52);this.numeroAnterior=e%13,this.right=225*(e%13),this.bottom=Math.trunc(e/13)*315}getSpriteStyle=function(e){var t=Math.trunc(e/13);return console.log("background-position: "+225*(e%13)+" "+t*315+"px;"),"background-position: "+225*(e%13)+" "+t*315+"px;"};apuestaMayor(){var e=Math.trunc(Math.random()*52);this.numeroAnterior<=e%13?this.aciertos++:this.perdio(),this.numeroAnterior=e%13,this.right=225*(e%13),this.bottom=Math.trunc(e/13)*315}apuestaMenor(){var e=Math.trunc(Math.random()*52);this.numeroAnterior>=e%13?this.aciertos++:this.perdio(),this.right=225*(e%13),this.numeroAnterior=e%13,e%13==this.numeroAnterior}perdio(){var e=yn(this.afs,"puntajesMayorMenor"),t={nombre:localStorage.getItem("user"),fecha:Date.now(),puntaje:this.aciertos};Zn(e,t),this.aciertos=0}cartaRandom(){var e=document.getElementsByClassName("carta")[0],t=Math.trunc(Math.random()*52);this.right=225*(t%13),this.bottom=Math.trunc(t/13)*315,this.numeroAnterior=t%13}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["app-mayormenor"]],standalone:!0,features:[Ie],decls:18,vars:9,consts:[[1,"tablero"],[1,"carta"],[1,"interfaz"],[3,"click"]],template:function(t,i){t&1&&(D(0,"body")(1,"h1"),M(2,"\xBFMayor o menor?"),P(),D(3,"div",0),oe(4,"div",1),P(),D(5,"div",2)(6,"Label"),M(7,"Indique si la proxima carta sera mayor o menor:"),P(),oe(8,"br"),D(9,"button",3),$("click",function(){return i.apuestaMayor()}),M(10,"Mayor"),P(),D(11,"button",3),$("click",function(){return i.apuestaMenor()}),M(12,"Menor"),P(),oe(13,"br"),D(14,"Label"),M(15),P(),D(16,"button",3),$("click",function(){return i.cartaRandom()}),M(17,"Carta Random"),P()()()),t&2&&(J(4),Sg("background","url(cartas.jpg)")("width",225,"px")("height",315,"px")("background-position","right "+i.right+"px bottom "+i.bottom+"px"),J(11),ot("Total de Aciertos Seguidos: ",i.aciertos,""))},dependencies:[ke],styles:['body[_ngcontent-%COMP%]{display:block;height:100vh;background:url("./media/fondoPoker-C2ZKG6MP.jpg");background-size:cover;background-position:top;padding-top:40px}element.syle[_ngcontent-%COMP%]{background-position-x:225px;background-position-y:315px}.interfaz[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;color:gold}.interfaz[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:gold}.tablero[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.carta[_ngcontent-%COMP%]{border-style:ridge;border-color:#000;border-width:8px}h1[_ngcontent-%COMP%]{font-family:Great Vibes;display:flex;align-items:center;flex-direction:column;color:gold}']})};var sI=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(he(hs),he(xt))},e.\u0275dir=It({type:e});let n=e;return n})(),a1=(()=>{let e=class e extends sI{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=cs(e)))(s||e)}})(),e.\u0275dir=It({type:e,features:[ds]});let n=e;return n})(),oI=new se("");var c1={provide:oI,useExisting:mu(()=>Al),multi:!0};function l1(){let n=Ki()?Ki().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var u1=new se(""),Al=(()=>{let e=class e extends sI{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!l1())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(he(hs),he(xt),he(u1,8))},e.\u0275dir=It({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&$("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[oi([c1]),ds]});let n=e;return n})();var h1=new se(""),d1=new se("");function aI(n){return n!=null}function cI(n){return _a(n)?qe(n):n}function lI(n){let e={};return n.forEach(t=>{e=t!=null?F(F({},e),t):e}),Object.keys(e).length===0?null:e}function uI(n,e){return e.map(t=>t(n))}function f1(n){return!n.validate}function hI(n){return n.map(e=>f1(e)?e:t=>e.validate(t))}function p1(n){if(!n)return null;let e=n.filter(aI);return e.length==0?null:function(t){return lI(uI(t,e))}}function dI(n){return n!=null?p1(hI(n)):null}function m1(n){if(!n)return null;let e=n.filter(aI);return e.length==0?null:function(t){let i=uI(t,e).map(cI);return hg(i).pipe(ce(lI))}}function fI(n){return n!=null?m1(hI(n)):null}function Xw(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function g1(n){return n._rawValidators}function _1(n){return n._rawAsyncValidators}function Jp(n){return n?Array.isArray(n)?n:[n]:[]}function El(n,e){return Array.isArray(n)?n.includes(e):n===e}function Zw(n,e){let t=Jp(e);return Jp(n).forEach(r=>{El(t,r)||t.push(r)}),t}function eI(n,e){return Jp(e).filter(t=>!El(n,t))}var bl=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=dI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=fI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Xp=class extends bl{get formDirective(){return null}get path(){return null}},Bo=class extends bl{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Zp=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},y1={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},FF=ge(F({},y1),{"[class.ng-submitted]":"isSubmitted"}),pI=(()=>{let e=class e extends Zp{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(he(Bo,2))},e.\u0275dir=It({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&pa("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[ds]});let n=e;return n})();var Fo="VALID",Il="INVALID",Lr="PENDING",Lo="DISABLED",jr=class{},Tl=class extends jr{constructor(e,t){super(),this.value=e,this.source=t}},Uo=class extends jr{constructor(e,t){super(),this.pristine=e,this.source=t}},jo=class extends jr{constructor(e,t){super(),this.touched=e,this.source=t}},Ur=class extends jr{constructor(e,t){super(),this.status=e,this.source=t}};function v1(n){return(Cl(n)?n.validators:n)||null}function w1(n){return Array.isArray(n)?dI(n):n||null}function I1(n,e){return(Cl(e)?e.asyncValidators:n)||null}function E1(n){return Array.isArray(n)?fI(n):n||null}function Cl(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var em=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ia(()=>this.statusReactive()),this.statusReactive=fa(void 0),this._pristine=Ia(()=>this.pristineReactive()),this.pristineReactive=fa(!0),this._touched=Ia(()=>this.touchedReactive()),this.touchedReactive=fa(!1),this._events=new vt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ai(this.statusReactive)}set status(e){ai(()=>this.statusReactive.set(e))}get valid(){return this.status===Fo}get invalid(){return this.status===Il}get pending(){return this.status==Lr}get disabled(){return this.status===Lo}get enabled(){return this.status!==Lo}get pristine(){return ai(this.pristineReactive)}set pristine(e){ai(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return ai(this.touchedReactive)}set touched(e){ai(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Zw(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Zw(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(eI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(eI(e,this._rawAsyncValidators))}hasValidator(e){return El(this._rawValidators,e)}hasAsyncValidator(e){return El(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ge(F({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new jo(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new jo(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ge(F({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Uo(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Uo(!0,i))}markAsPending(e={}){this.status=Lr;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ur(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ge(F({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Lo,this.errors=null,this._forEachChild(r=>{r.disable(ge(F({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Tl(this.value,i)),this._events.next(new Ur(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ge(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Fo,this._forEachChild(i=>{i.enable(ge(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ge(F({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fo||this.status===Lr)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Tl(this.value,t)),this._events.next(new Ur(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ge(F({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Lo:Fo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Lr,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=cI(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Ur(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new kt,this.statusChanges=new kt}_calculateStatus(){return this._allControlsDisabled()?Lo:this.errors?Il:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lr)?Lr:this._anyControlsHaveStatus(Il)?Il:Fo}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Uo(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new jo(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Cl(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=w1(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=E1(this._rawAsyncValidators)}};var mI=new se("CallSetDisabledState",{providedIn:"root",factory:()=>tm}),tm="always";function b1(n,e){return[...e.path,n]}function T1(n,e,t=tm){C1(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),S1(n,e),D1(n,e),R1(n,e),A1(n,e)}function tI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function A1(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function C1(n,e){let t=g1(n);e.validator!==null?n.setValidators(Xw(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=_1(n);e.asyncValidator!==null?n.setAsyncValidators(Xw(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();tI(e._rawValidators,r),tI(e._rawAsyncValidators,r)}function S1(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&gI(n,e)})}function R1(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&gI(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function gI(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function D1(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function P1(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function k1(n){return Object.getPrototypeOf(n.constructor)===a1}function x1(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===Al?t=s:k1(s)?i=s:r=s}),r||i||t||null}function nI(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function iI(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var M1=class extends em{constructor(e=null,t,i){super(v1(t),I1(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cl(t)&&(t.nonNullable||t.initialValueIsDefault)&&(iI(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){nI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){nI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){iI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var O1={provide:Bo,useExisting:mu(()=>nm)},rI=Promise.resolve(),nm=(()=>{let e=class e extends Bo{constructor(i,r,s,o,c,l){super(),this._changeDetectorRef=c,this.callSetDisabledState=l,this.control=new M1,this._registered=!1,this.name="",this.update=new kt,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=x1(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),P1(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){T1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){rI.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&kn(r);rI.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?b1(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(he(Xp,9),he(h1,10),he(d1,10),he(oI,10),he(Hi,8),he(mI,8))},e.\u0275dir=It({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[oi([O1]),ds,zi]});let n=e;return n})();var N1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ze({type:e}),e.\u0275inj=Xe({});let n=e;return n})();var _I=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:mI,useValue:i.callSetDisabledState??tm}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ze({type:e}),e.\u0275inj=Xe({imports:[N1]});let n=e;return n})();var Sl={apiKey:"AIzaSyArH1Lj3pGRhHUfPD6oLZKh-WmzJO1hc78",authDomain:"tp-labo4-7b1a6.firebaseapp.com",projectId:"tp-labo4-7b1a6",storageBucket:"tp-labo4-7b1a6.appspot.com",messagingSenderId:"671600234993",appId:"1:671600234993:web:3d27fe521fa3d244063450"};var Rl=class n{db=ml(Js(Sl));constructor(){}sendMessage(e){return _(this,null,function*(){let t=yn(this.db,"messages");yield Zn(t,ge(F({},e),{timestamp:new Date}))})}getMessages(){let e=yn(this.db,"messages"),t=xw(e,kw("timestamp"));return new Bt(i=>({unsubscribe:Pw(t,s=>{let o=s.docs.map(c=>F({id:c.id},c.data()));i.next(o)})}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};function L1(n,e){if(n&1&&(D(0,"div")(1,"div",5)(2,"strong"),M(3),P(),M(4),D(5,"p"),M(6),kg(7,"date"),P()()()),n&2){let t=e.$implicit;J(3),ot("",t.sender,":"),J(),ot(" ",t.content," "),J(2),ot("Enviado: ",xg(7,3,t.timestamp.toDate(),"short"),"")}}var Dl=class n{constructor(e){this.chatService=e}messages=[];newMessage="";sender=localStorage.getItem("user")||"Guest";ngOnInit(){this.chatService.getMessages().subscribe(e=>{this.messages=e})}sendMessage(){this.newMessage.trim()&&(this.chatService.sendMessage({content:this.newMessage,sender:this.sender,timestamp:new Date}),this.newMessage="")}static \u0275fac=function(t){return new(t||n)(he(Rl))};static \u0275cmp=we({type:n,selectors:[["app-chat"]],standalone:!0,features:[Ie],decls:7,vars:2,consts:[[1,"chat-container"],[1,"messages"],[4,"ngFor","ngForOf"],["placeholder","Escribi tu mensaje...",3,"ngModelChange","ngModel"],[3,"click"],[1,"mensaje"]],template:function(t,i){t&1&&(D(0,"body")(1,"div",0)(2,"div",1),Ue(3,L1,8,6,"div",2),P(),D(4,"input",3),Pg("ngModelChange",function(s){return Dg(i.newMessage,s)||(i.newMessage=s),s}),P(),D(5,"button",4),$("click",function(){return i.sendMessage()}),M(6,"Enviar"),P()()()),t&2&&(J(3),de("ngForOf",i.messages),J(),Rg("ngModel",i.newMessage))},dependencies:[ke,ba,$g,_I,Al,pI,nm],styles:['html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;display:flex;justify-content:center;background-color:#000}.chat-container[_ngcontent-%COMP%]{background-image:url("./media/chatbox-G7B3CYCI.webp");background-size:cover;width:400px;height:600px;border:1px solid #ccc;padding:10px;background-color:#fff;box-shadow:0 4px 10px #0000001a;display:flex;flex-direction:column;justify-content:center}.messages[_ngcontent-%COMP%]{font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;padding-top:38%;height:500px;overflow-y:scroll;border-bottom:1px solid #ccc;margin-bottom:10px;overflow:auto}.mensaje[_ngcontent-%COMP%]{padding:10px;background-blend-mode:overlay;background-color:#000;border-radius:30px;border-style:solid;border-color:#000;color:#fff;margin:15px}input[_ngcontent-%COMP%]{width:auto;padding:10px;margin-right:10px;border:1px solid #ccc;border-radius:4px;outline:none;flex-wrap:wrap}button[_ngcontent-%COMP%]{padding:10px;border:none;background-color:#fff;color:#000;border-radius:15px;border-style:solid;border-color:#000;border-width:8px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:red;color:#fff}']})};var Pl=class n{api="https://opentdb.com/api.php?amount=10&type=multiple";httpClient=L(Du);constructor(){}getQuestions(){return this.httpClient.get(this.api)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};function U1(n,e){if(n&1){let t=ft();D(0,"div")(1,"button",8),$("click",function(){let r=ee(t).$implicit,s=Ge(3);return te(s.selectAnswer(r))}),P()()}if(n&2){let t=e.$implicit;J(),de("innerHTML",t,vu)}}function j1(n,e){n&1&&(D(0,"p",12),M(1," \xA1Correcto! "),P())}function B1(n,e){if(n&1&&(D(0,"p",13),M(1),P()),n&2){let t=Ge(4);J(),ot("Incorrecto. La respuesta correcta era: ",t.questions[t.currentQuestionIndex].correct_answer,"")}}function z1(n,e){if(n&1){let t=ft();D(0,"div",9),Ue(1,j1,2,0,"p",10)(2,B1,2,1,"ng-template",null,1,ps),D(4,"button",11),$("click",function(){ee(t);let r=Ge(3);return te(r.nextQuestion())}),M(5,"Siguiente pregunta"),P()()}if(n&2){let t=ne(3),i=Ge(3);J(),de("ngIf",i.selectedAnswer===i.questions[i.currentQuestionIndex].correct_answer)("ngIfElse",t)}}function $1(n,e){if(n&1&&(D(0,"div")(1,"h2"),M(2),P(),oe(3,"p",5),Ue(4,U1,2,1,"div",6)(5,z1,6,2,"div",7),P()),n&2){let t=Ge(2);J(2),ot("Pregunta ",t.currentQuestionIndex+1,":"),J(),de("innerHTML",t.questions[t.currentQuestionIndex].question,vu),J(),de("ngForOf",t.shuffledAnswers(t.currentQuestionIndex)),J(),de("ngIf",t.selectedAnswer)}}function q1(n,e){n&1&&(D(0,"div")(1,"h2"),M(2,"\xA1Terminaste!"),P(),D(3,"p"),M(4,"Contestaste todas las preguntas."),P()())}function G1(n,e){if(n&1&&(D(0,"div",3),Ue(1,$1,6,4,"div",4)(2,q1,5,0,"div",4),P()),n&2){let t=Ge();J(),de("ngIf",t.currentQuestionIndex<t.questions.length),J(),de("ngIf",t.currentQuestionIndex>=t.questions.length)}}function W1(n,e){n&1&&(D(0,"p"),M(1,"Loading questions..."),P())}var kl=class n{questions=[];currentQuestionIndex=0;selectedAnswer=null;triviaService=L(Pl);constructor(){}ngOnInit(){this.triviaService.getQuestions().subscribe(e=>{this.questions=e.results})}shuffledAnswers(e){let t=this.questions[e];return[...t.incorrect_answers,t.correct_answer].sort(()=>Math.random()-.5)}selectAnswer(e){this.selectedAnswer=e}nextQuestion(){this.selectedAnswer=null,this.currentQuestionIndex++,console.log("puto"),console.log(this.questions)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["app-preguntados2"]],standalone:!0,features:[Ie],decls:4,vars:1,consts:[["loading",""],["incorrectAnswer",""],["class","contenedor",4,"ngIf"],[1,"contenedor"],[4,"ngIf"],[3,"innerHTML"],[4,"ngFor","ngForOf"],["class","feedback",4,"ngIf"],[3,"click","innerHTML"],[1,"feedback"],["class","correct",4,"ngIf","ngIfElse"],[3,"click"],[1,"correct"],[1,"incorrect"]],template:function(t,i){t&1&&(D(0,"body"),Ue(1,G1,3,2,"div",2)(2,W1,2,0,"ng-template",null,0,ps),P()),t&2&&(J(),de("ngIf",i.questions.length>0))},dependencies:[ke,ba,bt],styles:['body[_ngcontent-%COMP%]{background-image:url("./media/preguntas-AKUMGPCE.jpg");background-size:cover}.contenedor[_ngcontent-%COMP%]{margin-top:12%;justify-content:center}div[_ngcontent-%COMP%]{flex:auto;text-align:center;margin-top:20px}h2[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{color:#000;font-family:Arial,sans-serif;font-size:1.2rem;margin-bottom:20px;padding-right:300px;padding-left:300px}button[_ngcontent-%COMP%]{background-color:#1e90ff;color:#fff;border:none;padding:10px 20px;font-size:1.2rem;cursor:pointer;margin:10px;border-radius:8px;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#6495ed}p.correct[_ngcontent-%COMP%]{color:#32cd32;font-weight:700}p.incorrect[_ngcontent-%COMP%]{color:#ff4500;font-weight:700}button.next-button[_ngcontent-%COMP%]{background-color:orange;color:#000;margin-top:20px}button.next-button[_ngcontent-%COMP%]:hover{background-color:#ff8c00}']})};var H1=["canvas"],K1=["nextShapeCanvas"],Q1=["scoreCanvas"],xl=class n{canvas;canvasProximaForma;canvasPuntuacion;tama\u00F1oCuadrado=24;tama\u00F1o=40;fps=24;velocidad=5;ctx;cantidadCuadradosX;cantidadCuadradosY;formas=[];initialTwoDArr=[];puntuacion=0;gameOver=!1;formaActual;proximaForma;mapa=[];grosorLineaBlanca=4;window=window;nctx;sctx;image;constructor(){}ngAfterViewInit(){this.ctx=this.canvas.nativeElement.getContext("2d"),this.nctx=this.canvasProximaForma.nativeElement.getContext("2d"),this.sctx=this.canvasPuntuacion.nativeElement.getContext("2d"),this.cantidadCuadradosX=this.canvas.nativeElement.width/this.tama\u00F1o,this.cantidadCuadradosY=this.canvas.nativeElement.height/this.tama\u00F1o,this.loadImage("bloques.png").then(()=>{window.addEventListener("keydown",this.handleKeyDown),this.resetVars(),this.formas=[new vn(0,120,[[0,1,0],[0,1,0],[1,1,0]],this.mapa),new vn(0,96,[[0,0,0],[1,1,1],[0,1,0]],this.mapa),new vn(0,72,[[0,1,0],[0,1,0],[0,1,1]],this.mapa),new vn(0,48,[[0,0,0],[0,1,1],[1,1,0]],this.mapa),new vn(0,24,[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],this.mapa),new vn(0,0,[[1,1],[1,1]],this.mapa),new vn(0,48,[[0,0,0],[1,1,0],[0,1,1]],this.mapa)],this.formaActual=this.getRandomShape(),this.proximaForma=this.getRandomShape(),this.gameLoop()})}getRandomShape(){return this.formas[Math.floor(Math.random()*this.formas.length)]}loadImage(e){return new Promise((t,i)=>{this.image=new Image,this.image.src=e,this.image.onload=()=>t(),this.image.onerror=i})}gameLoop=()=>{setInterval(this.update,1e3/this.velocidad),setInterval(this.draw,1e3/this.fps)};deleteCompleteRows=()=>{for(let e=0;e<this.mapa.length;e++){let t=this.mapa[e],i=!0;for(let r=0;r<t.length;r++)t[r].imageX==-1&&(i=!1);if(i){console.log("complete row"),this.puntuacion+=1e3;for(let s=e;s>0;s--)this.mapa[s]=this.mapa[s-1];let r=[];for(let s=0;s<this.cantidadCuadradosX;s++)r.push({imageX:-1,imageY:-1});this.mapa[0]=r}}};update=()=>{if(!this.gameOver)if(this.formaActual.checkFondo())this.formaActual.y+=1;else{for(let e=0;e<this.formaActual.template.length;e++)for(let t=0;t<this.formaActual.template.length;t++)this.formaActual.template[e][t]!=0&&(this.mapa[this.formaActual.posicionTrancada().y+t][this.formaActual.posicionTrancada().x+e]={imageX:this.formaActual.imagenX,imageY:this.formaActual.imagenY});this.deleteCompleteRows(),this.formaActual=this.proximaForma,this.proximaForma=this.getRandomShape(),this.formaActual.checkFondo()||(this.gameOver=!0),this.puntuacion+=100}};drawRect=(e,t,i,r,s)=>{this.ctx.fillStyle=s,this.ctx.fillRect(e,t,i,r)};drawBackground=()=>{this.drawRect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height,"#bca0dc");for(let e=0;e<this.cantidadCuadradosX+1;e++)this.drawRect(this.tama\u00F1o*e-this.grosorLineaBlanca,0,this.grosorLineaBlanca,this.canvas.nativeElement.height,"white");for(let e=0;e<this.cantidadCuadradosY+1;e++)this.drawRect(0,this.tama\u00F1o*e-this.grosorLineaBlanca,this.canvas.nativeElement.width,this.grosorLineaBlanca,"white")};drawCurrentTetris=()=>{for(let e=0;e<this.formaActual.template.length;e++)for(let t=0;t<this.formaActual.template.length;t++)this.formaActual.template[e][t]!=0&&this.ctx.drawImage(this.image,this.formaActual.imagenX,this.formaActual.imagenY,this.tama\u00F1oCuadrado,this.tama\u00F1oCuadrado,Math.trunc(this.formaActual.x)*this.tama\u00F1o+this.tama\u00F1o*e,Math.trunc(this.formaActual.y)*this.tama\u00F1o+this.tama\u00F1o*t,this.tama\u00F1o,this.tama\u00F1o)};drawSquares=()=>{for(let e=0;e<this.mapa.length;e++){let t=this.mapa[e];for(let i=0;i<t.length;i++)t[i].imageX!=-1&&this.ctx.drawImage(this.image,t[i].imageX,t[i].imageY,this.tama\u00F1oCuadrado,this.tama\u00F1oCuadrado,i*this.tama\u00F1o,e*this.tama\u00F1o,this.tama\u00F1o,this.tama\u00F1o)}};drawproximaForma=()=>{this.nctx.fillStyle="#bca0dc",this.nctx.fillRect(0,0,this.canvasProximaForma.nativeElement.width,this.canvasProximaForma.nativeElement.height);for(let e=0;e<this.proximaForma.template.length;e++)for(let t=0;t<this.proximaForma.template.length;t++)this.proximaForma.template[e][t]!=0&&this.nctx.drawImage(this.image,this.proximaForma.imagenX,this.proximaForma.imagenY,this.tama\u00F1oCuadrado,this.tama\u00F1oCuadrado,this.tama\u00F1o*e,this.tama\u00F1o*t+this.tama\u00F1o,this.tama\u00F1o,this.tama\u00F1o)};drawpuntuacion=()=>{this.sctx.clearRect(0,0,this.canvasPuntuacion.nativeElement.width,this.canvasPuntuacion.nativeElement.height),this.sctx.font="64px Poppins",this.sctx.fillStyle="black",this.sctx.fillText(this.puntuacion.toString(),10,50)};drawGameOver=()=>{this.ctx.font="64px Poppins",this.ctx.fillStyle="black",this.ctx.fillText("Game Over!",10,this.canvas.nativeElement.height/2)};draw=()=>{this.ctx.clearRect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height),this.drawBackground(),this.drawSquares(),this.drawCurrentTetris(),this.drawproximaForma(),this.drawpuntuacion(),this.gameOver&&this.drawGameOver()};resetVars=()=>{for(let e=0;e<this.cantidadCuadradosY;e++){let t=[];for(let i=0;i<this.cantidadCuadradosX;i++)t.push({imageX:-1,imageY:-1});this.initialTwoDArr.push(t)}this.puntuacion=0,this.gameOver=!1,this.formaActual=this.getRandomShape(),this.proximaForma=this.getRandomShape(),this.mapa=this.initialTwoDArr};handleKeyDown=e=>{switch(e.key){case"ArrowLeft":this.formaActual.moverIzquierda();break;case"ArrowUp":this.formaActual.cambiarRotacion();break;case"ArrowRight":this.formaActual.moverDerecha();break;case"ArrowDown":this.formaActual.bajar();break}};static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["app-tetris"]],viewQuery:function(t,i){if(t&1&&(si(H1,5),si(K1,5),si(Q1,5)),t&2){let r;Dn(r=Pn())&&(i.canvas=r.first),Dn(r=Pn())&&(i.canvasProximaForma=r.first),Dn(r=Pn())&&(i.canvasPuntuacion=r.first)}},standalone:!0,features:[Ie],decls:15,vars:0,consts:[["canvas",""],["nextShapeCanvas",""],["scoreCanvas",""],["imagen",""],["width","400","height","800"],["width","200","height","200",2,"position","absolute","top","10"],["width","200","height","200",2,"position","absolute","top","220"],[2,"width","64px","height","64px","border-radius","50%","background-color","gray","border","0px",3,"click"],["src","bloques.png",2,"display","none"]],template:function(t,i){if(t&1){let r=ft();D(0,"html")(1,"head")(2,"title"),M(3,"Tetris Game"),P()(),D(4,"body"),oe(5,"canvas",4,0)(7,"canvas",5,1)(9,"canvas",6,2),D(11,"button",7),$("click",function(){return ee(r),te(i.resetVars())}),M(12," Resetear "),P(),oe(13,"img",8,3),P()()}},dependencies:[ke],styles:[".canvas[_ngcontent-%COMP%]{width:400;height:800}img[_ngcontent-%COMP%]{display:none}",`button[_ngcontent-%COMP%]:hover {
            background-color: #bca0dc !important;
        }

        button[_ngcontent-%COMP%]:active {
            background-color: #9969d0 !important;
        }`]})},vn=class{imagenX;imagenY;template;x;y;mapa;constructor(e,t,i,r){this.imagenX=e,this.imagenY=t,this.template=i,this.x=10/2,this.y=0,this.mapa=r}posicionTrancada(){return{x:Math.trunc(this.x),y:Math.trunc(this.y)}}checkFondo(){console.log(this.mapa),console.log(this.template);for(let e=0;e<this.template.length;e++)for(let t=0;t<this.template.length;t++){if(this.template[e][t]==0)continue;let i=e+this.posicionTrancada().x,r=t+this.posicionTrancada().y;if(r+1>=20||this.mapa[r+1][i].imageX!=-1)return!1}return!0}checkIzquierda(){for(let e=0;e<this.template.length;e++)for(let t=0;t<this.template.length;t++){if(this.template[e][t]==0)continue;let i=e+this.posicionTrancada().x,r=t+this.posicionTrancada().y;if(i-1<0||this.mapa[r][i-1].imageX!=-1)return!1}return!0}checkDerecha(){for(let e=0;e<this.template.length;e++)for(let t=0;t<this.template.length;t++){if(this.template[e][t]==0)continue;let i=e+this.posicionTrancada().x,r=t+this.posicionTrancada().y;if(i+1>=10||this.mapa[r][i+1].imageX!=-1)return!1}return!0}moverIzquierda(){this.checkIzquierda()&&(this.x-=1)}moverDerecha(){this.checkDerecha()&&(this.x+=1)}bajar(){this.checkFondo()&&(this.y+=1)}cambiarRotacion(){let e=[];for(let i=0;i<this.template.length;i++)e[i]=this.template[i].slice();let t=this.template.length;for(let i=0;i<t/2;i++){let r=i,s=t-1-i;for(let o=r;o<s;o++){let c=o-r,l=this.template[r][o];this.template[r][o]=this.template[o][s],this.template[o][s]=this.template[s][s-c],this.template[s][s-c]=this.template[s-c][r],this.template[s-c][r]=l}}for(let i=0;i<this.template.length;i++)for(let r=0;r<this.template.length;r++){if(this.template[i][r]==0)continue;let s=i+this.posicionTrancada().x,o=r+this.posicionTrancada().y;(s<0||s>=20||o<0||o>=10)&&(this.template=e)}}};var yI=[{path:"",component:Mo},{path:"auth",component:Mo},{path:"home",component:_l},{path:"quien-soy",component:gl},{path:"registro",component:yl},{path:"chat",component:Dl},{path:"juegos/ahorcado",component:vl},{path:"juegos/mayoromenor",component:wl},{path:"juegos/preguntados2",component:kl},{path:"juegos/tetris",component:xl}];var Y1="@",J1=(()=>{let e=class e{constructor(i,r,s,o,c){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=c,this._rendererFactoryPromise=null,this.scheduler=L(Tg,{optional:!0}),this.loadingSchedulerFn=L(X1,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let i=()=>this.moduleImpl??import("./chunk-ZOVWNFRT.js").then(s=>s),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(i):r=i(),r.catch(s=>{throw new Ce(5300,!1)}).then(({\u0275createEngine:s,\u0275AnimationRendererFactory:o})=>{this._engine=s(this.animationType,this.doc);let c=new o(this.delegate,this._engine,this.zone);return this.delegate=c,c})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new im(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(c=>{let l=c.createRenderer(i,r);o.use(l),this.scheduler?.notify(10)}).catch(c=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){ha()},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),im=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(Y1)}},X1=new se("");function vI(n="animations"){return wu("NgAsyncAnimations"),dt([{provide:da,useFactory:(e,t,i)=>new J1(e,t,i,n),deps:[xe,ka,be]},{provide:yu,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var wI={providers:[Og({eventCoalescing:!0}),ey(yI),vI(),xy(()=>My(Sl)),Dv(()=>kv()),Dw(()=>ml()),i_()]};var Z1=()=>["/quien-soy"],ek=()=>["/chat"],tk=()=>["/home"],nk=()=>["/auth"],ik=()=>["/registro"];function rk(n,e){if(n&1){let t=ft();D(0,"div")(1,"h1"),M(2),P(),D(3,"a",14),$("click",function(){ee(t);let r=Ge();return te(r.logOff())}),M(4,"Log-Out"),P()()}if(n&2){let t=Ge();J(2),ot("Bienvenido, ",t.userName,"!")}}function sk(n,e){n&1&&(D(0,"h2"),M(1,"No estas Logeado."),P(),D(2,"div",15)(3,"label",16),M(4,"LogIn"),P(),D(5,"label",16),M(6,"Registrarse"),P()()),n&2&&(J(3),de("routerLink",pt(2,nk)),J(2),de("routerLink",pt(3,ik)))}var Ml=class n{constructor(e){this.router=e;this.user=this.auth.currentUser,this.userName=""}user;userName;auth=L(Vt);ngOnInit(){xv(this.auth,e=>{this.user?.email?this.userName=this.user.email:this.userName=null})}logOff(){return _(this,null,function*(){yield this.auth.signOut().then(()=>{this.router.navigate([""])})})}static \u0275fac=function(t){return new(t||n)(he(Fe))};static \u0275cmp=we({type:n,selectors:[["app-navbar"]],standalone:!0,features:[Ie],decls:24,vars:8,consts:[["noUser",""],["id","navbar",1,"navbar"],[1,"userInfo"],[4,"ngIf","ngIfElse"],[1,"links"],[1,"link-wrapper",3,"routerLink"],[1,"fallback"],[1,"img-wrapper"],["src","Quien soy_.png",1,"normal"],["src","Quien soy_2.png",1,"active"],["src","Chatroom.png",1,"normal"],["src","Chatroom2.png",1,"active"],["src","Home.png",1,"normal"],["src","Home2.png",1,"active"],[1,"userButton",3,"click"],[1,"authButtons"],[1,"userButton",3,"routerLink"]],template:function(t,i){if(t&1&&(D(0,"nav",1)(1,"div",2),Ue(2,rk,5,1,"div",3)(3,sk,7,4,"ng-template",null,0,ps),P(),D(5,"div",4)(6,"a",5)(7,"span",6),M(8,"\xBFQuien soy?"),P(),D(9,"div",7),oe(10,"img",8)(11,"img",9),P()(),D(12,"a",5)(13,"span",6),M(14,"Chatroom"),P(),D(15,"div",7),oe(16,"img",10)(17,"img",11),P()(),D(18,"a",5)(19,"span",6),M(20,"Home"),P(),D(21,"div",7),oe(22,"img",12)(23,"img",13),P()()()()),t&2){let r=ne(4);J(2),de("ngIf",i.userName)("ngIfElse",r),J(4),de("routerLink",pt(5,Z1)),J(6),de("routerLink",pt(6,ek)),J(6),de("routerLink",pt(7,tk))}},dependencies:[ke,bt,Xa,or],styles:['@charset "UTF-8";hr[_ngcontent-%COMP%]{opacity:0}.navbar[_ngcontent-%COMP%]{background-color:#424242;justify-content:space-between;align-items:center;display:flex;height:90px;box-shadow:0 4px 6px #0000001a;position:fixed;top:0;width:100%}.userInfo[_ngcontent-%COMP%]{font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;color:#fff;display:flex;flex-direction:column;align-items:flex-start}nav[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:1.2rem}.authButtons[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}nav[_ngcontent-%COMP%]   .noUser[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:10px;color:#fff;font-weight:700}.noUser[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ff3b28}.links[_ngcontent-%COMP%]{padding-bottom:10px}.link-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;margin:20px 16px}.link-wrapper[_ngcontent-%COMP%]   .fallback[_ngcontent-%COMP%]{font-size:2.25em;letter-spacing:4px;line-height:0;opacity:0;position:relative;top:15px;left:0}.link-wrapper[_ngcontent-%COMP%]:hover{z-index:9999}.link-wrapper[_ngcontent-%COMP%]:hover   .img-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_tiltBounce .15s ease;animation-fill-mode:forwards;display:block}.link-wrapper[_ngcontent-%COMP%]:hover   .img-wrapper[_ngcontent-%COMP%]   img.normal[_ngcontent-%COMP%]{mix-blend-mode:darken}.link-wrapper[_ngcontent-%COMP%]:nth-child(2n):hover   .img-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_tiltBounceAlt .15s ease;animation-fill-mode:forwards}.img-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:40px;display:block;left:0;right:0;top:-5px;margin:0 auto;position:absolute;z-index:999}.img-wrapper[_ngcontent-%COMP%]   img.normal[_ngcontent-%COMP%]{display:block}.img-wrapper[_ngcontent-%COMP%]   img.active[_ngcontent-%COMP%]{display:none;z-index:-1}@keyframes _ngcontent-%COMP%_tiltBounce{0%{transform:scale(1) rotate(-7deg)}50%{transform:scale(1.5) rotate(-7deg)}to{transform:scale(1.15) rotate(-7deg)}}@keyframes _ngcontent-%COMP%_tiltBounceAlt{0%{transform:scale(1) rotate(7deg)}50%{transform:scale(1.5) rotate(7deg)}to{transform:scale(1.15) rotate(7deg)}}']})};function ok(n,e){n&1&&oe(0,"app-navbar")}var Ol=class n{constructor(e){this.router=e;this.router.events.pipe(Dt(t=>t instanceof At)).subscribe(t=>{this.checkNavbarVisibility(t.urlAfterRedirects)})}title="TP-Sala-De-Juegos";showNavbar=!0;checkNavbarVisibility(e){let t=["/","/auth","/registro"];this.showNavbar=!t.includes(e)}static \u0275fac=function(t){return new(t||n)(he(Fe))};static \u0275cmp=we({type:n,selectors:[["app-root"]],standalone:!0,features:[Ie],decls:2,vars:1,consts:[[4,"ngIf"],[1,"mainBody"]],template:function(t,i){t&1&&(Ue(0,ok,1,0,"app-navbar",0),oe(1,"router-outlet",1)),t&2&&de("ngIf",i.showNavbar)},dependencies:[fh,Ml,ke,bt]})};u_(Ol,wI).catch(n=>console.error(n));
