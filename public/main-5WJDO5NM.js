import{$ as $e,$a as Uf,A as Ns,Aa as hi,B as rc,Ba as wn,C as Zn,Ca as Ze,D as er,Da as lc,E as ai,Ea as Nf,F as Ef,Fa as Bs,G as ic,Ga as xf,H as Xt,Ha as Of,I as Tf,Ia as Mf,J as xs,Ja as Lf,K as Zt,Ka as En,L as sc,La as tr,M as bf,Ma as $,N as Af,Na as G,O as Sf,Oa as Le,P as Os,Pa as Tn,Q as mt,Qa as Fe,R as Ms,Ra as $s,S as Ie,Sa as Ve,T as le,Ta as Z,U as q,Ua as hc,V as st,Va as zs,W as Cf,Wa as qe,X as oe,Xa as Ff,Y as oc,Ya as di,Z as B,Za as Vf,_ as L,_a as qs,a as O,aa as ci,ab as jf,b as ve,ba as ze,bb as dc,ca as ot,cb as fc,d as Yt,da as ui,db as Bf,e as y,ea as at,eb as Gs,f as gf,fa as Rf,fb as $f,g as _f,ga as Ls,gb as zf,h as ii,ha as Dt,hb as pc,i as Xa,ia as ac,ib as qf,j as Za,ja as ct,jb as Gf,k as Pt,ka as ut,kb as Ae,l as Je,la as Fs,lb as Hs,m as yf,ma as Vs,mb as Hf,n as vf,na as cc,nb as Ws,o as Jt,oa as kt,ob as fi,p as ec,pa as Pf,pb as Wf,q as tc,qa as vn,qb as Kf,r as nc,ra as ce,rb as mc,s as it,sa as Us,sb as Qf,t as U,ta as In,u as si,ua as Df,v as If,va as js,w as wf,wa as kf,x as te,xa as Nt,y as oi,ya as uc,z as Xe,za as li}from"./chunk-MPVPKW22.js";var yc=class extends Gf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},vc=class n extends yc{static makeCurrent(){qf(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=$y();return t==null?null:zy(t)}resetBaseElement(){pi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Hf(document.cookie,e)}},pi=null;function $y(){return pi=pi||document.querySelector("base"),pi?pi.getAttribute("href"):null}function zy(n){return new URL(n,document.baseURI).pathname}var qy=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})(),Ks=new oe(""),Xf=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(a=>a.supports(r)),!i)throw new le(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(B(Ks),B(ce))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})(),mi=class{constructor(e){this._doc=e}},gc="ng-app-id",Zf=(()=>{let e=class e{constructor(r,i,s,a={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=mc(a),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${gc}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let a=s.get(r);return a.usage+=i,a.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,a=s?.get(i);if(a?.parentNode===r)return s.delete(i),a.removeAttribute(gc),a;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=i,this.platformIsServer&&c.setAttribute(gc,this.appId),r.appendChild(c),c}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),a=this.styleRef,c=a.get(i)?.elements;c?c.push(s):a.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(B(Ae),B(js),B(li,8),B(Nt))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})(),_c={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},wc=/%COMP%/g,ep="%COMP%",Gy=`_nghost-${ep}`,Hy=`_ngcontent-${ep}`,Wy=!0,Ky=new oe("",{providedIn:"root",factory:()=>Wy});function Qy(n){return Hy.replace(wc,n)}function Yy(n){return Gy.replace(wc,n)}function tp(n,e){return e.map(t=>t.replace(wc,n))}var Qs=(()=>{let e=class e{constructor(r,i,s,a,c,l,d,p=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=l,this.ngZone=d,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=mc(l),this.defaultRenderer=new gi(r,c,d,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ci.ShadowDom&&(i=ve(O({},i),{encapsulation:ci.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Ys?s.applyToHost(r):s instanceof _i&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,a=s.get(i.id);if(!a){let c=this.doc,l=this.ngZone,d=this.eventManager,p=this.sharedStylesHost,v=this.removeStylesOnCompDestroy,A=this.platformIsServer;switch(i.encapsulation){case ci.Emulated:a=new Ys(d,p,i,this.appId,v,c,l,A);break;case ci.ShadowDom:return new Ic(d,p,r,i,c,l,this.nonce,A);default:a=new _i(d,p,i,v,c,l,A);break}s.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(B(Xf),B(Zf),B(js),B(Ky),B(Ae),B(Nt),B(ce),B(li))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})(),gi=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(_c[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Yf(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Yf(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new le(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=_c[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=_c[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(hi.DashCase|hi.Important)?e.style.setProperty(t,r,i&hi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&hi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=pc().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Yf(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ic=class extends gi{constructor(e,t,r,i,s,a,c,l){super(e,s,a,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=tp(i.id,i.styles);for(let p of d){let v=document.createElement("style");c&&v.setAttribute("nonce",c),v.textContent=p,this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},_i=class extends gi{constructor(e,t,r,i,s,a,c,l){super(e,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?tp(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ys=class extends _i{constructor(e,t,r,i,s,a,c,l){let d=i+"-"+r.id;super(e,t,r,s,a,c,l,d),this.contentAttr=Qy(d),this.hostAttr=Yy(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Jy=(()=>{let e=class e extends mi{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(B(Ae))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})(),Xy=(()=>{let e=class e extends mi{constructor(r){super(r),this.delegate=L(zf,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(B(Ae))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})(),Jf=["alt","control","meta","shift"],Zy={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ev={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},tv=(()=>{let e=class e extends mi{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let a=e.parseEventName(i),c=e.eventCallback(a.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pc().onAndCancel(r,a.domEventName,c))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let a=e._normalizeKey(i.pop()),c="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),c="code."),Jf.forEach(p=>{let v=i.indexOf(p);v>-1&&(i.splice(v,1),c+=p+".")}),c+=a,i.length!=0||a.length===0)return null;let d={};return d.domEventName=s,d.fullKey=c,d}static matchEventFullKeyCode(r,i){let s=Zy[r.key]||r.key,a="";return i.indexOf("code.")>-1&&(s=r.code,a="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Jf.forEach(c=>{if(c!==s){let l=ev[c];l(r)&&(a+=c+".")}}),a+=s,a===i)}static eventCallback(r,i,s){return a=>{e.matchEventFullKeyCode(a,r)&&s.runGuarded(()=>i(a))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(B(Ae))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})();function np(n,e){return $f(O({rootComponent:n},nv(e)))}function nv(n){return{appProviders:[...av,...n?.providers??[]],platformProviders:ov}}function rv(){vc.makeCurrent()}function iv(){return new Us}function sv(){return Df(document),document}var ov=[{provide:Nt,useValue:Wf},{provide:kf,useValue:rv,multi:!0},{provide:Ae,useFactory:sv,deps:[]}];var av=[{provide:Rf,useValue:"root"},{provide:Us,useFactory:iv,deps:[]},{provide:Ks,useClass:Jy,multi:!0,deps:[Ae,ce,Nt]},{provide:Ks,useClass:tv,multi:!0,deps:[Ae]},{provide:Ks,useClass:Xy,multi:!0},Qs,Zf,Xf,{provide:Bs,useExisting:Qs},{provide:Qf,useClass:qy,deps:[]},[]];var rp=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(B(Ae))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var j="primary",Oi=Symbol("RouteTitle"),Sc=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ar(n){return new Sc(n)}function fv(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let a=r[s],c=n[s];if(a[0]===":")i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function pv(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!gt(n[t],e[t]))return!1;return!0}function gt(n,e){let t=n?Cc(n):void 0,r=e?Cc(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!dp(n[i],e[i]))return!1;return!0}function Cc(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function dp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function fp(n){return n.length>0?n[n.length-1]:null}function en(n){return If(n)?n:Uf(n)?it(Promise.resolve(n)):U(n)}var mv={exact:mp,subset:gp},pp={exact:gv,subset:_v,ignored:()=>!0};function ip(n,e,t){return mv[t.paths](n.root,e.root,t.matrixParams)&&pp[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function gv(n,e){return gt(n,e)}function mp(n,e,t){if(!An(n.segments,e.segments)||!Zs(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!mp(n.children[r],e.children[r],t))return!1;return!0}function _v(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>dp(n[t],e[t]))}function gp(n,e,t){return _p(n,e,e.segments,t)}function _p(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!An(i,t)||e.hasChildren()||!Zs(i,t,r))}else if(n.segments.length===t.length){if(!An(n.segments,t)||!Zs(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!gp(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!An(n.segments,i)||!Zs(n.segments,i,r)||!n.children[j]?!1:_p(n.children[j],e,s,r)}}function Zs(n,e,t){return e.every((r,i)=>pp[t](n[i].parameters,r.parameters))}var Ot=class{constructor(e=new ee([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ar(this.queryParams),this._queryParamMap}toString(){return Iv.serialize(this)}},ee=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return eo(this)}},bn=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ar(this.parameters),this._parameterMap}toString(){return vp(this)}};function yv(n,e){return An(n,e)&&n.every((t,r)=>gt(t.parameters,e[r].parameters))}function An(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function vv(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===j&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==j&&(t=t.concat(e(i,r)))}),t}var tu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>new bi,providedIn:"root"});let n=e;return n})(),bi=class{parse(e){let t=new Pc(e);return new Ot(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${yi(e.root,!0)}`,r=Tv(e.queryParams),i=typeof e.fragment=="string"?`#${wv(e.fragment)}`:"";return`${t}${r}${i}`}},Iv=new bi;function eo(n){return n.segments.map(e=>vp(e)).join("/")}function yi(n,e){if(!n.hasChildren())return eo(n);if(e){let t=n.children[j]?yi(n.children[j],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==j&&r.push(`${i}:${yi(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=vv(n,(r,i)=>i===j?[yi(n.children[j],!1)]:[`${i}:${yi(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[j]!=null?`${eo(n)}/${t[0]}`:`${eo(n)}/(${t.join("//")})`}}function yp(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Js(n){return yp(n).replace(/%3B/gi,";")}function wv(n){return encodeURI(n)}function Rc(n){return yp(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function to(n){return decodeURIComponent(n)}function sp(n){return to(n.replace(/\+/g,"%20"))}function vp(n){return`${Rc(n.path)}${Ev(n.parameters)}`}function Ev(n){return Object.entries(n).map(([e,t])=>`;${Rc(e)}=${Rc(t)}`).join("")}function Tv(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Js(t)}=${Js(i)}`).join("&"):`${Js(t)}=${Js(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var bv=/^[^\/()?;#]+/;function Ec(n){let e=n.match(bv);return e?e[0]:""}var Av=/^[^\/()?;=#]+/;function Sv(n){let e=n.match(Av);return e?e[0]:""}var Cv=/^[^=?&#]+/;function Rv(n){let e=n.match(Cv);return e?e[0]:""}var Pv=/^[^&#]+/;function Dv(n){let e=n.match(Pv);return e?e[0]:""}var Pc=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ee([],{}):new ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[j]=new ee(e,t)),r}parseSegment(){let e=Ec(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new le(4009,!1);return this.capture(e),new bn(to(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Sv(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ec(this.remaining);i&&(r=i,this.capture(r))}e[to(t)]=to(r)}parseQueryParam(e){let t=Rv(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let a=Dv(this.remaining);a&&(r=a,this.capture(r))}let i=sp(t),s=sp(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ec(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new le(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=j);let a=this.parseChildren();t[s]=Object.keys(a).length===1?a[j]:new ee([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new le(4011,!1)}};function Ip(n){return n.segments.length>0?new ee([],{[j]:n}):n}function wp(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=wp(i);if(r===j&&s.segments.length===0&&s.hasChildren())for(let[a,c]of Object.entries(s.children))e[a]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ee(n.segments,e);return kv(t)}function kv(n){if(n.numberOfChildren===1&&n.children[j]){let e=n.children[j];return new ee(n.segments.concat(e.segments),e.children)}return n}function Ai(n){return n instanceof Ot}function Nv(n,e,t=null,r=null){let i=Ep(n);return Tp(i,e,t,r)}function Ep(n){let e;function t(s){let a={};for(let l of s.children){let d=t(l);a[l.outlet]=d}let c=new ee(s.url,a);return s===n&&(e=c),c}let r=t(n.root),i=Ip(r);return e??i}function Tp(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Tc(i,i,i,t,r);let s=xv(e);if(s.toRoot())return Tc(i,i,new ee([],{}),t,r);let a=Ov(s,i,n),c=a.processChildren?wi(a.segmentGroup,a.index,s.commands):Ap(a.segmentGroup,a.index,s.commands);return Tc(i,a.segmentGroup,c,t,r)}function no(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Si(n){return typeof n=="object"&&n!=null&&n.outlets}function Tc(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`});let a;n===e?a=t:a=bp(n,e,t);let c=Ip(wp(a));return new Ot(c,s,i)}function bp(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=bp(s,e,t)}),new ee(n.segments,r)}var ro=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&no(r[0]))throw new le(4003,!1);let i=r.find(Si);if(i&&i!==fp(r))throw new le(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xv(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ro(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:a===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new ro(t,e,r)}var ir=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Ov(n,e,t){if(n.isAbsolute)return new ir(e,!0,0);if(!t)return new ir(e,!1,NaN);if(t.parent===null)return new ir(t,!0,0);let r=no(n.commands[0])?0:1,i=t.segments.length-1+r;return Mv(t,i,n.numberOfDoubleDots)}function Mv(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new le(4005,!1);i=r.segments.length}return new ir(r,!1,i-s)}function Lv(n){return Si(n[0])?n[0].outlets:{[j]:n}}function Ap(n,e,t){if(n??=new ee([],{}),n.segments.length===0&&n.hasChildren())return wi(n,e,t);let r=Fv(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ee(n.segments.slice(0,r.pathIndex),{});return s.children[j]=new ee(n.segments.slice(r.pathIndex),n.children),wi(s,0,i)}else return r.match&&i.length===0?new ee(n.segments,{}):r.match&&!n.hasChildren()?Dc(n,e,t):r.match?wi(n,0,i):Dc(n,e,t)}function wi(n,e,t){if(t.length===0)return new ee(n.segments,{});{let r=Lv(t),i={};if(Object.keys(r).some(s=>s!==j)&&n.children[j]&&n.numberOfChildren===1&&n.children[j].segments.length===0){let s=wi(n.children[j],e,t);return new ee(n.segments,s.children)}return Object.entries(r).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[s]=Ap(n.children[s],e,a))}),Object.entries(n.children).forEach(([s,a])=>{r[s]===void 0&&(i[s]=a)}),new ee(n.segments,i)}}function Fv(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let a=n.segments[i],c=t[r];if(Si(c))break;let l=`${c}`,d=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!ap(l,d,a))return s;r+=2}else{if(!ap(l,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Dc(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Si(s)){let l=Vv(s.outlets);return new ee(r,l)}if(i===0&&no(t[0])){let l=n.segments[e];r.push(new bn(l.path,op(t[0]))),i++;continue}let a=Si(s)?s.outlets[j]:`${s}`,c=i<t.length-1?t[i+1]:null;a&&c&&no(c)?(r.push(new bn(a,op(c))),i+=2):(r.push(new bn(a,{})),i++)}return new ee(r,{})}function Vv(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Dc(new ee([],{}),0,r))}),e}function op(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ap(n,e,t){return n==t.path&&gt(e,t.parameters)}var Ei="imperative",Se=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Se||{}),et=class{constructor(e,t){this.id=e,this.url=t}},Ci=class extends et{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Se.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Sn=class extends et{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Se.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ke=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ke||{}),kc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(kc||{}),xt=class extends et{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Se.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Cn=class extends et{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Se.NavigationSkipped}},Ri=class extends et{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Se.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},io=class extends et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Se.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nc=class extends et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Se.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xc=class extends et{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Se.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Oc=class extends et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Se.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mc=class extends et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Se.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lc=class{constructor(e){this.route=e,this.type=Se.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Fc=class{constructor(e){this.route=e,this.type=Se.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Vc=class{constructor(e){this.snapshot=e,this.type=Se.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uc=class{constructor(e){this.snapshot=e,this.type=Se.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jc=class{constructor(e){this.snapshot=e,this.type=Se.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bc=class{constructor(e){this.snapshot=e,this.type=Se.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Pi=class{},cr=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Uv(n,e){return n.providers&&!n._injector&&(n._injector=Lf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function lt(n){return n.outlet||j}function jv(n,e){let t=n.filter(r=>lt(r)===e);return t.push(...n.filter(r=>lt(r)!==e)),t}function Mi(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var $c=class{get injector(){return Mi(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ho(this.rootInjector),this.attachRef=null}},ho=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new $c(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(B(Ls))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),so=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=zc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=zc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=qc(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qc(e,this._root).map(t=>t.value)}};function zc(n,e){if(n===e.value)return e;for(let t of e.children){let r=zc(n,t);if(r)return r}return null}function qc(n,e){if(n===e.value)return[e];for(let t of e.children){let r=qc(n,t);if(r.length)return r.unshift(e),r}return[]}var We=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function rr(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var oo=class extends so{constructor(e,t){super(e),this.snapshot=t,nu(this,e)}toString(){return this.snapshot.toString()}};function Sp(n){let e=Bv(n),t=new Je([new bn("",{})]),r=new Je({}),i=new Je({}),s=new Je({}),a=new Je(""),c=new ur(t,r,s,a,i,j,n,e.root);return c.snapshot=e.root,new oo(new We(c,[]),e)}function Bv(n){let e={},t={},r={},i="",s=new sr([],e,r,i,t,j,n,null,{});return new co("",new We(s,[]))}var ur=class{constructor(e,t,r,i,s,a,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=a,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(te(d=>d[Oi]))??U(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(te(e=>ar(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(te(e=>ar(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ao(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),n.params),data:O(O({},e.data),n.data),resolve:O(O(O(O({},n.data),e.data),i?.data),n._resolvedData)}:r={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},i&&Rp(i)&&(r.resolve[Oi]=i.title),r}var sr=class{get title(){return this.data?.[Oi]}constructor(e,t,r,i,s,a,c,l,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ar(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ar(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},co=class extends so{constructor(e,t){super(t),this.url=e,nu(this,t)}toString(){return Cp(this._root)}};function nu(n,e){e.value._routerState=n,e.children.forEach(t=>nu(n,t))}function Cp(n){let e=n.children.length>0?` { ${n.children.map(Cp).join(", ")} } `:"";return`${n.value}${e}`}function bc(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,gt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),gt(e.params,t.params)||n.paramsSubject.next(t.params),pv(e.url,t.url)||n.urlSubject.next(t.url),gt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Gc(n,e){let t=gt(n.params,e.params)&&yv(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Gc(n.parent,e.parent))}function Rp(n){return typeof n.title=="string"||n.title===null}var ru=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=j,this.activateEvents=new vn,this.deactivateEvents=new vn,this.attachEvents=new vn,this.detachEvents=new vn,this.parentContexts=L(ho),this.location=L(xf),this.changeDetector=L(Gs),this.inputBinder=L(iu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new le(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new le(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new le(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new le(4013,!1);this._activatedRoute=r;let s=this.location,c=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new Hc(r,l,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:d,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=ui({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ac]});let n=e;return n})(),Hc=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ur?this.route:e===ho?this.childContexts:this.parent.get(e,t)}},iu=new oe("");function $v(n,e,t){let r=Di(n,e._root,t?t._root:void 0);return new oo(r,e)}function Di(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=zv(n,e,t);return new We(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>Di(n,c)),a}}let r=qv(e.value),i=e.children.map(s=>Di(n,s));return new We(r,i)}}function zv(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Di(n,r,i);return Di(n,r)})}function qv(n){return new ur(new Je(n.url),new Je(n.params),new Je(n.queryParams),new Je(n.fragment),new Je(n.data),n.outlet,n.component,n)}var ki=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Pp="ngNavigationCancelingError";function uo(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ai(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Dp(!1,Ke.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Dp(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Pp]=!0,t.cancellationCode=e,t}function Gv(n){return kp(n)&&Ai(n.url)}function kp(n){return!!n&&n[Pp]}var Hv=(n,e,t,r)=>te(i=>(new Wc(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Wc=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),bc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=rr(t);e.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=rr(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=rr(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=rr(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Bc(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Uc(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(bc(i),i===s)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),bc(c.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,r)}},lo=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},or=class{constructor(e,t){this.component=e,this.route=t}};function Wv(n,e,t){let r=n._root,i=e?e._root:null;return vi(r,i,t,[r.value])}function Kv(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function hr(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Cf(n)?n:e.get(n):r}function vi(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=rr(e);return n.children.forEach(a=>{Qv(a,s[a.value.outlet],t,r.concat([a.value]),i),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,c])=>Ti(c,t.getContext(a),i)),i}function Qv(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,a=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let l=Yv(a,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new lo(r)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?vi(n,e,c?c.children:null,r,i):vi(n,e,t,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new or(c.outlet.component,a))}else a&&Ti(e,c,i),i.canActivateChecks.push(new lo(r)),s.component?vi(n,null,c?c.children:null,r,i):vi(n,null,t,r,i);return i}function Yv(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!An(n.url,e.url);case"pathParamsOrQueryParamsChange":return!An(n.url,e.url)||!gt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gc(n,e)||!gt(n.queryParams,e.queryParams);case"paramsChange":default:return!Gc(n,e)}}function Ti(n,e,t){let r=rr(n),i=n.value;Object.entries(r).forEach(([s,a])=>{i.component?e?Ti(a,e.children.getContext(s),t):Ti(a,null,t):Ti(a,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new or(e.outlet.component,i)):t.canDeactivateChecks.push(new or(null,i)):t.canDeactivateChecks.push(new or(null,i))}function Li(n){return typeof n=="function"}function Jv(n){return typeof n=="boolean"}function Xv(n){return n&&Li(n.canLoad)}function Zv(n){return n&&Li(n.canActivate)}function eI(n){return n&&Li(n.canActivateChild)}function tI(n){return n&&Li(n.canDeactivate)}function nI(n){return n&&Li(n.canMatch)}function Np(n){return n instanceof wf||n?.name==="EmptyError"}var Xs=Symbol("INITIAL_VALUE");function lr(){return mt(n=>oi(n.map(e=>e.pipe(Xt(1),Os(Xs)))).pipe(te(e=>{for(let t of e)if(t!==!0){if(t===Xs)return Xs;if(t===!1||rI(t))return t}return!0}),Zn(e=>e!==Xs),Xt(1)))}function rI(n){return Ai(n)||n instanceof ki}function iI(n,e){return Xe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return a.length===0&&s.length===0?U(ve(O({},t),{guardsResult:!0})):sI(a,r,i,n).pipe(Xe(c=>c&&Jv(c)?oI(r,s,n,e):U(c)),te(c=>ve(O({},t),{guardsResult:c})))})}function sI(n,e,t,r){return it(n).pipe(Xe(i=>hI(i.component,i.route,t,e,r)),Zt(i=>i!==!0,!0))}function oI(n,e,t,r){return it(e).pipe(ai(i=>Ns(cI(i.route.parent,r),aI(i.route,r),lI(n,i.path,t),uI(n,i.route,t))),Zt(i=>i!==!0,!0))}function aI(n,e){return n!==null&&e&&e(new jc(n)),U(!0)}function cI(n,e){return n!==null&&e&&e(new Vc(n)),U(!0)}function uI(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return U(!0);let i=r.map(s=>rc(()=>{let a=Mi(e)??t,c=hr(s,a),l=Zv(c)?c.canActivate(e,n):Dt(a,()=>c(e,n));return en(l).pipe(Zt())}));return U(i).pipe(lr())}function lI(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>Kv(a)).filter(a=>a!==null).map(a=>rc(()=>{let c=a.guards.map(l=>{let d=Mi(a.node)??t,p=hr(l,d),v=eI(p)?p.canActivateChild(r,n):Dt(d,()=>p(r,n));return en(v).pipe(Zt())});return U(c).pipe(lr())}));return U(s).pipe(lr())}function hI(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return U(!0);let a=s.map(c=>{let l=Mi(e)??i,d=hr(c,l),p=tI(d)?d.canDeactivate(n,e,t,r):Dt(l,()=>d(n,e,t,r));return en(p).pipe(Zt())});return U(a).pipe(lr())}function dI(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return U(!0);let s=i.map(a=>{let c=hr(a,n),l=Xv(c)?c.canLoad(e,t):Dt(n,()=>c(e,t));return en(l)});return U(s).pipe(lr(),xp(r))}function xp(n){return _f(Ie(e=>{if(typeof e!="boolean")throw uo(n,e)}),te(e=>e===!0))}function fI(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return U(!0);let s=i.map(a=>{let c=hr(a,n),l=nI(c)?c.canMatch(e,t):Dt(n,()=>c(e,t));return en(l)});return U(s).pipe(lr(),xp(r))}var Ni=class{constructor(e){this.segmentGroup=e||null}},xi=class extends Error{constructor(e){super(),this.urlTree=e}};function nr(n){return si(new Ni(n))}function pI(n){return si(new le(4e3,!1))}function mI(n){return si(Dp(!1,Ke.GuardRejected))}var Kc=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return U(r);if(i.numberOfChildren>1||!i.children[j])return pI(`${e.redirectTo}`);i=i.children[j]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let c=t,{queryParams:l,fragment:d,routeConfig:p,url:v,outlet:A,params:C,data:D,title:x}=i,N=Dt(s,()=>c({params:C,data:D,queryParams:l,fragment:d,routeConfig:p,url:v,outlet:A,title:x}));if(N instanceof Ot)throw new xi(N);t=N}let a=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new xi(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Ot(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),a={};return Object.entries(t.children).forEach(([c,l])=>{a[c]=this.createSegmentGroup(e,l,r,i)}),new ee(s,a)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new le(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Qc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gI(n,e,t,r,i){let s=Op(n,e,t);return s.matched?(r=Uv(e,r),fI(r,e,t,i).pipe(te(a=>a===!0?s:O({},Qc)))):U(s)}function Op(n,e,t){if(e.path==="**")return _I(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?O({},Qc):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||fv)(t,n,e);if(!i)return O({},Qc);let s={};Object.entries(i.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let a=i.consumed.length>0?O(O({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function _I(n){return{matched:!0,parameters:n.length>0?fp(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function cp(n,e,t,r){return t.length>0&&II(n,t,r)?{segmentGroup:new ee(e,vI(r,new ee(t,n.children))),slicedSegments:[]}:t.length===0&&wI(n,t,r)?{segmentGroup:new ee(n.segments,yI(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ee(n.segments,n.children),slicedSegments:t}}function yI(n,e,t,r){let i={};for(let s of t)if(fo(n,e,s)&&!r[lt(s)]){let a=new ee([],{});i[lt(s)]=a}return O(O({},r),i)}function vI(n,e){let t={};t[j]=e;for(let r of n)if(r.path===""&&lt(r)!==j){let i=new ee([],{});t[lt(r)]=i}return t}function II(n,e,t){return t.some(r=>fo(n,e,r)&&lt(r)!==j)}function wI(n,e,t){return t.some(r=>fo(n,e,r))}function fo(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function EI(n,e,t){return e.length===0&&!n.children[t]}var Yc=class{};function TI(n,e,t,r,i,s,a="emptyOnly"){return new Jc(n,e,t,r,i,a,s).recognize()}var bI=31,Jc=class{constructor(e,t,r,i,s,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new Kc(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new le(4002,`'${e.segmentGroup}'`)}recognize(){let e=cp(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(te(({children:t,rootSnapshot:r})=>{let i=new We(r,t),s=new co("",i),a=Nv(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),{state:s,tree:a}}))}match(e){let t=new sr([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),j,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,j,t).pipe(te(r=>({children:r,rootSnapshot:t})),er(r=>{if(r instanceof xi)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ni?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(te(a=>a instanceof We?[a]:[]))}processChildren(e,t,r,i){let s=[];for(let a of Object.keys(r.children))a==="primary"?s.unshift(a):s.push(a);return it(s).pipe(ai(a=>{let c=r.children[a],l=jv(t,a);return this.processSegmentGroup(e,l,c,a,i)}),Af((a,c)=>(a.push(...c),a)),ic(null),bf(),Xe(a=>{if(a===null)return nr(r);let c=Mp(a);return AI(c),U(c)}))}processSegment(e,t,r,i,s,a,c){return it(t).pipe(ai(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,a,c).pipe(er(d=>{if(d instanceof Ni)return U(null);throw d}))),Zt(l=>!!l),er(l=>{if(Np(l))return EI(r,i,s)?U(new Yc):nr(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,a,c,l){return lt(r)!==a&&(a===j||!fo(i,s,r))?nr(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,a,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,a,l):nr(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a,c){let{matched:l,parameters:d,consumedSegments:p,positionalParamSegments:v,remainingSegments:A}=Op(t,i,s);if(!l)return nr(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>bI&&(this.allowRedirects=!1));let C=new sr(s,d,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,up(i),lt(i),i.component??i._loadedComponent??null,i,lp(i)),D=ao(C,c,this.paramsInheritanceStrategy);C.params=Object.freeze(D.params),C.data=Object.freeze(D.data);let x=this.applyRedirects.applyRedirectCommands(p,i.redirectTo,v,C,e);return this.applyRedirects.lineralizeSegments(i,x).pipe(Xe(N=>this.processSegment(e,r,t,N.concat(A),a,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,s,a){let c=gI(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(mt(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(mt(({routes:d})=>{let p=r._loadedInjector??e,{parameters:v,consumedSegments:A,remainingSegments:C}=l,D=new sr(A,v,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,up(r),lt(r),r.component??r._loadedComponent??null,r,lp(r)),x=ao(D,a,this.paramsInheritanceStrategy);D.params=Object.freeze(x.params),D.data=Object.freeze(x.data);let{segmentGroup:N,slicedSegments:K}=cp(t,A,C,d);if(K.length===0&&N.hasChildren())return this.processChildren(p,d,N,D).pipe(te(J=>new We(D,J)));if(d.length===0&&K.length===0)return U(new We(D,[]));let Q=lt(r)===s;return this.processSegment(p,d,N,K,Q?j:s,!0,D).pipe(te(J=>new We(D,J instanceof We?[J]:[])))}))):nr(t)))}getChildConfig(e,t,r){return t.children?U({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?U({routes:t._loadedRoutes,injector:t._loadedInjector}):dI(e,t,r,this.urlSerializer).pipe(Xe(i=>i?this.configLoader.loadChildren(e,t).pipe(Ie(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):mI(t))):U({routes:[],injector:e})}};function AI(n){n.sort((e,t)=>e.value.outlet===j?-1:t.value.outlet===j?1:e.value.outlet.localeCompare(t.value.outlet))}function SI(n){let e=n.value.routeConfig;return e&&e.path===""}function Mp(n){let e=[],t=new Set;for(let r of n){if(!SI(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Mp(r.children);e.push(new We(r.value,i))}return e.filter(r=>!t.has(r))}function up(n){return n.data||{}}function lp(n){return n.resolve||{}}function CI(n,e,t,r,i,s){return Xe(a=>TI(n,e,t,r,a.extractedUrl,i,s).pipe(te(({state:c,tree:l})=>ve(O({},a),{targetSnapshot:c,urlAfterRedirects:l}))))}function RI(n,e){return Xe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return U(t);let s=new Set(i.map(l=>l.route)),a=new Set;for(let l of s)if(!a.has(l))for(let d of Lp(l))a.add(d);let c=0;return it(a).pipe(ai(l=>s.has(l)?PI(l,r,n,e):(l.data=ao(l,l.parent,n).resolve,U(void 0))),Ie(()=>c++),sc(1),Xe(l=>c===a.size?U(t):Jt))})}function Lp(n){let e=n.children.map(t=>Lp(t)).flat();return[n,...e]}function PI(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!Rp(i)&&(s[Oi]=i.title),DI(s,n,e,r).pipe(te(a=>(n._resolvedData=a,n.data=ao(n,n.parent,t).resolve,null)))}function DI(n,e,t,r){let i=Cc(n);if(i.length===0)return U({});let s={};return it(i).pipe(Xe(a=>kI(n[a],e,t,r).pipe(Zt(),Ie(c=>{if(c instanceof ki)throw uo(new bi,c);s[a]=c}))),sc(1),Tf(s),er(a=>Np(a)?Jt:si(a)))}function kI(n,e,t,r){let i=Mi(e)??r,s=hr(n,i),a=s.resolve?s.resolve(e,t):Dt(i,()=>s(e,t));return en(a)}function Ac(n){return mt(e=>{let t=n(e);return t?it(t).pipe(te(()=>e)):U(e)})}var Fp=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(a=>a.outlet===j);return i}getResolvedTitleForRoute(r){return r.data[Oi]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>L(NI),providedIn:"root"});let n=e;return n})(),NI=(()=>{let e=class e extends Fp{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(B(rp))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),su=new oe("",{providedIn:"root",factory:()=>({})}),xI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ze({type:e,selectors:[["ng-component"]],standalone:!0,features:[qe],decls:1,vars:0,template:function(i,s){i&1&&Le(0,"router-outlet")},dependencies:[ru],encapsulation:2});let n=e;return n})();function ou(n){let e=n.children&&n.children.map(ou),t=e?ve(O({},n),{children:e}):O({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==j&&(t.component=xI),t}var au=new oe(""),OI=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(fc)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return U(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=en(r.loadComponent()).pipe(te(Vp),Ie(a=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a}),xs(()=>{this.componentLoaders.delete(r)})),s=new Za(i,()=>new Pt).pipe(Xa());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return U({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let a=MI(i,this.compiler,r,this.onLoadEndListener).pipe(xs(()=>{this.childrenLoaders.delete(i)})),c=new Za(a,()=>new Pt).pipe(Xa());return this.childrenLoaders.set(i,c),c}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function MI(n,e,t,r){return en(n.loadChildren()).pipe(te(Vp),Xe(i=>i instanceof Mf||Array.isArray(i)?U(i):it(e.compileModuleAsync(i))),te(i=>{r&&r(n);let s,a,c=!1;return Array.isArray(i)?(a=i,c=!0):(s=i.create(t).injector,a=s.get(au,[],{optional:!0,self:!0}).flat()),{routes:a.map(ou),injector:s}}))}function LI(n){return n&&typeof n=="object"&&"default"in n}function Vp(n){return LI(n)?n.default:n}var cu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>L(FI),providedIn:"root"});let n=e;return n})(),FI=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),VI=new oe("");var UI=new oe(""),jI=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Pt,this.transitionAbortSubject=new Pt,this.configLoader=L(OI),this.environmentInjector=L(Ls),this.urlSerializer=L(tu),this.rootContexts=L(ho),this.location=L(Hs),this.inputBindingEnabled=L(iu,{optional:!0})!==null,this.titleStrategy=L(Fp),this.options=L(su,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(cu),this.createViewTransition=L(VI,{optional:!0}),this.navigationErrorHandler=L(UI,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>U(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Lc(s)),i=s=>this.events.next(new Fc(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ve(O(O({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Je({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ei,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Zn(a=>a.id!==0),te(a=>ve(O({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),mt(a=>{let c=!1,l=!1;return U(a).pipe(mt(d=>{if(this.navigationId>a.id)return this.cancelNavigationTransition(a,"",Ke.SupersededByNewNavigation),Jt;this.currentTransition=a,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,targetBrowserUrl:typeof d.extras.browserUrl=="string"?this.urlSerializer.parse(d.extras.browserUrl):d.extras.browserUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?ve(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),v=d.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!p&&v!=="reload"){let A="";return this.events.next(new Cn(d.id,this.urlSerializer.serialize(d.rawUrl),A,kc.IgnoredSameUrlNavigation)),d.resolve(!1),Jt}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return U(d).pipe(mt(A=>{let C=this.transitions?.getValue();return this.events.next(new Ci(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),C!==this.transitions?.getValue()?Jt:Promise.resolve(A)}),CI(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ie(A=>{a.targetSnapshot=A.targetSnapshot,a.urlAfterRedirects=A.urlAfterRedirects,this.currentNavigation=ve(O({},this.currentNavigation),{finalUrl:A.urlAfterRedirects});let C=new io(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(C)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:A,extractedUrl:C,source:D,restoredState:x,extras:N}=d,K=new Ci(A,this.urlSerializer.serialize(C),D,x);this.events.next(K);let Q=Sp(this.rootComponentType).snapshot;return this.currentTransition=a=ve(O({},d),{targetSnapshot:Q,urlAfterRedirects:C,extras:ve(O({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=C,U(a)}else{let A="";return this.events.next(new Cn(d.id,this.urlSerializer.serialize(d.extractedUrl),A,kc.IgnoredByUrlHandlingStrategy)),d.resolve(!1),Jt}}),Ie(d=>{let p=new Nc(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),te(d=>(this.currentTransition=a=ve(O({},d),{guards:Wv(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),a)),iI(this.environmentInjector,d=>this.events.next(d)),Ie(d=>{if(a.guardsResult=d.guardsResult,d.guardsResult&&typeof d.guardsResult!="boolean")throw uo(this.urlSerializer,d.guardsResult);let p=new xc(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(p)}),Zn(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",Ke.GuardRejected),!1)),Ac(d=>{if(d.guards.canActivateChecks.length)return U(d).pipe(Ie(p=>{let v=new Oc(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(v)}),mt(p=>{let v=!1;return U(p).pipe(RI(this.paramsInheritanceStrategy,this.environmentInjector),Ie({next:()=>v=!0,complete:()=>{v||this.cancelNavigationTransition(p,"",Ke.NoDataFromResolver)}}))}),Ie(p=>{let v=new Mc(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(v)}))}),Ac(d=>{let p=v=>{let A=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(v.routeConfig).pipe(Ie(C=>{v.component=C}),te(()=>{})));for(let C of v.children)A.push(...p(C));return A};return oi(p(d.targetSnapshot.root)).pipe(ic(null),Xt(1))}),Ac(()=>this.afterPreactivation()),mt(()=>{let{currentSnapshot:d,targetSnapshot:p}=a,v=this.createViewTransition?.(this.environmentInjector,d.root,p.root);return v?it(v).pipe(te(()=>a)):U(a)}),te(d=>{let p=$v(r.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=a=ve(O({},d),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,a}),Ie(()=>{this.events.next(new Pi)}),Hv(this.rootContexts,r.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),Xt(1),Ie({next:d=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Sn(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{c=!0}}),Ms(this.transitionAbortSubject.pipe(Ie(d=>{throw d}))),xs(()=>{!c&&!l&&this.cancelNavigationTransition(a,"",Ke.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),er(d=>{if(l=!0,kp(d))this.events.next(new xt(a.id,this.urlSerializer.serialize(a.extractedUrl),d.message,d.cancellationCode)),Gv(d)?this.events.next(new cr(d.url,d.navigationBehaviorOptions)):a.resolve(!1);else{let p=new Ri(a.id,this.urlSerializer.serialize(a.extractedUrl),d,a.targetSnapshot??void 0);try{let v=Dt(this.environmentInjector,()=>this.navigationErrorHandler?.(p));if(v instanceof ki){let{message:A,cancellationCode:C}=uo(this.urlSerializer,v);this.events.next(new xt(a.id,this.urlSerializer.serialize(a.extractedUrl),A,C)),this.events.next(new cr(v.redirectTo,v.navigationBehaviorOptions))}else{this.events.next(p);let A=r.errorHandler(d);a.resolve(!!A)}}catch(v){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(v)}}return Jt}))}))}cancelNavigationTransition(r,i,s){let a=new xt(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(a),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function BI(n){return n!==Ei}var $I=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>L(zI),providedIn:"root"});let n=e;return n})(),Xc=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},zI=(()=>{let e=class e extends Xc{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=cc(e)))(s||e)}})(),e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Up=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:()=>L(qI),providedIn:"root"});let n=e;return n})(),qI=(()=>{let e=class e extends Up{constructor(){super(...arguments),this.location=L(Hs),this.urlSerializer=L(tu),this.options=L(su,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(cu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ot,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Sp(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ci)this.stateMemento=this.createStateMemento();else if(r instanceof Cn)this.rawUrlTree=i.initialUrl;else if(r instanceof io){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof Pi?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof xt&&(r.code===Ke.GuardRejected||r.code===Ke.NoDataFromResolver)?this.restoreHistory(i):r instanceof Ri?this.restoreHistory(i,!0):r instanceof Sn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof Ot?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let a=this.browserPageId,c=O(O({},i.extras.state),this.generateNgRouterState(i.id,a));this.location.replaceState(s,"",c)}else{let a=O(O({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",a)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,a=this.currentPageId-s;a!==0?this.location.historyGo(a):this.currentUrlTree===r.finalUrl&&a===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=cc(e)))(s||e)}})(),e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ii=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ii||{});function GI(n,e){n.events.pipe(Zn(t=>t instanceof Sn||t instanceof xt||t instanceof Ri||t instanceof Cn),te(t=>t instanceof Sn||t instanceof Cn?Ii.COMPLETE:(t instanceof xt?t.code===Ke.Redirect||t.code===Ke.SupersededByNewNavigation:!1)?Ii.REDIRECTING:Ii.FAILED),Zn(t=>t!==Ii.REDIRECTING),Xt(1)).subscribe(()=>{e()})}function HI(n){throw n}var WI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_t=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=L(qs),this.stateManager=L(Up),this.options=L(su,{optional:!0})||{},this.pendingTasks=L(Pf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(jI),this.urlSerializer=L(tu),this.location=L(Hs),this.urlHandlingStrategy=L(cu),this._events=new Pt,this.errorHandler=this.options.errorHandler||HI,this.navigated=!1,this.routeReuseStrategy=L($I),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(au,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(iu,{optional:!0}),this.eventsSubscription=new gf,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(s!==null&&a!==null){if(this.stateManager.handleRouterEvent(i,a),i instanceof xt&&i.code!==Ke.Redirect&&i.code!==Ke.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Sn)this.navigated=!0;else if(i instanceof cr){let c=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),d=O({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||BI(s.source)},c);this.scheduleNavigation(l,Ei,null,d,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}YI(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ei,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let a={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let d=O({},s);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(a.state=d)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(ou),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:a,fragment:c,queryParamsHandling:l,preserveFragment:d}=i,p=d?this.currentUrlTree.fragment:c,v=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":v=O(O({},this.currentUrlTree.queryParams),a);break;case"preserve":v=this.currentUrlTree.queryParams;break;default:v=a||null}v!==null&&(v=this.removeEmptyProps(v));let A;try{let C=s?s.snapshot:this.routerState.snapshot.root;A=Ep(C)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),A=this.currentUrlTree.root}return Tp(A,r,v,p??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Ai(r)?r:this.parseUrl(r),a=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(a,Ei,null,i)}navigate(r,i={skipLocationChange:!1}){return QI(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=O({},WI):i===!1?s=O({},KI):s=i,Ai(r))return ip(this.currentUrlTree,r,s);let a=this.parseUrl(r);return ip(this.currentUrlTree,a,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,a])=>(a!=null&&(i[s]=a),i),{})}scheduleNavigation(r,i,s,a,c){if(this.disposed)return Promise.resolve(!1);let l,d,p;c?(l=c.resolve,d=c.reject,p=c.promise):p=new Promise((A,C)=>{l=A,d=C});let v=this.pendingTasks.add();return GI(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(v))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:a,resolve:l,reject:d,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(A=>Promise.reject(A))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function QI(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new le(4008,!1)}function YI(n){return!(n instanceof Pi)&&!(n instanceof cr)}var JI=new oe("");function jp(n,...e){return at([{provide:au,multi:!0,useValue:n},[],{provide:ur,useFactory:XI,deps:[_t]},{provide:jf,multi:!0,useFactory:ZI},e.map(t=>t.\u0275providers)])}function XI(n){return n.routerState.root}function ZI(){let n=L(kt);return e=>{let t=n.get(dc);if(e!==t.components[0])return;let r=n.get(_t),i=n.get(ew);n.get(tw)===1&&r.initialNavigation(),n.get(nw,null,oc.Optional)?.setUpPreloading(),n.get(JI,null,oc.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ew=new oe("",{factory:()=>new Pt}),tw=new oe("",{providedIn:"root",factory:()=>1});var nw=new oe("");var $p=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},rw=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],a=n[t++],c=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},zp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],a=i+1<n.length,c=a?n[i+1]:0,l=i+2<n.length,d=l?n[i+2]:0,p=s>>2,v=(s&3)<<4|c>>4,A=(c&15)<<2|d>>6,C=d&63;l||(C=64,a||(A=64)),r.push(t[p],t[v],t[A],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($p(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):rw(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let v=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||v==null)throw new lu;let A=s<<2|c>>4;if(r.push(A),d!==64){let C=c<<4&240|d>>2;if(r.push(C),v!==64){let D=d<<6&192|v;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},lu=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},iw=function(n){let e=$p(n);return zp.encodeByteArray(e,!0)},Fi=function(n){return iw(n).replace(/\./g,"")},du=function(n){try{return zp.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var ow=()=>sw().__FIREBASE_DEFAULTS__,aw=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},cw=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&du(n[1]);return e&&JSON.parse(e)},go=()=>{try{return ow()||aw()||cw()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fu=n=>{var e,t;return(t=(e=go())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},qp=n=>{let e=fu(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},pu=()=>{var n;return(n=go())===null||n===void 0?void 0:n.config},mu=n=>{var e;return(e=go())===null||e===void 0?void 0:e[`_${n}`]};var mo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Gp(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Fi(JSON.stringify(t)),Fi(JSON.stringify(a)),""].join(".")}function we(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function uw(){var n;let e=(n=go())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Wp(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Kp(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Qp(){let n=we();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Yp(){return!uw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gu(){try{return typeof indexedDB=="object"}catch{return!1}}function Jp(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var lw="FirebaseError",Ue=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=lw,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mt.prototype.create)}},Mt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?hw(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Ue(i,c,r)}};function hw(n,e){return n.replace(dw,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var dw=/\{\$([^}]+)}/g;function Xp(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Rn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],a=e[i];if(Bp(s)&&Bp(a)){if(!Rn(s,a))return!1}else if(s!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Bp(n){return n!==null&&typeof n=="object"}function Vi(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dr(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function fr(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Zp(n,e){let t=new hu(n,e);return t.subscribe.bind(t)}var hu=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");fw(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=uu),i.error===void 0&&(i.error=uu),i.complete===void 0&&(i.complete=uu);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function fw(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function uu(){}var aC=4*60*60*1e3;function je(n){return n&&n._delegate?n._delegate:n}var tt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Pn="[DEFAULT]";var _u=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new mo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mw(e))try{this.getOrInitializeService({instanceIdentifier:Pn})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Pn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return y(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Pn){return this.instances.has(e)}getOptions(e=Pn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pw(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pn){return this.component?this.component.multipleInstances?e:Pn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function pw(n){return n===Pn?void 0:n}function mw(n){return n.instantiationMode==="EAGER"}var _o=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new _u(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var gw=[],H=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(H||{}),_w={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},yw=H.INFO,vw={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},Iw=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=vw[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},tn=class{constructor(e){this.name=e,this._logLevel=yw,this._logHandler=Iw,this._userLogHandler=null,gw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in H))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_w[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...e),this._logHandler(this,H.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...e),this._logHandler(this,H.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,H.INFO,...e),this._logHandler(this,H.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,H.WARN,...e),this._logHandler(this,H.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...e),this._logHandler(this,H.ERROR,...e)}};var ww=(n,e)=>e.some(t=>n instanceof t),em,tm;function Ew(){return em||(em=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tw(){return tm||(tm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var nm=new WeakMap,vu=new WeakMap,rm=new WeakMap,yu=new WeakMap,wu=new WeakMap;function bw(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(yt(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&nm.set(t,n)}).catch(()=>{}),wu.set(e,n),e}function Aw(n){if(vu.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});vu.set(n,e)}var Iu={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vu.get(n);if(e==="objectStoreNames")return n.objectStoreNames||rm.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function im(n){Iu=n(Iu)}function Sw(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(yo(this),e,...t);return rm.set(r,e.sort?e.sort():[e]),yt(r)}:Tw().includes(n)?function(...e){return n.apply(yo(this),e),yt(nm.get(this))}:function(...e){return yt(n.apply(yo(this),e))}}function Cw(n){return typeof n=="function"?Sw(n):(n instanceof IDBTransaction&&Aw(n),ww(n,Ew())?new Proxy(n,Iu):n)}function yt(n){if(n instanceof IDBRequest)return bw(n);if(yu.has(n))return yu.get(n);let e=Cw(n);return e!==n&&(yu.set(n,e),wu.set(e,n)),e}var yo=n=>wu.get(n);function om(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let a=indexedDB.open(n,e),c=yt(a);return r&&a.addEventListener("upgradeneeded",l=>{r(yt(a.result),l.oldVersion,l.newVersion,yt(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var Rw=["get","getKey","getAll","getAllKeys","count"],Pw=["put","add","delete","clear"],Eu=new Map;function sm(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Eu.get(e))return Eu.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Pw.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Rw.includes(t)))return;let s=function(a,...c){return y(this,null,function*(){let l=this.transaction(a,i?"readwrite":"readonly"),d=l.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&l.done]))[0]})};return Eu.set(e,s),s}im(n=>ve(O({},n),{get:(e,t,r)=>sm(e,t)||n.get(e,t,r),has:(e,t)=>!!sm(e,t)||n.has(e,t)}));var bu=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Dw(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Dw(n){let e=n.getComponent();return e?.type==="VERSION"}var Au="@firebase/app",am="0.10.10";var Lt=new tn("@firebase/app"),kw="@firebase/app-compat",Nw="@firebase/analytics-compat",xw="@firebase/analytics",Ow="@firebase/app-check-compat",Mw="@firebase/app-check",Lw="@firebase/auth",Fw="@firebase/auth-compat",Vw="@firebase/database",Uw="@firebase/database-compat",jw="@firebase/functions",Bw="@firebase/functions-compat",$w="@firebase/installations",zw="@firebase/installations-compat",qw="@firebase/messaging",Gw="@firebase/messaging-compat",Hw="@firebase/performance",Ww="@firebase/performance-compat",Kw="@firebase/remote-config",Qw="@firebase/remote-config-compat",Yw="@firebase/storage",Jw="@firebase/storage-compat",Xw="@firebase/firestore",Zw="@firebase/vertexai-preview",e0="@firebase/firestore-compat",t0="firebase",n0="10.13.1";var Su="[DEFAULT]",r0={[Au]:"fire-core",[kw]:"fire-core-compat",[xw]:"fire-analytics",[Nw]:"fire-analytics-compat",[Mw]:"fire-app-check",[Ow]:"fire-app-check-compat",[Lw]:"fire-auth",[Fw]:"fire-auth-compat",[Vw]:"fire-rtdb",[Uw]:"fire-rtdb-compat",[jw]:"fire-fn",[Bw]:"fire-fn-compat",[$w]:"fire-iid",[zw]:"fire-iid-compat",[qw]:"fire-fcm",[Gw]:"fire-fcm-compat",[Hw]:"fire-perf",[Ww]:"fire-perf-compat",[Kw]:"fire-rc",[Qw]:"fire-rc-compat",[Yw]:"fire-gcs",[Jw]:"fire-gcs-compat",[Xw]:"fire-fst",[e0]:"fire-fst-compat",[Zw]:"fire-vertex","fire-js":"fire-js",[t0]:"fire-js-all"};var Ui=new Map,i0=new Map,Cu=new Map;function cm(n,e){try{n.container.addComponent(e)}catch(t){Lt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function rn(n){let e=n.name;if(Cu.has(e))return Lt.debug(`There were multiple attempts to register component ${e}.`),!1;Cu.set(e,n);for(let t of Ui.values())cm(t,n);for(let t of i0.values())cm(t,n);return!0}function Bi(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ht(n){return n.settings!==void 0}var s0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nn=new Mt("app","Firebase",s0);var Ru=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new tt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nn.create("app-deleted",{appName:this._name})}};var sn=n0;function ku(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Su,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw nn.create("bad-app-name",{appName:String(i)});if(t||(t=pu()),!t)throw nn.create("no-options");let s=Ui.get(i);if(s){if(Rn(t,s.options)&&Rn(r,s.config))return s;throw nn.create("duplicate-app",{appName:i})}let a=new _o(i);for(let l of Cu.values())a.addComponent(l);let c=new Ru(t,r,a);return Ui.set(i,c),c}function pr(n=Su){let e=Ui.get(n);if(!e&&n===Su&&pu())return ku();if(!e)throw nn.create("no-app",{appName:n});return e}function vo(){return Array.from(Ui.values())}function ge(n,e,t){var r;let i=(r=r0[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lt.warn(c.join(" "));return}rn(new tt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var o0="firebase-heartbeat-database",a0=1,ji="firebase-heartbeat-store",Tu=null;function dm(){return Tu||(Tu=om(o0,a0,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ji)}catch(t){console.warn(t)}}}}).catch(n=>{throw nn.create("idb-open",{originalErrorMessage:n.message})})),Tu}function c0(n){return y(this,null,function*(){try{let t=(yield dm()).transaction(ji),r=yield t.objectStore(ji).get(fm(n));return yield t.done,r}catch(e){if(e instanceof Ue)Lt.warn(e.message);else{let t=nn.create("idb-get",{originalErrorMessage:e?.message});Lt.warn(t.message)}}})}function um(n,e){return y(this,null,function*(){try{let r=(yield dm()).transaction(ji,"readwrite");yield r.objectStore(ji).put(e,fm(n)),yield r.done}catch(t){if(t instanceof Ue)Lt.warn(t.message);else{let r=nn.create("idb-set",{originalErrorMessage:t?.message});Lt.warn(r.message)}}})}function fm(n){return`${n.name}!${n.options.appId}`}var u0=1024,l0=30*24*60*60*1e3,Pu=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Du(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return y(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let c=new Date(a.date).valueOf();return Date.now()-c<=l0}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Lt.warn(r)}})}getHeartbeatsHeader(){return y(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=lm(),{heartbeatsToSend:r,unsentEntries:i}=h0(this._heartbeatsCache.heartbeats),s=Fi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Lt.warn(t),""}})}};function lm(){return new Date().toISOString().substring(0,10)}function h0(n,e=u0){let t=[],r=n.slice();for(let i of n){let s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),hm(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),hm(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Du=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return y(this,null,function*(){return gu()?Jp().then(()=>!0).catch(()=>!1):!1})}read(){return y(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield c0(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return y(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return um(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return y(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return um(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function hm(n){return Fi(JSON.stringify({version:2,heartbeats:n})).length}function d0(n){rn(new tt("platform-logger",e=>new bu(e),"PRIVATE")),rn(new tt("heartbeat",e=>new Pu(e),"PRIVATE")),ge(Au,am,n),ge(Au,am,"esm2017"),ge("fire-js","")}d0("");var f0="firebase",p0="10.13.1";ge(f0,p0,"app");var kn=new di("ANGULARFIRE2_VERSION");function wo(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(a=>a.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var $i=(n,e)=>{let t=e?[e]:vo(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},gr=class{constructor(){return $i(m0)}},m0="app-check";function mr(){}var Io=class{zone;delegate;constructor(e,t=vf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(s,t,r)}},Nu=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",mr,{},mr,mr)),t.pipe(Ie({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},_r=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Io(Zone.current)),this.insideAngular=t.run(()=>new Io(Zone.current,yf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(B(ce))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Eo(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function g0(n){return Eo().ngZone.runOutsideAngular(()=>n())}function Dn(n){return Eo().ngZone.run(()=>n())}function _0(n){return y0(Eo())(n)}function y0(n){return function(t){return t=t.lift(new Nu(n.ngZone)),t.pipe(nc(n.outsideAngular),tc(n.insideAngular))}}var v0=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Dn(()=>n.apply(void 0,r))},dt=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Dn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",mr,{},mr,mr))),r[s]=v0(r[s],t));let i=g0(()=>n.apply(this,r));if(!e)if(i instanceof ii){let s=Eo();return i.pipe(nc(s.outsideAngular),tc(s.insideAngular))}else return Dn(()=>i);return i instanceof ii?i.pipe(_0):i instanceof Promise?Dn(()=>new Promise((s,a)=>i.then(c=>Dn(()=>s(c)),c=>Dn(()=>a(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Dn(()=>i)};var Ft=class{constructor(e){return e}},Nn=class{constructor(){return vo()}};function I0(n){return n&&n.length===1?n[0]:new Ft(pr())}var xu=new oe("angularfire2._apps"),w0={provide:Ft,useFactory:I0,deps:[[new $e,xu]]},E0={provide:Nn,deps:[[new $e,xu]]};function T0(n){return(e,t)=>{let r=t.get(Nt);ge("angularfire",kn.full,"core"),ge("angularfire",kn.full,"app"),ge("angular",Vf.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Ft(i)}}function pm(n,...e){return at([w0,E0,{provide:xu,useFactory:T0(n),multi:!0,deps:[ce,kt,_r,...e]}])}var mm=dt(ku,!0);function Nm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var xm=Nm,Om=new Mt("auth","Firebase",Nm());var Ro=new tn("@firebase/auth");function b0(n,...e){Ro.logLevel<=H.WARN&&Ro.warn(`Auth (${sn}): ${n}`,...e)}function bo(n,...e){Ro.logLevel<=H.ERROR&&Ro.error(`Auth (${sn}): ${n}`,...e)}function It(n,...e){throw nl(n,...e)}function xn(n,...e){return nl(n,...e)}function Mm(n,e,t){let r=Object.assign(Object.assign({},xm()),{[e]:t});return new Mt("auth","Firebase",r).create(e,{appName:n.name})}function jt(n){return Mm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nl(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Om.create(n,...e)}function V(n,e,...t){if(!n)throw nl(e,...t)}function Vt(n){let e="INTERNAL ASSERTION FAILED: "+n;throw bo(e),new Error(e)}function an(n,e){n||Vt(e)}function Fu(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function A0(){return gm()==="http:"||gm()==="https:"}function gm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function S0(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(A0()||Wp()||"connection"in navigator)?navigator.onLine:!0}function C0(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var On=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,an(t>e,"Short delay should be less than long delay!"),this.isMobile=Hp()||Kp()}get(){return S0()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function rl(n,e){an(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Po=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var R0={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var P0=new On(3e4,6e4);function cn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function un(s,a,c,l){return y(this,arguments,function*(n,e,t,r,i={}){return Lm(n,i,()=>y(this,null,function*(){let d={},p={};r&&(e==="GET"?p=r:d={body:JSON.stringify(r)});let v=Vi(Object.assign({key:n.config.apiKey},p)).slice(1),A=yield n._getAdditionalHeaders();return A["Content-Type"]="application/json",n.languageCode&&(A["X-Firebase-Locale"]=n.languageCode),Po.fetch()(Fm(n,n.config.apiHost,t,v),Object.assign({method:e,headers:A,referrerPolicy:"no-referrer"},d))}))})}function Lm(n,e,t){return y(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},R0),e);try{let i=new Vu(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw To(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let c=s.ok?a.errorMessage:a.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw To(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw To(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw To(n,"user-disabled",a);let p=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Mm(n,p,d);It(n,p)}}catch(i){if(i instanceof Ue)throw i;It(n,"network-request-failed",{message:String(i)})}})}function Yi(s,a,c,l){return y(this,arguments,function*(n,e,t,r,i={}){let d=yield un(n,e,t,r,i);return"mfaPendingCredential"in d&&It(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function Fm(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?rl(n.config,i):`${n.config.apiScheme}://${i}`}function D0(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Vu=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(xn(this.auth,"network-request-failed")),P0.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function To(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=xn(n,e,r);return i.customData._tokenResponse=t,i}function _m(n){return n!==void 0&&n.enterprise!==void 0}var Uu=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return D0(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function k0(n,e){return y(this,null,function*(){return un(n,"GET","/v2/recaptchaConfig",cn(n,e))})}function N0(n,e){return y(this,null,function*(){return un(n,"POST","/v1/accounts:delete",e)})}function Vm(n,e){return y(this,null,function*(){return un(n,"POST","/v1/accounts:lookup",e)})}function zi(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function il(n,e=!1){return y(this,null,function*(){let t=je(n),r=yield t.getIdToken(e),i=sl(r);V(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:zi(Ou(i.auth_time)),issuedAtTime:zi(Ou(i.iat)),expirationTime:zi(Ou(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Ou(n){return Number(n)*1e3}function sl(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return bo("JWT malformed, contained fewer than 3 sections"),null;try{let i=du(t);return i?JSON.parse(i):(bo("Failed to decode base64 JWT payload"),null)}catch(i){return bo("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ym(n){let e=sl(n);return V(e,"internal-error"),V(typeof e.exp<"u","internal-error"),V(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Gi(n,e,t=!1){return y(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Ue&&x0(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function x0({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var ju=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),t)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Hi=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zi(this.lastLoginAt),this.creationTime=zi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Do(n){return y(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Gi(n,Vm(t,{idToken:r}));V(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Um(s.providerUserInfo):[],c=O0(n.providerData,a),l=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,p=l?d:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Hi(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,v)})}function ol(n){return y(this,null,function*(){let e=je(n);yield Do(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function O0(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Um(n){return n.map(e=>{var{providerId:t}=e,r=ec(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function M0(n,e){return y(this,null,function*(){let t=yield Lm(n,{},()=>y(this,null,function*(){let r=Vi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=Fm(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Po.fetch()(a,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function L0(n,e){return y(this,null,function*(){return un(n,"POST","/v2/accounts:revokeToken",cn(n,e))})}var qi=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){V(e.idToken,"internal-error"),V(typeof e.idToken<"u","internal-error"),V(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ym(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){V(e.length!==0,"internal-error");let t=ym(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return y(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(V(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield M0(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new n;return r&&(V(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(V(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(V(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Vt("not implemented")}};function on(n,e){V(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var yr=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=ec(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ju(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Hi(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let t=yield Gi(this,this.stsTokenManager.getToken(this.auth,e));return V(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return il(this,e)}reload(){return ol(this)}_assign(e){this!==e&&(V(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Do(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(ht(this.auth.app))return Promise.reject(jt(this.auth));let e=yield this.getIdToken();return yield Gi(this,N0(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,l,d,p;let v=(r=t.displayName)!==null&&r!==void 0?r:void 0,A=(i=t.email)!==null&&i!==void 0?i:void 0,C=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,D=(a=t.photoURL)!==null&&a!==void 0?a:void 0,x=(c=t.tenantId)!==null&&c!==void 0?c:void 0,N=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,K=(d=t.createdAt)!==null&&d!==void 0?d:void 0,Q=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:J,emailVerified:me,isAnonymous:pt,providerData:ye,stsTokenManager:E}=t;V(J&&E,e,"internal-error");let m=qi.fromJSON(this.name,E);V(typeof J=="string",e,"internal-error"),on(v,e.name),on(A,e.name),V(typeof me=="boolean",e,"internal-error"),V(typeof pt=="boolean",e,"internal-error"),on(C,e.name),on(D,e.name),on(x,e.name),on(N,e.name),on(K,e.name),on(Q,e.name);let _=new n({uid:J,auth:e,email:A,emailVerified:me,displayName:v,isAnonymous:pt,photoURL:D,phoneNumber:C,tenantId:x,stsTokenManager:m,createdAt:K,lastLoginAt:Q});return ye&&Array.isArray(ye)&&(_.providerData=ye.map(I=>Object.assign({},I))),N&&(_._redirectEventId=N),_}static _fromIdTokenResponse(e,t,r=!1){return y(this,null,function*(){let i=new qi;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Do(s),s})}static _fromGetAccountInfoResponse(e,t,r){return y(this,null,function*(){let i=t.users[0];V(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Um(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,c=new qi;c.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Hi(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,d),l})}};var vm=new Map;function Ut(n){an(n instanceof Function,"Expected a class definition");let e=vm.get(n);return e?(an(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,vm.set(n,e),e)}var F0=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(t,r){return y(this,null,function*(){this.storage[t]=r})}_get(t){return y(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return y(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Bu=F0;function Ao(n,e,t){return`firebase:${n}:${e}:${t}`}var ko=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Ao(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ao("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?yr._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return y(this,null,function*(){if(!t.length)return new n(Ut(Bu),e,r);let i=(yield Promise.all(t.map(d=>y(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||Ut(Bu),a=Ao(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let p=yield d._get(a);if(p){let v=yr._fromJSON(e,p);d!==s&&(c=v),s=d;break}}catch{}let l=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,r):(s=l[0],c&&(yield s._set(a,c.toJSON())),yield Promise.all(t.map(d=>y(this,null,function*(){if(d!==s)try{yield d._remove(a)}catch{}}))),new n(s,e,r))})}};function Im(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zm(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jm(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Gm(e))return"Blackberry";if(Hm(e))return"Webos";if(Bm(e))return"Safari";if((e.includes("chrome/")||$m(e))&&!e.includes("edge/"))return"Chrome";if(qm(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function jm(n=we()){return/firefox\//i.test(n)}function Bm(n=we()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $m(n=we()){return/crios\//i.test(n)}function zm(n=we()){return/iemobile/i.test(n)}function qm(n=we()){return/android/i.test(n)}function Gm(n=we()){return/blackberry/i.test(n)}function Hm(n=we()){return/webos/i.test(n)}function al(n=we()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function V0(n=we()){var e;return al(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function U0(){return Qp()&&document.documentMode===10}function Wm(n=we()){return al(n)||qm(n)||Hm(n)||Gm(n)||/windows phone/i.test(n)||zm(n)}function Km(n,e=[]){let t;switch(n){case"Browser":t=Im(we());break;case"Worker":t=`${Im(we())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${sn}/${r}`}var $u=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((a,c)=>{try{let l=e(s);a(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function j0(t){return y(this,arguments,function*(n,e={}){return un(n,"GET","/v2/passwordPolicy",cn(n,e))})}var B0=6,zu=class{constructor(e){var t,r,i,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:B0,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var qu=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new No(this),this.idTokenSubscription=new No(this),this.beforeStateQueue=new $u(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Om,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ut(t)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield ko.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let t=yield Vm(this,{idToken:e}),r=yield yr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var t;if(ht(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!a||a===c)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return V(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield Do(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=C0()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(ht(this.app))return Promise.reject(jt(this));let t=e?je(e):null;return t&&V(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return y(this,null,function*(){if(!this._deleted)return e&&V(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return ht(this.app)?Promise.reject(jt(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ht(this.app)?Promise.reject(jt(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(Ut(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield j0(this),t=new zu(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield L0(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ut(e)||this._popupRedirectResolver;V(t,this,"argument-error"),this.redirectPersistenceManager=yield ko.create(this,[Ut(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(V(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{let l=e.addObserver(t);return()=>{a=!0,l()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Km(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return y(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&b0(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Ln(n){return je(n)}var No=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Zp(t=>this.observer=t)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Uo={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $0(n){Uo=n}function Qm(n){return Uo.loadJS(n)}function z0(){return Uo.recaptchaEnterpriseScript}function q0(){return Uo.gapiScript}function Ym(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var G0="recaptcha-enterprise",H0="NO_RECAPTCHA",Gu=class{constructor(e){this.type=G0,this.auth=Ln(e)}verify(e="verify",t=!1){return y(this,null,function*(){function r(s){return y(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((a,c)=>y(this,null,function*(){k0(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let d=new Uu(l);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(l=>{c(l)})}))})}function i(s,a,c){let l=window.grecaptcha;_m(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(H0)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(c=>{if(!t&&_m(window.grecaptcha))i(c,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=z0();l.length!==0&&(l+=c),Qm(l).then(()=>{i(c,s,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})})}};function wm(n,e,t,r=!1){return y(this,null,function*(){let i=new Gu(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Hu(n,e,t,r){return y(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield wm(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>y(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=yield wm(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)}))})}function cl(n,e){let t=Bi(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Rn(s,e??{}))return i;It(i,"already-initialized")}return t.initialize({options:e})}function W0(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ut);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function ul(n,e,t){let r=Ln(n);V(r._canInitEmulator,r,"emulator-config-failed"),V(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=Jm(e),{host:a,port:c}=K0(e),l=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Q0()}function Jm(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function K0(n){let e=Jm(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Em(r.substr(s.length+1))}}else{let[s,a]=r.split(":");return{host:s,port:Em(a)}}}function Em(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Q0(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Wi=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vt("not implemented")}_getIdTokenResponse(e){return Vt("not implemented")}_linkToIdToken(e,t){return Vt("not implemented")}_getReauthenticationResolver(e){return Vt("not implemented")}};function Y0(n,e){return y(this,null,function*(){return un(n,"POST","/v1/accounts:signUp",e)})}function J0(n,e){return y(this,null,function*(){return Yi(n,"POST","/v1/accounts:signInWithPassword",cn(n,e))})}function X0(n,e){return y(this,null,function*(){return Yi(n,"POST","/v1/accounts:signInWithEmailLink",cn(n,e))})}function Z0(n,e){return y(this,null,function*(){return Yi(n,"POST","/v1/accounts:signInWithEmailLink",cn(n,e))})}var Ki=class n extends Wi{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return y(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hu(e,t,"signInWithPassword",J0);case"emailLink":return X0(e,{email:this._email,oobCode:this._password});default:It(e,"internal-error")}})}_linkToIdToken(e,t){return y(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hu(e,r,"signUpPassword",Y0);case"emailLink":return Z0(e,{idToken:t,email:this._email,oobCode:this._password});default:It(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Mu(n,e){return y(this,null,function*(){return Yi(n,"POST","/v1/accounts:signInWithIdp",cn(n,e))})}function eE(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tE(n){let e=dr(fr(n)).link,t=e?dr(fr(e)).deep_link_id:null,r=dr(fr(n)).deep_link_id;return(r?dr(fr(r)).link:null)||r||t||e||n}var xo=class n{constructor(e){var t,r,i,s,a,c;let l=dr(fr(e)),d=(t=l.apiKey)!==null&&t!==void 0?t:null,p=(r=l.oobCode)!==null&&r!==void 0?r:null,v=eE((i=l.mode)!==null&&i!==void 0?i:null);V(d&&p&&v,"argument-error"),this.apiKey=d,this.operation=v,this.code=p,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=tE(e);try{return new n(t)}catch{return null}}};var Xm=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Ki._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=xo.parseLink(r);return V(i,"argument-error"),Ki._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Oo=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Wu=class extends Oo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function nE(n,e){return y(this,null,function*(){return Yi(n,"POST","/v1/accounts:signUp",cn(n,e))})}var vr=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return y(this,null,function*(){let s=yield yr._fromIdTokenResponse(e,r,i),a=Tm(r);return new n({user:s,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Tm(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Tm(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Ku=class n extends Ue{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Zm(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ku._fromErrorAndOperation(n,s,e,r):s})}function rE(n,e,t=!1){return y(this,null,function*(){let r=yield Gi(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return vr._forOperation(n,"link",r)})}function iE(n,e,t=!1){return y(this,null,function*(){let{auth:r}=n;if(ht(r.app))return Promise.reject(jt(r));let i="reauthenticate";try{let s=yield Gi(n,Zm(r,i,e,n),t);V(s.idToken,r,"internal-error");let a=sl(s.idToken);V(a,r,"internal-error");let{sub:c}=a;return V(n.uid===c,r,"user-mismatch"),vr._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&It(r,"user-mismatch"),s}})}function eg(n,e,t=!1){return y(this,null,function*(){if(ht(n.app))return Promise.reject(jt(n));let r="signIn",i=yield Zm(n,r,e),s=yield vr._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function ll(n,e){return y(this,null,function*(){return eg(Ln(n),e)})}function tg(n){return y(this,null,function*(){let e=Ln(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function hl(n,e,t){return y(this,null,function*(){if(ht(n.app))return Promise.reject(jt(n));let r=Ln(n),a=yield Hu(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nE).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&tg(n),l}),c=yield vr._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(c.user),c})}function dl(n,e,t){return ht(n.app)?Promise.reject(jt(n)):ll(je(n),Xm.credential(e,t)).catch(r=>y(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&tg(n),r}))}function fl(n,e,t,r){return je(n).onIdTokenChanged(e,t,r)}function pl(n,e,t){return je(n).beforeAuthStateChanged(e,t)}function ml(n,e,t,r){return je(n).onAuthStateChanged(e,t,r)}var Mo="__sak";var Lo=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mo,"1"),this.storage.removeItem(Mo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var sE=1e3,oE=10,aE=(()=>{class n extends Lo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Wm(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,l,d)=>{this.notifyListeners(c,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);U0()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,oE):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},sE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return y(this,null,function*(){yield Yt(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return y(this,null,function*(){let r=yield Yt(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return y(this,null,function*(){yield Yt(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),ng=aE;var cE=(()=>{class n extends Lo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),gl=cE;function uE(n){return Promise.all(n.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var lE=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return y(this,null,function*(){let r=t,{eventId:i,eventType:s,data:a}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let l=Array.from(c).map(p=>y(this,null,function*(){return p(r.origin,a)})),d=yield uE(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function rg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Qu=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,l)=>{let d=rg("",20);i.port1.start();let p=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(v){let A=v;if(A.data.eventId===d)switch(A.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(A.data.response);break;default:clearTimeout(p),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function vt(){return window}function hE(n){vt().location.href=n}function ig(){return typeof vt().WorkerGlobalScope<"u"&&typeof vt().importScripts=="function"}function dE(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function fE(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function pE(){return ig()?self:null}var sg="firebaseLocalStorageDb",mE=1,Fo="firebaseLocalStorage",og="fbase_key",Mn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function jo(n,e){return n.transaction([Fo],e?"readwrite":"readonly").objectStore(Fo)}function gE(){let n=indexedDB.deleteDatabase(sg);return new Mn(n).toPromise()}function Yu(){let n=indexedDB.open(sg,mE);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Fo,{keyPath:og})}catch(i){t(i)}}),n.addEventListener("success",()=>y(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Fo)?e(r):(r.close(),yield gE(),e(yield Yu()))}))})}function bm(n,e,t){return y(this,null,function*(){let r=jo(n,!0).put({[og]:e,value:t});return new Mn(r).toPromise()})}function _E(n,e){return y(this,null,function*(){let t=jo(n,!1).get(e),r=yield new Mn(t).toPromise();return r===void 0?null:r.value})}function Am(n,e){let t=jo(n,!0).delete(e);return new Mn(t).toPromise()}var yE=800,vE=3,IE=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield Yu(),this.db)})}_withRetries(t){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>vE)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return ig()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=lE._getInstance(pE()),this.receiver._subscribe("keyChanged",(t,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var t,r;if(this.activeServiceWorker=yield dE(),!this.activeServiceWorker)return;this.sender=new Qu(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||fE()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Yu();return yield bm(t,Mo,"1"),yield Am(t,Mo),!0}catch{}return!1})}_withPendingWrite(t){return y(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>bm(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return y(this,null,function*(){let r=yield this._withRetries(i=>_E(i,t));return this.localCache[t]=r,r})}_remove(t){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>Am(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return y(this,null,function*(){let t=yield this._withRetries(s=>{let a=jo(s,!1).getAll();return new Mn(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:a}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),yE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),ag=IE;var eR=Ym("rcb"),tR=new On(3e4,6e4);function wE(n,e){return e?Ut(e):(V(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Qi=class extends Wi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mu(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function EE(n){return eg(n.auth,new Qi(n),n.bypassAuthState)}function TE(n){let{auth:e,user:t}=n;return V(t,e,"internal-error"),iE(t,new Qi(n),n.bypassAuthState)}function bE(n){return y(this,null,function*(){let{auth:e,user:t}=n;return V(t,e,"internal-error"),rE(t,new Qi(n),n.bypassAuthState)})}var Ju=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EE;case"linkViaPopup":case"linkViaRedirect":return bE;case"reauthViaPopup":case"reauthViaRedirect":return TE;default:It(this.auth,"internal-error")}}resolve(e){an(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){an(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var nR=new On(2e3,1e4);var AE="pendingRedirect",So=new Map,Xu=class n extends Ju{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=So.get(this.auth._key());if(!e){try{let r=(yield SE(this.resolver,this.auth))?yield Yt(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}So.set(this.auth._key(),e)}return this.bypassAuthState||So.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return Yt(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Yt(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function SE(n,e){return y(this,null,function*(){let t=PE(e),r=RE(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function CE(n,e){So.set(n._key(),e)}function RE(n){return Ut(n._redirectPersistence)}function PE(n){return Ao(AE,n.config.apiKey,n.name)}function DE(n,e,t=!1){return y(this,null,function*(){if(ht(n.app))return Promise.reject(jt(n));let r=Ln(n),i=wE(r,e),a=yield new Xu(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var kE=10*60*1e3,Zu=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NE(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!cg(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(xn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kE&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sm(e))}saveEventToCache(e){this.cachedEventUids.add(Sm(e)),this.lastProcessedEventTime=Date.now()}};function Sm(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function cg({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function NE(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cg(n);default:return!1}}function xE(t){return y(this,arguments,function*(n,e={}){return un(n,"GET","/v1/projects",e)})}var OE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ME=/^https?/;function LE(n){return y(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield xE(n);for(let t of e)try{if(FE(t))return}catch{}It(n,"unauthorized-domain")})}function FE(n){let e=Fu(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!ME.test(t))return!1;if(OE.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var VE=new On(3e4,6e4);function Cm(){let n=vt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function UE(n){return new Promise((e,t)=>{var r,i,s;function a(){Cm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cm(),t(xn(n,"network-request-failed"))},timeout:VE.get()})}if(!((i=(r=vt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=vt().gapi)===null||s===void 0)&&s.load)a();else{let c=Ym("iframefcb");return vt()[c]=()=>{gapi.load?a():t(xn(n,"network-request-failed"))},Qm(`${q0()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw Co=null,e})}var Co=null;function jE(n){return Co=Co||UE(n),Co}var BE=new On(5e3,15e3),$E="__/auth/iframe",zE="emulator/auth/iframe",qE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HE(n){let e=n.config;V(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?rl(e,zE):`https://${n.config.authDomain}/${$E}`,r={apiKey:e.apiKey,appName:n.name,v:sn},i=GE.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Vi(r).slice(1)}`}function WE(n){return y(this,null,function*(){let e=yield jE(n),t=vt().gapi;return V(t,n,"internal-error"),e.open({where:document.body,url:HE(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qE,dontclear:!0},r=>new Promise((i,s)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=xn(n,"network-request-failed"),c=vt().setTimeout(()=>{s(a)},BE.get());function l(){vt().clearTimeout(c),i(r)}r.ping(l).then(l,()=>{s(a)})})))})}var KE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QE=500,YE=600,JE="_blank",XE="http://localhost",Vo=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function ZE(n,e,t,r=QE,i=YE){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",l=Object.assign(Object.assign({},KE),{width:r.toString(),height:i.toString(),top:s,left:a}),d=we().toLowerCase();t&&(c=$m(d)?JE:t),jm(d)&&(e=e||XE,l.scrollbars="yes");let p=Object.entries(l).reduce((A,[C,D])=>`${A}${C}=${D},`,"");if(V0(d)&&c!=="_self")return eT(e||"",c),new Vo(null);let v=window.open(e||"",c,p);V(v,n,"popup-blocked");try{v.focus()}catch{}return new Vo(v)}function eT(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var tT="__/auth/handler",nT="emulator/auth/handler",rT=encodeURIComponent("fac");function Rm(n,e,t,r,i,s){return y(this,null,function*(){V(n.config.authDomain,n,"auth-domain-config-required"),V(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:sn,eventId:i};if(e instanceof Oo){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",Xp(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[p,v]of Object.entries(s||{}))a[p]=v}if(e instanceof Wu){let p=e.getScopes().filter(v=>v!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);let c=a;for(let p of Object.keys(c))c[p]===void 0&&delete c[p];let l=yield n._getAppCheckToken(),d=l?`#${rT}=${encodeURIComponent(l)}`:"";return`${iT(n)}?${Vi(c).slice(1)}${d}`})}function iT({config:n}){return n.emulator?rl(n,nT):`https://${n.authDomain}/${tT}`}var Lu="webStorageSupport",el=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gl,this._completeRedirectFn=DE,this._overrideRedirectResult=CE}_openPopup(e,t,r,i){return y(this,null,function*(){var s;an((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let a=yield Rm(e,t,r,Fu(),i);return ZE(e,a,rg())})}_openRedirect(e,t,r,i){return y(this,null,function*(){yield this._originValidation(e);let s=yield Rm(e,t,r,Fu(),i);return hE(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(an(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return y(this,null,function*(){let t=yield WE(e),r=new Zu(e);return t.register("authEvent",i=>(V(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Lu,{type:Lu},i=>{var s;let a=(s=i?.[0])===null||s===void 0?void 0:s[Lu];a!==void 0&&t(!!a),It(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=LE(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Wm()||Bm()||al()}},ug=el;var Pm="@firebase/auth",Dm="1.7.8";var tl=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function sT(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oT(n){rn(new tt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;V(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Km(n)},d=new qu(r,i,s,l);return W0(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),rn(new tt("auth-internal",e=>{let t=Ln(e.getProvider("auth").getImmediate());return(r=>new tl(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ge(Pm,Dm,sT(n)),ge(Pm,Dm,"esm2017")}var aT=5*60,cT=mu("authIdTokenMaxAge")||aT,km=null,uT=n=>e=>y(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>cT)return;let i=t?.token;km!==i&&(km=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function _l(n=pr()){let e=Bi(n,"auth");if(e.isInitialized())return e.getImmediate();let t=cl(n,{popupRedirectResolver:ug,persistence:[ag,ng,gl]}),r=mu("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let a=uT(s.toString());pl(t,a,()=>a(t.currentUser)),fl(t,c=>a(c))}}let i=fu("auth");return i&&ul(t,`http://${i}`),t}function lT(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}$0({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=xn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",lT().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oT("Browser");var lg="auth",ft=class{constructor(e){return e}},Ji=class{constructor(){return $i(lg)}};var yl=new oe("angularfire2.auth-instances");function eb(n,e){let t=wo(lg,n,e);return t&&new ft(t)}function tb(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ft(r)}}var nb={provide:Ji,deps:[[new $e,yl]]},rb={provide:ft,useFactory:eb,deps:[[new $e,yl],Ft]};function hg(n,...e){return ge("angularfire",kn.full,"auth"),at([rb,nb,{provide:yl,useFactory:tb(n),multi:!0,deps:[ce,kt,_r,Nn,[new $e,gr],...e]}])}var dg=dt(hl,!0);var fg=dt(_l,!0);var pg=dt(ml,!0);var mg=dt(dl,!0);var gg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_g={};var vl,yg;(function(){var n;function e(E,m){function _(){}_.prototype=m.prototype,E.D=m.prototype,E.prototype=new _,E.prototype.constructor=E,E.C=function(I,w,b){for(var g=Array(arguments.length-2),St=2;St<arguments.length;St++)g[St-2]=arguments[St];return m.prototype[w].apply(I,g)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,m,_){_||(_=0);var I=Array(16);if(typeof m=="string")for(var w=0;16>w;++w)I[w]=m.charCodeAt(_++)|m.charCodeAt(_++)<<8|m.charCodeAt(_++)<<16|m.charCodeAt(_++)<<24;else for(w=0;16>w;++w)I[w]=m[_++]|m[_++]<<8|m[_++]<<16|m[_++]<<24;m=E.g[0],_=E.g[1],w=E.g[2];var b=E.g[3],g=m+(b^_&(w^b))+I[0]+3614090360&4294967295;m=_+(g<<7&4294967295|g>>>25),g=b+(w^m&(_^w))+I[1]+3905402710&4294967295,b=m+(g<<12&4294967295|g>>>20),g=w+(_^b&(m^_))+I[2]+606105819&4294967295,w=b+(g<<17&4294967295|g>>>15),g=_+(m^w&(b^m))+I[3]+3250441966&4294967295,_=w+(g<<22&4294967295|g>>>10),g=m+(b^_&(w^b))+I[4]+4118548399&4294967295,m=_+(g<<7&4294967295|g>>>25),g=b+(w^m&(_^w))+I[5]+1200080426&4294967295,b=m+(g<<12&4294967295|g>>>20),g=w+(_^b&(m^_))+I[6]+2821735955&4294967295,w=b+(g<<17&4294967295|g>>>15),g=_+(m^w&(b^m))+I[7]+4249261313&4294967295,_=w+(g<<22&4294967295|g>>>10),g=m+(b^_&(w^b))+I[8]+1770035416&4294967295,m=_+(g<<7&4294967295|g>>>25),g=b+(w^m&(_^w))+I[9]+2336552879&4294967295,b=m+(g<<12&4294967295|g>>>20),g=w+(_^b&(m^_))+I[10]+4294925233&4294967295,w=b+(g<<17&4294967295|g>>>15),g=_+(m^w&(b^m))+I[11]+2304563134&4294967295,_=w+(g<<22&4294967295|g>>>10),g=m+(b^_&(w^b))+I[12]+1804603682&4294967295,m=_+(g<<7&4294967295|g>>>25),g=b+(w^m&(_^w))+I[13]+4254626195&4294967295,b=m+(g<<12&4294967295|g>>>20),g=w+(_^b&(m^_))+I[14]+2792965006&4294967295,w=b+(g<<17&4294967295|g>>>15),g=_+(m^w&(b^m))+I[15]+1236535329&4294967295,_=w+(g<<22&4294967295|g>>>10),g=m+(w^b&(_^w))+I[1]+4129170786&4294967295,m=_+(g<<5&4294967295|g>>>27),g=b+(_^w&(m^_))+I[6]+3225465664&4294967295,b=m+(g<<9&4294967295|g>>>23),g=w+(m^_&(b^m))+I[11]+643717713&4294967295,w=b+(g<<14&4294967295|g>>>18),g=_+(b^m&(w^b))+I[0]+3921069994&4294967295,_=w+(g<<20&4294967295|g>>>12),g=m+(w^b&(_^w))+I[5]+3593408605&4294967295,m=_+(g<<5&4294967295|g>>>27),g=b+(_^w&(m^_))+I[10]+38016083&4294967295,b=m+(g<<9&4294967295|g>>>23),g=w+(m^_&(b^m))+I[15]+3634488961&4294967295,w=b+(g<<14&4294967295|g>>>18),g=_+(b^m&(w^b))+I[4]+3889429448&4294967295,_=w+(g<<20&4294967295|g>>>12),g=m+(w^b&(_^w))+I[9]+568446438&4294967295,m=_+(g<<5&4294967295|g>>>27),g=b+(_^w&(m^_))+I[14]+3275163606&4294967295,b=m+(g<<9&4294967295|g>>>23),g=w+(m^_&(b^m))+I[3]+4107603335&4294967295,w=b+(g<<14&4294967295|g>>>18),g=_+(b^m&(w^b))+I[8]+1163531501&4294967295,_=w+(g<<20&4294967295|g>>>12),g=m+(w^b&(_^w))+I[13]+2850285829&4294967295,m=_+(g<<5&4294967295|g>>>27),g=b+(_^w&(m^_))+I[2]+4243563512&4294967295,b=m+(g<<9&4294967295|g>>>23),g=w+(m^_&(b^m))+I[7]+1735328473&4294967295,w=b+(g<<14&4294967295|g>>>18),g=_+(b^m&(w^b))+I[12]+2368359562&4294967295,_=w+(g<<20&4294967295|g>>>12),g=m+(_^w^b)+I[5]+4294588738&4294967295,m=_+(g<<4&4294967295|g>>>28),g=b+(m^_^w)+I[8]+2272392833&4294967295,b=m+(g<<11&4294967295|g>>>21),g=w+(b^m^_)+I[11]+1839030562&4294967295,w=b+(g<<16&4294967295|g>>>16),g=_+(w^b^m)+I[14]+4259657740&4294967295,_=w+(g<<23&4294967295|g>>>9),g=m+(_^w^b)+I[1]+2763975236&4294967295,m=_+(g<<4&4294967295|g>>>28),g=b+(m^_^w)+I[4]+1272893353&4294967295,b=m+(g<<11&4294967295|g>>>21),g=w+(b^m^_)+I[7]+4139469664&4294967295,w=b+(g<<16&4294967295|g>>>16),g=_+(w^b^m)+I[10]+3200236656&4294967295,_=w+(g<<23&4294967295|g>>>9),g=m+(_^w^b)+I[13]+681279174&4294967295,m=_+(g<<4&4294967295|g>>>28),g=b+(m^_^w)+I[0]+3936430074&4294967295,b=m+(g<<11&4294967295|g>>>21),g=w+(b^m^_)+I[3]+3572445317&4294967295,w=b+(g<<16&4294967295|g>>>16),g=_+(w^b^m)+I[6]+76029189&4294967295,_=w+(g<<23&4294967295|g>>>9),g=m+(_^w^b)+I[9]+3654602809&4294967295,m=_+(g<<4&4294967295|g>>>28),g=b+(m^_^w)+I[12]+3873151461&4294967295,b=m+(g<<11&4294967295|g>>>21),g=w+(b^m^_)+I[15]+530742520&4294967295,w=b+(g<<16&4294967295|g>>>16),g=_+(w^b^m)+I[2]+3299628645&4294967295,_=w+(g<<23&4294967295|g>>>9),g=m+(w^(_|~b))+I[0]+4096336452&4294967295,m=_+(g<<6&4294967295|g>>>26),g=b+(_^(m|~w))+I[7]+1126891415&4294967295,b=m+(g<<10&4294967295|g>>>22),g=w+(m^(b|~_))+I[14]+2878612391&4294967295,w=b+(g<<15&4294967295|g>>>17),g=_+(b^(w|~m))+I[5]+4237533241&4294967295,_=w+(g<<21&4294967295|g>>>11),g=m+(w^(_|~b))+I[12]+1700485571&4294967295,m=_+(g<<6&4294967295|g>>>26),g=b+(_^(m|~w))+I[3]+2399980690&4294967295,b=m+(g<<10&4294967295|g>>>22),g=w+(m^(b|~_))+I[10]+4293915773&4294967295,w=b+(g<<15&4294967295|g>>>17),g=_+(b^(w|~m))+I[1]+2240044497&4294967295,_=w+(g<<21&4294967295|g>>>11),g=m+(w^(_|~b))+I[8]+1873313359&4294967295,m=_+(g<<6&4294967295|g>>>26),g=b+(_^(m|~w))+I[15]+4264355552&4294967295,b=m+(g<<10&4294967295|g>>>22),g=w+(m^(b|~_))+I[6]+2734768916&4294967295,w=b+(g<<15&4294967295|g>>>17),g=_+(b^(w|~m))+I[13]+1309151649&4294967295,_=w+(g<<21&4294967295|g>>>11),g=m+(w^(_|~b))+I[4]+4149444226&4294967295,m=_+(g<<6&4294967295|g>>>26),g=b+(_^(m|~w))+I[11]+3174756917&4294967295,b=m+(g<<10&4294967295|g>>>22),g=w+(m^(b|~_))+I[2]+718787259&4294967295,w=b+(g<<15&4294967295|g>>>17),g=_+(b^(w|~m))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+m&4294967295,E.g[1]=E.g[1]+(w+(g<<21&4294967295|g>>>11))&4294967295,E.g[2]=E.g[2]+w&4294967295,E.g[3]=E.g[3]+b&4294967295}r.prototype.u=function(E,m){m===void 0&&(m=E.length);for(var _=m-this.blockSize,I=this.B,w=this.h,b=0;b<m;){if(w==0)for(;b<=_;)i(this,E,b),b+=this.blockSize;if(typeof E=="string"){for(;b<m;)if(I[w++]=E.charCodeAt(b++),w==this.blockSize){i(this,I),w=0;break}}else for(;b<m;)if(I[w++]=E[b++],w==this.blockSize){i(this,I),w=0;break}}this.h=w,this.o+=m},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var m=1;m<E.length-8;++m)E[m]=0;var _=8*this.o;for(m=E.length-8;m<E.length;++m)E[m]=_&255,_/=256;for(this.u(E),E=Array(16),m=_=0;4>m;++m)for(var I=0;32>I;I+=8)E[_++]=this.g[m]>>>I&255;return E};function s(E,m){var _=c;return Object.prototype.hasOwnProperty.call(_,E)?_[E]:_[E]=m(E)}function a(E,m){this.h=m;for(var _=[],I=!0,w=E.length-1;0<=w;w--){var b=E[w]|0;I&&b==m||(_[w]=b,I=!1)}this.g=_}var c={};function l(E){return-128<=E&&128>E?s(E,function(m){return new a([m|0],0>m?-1:0)}):new a([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return v;if(0>E)return N(d(-E));for(var m=[],_=1,I=0;E>=_;I++)m[I]=E/_|0,_*=4294967296;return new a(m,0)}function p(E,m){if(E.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(E.charAt(0)=="-")return N(p(E.substring(1),m));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=d(Math.pow(m,8)),I=v,w=0;w<E.length;w+=8){var b=Math.min(8,E.length-w),g=parseInt(E.substring(w,w+b),m);8>b?(b=d(Math.pow(m,b)),I=I.j(b).add(d(g))):(I=I.j(_),I=I.add(d(g)))}return I}var v=l(0),A=l(1),C=l(16777216);n=a.prototype,n.m=function(){if(x(this))return-N(this).m();for(var E=0,m=1,_=0;_<this.g.length;_++){var I=this.i(_);E+=(0<=I?I:4294967296+I)*m,m*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(x(this))return"-"+N(this).toString(E);for(var m=d(Math.pow(E,6)),_=this,I="";;){var w=me(_,m).g;_=K(_,w.j(m));var b=((0<_.g.length?_.g[0]:_.h)>>>0).toString(E);if(_=w,D(_))return b+I;for(;6>b.length;)b="0"+b;I=b+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var m=0;m<E.g.length;m++)if(E.g[m]!=0)return!1;return!0}function x(E){return E.h==-1}n.l=function(E){return E=K(this,E),x(E)?-1:D(E)?0:1};function N(E){for(var m=E.g.length,_=[],I=0;I<m;I++)_[I]=~E.g[I];return new a(_,~E.h).add(A)}n.abs=function(){return x(this)?N(this):this},n.add=function(E){for(var m=Math.max(this.g.length,E.g.length),_=[],I=0,w=0;w<=m;w++){var b=I+(this.i(w)&65535)+(E.i(w)&65535),g=(b>>>16)+(this.i(w)>>>16)+(E.i(w)>>>16);I=g>>>16,b&=65535,g&=65535,_[w]=g<<16|b}return new a(_,_[_.length-1]&-2147483648?-1:0)};function K(E,m){return E.add(N(m))}n.j=function(E){if(D(this)||D(E))return v;if(x(this))return x(E)?N(this).j(N(E)):N(N(this).j(E));if(x(E))return N(this.j(N(E)));if(0>this.l(C)&&0>E.l(C))return d(this.m()*E.m());for(var m=this.g.length+E.g.length,_=[],I=0;I<2*m;I++)_[I]=0;for(I=0;I<this.g.length;I++)for(var w=0;w<E.g.length;w++){var b=this.i(I)>>>16,g=this.i(I)&65535,St=E.i(w)>>>16,Ur=E.i(w)&65535;_[2*I+2*w]+=g*Ur,Q(_,2*I+2*w),_[2*I+2*w+1]+=b*Ur,Q(_,2*I+2*w+1),_[2*I+2*w+1]+=g*St,Q(_,2*I+2*w+1),_[2*I+2*w+2]+=b*St,Q(_,2*I+2*w+2)}for(I=0;I<m;I++)_[I]=_[2*I+1]<<16|_[2*I];for(I=m;I<2*m;I++)_[I]=0;return new a(_,0)};function Q(E,m){for(;(E[m]&65535)!=E[m];)E[m+1]+=E[m]>>>16,E[m]&=65535,m++}function J(E,m){this.g=E,this.h=m}function me(E,m){if(D(m))throw Error("division by zero");if(D(E))return new J(v,v);if(x(E))return m=me(N(E),m),new J(N(m.g),N(m.h));if(x(m))return m=me(E,N(m)),new J(N(m.g),m.h);if(30<E.g.length){if(x(E)||x(m))throw Error("slowDivide_ only works with positive integers.");for(var _=A,I=m;0>=I.l(E);)_=pt(_),I=pt(I);var w=ye(_,1),b=ye(I,1);for(I=ye(I,2),_=ye(_,2);!D(I);){var g=b.add(I);0>=g.l(E)&&(w=w.add(_),b=g),I=ye(I,1),_=ye(_,1)}return m=K(E,w.j(m)),new J(w,m)}for(w=v;0<=E.l(m);){for(_=Math.max(1,Math.floor(E.m()/m.m())),I=Math.ceil(Math.log(_)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),b=d(_),g=b.j(m);x(g)||0<g.l(E);)_-=I,b=d(_),g=b.j(m);D(b)&&(b=A),w=w.add(b),E=K(E,g)}return new J(w,E)}n.A=function(E){return me(this,E).h},n.and=function(E){for(var m=Math.max(this.g.length,E.g.length),_=[],I=0;I<m;I++)_[I]=this.i(I)&E.i(I);return new a(_,this.h&E.h)},n.or=function(E){for(var m=Math.max(this.g.length,E.g.length),_=[],I=0;I<m;I++)_[I]=this.i(I)|E.i(I);return new a(_,this.h|E.h)},n.xor=function(E){for(var m=Math.max(this.g.length,E.g.length),_=[],I=0;I<m;I++)_[I]=this.i(I)^E.i(I);return new a(_,this.h^E.h)};function pt(E){for(var m=E.g.length+1,_=[],I=0;I<m;I++)_[I]=E.i(I)<<1|E.i(I-1)>>>31;return new a(_,E.h)}function ye(E,m){var _=m>>5;m%=32;for(var I=E.g.length-_,w=[],b=0;b<I;b++)w[b]=0<m?E.i(b+_)>>>m|E.i(b+_+1)<<32-m:E.i(b+_);return new a(w,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,yg=_g.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,vl=_g.Integer=a}).apply(typeof gg<"u"?gg:typeof self<"u"?self:typeof window<"u"?window:{});var Bo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bt={};var Il,wl,Ir,El,Xi,$o,Tl,bl,Al;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){return o==Array.prototype||o==Object.prototype||(o[u]=h.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bo=="object"&&Bo];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(o,u){if(u)e:{var h=r;o=o.split(".");for(var f=0;f<o.length-1;f++){var T=o[f];if(!(T in h))break e;h=h[T]}o=o[o.length-1],f=h[o],u=u(f),u!=f&&u!=null&&e(h,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var h=0,f=!1,T={next:function(){if(!f&&h<o.length){var S=h++;return{value:u(S,o[S]),done:!1}}return f=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(o){return o||function(){return s(this,function(u,h){return h})}});var a=a||{},c=this||self;function l(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function d(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function p(o,u,h){return o.call.apply(o.bind,arguments)}function v(o,u,h){if(!o)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,f),o.apply(u,T)}}return function(){return o.apply(u,arguments)}}function A(o,u,h){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:v,A.apply(null,arguments)}function C(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var f=h.slice();return f.push.apply(f,arguments),o.apply(this,f)}}function D(o,u){function h(){}h.prototype=u.prototype,o.aa=u.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(f,T,S){for(var k=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)k[ne-2]=arguments[ne];return u.prototype[T].apply(f,k)}}function x(o){let u=o.length;if(0<u){let h=Array(u);for(let f=0;f<u;f++)h[f]=o[f];return h}return[]}function N(o,u){for(let h=1;h<arguments.length;h++){let f=arguments[h];if(l(f)){let T=o.length||0,S=f.length||0;o.length=T+S;for(let k=0;k<S;k++)o[T+k]=f[k]}else o.push(f)}}class K{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function Q(o){return/^[\s\xa0]*$/.test(o)}function J(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function me(o){return me[" "](o),o}me[" "]=function(){};var pt=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function ye(o,u,h){for(let f in o)u.call(h,o[f],f,o)}function E(o,u){for(let h in o)u.call(void 0,o[h],h,o)}function m(o){let u={};for(let h in o)u[h]=o[h];return u}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(o,u){let h,f;for(let T=1;T<arguments.length;T++){f=arguments[T];for(h in f)o[h]=f[h];for(let S=0;S<_.length;S++)h=_[S],Object.prototype.hasOwnProperty.call(f,h)&&(o[h]=f[h])}}function w(o){var u=1;o=o.split(":");let h=[];for(;0<u&&o.length;)h.push(o.shift()),u--;return o.length&&h.push(o.join(":")),h}function b(o){c.setTimeout(()=>{throw o},0)}function g(){var o=Ca;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class St{constructor(){this.h=this.g=null}add(u,h){let f=Ur.get();f.set(u,h),this.h?this.h.next=f:this.g=f,this.h=f}}var Ur=new K(()=>new ay,o=>o.reset());class ay{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let jr,Br=!1,Ca=new St,pd=()=>{let o=c.Promise.resolve(void 0);jr=()=>{o.then(cy)}};var cy=()=>{for(var o;o=g();){try{o.h.call(o.g)}catch(h){b(h)}var u=Ur;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}Br=!1};function Ht(){this.s=this.s,this.C=this.C}Ht.prototype.s=!1,Ht.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ht.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var uy=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let h=()=>{};c.addEventListener("test",h,u),c.removeEventListener("test",h,u)}catch{}return o}();function $r(o,u){if(Ce.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(pt){e:{try{me(u.nodeName);var T=!0;break e}catch{}T=!1}T||(u=null)}}else h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement);this.relatedTarget=u,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:ly[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&$r.aa.h.call(this)}}D($r,Ce);var ly={2:"touch",3:"pen",4:"mouse"};$r.prototype.h=function(){$r.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var zr="closure_listenable_"+(1e6*Math.random()|0),hy=0;function dy(o,u,h,f,T){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!f,this.ha=T,this.key=++hy,this.da=this.fa=!1}function ms(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function gs(o){this.src=o,this.g={},this.h=0}gs.prototype.add=function(o,u,h,f,T){var S=o.toString();o=this.g[S],o||(o=this.g[S]=[],this.h++);var k=Pa(o,u,f,T);return-1<k?(u=o[k],h||(u.fa=!1)):(u=new dy(u,this.src,S,!!f,T),u.fa=h,o.push(u)),u};function Ra(o,u){var h=u.type;if(h in o.g){var f=o.g[h],T=Array.prototype.indexOf.call(f,u,void 0),S;(S=0<=T)&&Array.prototype.splice.call(f,T,1),S&&(ms(u),o.g[h].length==0&&(delete o.g[h],o.h--))}}function Pa(o,u,h,f){for(var T=0;T<o.length;++T){var S=o[T];if(!S.da&&S.listener==u&&S.capture==!!h&&S.ha==f)return T}return-1}var Da="closure_lm_"+(1e6*Math.random()|0),ka={};function md(o,u,h,f,T){if(f&&f.once)return _d(o,u,h,f,T);if(Array.isArray(u)){for(var S=0;S<u.length;S++)md(o,u[S],h,f,T);return null}return h=Ma(h),o&&o[zr]?o.K(u,h,d(f)?!!f.capture:!!f,T):gd(o,u,h,!1,f,T)}function gd(o,u,h,f,T,S){if(!u)throw Error("Invalid event type");var k=d(T)?!!T.capture:!!T,ne=xa(o);if(ne||(o[Da]=ne=new gs(o)),h=ne.add(u,h,f,k,S),h.proxy)return h;if(f=fy(),h.proxy=f,f.src=o,f.listener=h,o.addEventListener)uy||(T=k),T===void 0&&(T=!1),o.addEventListener(u.toString(),f,T);else if(o.attachEvent)o.attachEvent(vd(u.toString()),f);else if(o.addListener&&o.removeListener)o.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return h}function fy(){function o(h){return u.call(o.src,o.listener,h)}let u=py;return o}function _d(o,u,h,f,T){if(Array.isArray(u)){for(var S=0;S<u.length;S++)_d(o,u[S],h,f,T);return null}return h=Ma(h),o&&o[zr]?o.L(u,h,d(f)?!!f.capture:!!f,T):gd(o,u,h,!0,f,T)}function yd(o,u,h,f,T){if(Array.isArray(u))for(var S=0;S<u.length;S++)yd(o,u[S],h,f,T);else f=d(f)?!!f.capture:!!f,h=Ma(h),o&&o[zr]?(o=o.i,u=String(u).toString(),u in o.g&&(S=o.g[u],h=Pa(S,h,f,T),-1<h&&(ms(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete o.g[u],o.h--)))):o&&(o=xa(o))&&(u=o.g[u.toString()],o=-1,u&&(o=Pa(u,h,f,T)),(h=-1<o?u[o]:null)&&Na(h))}function Na(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[zr])Ra(u.i,o);else{var h=o.type,f=o.proxy;u.removeEventListener?u.removeEventListener(h,f,o.capture):u.detachEvent?u.detachEvent(vd(h),f):u.addListener&&u.removeListener&&u.removeListener(f),(h=xa(u))?(Ra(h,o),h.h==0&&(h.src=null,u[Da]=null)):ms(o)}}}function vd(o){return o in ka?ka[o]:ka[o]="on"+o}function py(o,u){if(o.da)o=!0;else{u=new $r(u,this);var h=o.listener,f=o.ha||o.src;o.fa&&Na(o),o=h.call(f,u)}return o}function xa(o){return o=o[Da],o instanceof gs?o:null}var Oa="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ma(o){return typeof o=="function"?o:(o[Oa]||(o[Oa]=function(u){return o.handleEvent(u)}),o[Oa])}function Re(){Ht.call(this),this.i=new gs(this),this.M=this,this.F=null}D(Re,Ht),Re.prototype[zr]=!0,Re.prototype.removeEventListener=function(o,u,h,f){yd(this,o,u,h,f)};function Oe(o,u){var h,f=o.F;if(f)for(h=[];f;f=f.F)h.push(f);if(o=o.M,f=u.type||u,typeof u=="string")u=new Ce(u,o);else if(u instanceof Ce)u.target=u.target||o;else{var T=u;u=new Ce(f,o),I(u,T)}if(T=!0,h)for(var S=h.length-1;0<=S;S--){var k=u.g=h[S];T=_s(k,f,!0,u)&&T}if(k=u.g=o,T=_s(k,f,!0,u)&&T,T=_s(k,f,!1,u)&&T,h)for(S=0;S<h.length;S++)k=u.g=h[S],T=_s(k,f,!1,u)&&T}Re.prototype.N=function(){if(Re.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var h=o.g[u],f=0;f<h.length;f++)ms(h[f]);delete o.g[u],o.h--}}this.F=null},Re.prototype.K=function(o,u,h,f){return this.i.add(String(o),u,!1,h,f)},Re.prototype.L=function(o,u,h,f){return this.i.add(String(o),u,!0,h,f)};function _s(o,u,h,f){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var T=!0,S=0;S<u.length;++S){var k=u[S];if(k&&!k.da&&k.capture==h){var ne=k.listener,be=k.ha||k.src;k.fa&&Ra(o.i,k),T=ne.call(be,f)!==!1&&T}}return T&&!f.defaultPrevented}function Id(o,u,h){if(typeof o=="function")h&&(o=A(o,h));else if(o&&typeof o.handleEvent=="function")o=A(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(o,u||0)}function wd(o){o.g=Id(()=>{o.g=null,o.i&&(o.i=!1,wd(o))},o.l);let u=o.h;o.h=null,o.m.apply(null,u)}class my extends Ht{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:wd(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(o){Ht.call(this),this.h=o,this.g={}}D(qr,Ht);var Ed=[];function Td(o){ye(o.g,function(u,h){this.g.hasOwnProperty(h)&&Na(u)},o),o.g={}}qr.prototype.N=function(){qr.aa.N.call(this),Td(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var La=c.JSON.stringify,gy=c.JSON.parse,_y=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function Fa(){}Fa.prototype.h=null;function bd(o){return o.h||(o.h=o.i())}function Ad(){}var Gr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Va(){Ce.call(this,"d")}D(Va,Ce);function Ua(){Ce.call(this,"c")}D(Ua,Ce);var mn={},Sd=null;function ys(){return Sd=Sd||new Re}mn.La="serverreachability";function Cd(o){Ce.call(this,mn.La,o)}D(Cd,Ce);function Hr(o){let u=ys();Oe(u,new Cd(u))}mn.STAT_EVENT="statevent";function Rd(o,u){Ce.call(this,mn.STAT_EVENT,o),this.stat=u}D(Rd,Ce);function Me(o){let u=ys();Oe(u,new Rd(u,o))}mn.Ma="timingevent";function Pd(o,u){Ce.call(this,mn.Ma,o),this.size=u}D(Pd,Ce);function Wr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},u)}function Kr(){this.g=!0}Kr.prototype.xa=function(){this.g=!1};function yy(o,u,h,f,T,S){o.info(function(){if(o.g)if(S)for(var k="",ne=S.split("&"),be=0;be<ne.length;be++){var X=ne[be].split("=");if(1<X.length){var Pe=X[0];X=X[1];var De=Pe.split("_");k=2<=De.length&&De[1]=="type"?k+(Pe+"="+X+"&"):k+(Pe+"=redacted&")}}else k=null;else k=S;return"XMLHTTP REQ ("+f+") [attempt "+T+"]: "+u+`
`+h+`
`+k})}function vy(o,u,h,f,T,S,k){o.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+T+"]: "+u+`
`+h+`
`+S+" "+k})}function Qn(o,u,h,f){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+wy(o,h)+(f?" "+f:"")})}function Iy(o,u){o.info(function(){return"TIMEOUT: "+u})}Kr.prototype.info=function(){};function wy(o,u){if(!o.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var f=h[o];if(!(2>f.length)){var T=f[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var k=1;k<T.length;k++)T[k]=""}}}}return La(h)}catch{return u}}var vs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ja;function Is(){}D(Is,Fa),Is.prototype.g=function(){return new XMLHttpRequest},Is.prototype.i=function(){return{}},ja=new Is;function Wt(o,u,h,f){this.j=o,this.i=u,this.l=h,this.R=f||1,this.U=new qr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kd}function kd(){this.i=null,this.g="",this.h=!1}var Nd={},Ba={};function $a(o,u,h){o.L=1,o.v=bs(Ct(u)),o.m=h,o.P=!0,xd(o,null)}function xd(o,u){o.F=Date.now(),ws(o),o.A=Ct(o.v);var h=o.A,f=o.R;Array.isArray(f)||(f=[String(f)]),Wd(h.i,"t",f),o.C=0,h=o.j.J,o.h=new kd,o.g=df(o.j,h?u:null,!o.m),0<o.O&&(o.M=new my(A(o.Y,o,o.g),o.O)),u=o.U,h=o.g,f=o.ca;var T="readystatechange";Array.isArray(T)||(T&&(Ed[0]=T.toString()),T=Ed);for(var S=0;S<T.length;S++){var k=md(h,T[S],f||u.handleEvent,!1,u.h||u);if(!k)break;u.g[k.key]=k}u=o.H?m(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Hr(),yy(o.i,o.u,o.A,o.l,o.R,o.m)}Wt.prototype.ca=function(o){o=o.target;let u=this.M;u&&Rt(o)==3?u.j():this.Y(o)},Wt.prototype.Y=function(o){try{if(o==this.g)e:{let De=Rt(this.g);var u=this.g.Ba();let Xn=this.g.Z();if(!(3>De)&&(De!=3||this.g&&(this.h.h||this.g.oa()||ef(this.g)))){this.J||De!=4||u==7||(u==8||0>=Xn?Hr(3):Hr(2)),za(this);var h=this.g.Z();this.X=h;t:if(Od(this)){var f=ef(this.g);o="";var T=f.length,S=Rt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),Qr(this);var k="";break t}this.h.i=new c.TextDecoder}for(u=0;u<T;u++)this.h.h=!0,o+=this.h.i.decode(f[u],{stream:!(S&&u==T-1)});f.length=0,this.h.g+=o,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=h==200,vy(this.i,this.u,this.A,this.l,this.R,De,h),this.o){if(this.T&&!this.K){t:{if(this.g){var ne,be=this.g;if((ne=be.g?be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(ne)){var X=ne;break t}}X=null}if(h=X)Qn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qa(this,h);else{this.o=!1,this.s=3,Me(12),gn(this),Qr(this);break e}}if(this.P){h=!0;let rt;for(;!this.J&&this.C<k.length;)if(rt=Ey(this,k),rt==Ba){De==4&&(this.s=4,Me(14),h=!1),Qn(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==Nd){this.s=4,Me(15),Qn(this.i,this.l,k,"[Invalid Chunk]"),h=!1;break}else Qn(this.i,this.l,rt,null),qa(this,rt);if(Od(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||k.length!=0||this.h.h||(this.s=1,Me(16),h=!1),this.o=this.o&&h,!h)Qn(this.i,this.l,k,"[Invalid Chunked Response]"),gn(this),Qr(this);else if(0<k.length&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.ba&&!Pe.M&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),Ya(Pe),Pe.M=!0,Me(11))}}else Qn(this.i,this.l,k,null),qa(this,k);De==4&&gn(this),this.o&&!this.J&&(De==4?cf(this.j,this):(this.o=!1,ws(this)))}else Uy(this.g),h==400&&0<k.indexOf("Unknown SID")?(this.s=3,Me(12)):(this.s=0,Me(13)),gn(this),Qr(this)}}}catch{}finally{}};function Od(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Ey(o,u){var h=o.C,f=u.indexOf(`
`,h);return f==-1?Ba:(h=Number(u.substring(h,f)),isNaN(h)?Nd:(f+=1,f+h>u.length?Ba:(u=u.slice(f,f+h),o.C=f+h,u)))}Wt.prototype.cancel=function(){this.J=!0,gn(this)};function ws(o){o.S=Date.now()+o.I,Md(o,o.I)}function Md(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Wr(A(o.ba,o),u)}function za(o){o.B&&(c.clearTimeout(o.B),o.B=null)}Wt.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(Iy(this.i,this.A),this.L!=2&&(Hr(),Me(17)),gn(this),this.s=2,Qr(this)):Md(this,this.S-o)};function Qr(o){o.j.G==0||o.J||cf(o.j,o)}function gn(o){za(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Td(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function qa(o,u){try{var h=o.j;if(h.G!=0&&(h.g==o||Ga(h.h,o))){if(!o.K&&Ga(h.h,o)&&h.G==3){try{var f=h.Da.g.parse(u)}catch{f=null}if(Array.isArray(f)&&f.length==3){var T=f;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)Ps(h),Cs(h);else break e;Qa(h),Me(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=Wr(A(h.Za,h),6e3));if(1>=Vd(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else yn(h,11)}else if((o.K||h.g==o)&&Ps(h),!Q(u))for(T=h.Da.g.parse(u),u=0;u<T.length;u++){let X=T[u];if(h.T=X[0],X=X[1],h.G==2)if(X[0]=="c"){h.K=X[1],h.ia=X[2];let Pe=X[3];Pe!=null&&(h.la=Pe,h.j.info("VER="+h.la));let De=X[4];De!=null&&(h.Aa=De,h.j.info("SVER="+h.Aa));let Xn=X[5];Xn!=null&&typeof Xn=="number"&&0<Xn&&(f=1.5*Xn,h.L=f,h.j.info("backChannelRequestTimeoutMs_="+f)),f=h;let rt=o.g;if(rt){let ks=rt.g?rt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ks){var S=f.h;S.g||ks.indexOf("spdy")==-1&&ks.indexOf("quic")==-1&&ks.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Ha(S,S.h),S.h=null))}if(f.D){let Ja=rt.g?rt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ja&&(f.ya=Ja,se(f.I,f.D,Ja))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),f=h;var k=o;if(f.qa=hf(f,f.J?f.ia:null,f.W),k.K){Ud(f.h,k);var ne=k,be=f.L;be&&(ne.I=be),ne.B&&(za(ne),ws(ne)),f.g=k}else of(f);0<h.i.length&&Rs(h)}else X[0]!="stop"&&X[0]!="close"||yn(h,7);else h.G==3&&(X[0]=="stop"||X[0]=="close"?X[0]=="stop"?yn(h,7):Ka(h):X[0]!="noop"&&h.l&&h.l.ta(X),h.v=0)}}Hr(4)}catch{}}var Ty=class{constructor(o,u){this.g=o,this.map=u}};function Ld(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fd(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Vd(o){return o.h?1:o.g?o.g.size:0}function Ga(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Ha(o,u){o.g?o.g.add(u):o.h=u}function Ud(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Ld.prototype.cancel=function(){if(this.i=jd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function jd(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(let h of o.g.values())u=u.concat(h.D);return u}return x(o.i)}function by(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(l(o)){for(var u=[],h=o.length,f=0;f<h;f++)u.push(o[f]);return u}u=[],h=0;for(f in o)u[h++]=o[f];return u}function Ay(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(l(o)||typeof o=="string"){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}u=[],h=0;for(let f in o)u[h++]=f;return u}}}function Bd(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(l(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var h=Ay(o),f=by(o),T=f.length,S=0;S<T;S++)u.call(void 0,f[S],h&&h[S],o)}var $d=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sy(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var f=o[h].indexOf("="),T=null;if(0<=f){var S=o[h].substring(0,f);T=o[h].substring(f+1)}else S=o[h];u(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function _n(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof _n){this.h=o.h,Es(this,o.j),this.o=o.o,this.g=o.g,Ts(this,o.s),this.l=o.l;var u=o.i,h=new Xr;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),zd(this,h),this.m=o.m}else o&&(u=String(o).match($d))?(this.h=!1,Es(this,u[1]||"",!0),this.o=Yr(u[2]||""),this.g=Yr(u[3]||"",!0),Ts(this,u[4]),this.l=Yr(u[5]||"",!0),zd(this,u[6]||"",!0),this.m=Yr(u[7]||"")):(this.h=!1,this.i=new Xr(null,this.h))}_n.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Jr(u,qd,!0),":");var h=this.g;return(h||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Jr(u,qd,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Jr(h,h.charAt(0)=="/"?Py:Ry,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Jr(h,ky)),o.join("")};function Ct(o){return new _n(o)}function Es(o,u,h){o.j=h?Yr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Ts(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function zd(o,u,h){u instanceof Xr?(o.i=u,Ny(o.i,o.h)):(h||(u=Jr(u,Dy)),o.i=new Xr(u,o.h))}function se(o,u,h){o.i.set(u,h)}function bs(o){return se(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Yr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Jr(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,Cy),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Cy(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var qd=/[#\/\?@]/g,Ry=/[#\?:]/g,Py=/[#\?]/g,Dy=/[#\?@]/g,ky=/#/g;function Xr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Kt(o){o.g||(o.g=new Map,o.h=0,o.i&&Sy(o.i,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}n=Xr.prototype,n.add=function(o,u){Kt(this),this.i=null,o=Yn(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(u),this.h+=1,this};function Gd(o,u){Kt(o),u=Yn(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Hd(o,u){return Kt(o),u=Yn(o,u),o.g.has(u)}n.forEach=function(o,u){Kt(this),this.g.forEach(function(h,f){h.forEach(function(T){o.call(u,T,f,this)},this)},this)},n.na=function(){Kt(this);let o=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let f=0;f<u.length;f++){let T=o[f];for(let S=0;S<T.length;S++)h.push(u[f])}return h},n.V=function(o){Kt(this);let u=[];if(typeof o=="string")Hd(this,o)&&(u=u.concat(this.g.get(Yn(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)u=u.concat(o[h])}return u},n.set=function(o,u){return Kt(this),this.i=null,o=Yn(this,o),Hd(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Wd(o,u,h){Gd(o,u),0<h.length&&(o.i=null,o.g.set(Yn(o,u),x(h)),o.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var f=u[h];let S=encodeURIComponent(String(f)),k=this.V(f);for(f=0;f<k.length;f++){var T=S;k[f]!==""&&(T+="="+encodeURIComponent(String(k[f]))),o.push(T)}}return this.i=o.join("&")};function Yn(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Ny(o,u){u&&!o.j&&(Kt(o),o.i=null,o.g.forEach(function(h,f){var T=f.toLowerCase();f!=T&&(Gd(this,f),Wd(this,T,h))},o)),o.j=u}function xy(o,u){let h=new Kr;if(c.Image){let f=new Image;f.onload=C(Qt,h,"TestLoadImage: loaded",!0,u,f),f.onerror=C(Qt,h,"TestLoadImage: error",!1,u,f),f.onabort=C(Qt,h,"TestLoadImage: abort",!1,u,f),f.ontimeout=C(Qt,h,"TestLoadImage: timeout",!1,u,f),c.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=o}else u(!1)}function Oy(o,u){let h=new Kr,f=new AbortController,T=setTimeout(()=>{f.abort(),Qt(h,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:f.signal}).then(S=>{clearTimeout(T),S.ok?Qt(h,"TestPingServer: ok",!0,u):Qt(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(T),Qt(h,"TestPingServer: error",!1,u)})}function Qt(o,u,h,f,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),f(h)}catch{}}function My(){this.g=new _y}function Ly(o,u,h){let f=h||"";try{Bd(o,function(T,S){let k=T;d(T)&&(k=La(T)),u.push(f+S+"="+encodeURIComponent(k))})}catch(T){throw u.push(f+"type="+encodeURIComponent("_badmap")),T}}function Zr(o){this.l=o.Ub||null,this.j=o.eb||!1}D(Zr,Fa),Zr.prototype.g=function(){return new As(this.l,this.j)},Zr.prototype.i=function(o){return function(){return o}}({});function As(o,u){Re.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(As,Re),n=As.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,ti(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ei(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kd(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kd(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?ei(this):ti(this),this.readyState==3&&Kd(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,ei(this))},n.Qa=function(o){this.g&&(this.response=o,ei(this))},n.ga=function(){this.g&&ei(this)};function ei(o){o.readyState=4,o.l=null,o.j=null,o.v=null,ti(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join(`\r
`)};function ti(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(As.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Qd(o){let u="";return ye(o,function(h,f){u+=f,u+=":",u+=h,u+=`\r
`}),u}function Wa(o,u,h){e:{for(f in h){var f=!1;break e}f=!0}f||(h=Qd(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):se(o,u,h))}function ae(o){Re.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(ae,Re);var Fy=/^https?$/i,Vy=["POST","PUT"];n=ae.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,h,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ja.g(),this.v=this.o?bd(this.o):bd(ja),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(S){Yd(this,S);return}if(o=h||"",h=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var T in f)h.set(T,f[T]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let S of f.keys())h.set(S,f.get(S));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),T=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Vy,u,void 0))||f||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,k]of h)this.g.setRequestHeader(S,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zd(this),this.u=!0,this.g.send(o),this.u=!1}catch(S){Yd(this,S)}};function Yd(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Jd(o),Ss(o)}function Jd(o){o.A||(o.A=!0,Oe(o,"complete"),Oe(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Oe(this,"complete"),Oe(this,"abort"),Ss(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ss(this,!0)),ae.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Xd(this):this.bb())},n.bb=function(){Xd(this)};function Xd(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Rt(o)!=4||o.Z()!=2)){if(o.u&&Rt(o)==4)Id(o.Ea,0,o);else if(Oe(o,"readystatechange"),Rt(o)==4){o.h=!1;try{let k=o.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var f;if(f=k===0){var T=String(o.D).match($d)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),f=!Fy.test(T?T.toLowerCase():"")}h=f}if(h)Oe(o,"complete"),Oe(o,"success");else{o.m=6;try{var S=2<Rt(o)?o.g.statusText:""}catch{S=""}o.l=S+" ["+o.Z()+"]",Jd(o)}}finally{Ss(o)}}}}function Ss(o,u){if(o.g){Zd(o);let h=o.g,f=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||Oe(o,"ready");try{h.onreadystatechange=f}catch{}}}function Zd(o){o.I&&(c.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function Rt(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<Rt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),gy(u)}};function ef(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Uy(o){let u={};o=(o.g&&2<=Rt(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<o.length;f++){if(Q(o[f]))continue;var h=w(o[f]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=u[T]||[];u[T]=S,S.push(h)}E(u,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ni(o,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||u}function tf(o){this.Aa=0,this.i=[],this.j=new Kr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ni("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ni("baseRetryDelayMs",5e3,o),this.cb=ni("retryDelaySeedMs",1e4,o),this.Wa=ni("forwardChannelMaxRetries",2,o),this.wa=ni("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Ld(o&&o.concurrentRequestLimit),this.Da=new My,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=tf.prototype,n.la=8,n.G=1,n.connect=function(o,u,h,f){Me(0),this.W=o,this.H=u||{},h&&f!==void 0&&(this.H.OSID=h,this.H.OAID=f),this.F=this.X,this.I=hf(this,null,this.W),Rs(this)};function Ka(o){if(nf(o),o.G==3){var u=o.U++,h=Ct(o.I);if(se(h,"SID",o.K),se(h,"RID",u),se(h,"TYPE","terminate"),ri(o,h),u=new Wt(o,o.j,u),u.L=2,u.v=bs(Ct(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=u.v,h=!0),h||(u.g=df(u.j,null),u.g.ea(u.v)),u.F=Date.now(),ws(u)}lf(o)}function Cs(o){o.g&&(Ya(o),o.g.cancel(),o.g=null)}function nf(o){Cs(o),o.u&&(c.clearTimeout(o.u),o.u=null),Ps(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function Rs(o){if(!Fd(o.h)&&!o.s){o.s=!0;var u=o.Ga;jr||pd(),Br||(jr(),Br=!0),Ca.add(u,o),o.B=0}}function jy(o,u){return Vd(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Wr(A(o.Ga,o,u),uf(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let T=new Wt(this,this.j,o),S=this.o;if(this.S&&(S?(S=m(S),I(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var f=this.i[h];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(u+=f,4096<u){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=sf(this,T,u),h=Ct(this.I),se(h,"RID",o),se(h,"CVER",22),this.D&&se(h,"X-HTTP-Session-Id",this.D),ri(this,h),S&&(this.O?u="headers="+encodeURIComponent(String(Qd(S)))+"&"+u:this.m&&Wa(h,this.m,S)),Ha(this.h,T),this.Ua&&se(h,"TYPE","init"),this.P?(se(h,"$req",u),se(h,"SID","null"),T.T=!0,$a(T,h,null)):$a(T,h,u),this.G=2}}else this.G==3&&(o?rf(this,o):this.i.length==0||Fd(this.h)||rf(this))};function rf(o,u){var h;u?h=u.l:h=o.U++;let f=Ct(o.I);se(f,"SID",o.K),se(f,"RID",h),se(f,"AID",o.T),ri(o,f),o.m&&o.o&&Wa(f,o.m,o.o),h=new Wt(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),u&&(o.i=u.D.concat(o.i)),u=sf(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Ha(o.h,h),$a(h,f,u)}function ri(o,u){o.H&&ye(o.H,function(h,f){se(u,f,h)}),o.l&&Bd({},function(h,f){se(u,f,h)})}function sf(o,u,h){h=Math.min(o.i.length,h);var f=o.l?A(o.l.Na,o.l,o):null;e:{var T=o.i;let S=-1;for(;;){let k=["count="+h];S==-1?0<h?(S=T[0].g,k.push("ofs="+S)):S=0:k.push("ofs="+S);let ne=!0;for(let be=0;be<h;be++){let X=T[be].g,Pe=T[be].map;if(X-=S,0>X)S=Math.max(0,T[be].g-100),ne=!1;else try{Ly(Pe,k,"req"+X+"_")}catch{f&&f(Pe)}}if(ne){f=k.join("&");break e}}}return o=o.i.splice(0,h),u.D=o,f}function of(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;jr||pd(),Br||(jr(),Br=!0),Ca.add(u,o),o.v=0}}function Qa(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Wr(A(o.Fa,o),uf(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,af(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Wr(A(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Me(10),Cs(this),af(this))};function Ya(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function af(o){o.g=new Wt(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=Ct(o.qa);se(u,"RID","rpc"),se(u,"SID",o.K),se(u,"AID",o.T),se(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&se(u,"TO",o.ja),se(u,"TYPE","xmlhttp"),ri(o,u),o.m&&o.o&&Wa(u,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=bs(Ct(u)),h.m=null,h.P=!0,xd(h,o)}n.Za=function(){this.C!=null&&(this.C=null,Cs(this),Qa(this),Me(19))};function Ps(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function cf(o,u){var h=null;if(o.g==u){Ps(o),Ya(o),o.g=null;var f=2}else if(Ga(o.h,u))h=u.D,Ud(o.h,u),f=1;else return;if(o.G!=0){if(u.o)if(f==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var T=o.B;f=ys(),Oe(f,new Pd(f,h)),Rs(o)}else of(o);else if(T=u.s,T==3||T==0&&0<u.X||!(f==1&&jy(o,u)||f==2&&Qa(o)))switch(h&&0<h.length&&(u=o.h,u.i=u.i.concat(h)),T){case 1:yn(o,5);break;case 4:yn(o,10);break;case 3:yn(o,6);break;default:yn(o,2)}}}function uf(o,u){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*u}function yn(o,u){if(o.j.info("Error code "+u),u==2){var h=A(o.fb,o),f=o.Xa;let T=!f;f=new _n(f||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Es(f,"https"),bs(f),T?xy(f.toString(),h):Oy(f.toString(),h)}else Me(2);o.G=0,o.l&&o.l.sa(u),lf(o),nf(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function lf(o){if(o.G=0,o.ka=[],o.l){let u=jd(o.h);(u.length!=0||o.i.length!=0)&&(N(o.ka,u),N(o.ka,o.i),o.h.i.length=0,x(o.i),o.i.length=0),o.l.ra()}}function hf(o,u,h){var f=h instanceof _n?Ct(h):new _n(h);if(f.g!="")u&&(f.g=u+"."+f.g),Ts(f,f.s);else{var T=c.location;f=T.protocol,u=u?u+"."+T.hostname:T.hostname,T=+T.port;var S=new _n(null);f&&Es(S,f),u&&(S.g=u),T&&Ts(S,T),h&&(S.l=h),f=S}return h=o.D,u=o.ya,h&&u&&se(f,h,u),se(f,"VER",o.la),ri(o,f),f}function df(o,u,h){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new ae(new Zr({eb:h})):new ae(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ff(){}n=ff.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ds(){}Ds.prototype.g=function(o,u){return new He(o,u)};function He(o,u){Re.call(this),this.g=new tf(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!Q(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!Q(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Jn(this)}D(He,Re),He.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},He.prototype.close=function(){Ka(this.g)},He.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=La(o),o=h);u.i.push(new Ty(u.Ya++,o)),u.G==3&&Rs(u)},He.prototype.N=function(){this.g.l=null,delete this.j,Ka(this.g),delete this.g,He.aa.N.call(this)};function pf(o){Va.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(let h in u){o=h;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}D(pf,Va);function mf(){Ua.call(this),this.status=1}D(mf,Ua);function Jn(o){this.g=o}D(Jn,ff),Jn.prototype.ua=function(){Oe(this.g,"a")},Jn.prototype.ta=function(o){Oe(this.g,new pf(o))},Jn.prototype.sa=function(o){Oe(this.g,new mf)},Jn.prototype.ra=function(){Oe(this.g,"b")},Ds.prototype.createWebChannel=Ds.prototype.g,He.prototype.send=He.prototype.o,He.prototype.open=He.prototype.m,He.prototype.close=He.prototype.close,Al=Bt.createWebChannelTransport=function(){return new Ds},bl=Bt.getStatEventTarget=function(){return ys()},Tl=Bt.Event=mn,$o=Bt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vs.NO_ERROR=0,vs.TIMEOUT=8,vs.HTTP_ERROR=6,Xi=Bt.ErrorCode=vs,Dd.COMPLETE="complete",El=Bt.EventType=Dd,Ad.EventType=Gr,Gr.OPEN="a",Gr.CLOSE="b",Gr.ERROR="c",Gr.MESSAGE="d",Re.prototype.listen=Re.prototype.K,Ir=Bt.WebChannel=Ad,wl=Bt.FetchXmlHttpFactory=Zr,ae.prototype.listenOnce=ae.prototype.L,ae.prototype.getLastError=ae.prototype.Ka,ae.prototype.getLastErrorCode=ae.prototype.Ba,ae.prototype.getStatus=ae.prototype.Z,ae.prototype.getResponseJson=ae.prototype.Oa,ae.prototype.getResponseText=ae.prototype.oa,ae.prototype.send=ae.prototype.ea,ae.prototype.setWithCredentials=ae.prototype.Ha,Il=Bt.XhrIo=ae}).apply(typeof Bo<"u"?Bo:typeof self<"u"?self:typeof window<"u"?window:{});var vg="@firebase/firestore";var Ee=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ee.UNAUTHENTICATED=new Ee(null),Ee.GOOGLE_CREDENTIALS=new Ee("google-credentials-uid"),Ee.FIRST_PARTY=new Ee("first-party-uid"),Ee.MOCK_USER=new Ee("mock-user");var Vr="10.13.1";var jn=new tn("@firebase/firestore");function Zi(){return jn.logLevel}function M(n,...e){if(jn.logLevel<=H.DEBUG){let t=e.map(Wh);jn.debug(`Firestore (${Vr}): ${n}`,...t)}}function Bn(n,...e){if(jn.logLevel<=H.ERROR){let t=e.map(Wh);jn.error(`Firestore (${Vr}): ${n}`,...t)}}function Ko(n,...e){if(jn.logLevel<=H.WARN){let t=e.map(Wh);jn.warn(`Firestore (${Vr}): ${n}`,...t)}}function Wh(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function W(n="Unexpected state"){let e=`FIRESTORE (${Vr}) INTERNAL ASSERTION FAILED: `+n;throw Bn(e),new Error(e)}function _e(n,e){n||W()}function ie(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends Ue{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var $t=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Qo=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Pl=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ee.UNAUTHENTICATED))}shutdown(){}},Dl=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},kl=class{constructor(e){this.t=e,this.currentUser=Ee.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new $t;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $t,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let l=s;e.enqueueRetryable(()=>y(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{M("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(M("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $t)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(M("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new Qo(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new Ee(e)}},Nl=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ee.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},xl=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Nl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ee.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ol=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ml=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=s=>{s.error!=null&&M("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.R;return this.R=s.token,M("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{M("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):M("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_e(typeof t.token=="string"),this.R=t.token,new Ol(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function ib(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Yo=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=ib(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function br(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var xe=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ue=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new xe(0,0))}static max(){return new n(new xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Jo=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&W(),r===void 0?r=e.length-t:r>e.length-t&&W(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},pe=class n extends Jo{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},sb=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qe=class n extends Jo{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return sb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new F(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new F(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new F(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(pe.fromString(e))}static fromName(e){return new n(pe.fromString(e).popFirst(5))}static empty(){return new n(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new pe(e.slice()))}};var Ll=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Ll.UNKNOWN_ID=-1;function ob(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new xe(t+1,0):new xe(t,r));return new $n(i,z.empty(),e)}function ab(n){return new $n(n.readTime,n.key,-1)}var $n=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ue.min(),z.empty(),-1)}static max(){return new n(ue.max(),z.empty(),-1)}};function cb(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var ub="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fl=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Bg(n){return y(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==ub)throw n;M("LocalStore","Unexpectedly lost primary lease")})}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&W(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&t()},l=>r(l))}),a=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,a=new Array(s),c=0;for(let l=0;l<s;l++){let d=l;t(e[d]).next(p=>{a[d]=p,++c,c===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function lb(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ga(n){return n.name==="IndexedDbTransactionError"}var hb=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Kh(n){return n==null}function ss(n){return n===0&&1/n==-1/0}function db(n){return typeof n=="number"&&Number.isInteger(n)&&!ss(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var fb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],XR=[...fb,"documentOverlays"],pb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mb=pb,gb=[...mb,"indexConfiguration","indexState","indexEntries"];var ZR=[...gb,"globals"];function Ig(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function us(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $g(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ye=class n{constructor(e,t){this.comparator=e,this.root=t||bt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Er(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Er(this.root,e,this.comparator,!1)}getReverseIterator(){return new Er(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Er(this.root,e,this.comparator,!0)}},Er=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},bt=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw W();let e=this.left.check();if(e!==this.right.check())throw W();return e+(this.isRed()?0:1)}};bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw W()}get value(){throw W()}get color(){throw W()}get left(){throw W()}get right(){throw W()}copy(e,t,r,i,s){return this}insert(e,t,r){return new bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Be=class n{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xo(this.data.getIterator())}getIteratorFrom(e){return new Xo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Xo=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Tt=class n{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new n([])}unionWith(e){let t=new Be(Qe.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return br(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Vl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var qt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Vl("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};qt.EMPTY_BYTE_STRING=new qt("");var _b=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hn(n){if(_e(!!n),typeof n=="string"){let e=0,t=_b.exec(n);if(_e(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fe(n.seconds),nanos:fe(n.nanos)}}function fe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ar(n){return typeof n=="string"?qt.fromBase64String(n):qt.fromUint8Array(n)}function Qh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function zg(n){let e=n.mapValue.fields.__previous_value__;return Qh(e)?zg(e):e}function Zo(n){let e=hn(n.mapValue.fields.__local_write_time__.timestampValue);return new xe(e.seconds,e.nanos)}var Ul=class{constructor(e,t,r,i,s,a,c,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d}},jl=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var zo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Sr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qh(n)?4:Gg(n)?9007199254740991:qg(n)?10:11:W()}function At(n,e){if(n===e)return!0;let t=Sr(n);if(t!==Sr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zo(n).isEqual(Zo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let a=hn(i.timestampValue),c=hn(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Ar(i.bytesValue).isEqual(Ar(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return fe(i.geoPointValue.latitude)===fe(s.geoPointValue.latitude)&&fe(i.geoPointValue.longitude)===fe(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return fe(i.integerValue)===fe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let a=fe(i.doubleValue),c=fe(s.doubleValue);return a===c?ss(a)===ss(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return br(n.arrayValue.values||[],e.arrayValue.values||[],At);case 10:case 11:return function(i,s){let a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Ig(a)!==Ig(c))return!1;for(let l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!At(a[l],c[l])))return!1;return!0}(n,e);default:return W()}}function os(n,e){return(n.values||[]).find(t=>At(t,e))!==void 0}function Cr(n,e){if(n===e)return 0;let t=Sr(n),r=Sr(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(s,a){let c=fe(s.integerValue||s.doubleValue),l=fe(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return wg(n.timestampValue,e.timestampValue);case 4:return wg(Zo(n),Zo(e));case 5:return re(n.stringValue,e.stringValue);case 6:return function(s,a){let c=Ar(s),l=Ar(a);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){let c=s.split("/"),l=a.split("/");for(let d=0;d<c.length&&d<l.length;d++){let p=re(c[d],l[d]);if(p!==0)return p}return re(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){let c=re(fe(s.latitude),fe(a.latitude));return c!==0?c:re(fe(s.longitude),fe(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Eg(n.arrayValue,e.arrayValue);case 10:return function(s,a){var c,l,d,p;let v=s.fields||{},A=a.fields||{},C=(c=v.value)===null||c===void 0?void 0:c.arrayValue,D=(l=A.value)===null||l===void 0?void 0:l.arrayValue,x=re(((d=C?.values)===null||d===void 0?void 0:d.length)||0,((p=D?.values)===null||p===void 0?void 0:p.length)||0);return x!==0?x:Eg(C,D)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===zo.mapValue&&a===zo.mapValue)return 0;if(s===zo.mapValue)return 1;if(a===zo.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),d=a.fields||{},p=Object.keys(d);l.sort(),p.sort();for(let v=0;v<l.length&&v<p.length;++v){let A=re(l[v],p[v]);if(A!==0)return A;let C=Cr(c[l[v]],d[p[v]]);if(C!==0)return C}return re(l.length,p.length)}(n.mapValue,e.mapValue);default:throw W()}}function wg(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=hn(n),r=hn(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function Eg(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Cr(t[i],r[i]);if(s)return s}return re(t.length,r.length)}function Rr(n){return Bl(n)}function Bl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=hn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ar(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Bl(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let a of r)s?s=!1:i+=",",i+=`${a}:${Bl(t.fields[a])}`;return i+"}"}(n.mapValue):W()}function $l(n){return!!n&&"integerValue"in n}function Yh(n){return!!n&&"arrayValue"in n}function Ho(n){return!!n&&"mapValue"in n}function qg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ts(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return us(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ts(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ts(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Gg(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Et=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ho(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ts(t)}setAll(e){let t=Qe.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=ts(a):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Ho(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return At(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ho(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){us(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(ts(this.value))}};function Hg(n){let e=[];return us(n.fields,(t,r)=>{let i=new Qe([t]);if(Ho(r)){let s=Hg(r.mapValue).fields;if(s.length===0)e.push(i);else for(let a of s)e.push(i.child(a))}else e.push(i)}),new Tt(e)}var Pr=class n{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new n(e,0,ue.min(),ue.min(),ue.min(),Et.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ue.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ue.min(),ue.min(),Et.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ue.min(),ue.min(),Et.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Dr=class{constructor(e,t){this.position=e,this.inclusive=t}};function Tg(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],a=n.position[i];if(s.field.isKeyField()?r=z.comparator(z.fromName(a.referenceValue),t.key):r=Cr(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function bg(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!At(n.position[t],e.position[t]))return!1;return!0}var kr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function yb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var ea=class{},Te=class n extends ea{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ql(e,t,r):t==="array-contains"?new Wl(e,r):t==="in"?new Kl(e,r):t==="not-in"?new Ql(e,r):t==="array-contains-any"?new Yl(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Gl(e,r):new Hl(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Cr(t,this.value)):t!==null&&Sr(this.value)===Sr(t)&&this.matchesComparison(Cr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},dn=class n extends ea{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Wg(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Wg(n){return n.op==="and"}function Kg(n){return vb(n)&&Wg(n)}function vb(n){for(let e of n.filters)if(e instanceof dn)return!1;return!0}function zl(n){if(n instanceof Te)return n.field.canonicalString()+n.op.toString()+Rr(n.value);if(Kg(n))return n.filters.map(e=>zl(e)).join(",");{let e=n.filters.map(t=>zl(t)).join(",");return`${n.op}(${e})`}}function Qg(n,e){return n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.field.isEqual(i.field)&&At(r.value,i.value)}(n,e):n instanceof dn?function(r,i){return i instanceof dn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&Qg(a,i.filters[c]),!0):!1}(n,e):void W()}function Yg(n){return n instanceof Te?function(t){return`${t.field.canonicalString()} ${t.op} ${Rr(t.value)}`}(n):n instanceof dn?function(t){return t.op.toString()+" {"+t.getFilters().map(Yg).join(" ,")+"}"}(n):"Filter"}var ql=class extends Te{constructor(e,t,r){super(e,t,r),this.key=z.fromName(r.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},Gl=class extends Te{constructor(e,t){super(e,"in",t),this.keys=Jg("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Hl=class extends Te{constructor(e,t){super(e,"not-in",t),this.keys=Jg("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Jg(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>z.fromName(r.referenceValue))}var Wl=class extends Te{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Yh(t)&&os(t.arrayValue,this.value)}},Kl=class extends Te{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&os(this.value.arrayValue,t)}},Ql=class extends Te{constructor(e,t){super(e,"not-in",t)}matches(e){if(os(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!os(this.value.arrayValue,t)}},Yl=class extends Te{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Yh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>os(this.value.arrayValue,r))}};var Jl=class{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ue=null}};function Ag(n,e=null,t=[],r=[],i=null,s=null,a=null){return new Jl(n,e,t,r,i,s,a)}function Jh(n){let e=ie(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>zl(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Kh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Rr(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Rr(r)).join(",")),e.ue=t}return e.ue}function Xh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yb(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Qg(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bg(n.startAt,e.startAt)&&bg(n.endAt,e.endAt)}var Nr=class{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Ib(n,e,t,r,i,s,a,c){return new Nr(n,e,t,r,i,s,a,c)}function wb(n){return new Nr(n)}function Sg(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Eb(n){return n.collectionGroup!==null}function ns(n){let e=ie(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Be(Qe.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new kr(s,r))}),t.has(Qe.keyField().canonicalString())||e.ce.push(new kr(Qe.keyField(),r))}return e.ce}function Vn(n){let e=ie(n);return e.le||(e.le=Tb(e,ns(n))),e.le}function Tb(n,e){if(n.limitType==="F")return Ag(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new kr(i.field,s)});let t=n.endAt?new Dr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Dr(n.startAt.position,n.startAt.inclusive):null;return Ag(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Xl(n,e,t){return new Nr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xg(n,e){return Xh(Vn(n),Vn(e))&&n.limitType===e.limitType}function Zg(n){return`${Jh(Vn(n))}|lt:${n.limitType}`}function es(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Yg(i)).join(", ")}]`),Kh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Rr(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Rr(i)).join(",")),`Target(${r})`}(Vn(n))}; limitType=${n.limitType})`}function Zh(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of ns(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,c,l){let d=Tg(a,c,l);return a.inclusive?d<=0:d<0}(r.startAt,ns(r),i)||r.endAt&&!function(a,c,l){let d=Tg(a,c,l);return a.inclusive?d>=0:d>0}(r.endAt,ns(r),i))}(n,e)}function bb(n){return(e,t)=>{let r=!1;for(let i of ns(n)){let s=Ab(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Ab(n,e,t){let r=n.field.isKeyField()?z.comparator(e.key,t.key):function(s,a,c){let l=a.data.field(s),d=c.data.field(s);return l!==null&&d!==null?Cr(l,d):W()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return W()}}var fn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return $g(this.inner)}size(){return this.innerSize}};var Sb=new Ye(z.comparator);function ta(){return Sb}var e_=new Ye(z.comparator);function qo(...n){let e=e_;for(let t of n)e=e.insert(t.key,t);return e}function t_(n){let e=e_;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Fn(){return rs()}function n_(){return rs()}function rs(){return new fn(n=>n.toString(),(n,e)=>n.isEqual(e))}var Cb=new Ye(z.comparator),Rb=new Be(z.comparator);function Ne(...n){let e=Rb;for(let t of n)e=e.add(t);return e}var Pb=new Be(re);function Db(){return Pb}function ed(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ss(e)?"-0":e}}function r_(n){return{integerValue:""+n}}function kb(n,e){return db(e)?r_(e):ed(n,e)}var xr=class{constructor(){this._=void 0}};function Nb(n,e,t){return n instanceof Or?function(i,s){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Qh(s)&&(s=zg(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof zn?s_(n,e):n instanceof qn?o_(n,e):function(i,s){let a=i_(i,s),c=Cg(a)+Cg(i.Pe);return $l(a)&&$l(i.Pe)?r_(c):ed(i.serializer,c)}(n,e)}function xb(n,e,t){return n instanceof zn?s_(n,e):n instanceof qn?o_(n,e):t}function i_(n,e){return n instanceof Mr?function(r){return $l(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Or=class extends xr{},zn=class extends xr{constructor(e){super(),this.elements=e}};function s_(n,e){let t=a_(e);for(let r of n.elements)t.some(i=>At(i,r))||t.push(r);return{arrayValue:{values:t}}}var qn=class extends xr{constructor(e){super(),this.elements=e}};function o_(n,e){let t=a_(e);for(let r of n.elements)t=t.filter(i=>!At(i,r));return{arrayValue:{values:t}}}var Mr=class extends xr{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Cg(n){return fe(n.integerValue||n.doubleValue)}function a_(n){return Yh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Ob(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof zn&&i instanceof zn||r instanceof qn&&i instanceof qn?br(r.elements,i.elements,At):r instanceof Mr&&i instanceof Mr?At(r.Pe,i.Pe):r instanceof Or&&i instanceof Or}(n.transform,e.transform)}var Zl=class{constructor(e,t){this.version=e,this.transformResults=t}},Un=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Wo(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Lr=class{};function c_(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new na(n.key,Un.none()):new Gn(n.key,n.data,Un.none());{let t=n.data,r=Et.empty(),i=new Be(Qe.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Gt(n.key,r,new Tt(i.toArray()),Un.none())}}function Mb(n,e,t){n instanceof Gn?function(i,s,a){let c=i.value.clone(),l=Pg(i.fieldTransforms,s,a.transformResults);c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Gt?function(i,s,a){if(!Wo(i.precondition,s))return void s.convertToUnknownDocument(a.version);let c=Pg(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(u_(i)),l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function is(n,e,t,r){return n instanceof Gn?function(s,a,c,l){if(!Wo(s.precondition,a))return c;let d=s.value.clone(),p=Dg(s.fieldTransforms,l,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Gt?function(s,a,c,l){if(!Wo(s.precondition,a))return c;let d=Dg(s.fieldTransforms,l,a),p=a.data;return p.setAll(u_(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(s,a,c){return Wo(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,e,t)}function Lb(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=i_(r.transform,i||null);s!=null&&(t===null&&(t=Et.empty()),t.set(r.field,s))}return t||null}function Rg(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&br(r,i,(s,a)=>Ob(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Gn=class extends Lr{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Gt=class extends Lr{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function u_(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Pg(n,e,t){let r=new Map;_e(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,xb(a,c,t[i]))}return r}function Dg(n,e,t){let r=new Map;for(let i of n){let s=i.transform,a=t.data.field(i.field);r.set(i.field,Nb(s,a,e))}return r}var na=class extends Lr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},eh=class extends Lr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var th=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Mb(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=is(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=is(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=n_();return this.mutations.forEach(i=>{let s=e.get(i.key),a=s.overlayedDocument,c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;let l=c_(a,c);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ne())}isEqual(e){return this.batchId===e.batchId&&br(this.mutations,e.mutations,(t,r)=>Rg(t,r))&&br(this.baseMutations,e.baseMutations,(t,r)=>Rg(t,r))}},nh=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){_e(e.mutations.length===r.length);let i=function(){return Cb}(),s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new n(e,t,r,i)}};var rh=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var he,Y;function Fb(n){switch(n){default:return W();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function Vb(n){if(n===void 0)return Bn("GRPC error has no .code"),R.UNKNOWN;switch(n){case he.OK:return R.OK;case he.CANCELLED:return R.CANCELLED;case he.UNKNOWN:return R.UNKNOWN;case he.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case he.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case he.INTERNAL:return R.INTERNAL;case he.UNAVAILABLE:return R.UNAVAILABLE;case he.UNAUTHENTICATED:return R.UNAUTHENTICATED;case he.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case he.NOT_FOUND:return R.NOT_FOUND;case he.ALREADY_EXISTS:return R.ALREADY_EXISTS;case he.PERMISSION_DENIED:return R.PERMISSION_DENIED;case he.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case he.ABORTED:return R.ABORTED;case he.OUT_OF_RANGE:return R.OUT_OF_RANGE;case he.UNIMPLEMENTED:return R.UNIMPLEMENTED;case he.DATA_LOSS:return R.DATA_LOSS;default:return W()}}(Y=he||(he={}))[Y.OK=0]="OK",Y[Y.CANCELLED=1]="CANCELLED",Y[Y.UNKNOWN=2]="UNKNOWN",Y[Y.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Y[Y.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Y[Y.NOT_FOUND=5]="NOT_FOUND",Y[Y.ALREADY_EXISTS=6]="ALREADY_EXISTS",Y[Y.PERMISSION_DENIED=7]="PERMISSION_DENIED",Y[Y.UNAUTHENTICATED=16]="UNAUTHENTICATED",Y[Y.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Y[Y.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Y[Y.ABORTED=10]="ABORTED",Y[Y.OUT_OF_RANGE=11]="OUT_OF_RANGE",Y[Y.UNIMPLEMENTED=12]="UNIMPLEMENTED",Y[Y.INTERNAL=13]="INTERNAL",Y[Y.UNAVAILABLE=14]="UNAVAILABLE",Y[Y.DATA_LOSS=15]="DATA_LOSS";var tP=new vl([4294967295,4294967295],0);var ih=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function sh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ub(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function jb(n,e){return sh(n,e.toTimestamp())}function Tr(n){return _e(!!n),ue.fromTimestamp(function(t){let r=hn(t);return new xe(r.seconds,r.nanos)}(n))}function l_(n,e){return oh(n,e).canonicalString()}function oh(n,e){let t=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Bb(n){let e=pe.fromString(n);return _e(Qb(e)),e}function ah(n,e){return l_(n.databaseId,e.path)}function $b(n){let e=Bb(n);return e.length===4?pe.emptyPath():qb(e)}function zb(n){return new pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qb(n){return _e(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function kg(n,e,t){return{name:ah(n,e),fields:t.value.mapValue.fields}}function Gb(n,e){let t;if(e instanceof Gn)t={update:kg(n,e.key,e.value)};else if(e instanceof na)t={delete:ah(n,e.key)};else if(e instanceof Gt)t={update:kg(n,e.key,e.data),updateMask:Kb(e.fieldMask)};else{if(!(e instanceof eh))return W();t={verify:ah(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){let c=a.transform;if(c instanceof Or)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof zn)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof qn)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Mr)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw W()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:jb(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:W()}(n,e.precondition)),t}function Hb(n,e){return n&&n.length>0?(_e(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?Tr(i.updateTime):Tr(s);return a.isEqual(ue.min())&&(a=Tr(s)),new Zl(a,i.transformResults||[])}(t,e))):[]}function Wb(n){let e=$b(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){_e(r===1);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(v){let A=h_(v);return A instanceof dn&&Kg(A)?A.getFilters():[A]}(t.where));let a=[];t.orderBy&&(a=function(v){return v.map(A=>function(D){return new kr(wr(D.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(A))}(t.orderBy));let c=null;t.limit&&(c=function(v){let A;return A=typeof v=="object"?v.value:v,Kh(A)?null:A}(t.limit));let l=null;t.startAt&&(l=function(v){let A=!!v.before,C=v.values||[];return new Dr(C,A)}(t.startAt));let d=null;return t.endAt&&(d=function(v){let A=!v.before,C=v.values||[];return new Dr(C,A)}(t.endAt)),Ib(e,i,a,s,c,"F",l,d)}function h_(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=wr(t.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=wr(t.unaryFilter.field);return Te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=wr(t.unaryFilter.field);return Te.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=wr(t.unaryFilter.field);return Te.create(a,"!=",{nullValue:"NULL_VALUE"});default:return W()}}(n):n.fieldFilter!==void 0?function(t){return Te.create(wr(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return W()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return dn.create(t.compositeFilter.filters.map(r=>h_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W()}}(t.compositeFilter.op))}(n):W()}function wr(n){return Qe.fromServerFormat(n.fieldPath)}function Kb(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Qb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ch=class{constructor(e){this.ct=e}};function Yb(n){let e=Wb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xl(e,e.limit,"L"):e}var ra=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(fe(e.integerValue));else if("doubleValue"in e){let r=fe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),ss(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=hn(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ar(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Gg(e)?this.dt(t,Number.MAX_SAFE_INTEGER):qg(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):W()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let a="value",c=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(fe(c)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),z.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};ra.vt=new ra;var uh=class{constructor(){this.un=new lh}addToCollectionParentIndex(e,t){return this.un.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve($n.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve($n.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},lh=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Be(pe.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Be(pe.comparator)).toArray()}};var nP=new Uint8Array(0);var wt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};wt.DEFAULT_COLLECTION_PERCENTILE=10,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wt.DEFAULT=new wt(41943040,wt.DEFAULT_COLLECTION_PERCENTILE,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wt.DISABLED=new wt(-1,0,0);var as=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var hh=class{constructor(){this.changes=new fn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var dh=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var fh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&is(r.mutation,i,Tt.empty(),xe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ne()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ne()){let i=Fn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=qo();return s.forEach((c,l)=>{a=a.insert(c,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=Fn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ne()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let s=ta(),a=rs(),c=function(){return rs()}();return t.forEach((l,d)=>{let p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof Gt)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),is(p.mutation,d,p.mutation.getFieldMask(),xe.now())):a.set(d.key,Tt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((d,p)=>a.set(d,p)),t.forEach((d,p)=>{var v;return c.set(d,new dh(p,(v=a.get(d))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,t){let r=rs(),i=new Ye((a,c)=>a-c),s=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let c of a)c.keys().forEach(l=>{let d=t.get(l);if(d===null)return;let p=r.get(l)||Tt.empty();p=c.applyToLocalView(d,p),r.set(l,p);let v=(i.get(c.batchId)||Ne()).add(l);i=i.insert(c.batchId,v)})}).next(()=>{let a=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,p=l.value,v=n_();p.forEach(A=>{if(!s.has(A)){let C=c_(t.get(A),r.get(A));C!==null&&v.set(A,C),s=s.add(A)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,v))}return P.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return z.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Eb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):P.resolve(Fn()),c=-1,l=s;return a.next(d=>P.forEach(d,(p,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),s.get(p)?P.resolve():this.remoteDocumentCache.getEntry(e,p).next(A=>{l=l.insert(p,A)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,l,d,Ne())).next(p=>({batchId:c,changes:t_(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(r=>{let i=qo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,a=qo();return this.indexManager.getCollectionParents(e,s).next(c=>P.forEach(c,l=>{let d=function(v,A){return new Nr(A,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((v,A)=>{a=a.insert(v,A)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((l,d)=>{let p=d.getKey();a.get(p)===null&&(a=a.insert(p,Pr.newInvalidDocument(p)))});let c=qo();return a.forEach((l,d)=>{let p=s.get(l);p!==void 0&&is(p.mutation,d,Tt.empty(),xe.now()),Zh(t,d)&&(c=c.insert(l,d))}),c})}};var ph=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return P.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Tr(i.createTime)}}(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Yb(i.bundledQuery),readTime:Tr(i.readTime)}}(t)),P.resolve()}};var mh=class{constructor(){this.overlays=new Ye(z.comparator),this.Ir=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Fn();return P.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=Fn(),s=t.length+1,a=new z(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ye((d,p)=>d-p),a=this.overlays.getIterator();for(;a.hasNext();){let d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=Fn(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}let c=Fn(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=i)););return P.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new rh(t,r));let s=this.Ir.get(t);s===void 0&&(s=Ne(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var gh=class{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,P.resolve()}};var cs=class{constructor(){this.Tr=new Be(de.Er),this.dr=new Be(de.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new de(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new de(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new z(new pe([])),r=new de(t,e),i=new de(t,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new z(new pe([])),r=new de(t,e),i=new de(t,e+1),s=Ne();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){let t=new de(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},de=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return z.comparator(e.key,t.key)||re(e.wr,t.wr)}static Ar(e,t){return re(e.wr,t.wr)||z.comparator(e.key,t.key)}};var _h=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Be(de.Er)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new th(s,t,r,i);this.mutationQueue.push(a);for(let c of i)this.br=this.br.add(new de(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return P.resolve(a)}lookupMutationBatch(e,t){return P.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new de(t,0),i=new de(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{let c=this.Dr(a.wr);s.push(c)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Be(re);return t.forEach(i=>{let s=new de(i,0),a=new de(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],c=>{r=r.add(c.wr)})}),P.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;z.isDocumentKey(s)||(s=s.child(""));let a=new de(new z(s),0),c=new Be(re);return this.br.forEachWhile(l=>{let d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(l.wr)),!0)},a),P.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){_e(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return P.forEach(t.mutations,i=>{let s=new de(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new de(t,0),i=this.br.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var yh=class{constructor(e){this.Mr=e,this.docs=function(){return new Ye(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():Pr.newInvalidDocument(t))}getEntries(e,t){let r=ta();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pr.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ta(),a=t.path,c=new z(a.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:p}}=l.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||cb(ab(p),r)<=0||(i.has(p.key)||Zh(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,t,r,i){W()}Or(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new vh(this)}getSize(e){return P.resolve(this.size)}},vh=class extends hh{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Ih=class{constructor(e){this.persistence=e,this.Nr=new fn(t=>Jh(t),Xh),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cs,this.targetCount=0,this.kr=as.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),P.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new as(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.Kn(t),P.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this.Br.containsKey(t))}};var wh=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new hb(0),this.Kr=!1,this.Kr=!0,this.$r=new gh,this.referenceDelegate=e(this),this.Ur=new Ih(this),this.indexManager=new uh,this.remoteDocumentCache=function(i){return new yh(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ch(t),this.Gr=new ph(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new _h(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){M("MemoryPersistence","Starting transaction:",e);let i=new Eh(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return P.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Eh=class extends Fl{constructor(e){super(),this.currentSequenceNumber=e}},Th=class n{constructor(e){this.persistence=e,this.Jr=new cs,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw W()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),P.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Xr,r=>{let i=z.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ue.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return P.or([()=>P.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var bh=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Ne(),i=Ne();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Ah=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Sh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Yp()?8:lb(we())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new Ah;return this.Xi(e,t,a).next(c=>{if(s.result=c,this.zi)return this.es(e,t,a,c.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Zi()<=H.DEBUG&&M("QueryEngine","SDK will not create cache indexes for query:",es(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),P.resolve()):(Zi()<=H.DEBUG&&M("QueryEngine","Query:",es(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Zi()<=H.DEBUG&&M("QueryEngine","The SDK decides to create cache indexes for query:",es(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(t))):P.resolve())}Yi(e,t){if(Sg(t))return P.resolve(null);let r=Vn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Xl(t,null,"F"),r=Vn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let a=Ne(...s);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let d=this.ts(t,c);return this.ns(t,d,a,l.readTime)?this.Yi(e,Xl(t,null,"F")):this.rs(e,d,t,l)}))})))}Zi(e,t,r,i){return Sg(t)||i.isEqual(ue.min())?P.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let a=this.ts(t,s);return this.ns(t,a,r,i)?P.resolve(null):(Zi()<=H.DEBUG&&M("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),es(t)),this.rs(e,a,t,ob(i,-1)).next(c=>c))})}ts(e,t){let r=new Be(bb(e));return t.forEach((i,s)=>{Zh(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Zi()<=H.DEBUG&&M("QueryEngine","Using full collection scan to execute query:",es(t)),this.Ji.getDocumentsMatchingQuery(e,t,$n.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}};var Ch=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ye(re),this._s=new fn(s=>Jh(s),Xh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Jb(n,e,t,r){return new Ch(n,e,t,r)}function d_(n,e){return y(this,null,function*(){let t=ie(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let a=[],c=[],l=Ne();for(let d of i){a.push(d.batchId);for(let p of d.mutations)l=l.add(p.key)}for(let d of s){c.push(d.batchId);for(let p of d.mutations)l=l.add(p.key)}return t.localDocuments.getDocuments(r,l).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})})}function Xb(n,e){let t=ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,l,d,p){let v=d.batch,A=v.keys(),C=P.resolve();return A.forEach(D=>{C=C.next(()=>p.getEntry(l,D)).next(x=>{let N=d.docVersions.get(D);_e(N!==null),x.version.compareTo(N)<0&&(v.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),p.addEntry(x)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(l,v))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=Ne();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Zb(n){let e=ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function eA(n,e){let t=ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}var ia=class{constructor(){this.activeTargetIds=Db()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Rh=class{constructor(){this.so=new ia,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ia,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Ph=class{_o(e){}shutdown(){}};var sa=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){M("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){M("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Go=null;function Sl(){return Go===null?Go=function(){return 268435456+Math.round(2147483648*Math.random())}():Go++,"0x"+Go.toString(16)}var tA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Dh=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ke="WebChannelConnection",kh=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){let c=Sl(),l=this.xo(t,r.toUriEncodedString());M("RestConnection",`Sending RPC '${t}' ${c}:`,l,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,a),this.No(t,l,d,i).then(p=>(M("RestConnection",`Received RPC '${t}' ${c}: `,p),p),p=>{throw Ko("RestConnection",`RPC '${t}' ${c} failed with error: `,p,"url: ",l,"request:",i),p})}Lo(t,r,i,s,a,c){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,r){let i=tA[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Sl();return new Promise((a,c)=>{let l=new Il;l.setWithCredentials(!0),l.listenOnce(El.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Xi.NO_ERROR:let p=l.getResponseJson();M(ke,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Xi.TIMEOUT:M(ke,`RPC '${e}' ${s} timed out`),c(new F(R.DEADLINE_EXCEEDED,"Request time out"));break;case Xi.HTTP_ERROR:let v=l.getStatus();if(M(ke,`RPC '${e}' ${s} failed with status:`,v,"response text:",l.getResponseText()),v>0){let A=l.getResponseJson();Array.isArray(A)&&(A=A[0]);let C=A?.error;if(C&&C.status&&C.message){let D=function(N){let K=N.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(K)>=0?K:R.UNKNOWN}(C.status);c(new F(D,C.message))}else c(new F(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new F(R.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{M(ke,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);M(ke,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=Sl(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Al(),c=bl(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.xmlHttpFactory=new wl({})),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let p=s.join("");M(ke,`Creating RPC '${e}' stream ${i}: ${p}`,l);let v=a.createWebChannel(p,l),A=!1,C=!1,D=new Dh({Io:N=>{C?M(ke,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(A||(M(ke,`Opening RPC '${e}' stream ${i} transport.`),v.open(),A=!0),M(ke,`RPC '${e}' stream ${i} sending:`,N),v.send(N))},To:()=>v.close()}),x=(N,K,Q)=>{N.listen(K,J=>{try{Q(J)}catch(me){setTimeout(()=>{throw me},0)}})};return x(v,Ir.EventType.OPEN,()=>{C||(M(ke,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),x(v,Ir.EventType.CLOSE,()=>{C||(C=!0,M(ke,`RPC '${e}' stream ${i} transport closed`),D.So())}),x(v,Ir.EventType.ERROR,N=>{C||(C=!0,Ko(ke,`RPC '${e}' stream ${i} transport errored:`,N),D.So(new F(R.UNAVAILABLE,"The operation could not be completed")))}),x(v,Ir.EventType.MESSAGE,N=>{var K;if(!C){let Q=N.data[0];_e(!!Q);let J=Q,me=J.error||((K=J[0])===null||K===void 0?void 0:K.error);if(me){M(ke,`RPC '${e}' stream ${i} received error:`,me);let pt=me.status,ye=function(_){let I=he[_];if(I!==void 0)return Vb(I)}(pt),E=me.message;ye===void 0&&(ye=R.INTERNAL,E="Unknown error status: "+pt+" with message "+me.message),C=!0,D.So(new F(ye,E)),v.close()}else M(ke,`RPC '${e}' stream ${i} received:`,Q),D.bo(Q)}}),x(c,Tl.STAT_EVENT,N=>{N.stat===$o.PROXY?M(ke,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===$o.NOPROXY&&M(ke,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function Cl(){return typeof document<"u"?document:null}function _a(n){return new ih(n,!0)}var oa=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&M("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Nh=class{constructor(e,t,r,i,s,a,c,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new oa(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(Bn(t.toString()),Bn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new F(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return M("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(M("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}};var xh=class extends Nh{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=Hb(e.writeResults,e.commitTime),r=Tr(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=zb(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Gb(this.serializer,r))};this.a_(t)}};var Oh=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,oh(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(R.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,oh(t,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new F(R.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Mh=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Bn(t),this.D_=!1):M("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Lh=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(()=>y(this,null,function*(){hs(this)&&(M("RemoteStore","Restarting streams for network reachability change."),yield function(l){return y(this,null,function*(){let d=ie(l);d.L_.add(4),yield ls(d),d.q_.set("Unknown"),d.L_.delete(4),yield ya(d)})}(this))}))}),this.q_=new Mh(r,i)}};function ya(n){return y(this,null,function*(){if(hs(n))for(let e of n.B_)yield e(!0)})}function ls(n){return y(this,null,function*(){for(let e of n.B_)yield e(!1)})}function hs(n){return ie(n).L_.size===0}function f_(n,e,t){return y(this,null,function*(){if(!ga(e))throw e;n.L_.add(1),yield ls(n),n.q_.set("Offline"),t||(t=()=>Zb(n.localStore)),n.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){M("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield ya(n)}))})}function p_(n,e){return e().catch(t=>f_(n,t,e))}function va(n){return y(this,null,function*(){let e=ie(n),t=pn(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;nA(e);)try{let i=yield eA(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,rA(e,i)}catch(i){yield f_(e,i)}m_(e)&&g_(e)})}function nA(n){return hs(n)&&n.O_.length<10}function rA(n,e){n.O_.push(e);let t=pn(n);t.r_()&&t.V_&&t.m_(e.mutations)}function m_(n){return hs(n)&&!pn(n).n_()&&n.O_.length>0}function g_(n){pn(n).start()}function iA(n){return y(this,null,function*(){pn(n).p_()})}function sA(n){return y(this,null,function*(){let e=pn(n);for(let t of n.O_)e.m_(t.mutations)})}function oA(n,e,t){return y(this,null,function*(){let r=n.O_.shift(),i=nh.from(r,e,t);yield p_(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield va(n)})}function aA(n,e){return y(this,null,function*(){e&&pn(n).V_&&(yield function(r,i){return y(this,null,function*(){if(function(a){return Fb(a)&&a!==R.ABORTED}(i.code)){let s=r.O_.shift();pn(r).s_(),yield p_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield va(r)}})}(n,e)),m_(n)&&g_(n)})}function Ng(n,e){return y(this,null,function*(){let t=ie(n);t.asyncQueue.verifyOperationInProgress(),M("RemoteStore","RemoteStore received new credentials");let r=hs(t);t.L_.add(3),yield ls(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield ya(t)})}function cA(n,e){return y(this,null,function*(){let t=ie(n);e?(t.L_.delete(2),yield ya(t)):e||(t.L_.add(2),yield ls(t),t.q_.set("Unknown"))})}function pn(n){return n.U_||(n.U_=function(t,r,i){let s=ie(t);return s.w_(),new xh(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:iA.bind(null,n),mo:aA.bind(null,n),f_:sA.bind(null,n),g_:oA.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.U_.s_(),yield va(n)):(yield n.U_.stop(),n.O_.length>0&&(M("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Fh=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $t,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let a=Date.now()+r,c=new n(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function __(n,e){if(Bn("AsyncQueue",`${e}: ${n}`),ga(n))return new F(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Vh=class{constructor(){this.queries=xg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=ie(t),s=i.queries;i.queries=xg(),s.forEach((a,c)=>{for(let l of c.j_)l.onError(r)})})(this,new F(R.ABORTED,"Firestore shutting down"))}};function xg(){return new fn(n=>Zg(n),Xg)}function uA(n){n.Y_.forEach(e=>{e.next()})}var Og,Mg;(Mg=Og||(Og={})).ea="default",Mg.Cache="cache";var Uh=class{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new fn(c=>Zg(c),Xg),this.Ma=new Map,this.xa=new Set,this.Oa=new Ye(z.comparator),this.Na=new Map,this.La=new cs,this.Ba={},this.ka=new Map,this.qa=as.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function lA(n,e,t){return y(this,null,function*(){let r=pA(n);try{let i=yield function(a,c){let l=ie(a),d=xe.now(),p=c.reduce((C,D)=>C.add(D.key),Ne()),v,A;return l.persistence.runTransaction("Locally write mutations","readwrite",C=>{let D=ta(),x=Ne();return l.cs.getEntries(C,p).next(N=>{D=N,D.forEach((K,Q)=>{Q.isValidDocument()||(x=x.add(K))})}).next(()=>l.localDocuments.getOverlayedDocuments(C,D)).next(N=>{v=N;let K=[];for(let Q of c){let J=Lb(Q,v.get(Q.key).overlayedDocument);J!=null&&K.push(new Gt(Q.key,J,Hg(J.value.mapValue),Un.exists(!0)))}return l.mutationQueue.addMutationBatch(C,d,K,c)}).next(N=>{A=N;let K=N.applyToLocalDocumentSet(v,x);return l.documentOverlayCache.saveOverlays(C,N.batchId,K)})}).then(()=>({batchId:A.batchId,changes:t_(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,l){let d=a.Ba[a.currentUser.toKey()];d||(d=new Ye(re)),d=d.insert(c,l),a.Ba[a.currentUser.toKey()]=d}(r,i.batchId,t),yield Ia(r,i.changes),yield va(r.remoteStore)}catch(i){let s=__(i,"Failed to persist write");t.reject(s)}})}function Lg(n,e,t){let r=ie(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,a)=>{let c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){let l=ie(a);l.onlineState=c;let d=!1;l.queries.forEach((p,v)=>{for(let A of v.j_)A.Z_(c)&&(d=!0)}),d&&uA(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function hA(n,e){return y(this,null,function*(){let t=ie(n),r=e.batch.batchId;try{let i=yield Xb(t.localStore,e);v_(t,r,null),y_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ia(t,i)}catch(i){yield Bg(i)}})}function dA(n,e,t){return y(this,null,function*(){let r=ie(n);try{let i=yield function(a,c){let l=ie(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return l.mutationQueue.lookupMutationBatch(d,c).next(v=>(_e(v!==null),p=v.keys(),l.mutationQueue.removeMutationBatch(d,v))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>l.localDocuments.getDocuments(d,p))})}(r.localStore,e);v_(r,e,t),y_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ia(r,i)}catch(i){yield Bg(i)}})}function y_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function v_(n,e,t){let r=ie(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ia(n,e,t){return y(this,null,function*(){let r=ie(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,l)=>{a.push(r.Ka(l,e,t).then(d=>{var p;if((d||t)&&r.isPrimaryClient){let v=d?!d.fromCache:(p=t?.targetChanges.get(l.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(l.targetId,v?"current":"not-current")}if(d){i.push(d);let v=bh.Wi(l.targetId,d);s.push(v)}}))}),yield Promise.all(a),r.Ca.d_(i),yield function(l,d){return y(this,null,function*(){let p=ie(l);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>P.forEach(d,A=>P.forEach(A.$i,C=>p.persistence.referenceDelegate.addReference(v,A.targetId,C)).next(()=>P.forEach(A.Ui,C=>p.persistence.referenceDelegate.removeReference(v,A.targetId,C)))))}catch(v){if(!ga(v))throw v;M("LocalStore","Failed to update sequence numbers: "+v)}for(let v of d){let A=v.targetId;if(!v.fromCache){let C=p.os.get(A),D=C.snapshotVersion,x=C.withLastLimboFreeSnapshotVersion(D);p.os=p.os.insert(A,x)}}})}(r.localStore,s))})}function fA(n,e){return y(this,null,function*(){let t=ie(n);if(!t.currentUser.isEqual(e)){M("SyncEngine","User change. New user:",e.toKey());let r=yield d_(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(c=>{c.forEach(l=>{l.reject(new F(R.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ia(t,r.hs)}})}function pA(n){let e=ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dA.bind(null,e),e}var aa=class{constructor(){this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){this.serializer=_a(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Jb(this.persistence,new Sh,e.initialUser,this.serializer)}createPersistence(e){return new wh(Th.Zr,this.serializer)}createSharedClientState(e){return new Rh}terminate(){return y(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var jh=class{initialize(e,t){return y(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fA.bind(null,this.syncEngine),yield cA(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Vh}()}createDatastore(e){let t=_a(e.databaseInfo.databaseId),r=function(s){return new kh(s)}(e.databaseInfo);return function(s,a,c,l){return new Oh(s,a,c,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,c){return new Lh(r,i,s,a,c)}(this.localStore,this.datastore,e.asyncQueue,t=>Lg(this.syncEngine,t,0),function(){return sa.D()?new sa:new Ph}())}createSyncEngine(e,t){return function(i,s,a,c,l,d,p){let v=new Uh(i,s,a,c,l,d);return p&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return y(this,null,function*(){var e,t;yield function(i){return y(this,null,function*(){let s=ie(i);M("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield ls(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var Bh=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ee.UNAUTHENTICATED,this.clientId=Yo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>y(this,null,function*(){M("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(M("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new $t;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=__(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Rl(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),M("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield d_(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Fg(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield gA(n);M("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Ng(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Ng(e.remoteStore,i)),n._onlineComponents=e})}function mA(n){return n.name==="FirebaseError"?n.code===R.FAILED_PRECONDITION||n.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function gA(n){return y(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){M("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Rl(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!mA(t))throw t;Ko("Error using user provided cache. Falling back to memory cache: "+t),yield Rl(n,new aa)}}else M("FirestoreClient","Using default OfflineComponentProvider"),yield Rl(n,new aa);return n._offlineComponents})}function _A(n){return y(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(M("FirestoreClient","Using user provided OnlineComponentProvider"),yield Fg(n,n._uninitializedComponentsProvider._online)):(M("FirestoreClient","Using default OnlineComponentProvider"),yield Fg(n,new jh))),n._onlineComponents})}function yA(n){return _A(n).then(e=>e.syncEngine)}function I_(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Vg=new Map;function w_(n,e,t){if(!t)throw new F(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vA(n,e,t,r){if(e===!0&&r===!0)throw new F(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ug(n){if(!z.isDocumentKey(n))throw new F(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jg(n){if(z.isDocumentKey(n))throw new F(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function td(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":W()}function E_(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new F(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=td(n);throw new F(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var ca=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=I_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Fr=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ca({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new F(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ca(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Pl;switch(r.type){case"firstParty":return new xl(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Vg.get(t);r&&(M("ComponentProvider","Removing Datastore"),Vg.delete(t),r.terminate())}(this),Promise.resolve()}};function T_(n,e,t,r={}){var i;let s=(n=E_(n,Fr))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,l;if(typeof r.mockUserToken=="string")c=r.mockUserToken,l=Ee.MOCK_USER;else{c=Gp(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new F(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ee(d)}n._authCredentials=new Dl(new Qo(c,l))}}var $h=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},zt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ln(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ln=class n extends $h{constructor(e,t,r){super(e,t,wb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function b_(n,e,...t){if(n=je(n),w_("collection","path",e),n instanceof Fr){let r=pe.fromString(e,...t);return jg(r),new ln(n,null,r)}{if(!(n instanceof zt||n instanceof ln))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(pe.fromString(e,...t));return jg(r),new ln(n.firestore,null,r)}}function A_(n,e,...t){if(n=je(n),arguments.length===1&&(e=Yo.newId()),w_("doc","path",e),n instanceof Fr){let r=pe.fromString(e,...t);return Ug(r),new zt(n,null,new z(r))}{if(!(n instanceof zt||n instanceof ln))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(pe.fromString(e,...t));return Ug(r),new zt(n.firestore,n instanceof ln?n.converter:null,new z(r))}}var zh=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new oa(this,"async_queue_retry"),this.Eu=()=>{let t=Cl();t&&M("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=Cl();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=Cl();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new $t;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return y(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!ga(e))throw e;M("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Bn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let i=Fh.createAndSchedule(this,e,t,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&W()}verifyOperationInProgress(){}mu(){return y(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};var ua=class extends Fr{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new zh}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||C_(this),this._firestoreClient.terminate()}};function S_(n,e){let t=typeof n=="object"?n:pr(),r=typeof n=="string"?n:e||"(default)",i=Bi(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=qp("firestore");s&&T_(i,...s)}return i}function IA(n){return n._firestoreClient||C_(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function C_(n){var e,t,r;let i=n._freezeSettings(),s=function(c,l,d,p){return new Ul(c,l,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,I_(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new Bh(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var la=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(qt.fromBase64String(e))}catch(t){throw new F(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ha=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new F(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var da=class{constructor(e){this._methodName=e}};var fa=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new F(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new F(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var pa=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var wA=/^__.*__$/,qh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Gt(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gn(e,this.data,t,this.fieldTransforms)}};function R_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W()}}var Gh=class n{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return ma(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(R_(this.wu)&&wA.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},Hh=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||_a(e)}Nu(e,t,r,i=!1){return new Gh({wu:e,methodName:t,Ou:r,path:Qe.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function EA(n){let e=n._freezeSettings(),t=_a(n._databaseId);return new Hh(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TA(n,e,t,r,i,s={}){let a=n.Nu(s.merge||s.mergeFields?2:0,e,t,i);N_("Data must be an object, but it was:",a,r);let c=D_(r,a),l,d;if(s.merge)l=new Tt(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){let p=[];for(let v of s.mergeFields){let A=bA(e,v,t);if(!a.contains(A))throw new F(R.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);CA(p,A)||p.push(A)}l=new Tt(p),d=a.fieldTransforms.filter(v=>l.covers(v.field))}else l=null,d=a.fieldTransforms;return new qh(new Et(c),l,d)}function P_(n,e){if(k_(n=je(n)))return N_("Unsupported field value:",e,n),D_(n,e);if(n instanceof da)return function(r,i){if(!R_(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let s=[],a=0;for(let c of r){let l=P_(c,i.Fu(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=xe.fromDate(r);return{timestampValue:sh(i.serializer,s)}}if(r instanceof xe){let s=new xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sh(i.serializer,s)}}if(r instanceof fa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof la)return{bytesValue:Ub(i.serializer,r._byteString)};if(r instanceof zt){let s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:l_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof pa)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw c.Mu("VectorValues must only contain numeric values.");return ed(c.serializer,l)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${td(r)}`)}(n,e)}function D_(n,e){let t={};return $g(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):us(n,(r,i)=>{let s=P_(i,e.bu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function k_(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof xe||n instanceof fa||n instanceof la||n instanceof zt||n instanceof da||n instanceof pa)}function N_(n,e,t){if(!k_(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=td(t);throw r==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+r)}}function bA(n,e,t){if((e=je(e))instanceof ha)return e._internalPath;if(typeof e=="string")return SA(n,e);throw ma("Field path arguments must be of type string or ",n,!1,void 0,t)}var AA=new RegExp("[~\\*/\\[\\]]");function SA(n,e,t){if(e.search(AA)>=0)throw ma(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ha(...e.split("."))._internalPath}catch{throw ma(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ma(n,e,t,r,i){let s=r&&!r.isEmpty(),a=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new F(R.INVALID_ARGUMENT,c+n+l)}function CA(n,e){return n.some(t=>t.isEqual(e))}function RA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}function x_(n,e){let t=E_(n.firestore,ua),r=A_(n),i=RA(n.converter,e);return PA(t,[TA(EA(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Un.exists(!1))]).then(()=>r)}function PA(n,e){return function(r,i){let s=new $t;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return lA(yield yA(r),i,s)})),s.promise}(IA(n),e)}(function(e,t=!0){(function(i){Vr=i})(sn),rn(new tt("firestore",(r,{instanceIdentifier:i,options:s})=>{let a=r.getProvider("app").getImmediate(),c=new ua(new kl(r.getProvider("auth-internal")),new Ml(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new F(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(d.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),ge(vg,"4.7.1",e),ge(vg,"4.7.1","esm2017")})();var Hn=class{constructor(e){return e}},O_="firestore",nd=class{constructor(){return $i(O_)}};var rd=new oe("angularfire2.firestore-instances");function DA(n,e){let t=wo(O_,n,e);return t&&new Hn(t)}function kA(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Hn(r)}}var NA={provide:nd,deps:[[new $e,rd]]},xA={provide:Hn,useFactory:DA,deps:[[new $e,rd],Ft]};function M_(n,...e){return ge("angularfire",kn.full,"fst"),at([xA,NA,{provide:rd,useFactory:kA(n),multi:!0,deps:[ce,kt,_r,Nn,[new $e,Ji],[new $e,gr],...e]}])}var L_=dt(x_,!0);var F_=dt(b_,!0);var V_=dt(S_,!0);var wa=class n{constructor(e){this.router=e}fireAuth=L(ft);firestore=L(Hn);login(e,t){return y(this,null,function*(){let r=yield mg(this.fireAuth,e,t).catch(function(i){});r?(localStorage.setItem("user",JSON.stringify(r.user?.email)),this.logLogin(r),yield this.router.navigateByUrl("/home")):alert("Malas credenciales")})}logLogin(e){return y(this,null,function*(){let t={Usuario:e.user.email,LogInTime:new Date};yield L_(F_(this.firestore,"LogIn-Logs"),t).then(()=>{console.log("Login logged successfully")}).catch(r=>{console.error("Error logging login: ",r)})})}toRegistro(){return y(this,null,function*(){yield this.router.navigateByUrl("/registro")})}static \u0275fac=function(t){return new(t||n)(Ze(_t))};static \u0275cmp=ze({type:n,selectors:[["app-login"]],standalone:!0,features:[zs([]),qe],decls:26,vars:0,consts:[["userName",""],["userPassword",""],["id","container",1,"container"],[1,"form-container","sign-in-container"],["type","email","placeholder","Email","required","",1,"formControl"],["type","password","placeholder","Password",1,"formControl"],[3,"click"],[1,"inicioRapido"],[1,"overlay-container"],[1,"overlay"],[1,"overlay-panel","overlay-right"],["id","signUp",1,"ghost",3,"click"]],template:function(t,r){if(t&1){let i=Tn();$(0,"div",2)(1,"div",3)(2,"h1"),Z(3,"Iniciar Sesion"),G(),Le(4,"input",4,0)(6,"input",5,1),$(8,"button",6),Fe("click",function(){ct(i);let a=Ve(5),c=Ve(7);return ut(r.login(a.value,c.value))}),Z(9,"Iniciar"),G(),$(10,"div",7)(11,"button",6),Fe("click",function(){ct(i);let a=Ve(5),c=Ve(7);return a.value="prueba@gmail.com",ut(c.value="123456")}),Z(12,"Inicio 1"),G(),$(13,"button",6),Fe("click",function(){ct(i);let a=Ve(5),c=Ve(7);return a.value="asd@asd.com",ut(c.value="123456")}),Z(14,"Inicio 2"),G(),$(15,"button",6),Fe("click",function(){ct(i);let a=Ve(5),c=Ve(7);return a.value="admin@gmail.com",ut(c.value="123456")}),Z(16,"Inicio Admin"),G()()(),$(17,"div",8)(18,"div",9)(19,"div",10)(20,"h1"),Z(21,"Bienvenido"),G(),$(22,"p"),Z(23,"Si es tu primera visita hace click abajo para registrarte:"),G(),$(24,"button",11),Fe("click",function(){return ct(i),ut(r.toRegistro())}),Z(25,"Registrarse"),G()()()()()}},styles:['@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%]{background:#f6f5f7;display:flex;justify-content:center;align-items:center;flex-direction:column;font-family:Montserrat,sans-serif;height:100vh;margin:-20px 0 50px}.inicioRapido[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:30px}h1[_ngcontent-%COMP%]{font-weight:700;margin:0}h2[_ngcontent-%COMP%]{text-align:center}p[_ngcontent-%COMP%]{font-size:14px;font-weight:100;line-height:20px;letter-spacing:.5px;margin:20px 0 30px}span[_ngcontent-%COMP%]{font-size:12px}a[_ngcontent-%COMP%]{color:#333;font-size:14px;text-decoration:none;margin:15px 0}button[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #ff4b2b;background-color:#ff4b2b;color:#fff;font-size:12px;font-weight:700;padding:12px 45px;letter-spacing:1px;text-transform:uppercase;transition:transform 80ms ease-in;margin-bottom:10px}button[_ngcontent-%COMP%]:active{transform:scale(.95)}button[_ngcontent-%COMP%]:focus{outline:none}button.ghost[_ngcontent-%COMP%]{background-color:transparent;border-color:#fff}form[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 50px;height:100%;text-align:center}input[_ngcontent-%COMP%]{background-color:#eee;border:none;padding:12px 15px;margin:8px 0;width:100%}.container[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;position:absolute;margin:5% 5% 5% 25%;overflow:hidden;width:50%;height:60%;max-width:100%;min-height:480px}.form-container[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;align-items:center;padding:10% 5% 5%;top:0;height:100%;transition:all .6s ease-in-out}.sign-in-container[_ngcontent-%COMP%]{left:0;width:50%;z-index:2}.container.right-panel-active[_ngcontent-%COMP%]   .sign-in-container[_ngcontent-%COMP%]{transform:translate(100%)}.sign-up-container[_ngcontent-%COMP%]{left:0;width:50%;opacity:0;z-index:1}.container.right-panel-active[_ngcontent-%COMP%]   .sign-up-container[_ngcontent-%COMP%]{transform:translate(100%);opacity:1;z-index:5;animation:_ngcontent-%COMP%_show .6s}@keyframes _ngcontent-%COMP%_show{0%,49.99%{opacity:0;z-index:1}50%,to{opacity:1;z-index:5}}.overlay-container[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;width:50%;height:100%;overflow:hidden;transition:transform .6s ease-in-out;z-index:100}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-container[_ngcontent-%COMP%]{transform:translate(-100%)}.overlay[_ngcontent-%COMP%]{background:#ff416c;background:-webkit-linear-gradient(to right,#ff4b2b,#ff416c);background:linear-gradient(to right,#ff4b2b,#ff416c);background-repeat:no-repeat;background-size:cover;background-position:0 0;color:#fff;position:relative;left:-100%;height:100%;width:200%;transform:translate(0);transition:transform .6s ease-in-out}.container.right-panel-active[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{transform:translate(50%)}.overlay-panel[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 40px;text-align:center;top:0;height:100%;width:50%;transform:translate(0);transition:transform .6s ease-in-out}.overlay-left[_ngcontent-%COMP%]{transform:translate(-20%)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-left[_ngcontent-%COMP%]{transform:translate(0)}.overlay-right[_ngcontent-%COMP%]{right:0;transform:translate(0)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-right[_ngcontent-%COMP%]{transform:translate(20%)}.social-container[_ngcontent-%COMP%]{margin:20px 0}.social-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid #dddddd;border-radius:50%;display:inline-flex;justify-content:center;align-items:center;margin:0 5px;height:40px;width:40px}footer[_ngcontent-%COMP%]{background-color:#222;color:#fff;font-size:14px;bottom:0;position:fixed;left:0;right:0;text-align:center;z-index:999}footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0}footer[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:red}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3c97bf;text-decoration:none}']})};var id;try{id=typeof Intl<"u"&&Intl.v8BreakIterator}catch{id=!1}var fs=(()=>{let e=class e{constructor(r){this._platformId=r,this.isBrowser=this._platformId?Kf(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||id)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(i){return new(i||e)(B(Nt))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var ds;function OA(){if(ds==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ds=!0}))}finally{ds=ds||!1}return ds}function sd(n){return OA()?n:!!n.capture}function U_(n){return n.composedPath?n.composedPath()[0]:n.target}function j_(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function od(n){return Array.isArray(n)?n:[n]}function ad(n){return n instanceof In?n.nativeElement:n}var $_=new Set,Wn,MA=(()=>{let e=class e{constructor(r,i){this._platform=r,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):FA}matchMedia(r){return(this._platform.WEBKIT||this._platform.BLINK)&&LA(r,this._nonce),this._matchMedia(r)}};e.\u0275fac=function(i){return new(i||e)(B(fs),B(li,8))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function LA(n,e){if(!$_.has(n))try{Wn||(Wn=document.createElement("style"),e&&Wn.setAttribute("nonce",e),Wn.setAttribute("type","text/css"),document.head.appendChild(Wn)),Wn.sheet&&(Wn.sheet.insertRule(`@media ${n} {body{ }}`,0),$_.add(n))}catch(t){console.error(t)}}function FA(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var q_=(()=>{let e=class e{constructor(r,i){this._mediaMatcher=r,this._zone=i,this._queries=new Map,this._destroySubject=new Pt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(r){return z_(od(r)).some(s=>this._registerQuery(s).mql.matches)}observe(r){let s=z_(od(r)).map(c=>this._registerQuery(c).observable),a=oi(s);return a=Ns(a.pipe(Xt(1)),a.pipe(Sf(1),Ef(0))),a.pipe(te(c=>{let l={matches:!1,breakpoints:{}};return c.forEach(({matches:d,query:p})=>{l.matches=l.matches||d,l.breakpoints[p]=d}),l}))}_registerQuery(r){if(this._queries.has(r))return this._queries.get(r);let i=this._mediaMatcher.matchMedia(r),a={observable:new ii(c=>{let l=d=>this._zone.run(()=>c.next(d));return i.addListener(l),()=>{i.removeListener(l)}}).pipe(Os(i),te(({matches:c})=>({query:r,matches:c})),Ms(this._destroySubject)),mql:i};return this._queries.set(r,a),a}};e.\u0275fac=function(i){return new(i||e)(B(MA),B(ce))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function z_(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function W_(n){return n.buttons===0||n.detail===0}function K_(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var Kn=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Kn||{}),G_="cdk-high-contrast-black-on-white",H_="cdk-high-contrast-white-on-black",cd="cdk-high-contrast-active",Q_=(()=>{let e=class e{constructor(r,i){this._platform=r,this._document=i,this._breakpointSubscription=L(q_).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Kn.NONE;let r=this._document.createElement("div");r.style.backgroundColor="rgb(1,2,3)",r.style.position="absolute",this._document.body.appendChild(r);let i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(r):null,a=(s&&s.backgroundColor||"").replace(/ /g,"");switch(r.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Kn.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Kn.BLACK_ON_WHITE}return Kn.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let r=this._document.body.classList;r.remove(cd,G_,H_),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Kn.BLACK_ON_WHITE?r.add(cd,G_):i===Kn.WHITE_ON_BLACK&&r.add(cd,H_)}}};e.\u0275fac=function(i){return new(i||e)(B(fs),B(Ae))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var ud=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=st({});let n=e;return n})();function $A(){return!0}var zA=new oe("mat-sanity-checks",{providedIn:"root",factory:$A}),dd=(()=>{let e=class e{constructor(r,i,s){this._sanityChecks=i,this._document=s,this._hasDoneGlobalChecks=!1,r._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(r){return j_()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[r]}};e.\u0275fac=function(i){return new(i||e)(B(Q_),B(zA,8),B(Ae))},e.\u0275mod=ot({type:e}),e.\u0275inj=st({imports:[ud,ud]});let n=e;return n})();var nt=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(nt||{}),ld=class{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=nt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},Y_=sd({passive:!0,capture:!0}),hd=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=U_(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){let s=this._events.get(t);if(s){let a=s.get(r);a?a.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,Y_)})}removeHandler(e,t,r){let i=this._events.get(e);if(!i)return;let s=i.get(t);s&&(s.delete(r),s.size===0&&i.delete(t),i.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,Y_)))}},J_={enterDuration:225,exitDuration:150},qA=800,X_=sd({passive:!0,capture:!0}),Z_=["mousedown","touchstart"],ey=["mouseup","mouseleave","touchend","touchcancel"],ps=class ps{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=ad(r))}fadeInRipple(e,t,r={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=O(O({},J_),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);let a=r.radius||GA(e,t,i),c=e-i.left,l=t-i.top,d=s.enterDuration,p=document.createElement("div");p.classList.add("mat-ripple-element"),p.style.left=`${c-a}px`,p.style.top=`${l-a}px`,p.style.height=`${a*2}px`,p.style.width=`${a*2}px`,r.color!=null&&(p.style.backgroundColor=r.color),p.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(p);let v=window.getComputedStyle(p),A=v.transitionProperty,C=v.transitionDuration,D=A==="none"||C==="0s"||C==="0s, 0s"||i.width===0&&i.height===0,x=new ld(this,p,r,D);p.style.transform="scale3d(1, 1, 1)",x.state=nt.FADING_IN,r.persistent||(this._mostRecentTransientRipple=x);let N=null;return!D&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let K=()=>{N&&(N.fallbackTimer=null),clearTimeout(J),this._finishRippleTransition(x)},Q=()=>this._destroyRipple(x),J=setTimeout(Q,d+100);p.addEventListener("transitionend",K),p.addEventListener("transitioncancel",Q),N={onTransitionEnd:K,onTransitionCancel:Q,fallbackTimer:J}}),this._activeRipples.set(x,N),(D||!d)&&this._finishRippleTransition(x),x}fadeOutRipple(e){if(e.state===nt.FADING_OUT||e.state===nt.HIDDEN)return;let t=e.element,r=O(O({},J_),e.config.animation);t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=nt.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=ad(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,Z_.forEach(r=>{ps._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{ey.forEach(t=>{this._triggerElement.addEventListener(t,this,X_)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===nt.FADING_IN?this._startFadeOutTransition(e):e.state===nt.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=nt.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=nt.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=W_(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+qA;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!K_(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===nt.VISIBLE||e.config.terminateOnPointerUp&&e.state===nt.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(Z_.forEach(t=>ps._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(ey.forEach(t=>e.removeEventListener(t,this,X_)),this._pointerUpEventsRegistered=!1))}};ps._eventManager=new hd;var ty=ps;function GA(n,e,t){let r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}var ny=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=st({imports:[dd,dd]});let n=e;return n})();var Ta=class n{constructor(e){this.router=e}toHome(){return y(this,null,function*(){this.router.navigateByUrl("/home")})}static \u0275fac=function(t){return new(t||n)(Ze(_t))};static \u0275cmp=ze({type:n,selectors:[["app-quien-soy"]],standalone:!0,features:[qe],decls:23,vars:0,consts:[[3,"click"],[1,"quien-soy"],["src","1000030695.jpg","height","320"],["id","links"],["href","https://www.instagram.com/maxicesa/"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["d","M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"],["href","www.linkedin.com/in/maximiliano-cesa-449785192"],["d","M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"],["href","https://steamcommunity.com/id/MagoHispanico/"],["d","M24 12c0 6.627-5.373 12-12 12-5.782 0-10.608-4.091-11.744-9.537l4.764 2.003c.285 1.441 1.56 2.547 3.115 2.534 1.723-.017 3.105-1.414 3.116-3.129l.007-.003 3.602-2.684c2.304.024 4.14-1.833 4.14-4.091 0-2.26-1.834-4.093-4.093-4.093-2.234 0-4.048 1.791-4.09 4.015l-2.64 3.693c-.668-.014-1.269.169-1.791.51l-6.294-2.646c.708-5.953 5.765-10.572 11.908-10.572 6.627 0 12 5.373 12 12zm-16.577 5.477l-1.544-.649c.38.858 1.236 1.461 2.249 1.457 1.346-.012 2.422-1.11 2.41-2.455-.012-1.329-1.104-2.41-2.432-2.41-.287.001-.57.05-.86.16l1.542.648c.898.378 1.319 1.411.941 2.308-.376.896-1.409 1.318-2.306.941zm7.484-5.602c-1.533 0-2.781-1.249-2.781-2.782 0-1.534 1.248-2.782 2.781-2.782 1.534 0 2.781 1.248 2.781 2.782 0 1.533-1.247 2.782-2.781 2.782zm0-.682c1.159 0 2.1-.942 2.1-2.101 0-1.158-.94-2.102-2.1-2.102s-2.102.943-2.102 2.102c.001 1.159.943 2.101 2.102 2.101z"]],template:function(t,r){t&1&&($(0,"nav")(1,"a",0),Fe("click",function(){return r.toHome()}),Z(2,"Home"),G()(),$(3,"div",1)(4,"h1"),Z(5,"Maximiliano Cesa"),G(),$(6,"h2"),Z(7,"\xA1El desarrollador mas mediocre imaginable!"),G(),Le(8,"img",2),$(9,"div",3)(10,"a",4),Fs(),$(11,"svg",5),Le(12,"path",6),G()(),Vs(),$(13,"a",7),Fs(),$(14,"svg",5),Le(15,"path",8),G()(),Vs(),$(16,"a",9),Fs(),$(17,"svg",5),Le(18,"path",10),G()()(),Vs(),$(19,"h2"),Z(20,"Proximamente: Una copia online del juego mas vendido (creo) de todos los tiempos:"),G(),$(21,"h1"),Z(22,"Tetris"),G()())},dependencies:[ny],styles:[".quien-soy[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:10%}#links[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;max-width:240px;margin:0 auto;padding-top:10px}#links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:inline-block}img[_ngcontent-%COMP%]{display:block;margin:0 auto;border-width:2px;border-style:solid;border-color:#000}nav[_ngcontent-%COMP%]{background-color:#333;width:100%;padding:10px 0;box-shadow:0 4px 6px #0000001a}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;display:flex;justify-content:space-around;align-items:center}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700;transition:color .3s ease}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f4f4f9;text-decoration:underline}@media (max-width: 768px){nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{flex-direction:column}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 0}h2[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};function WA(n,e){if(n&1){let t=Tn();$(0,"div")(1,"h1"),Z(2),G(),$(3,"a",2),Fe("click",function(){ct(t);let i=$s();return ut(i.logOff())}),Z(4,"Log-Out"),G()()}if(n&2){let t=$s();wn(2),hc("Bienvenido, ",t.userName,"!")}}function KA(n,e){n&1&&($(0,"h2"),Z(1,"No estas Logeado."),G(),$(2,"a"),Z(3,"LogIn"),G(),$(4,"a"),Z(5,"Registrarse"),G())}var ba=class n{constructor(e){this.router=e;this.user=this.auth.currentUser,this.userName=""}user;userName;auth=L(ft);ngOnInit(){pg(this.auth,e=>{this.user?.email?this.userName=this.user.email:this.userName="Guest"})}toQuienSoy(){return y(this,null,function*(){yield this.router.navigateByUrl("/quien-soy")})}logOff(){return y(this,null,function*(){yield this.auth.signOut().then(()=>{this.router.navigateByUrl("")})})}static \u0275fac=function(t){return new(t||n)(Ze(_t))};static \u0275cmp=ze({type:n,selectors:[["app-home"]],standalone:!0,features:[qe],decls:12,vars:2,consts:[["noUser",""],[4,"ngIf","ngIfElse"],[3,"click"]],template:function(t,r){if(t&1){let i=Tn();$(0,"nav")(1,"ul")(2,"li"),En(3,WA,5,1,"div",1),G(),$(4,"li"),En(5,KA,6,0,"ng-template",null,0,Ff),G(),$(7,"li")(8,"a",2),Fe("click",function(){return ct(i),ut(r.toQuienSoy())}),Z(9,"\xBFQuien Soy?"),G()()()(),$(10,"h2"),Z(11,"Bajo construccion"),G()}if(t&2){let i=Ve(6);wn(3),tr("ngIf",r.userName)("ngIfElse",i)}},dependencies:[fi,Ws],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f4f4f9;margin:0;padding:0;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh}nav[_ngcontent-%COMP%]{background-color:#333;width:100%;padding:10px 0;box-shadow:0 4px 6px #0000001a}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;display:flex;justify-content:space-around;align-items:center}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700;transition:color .3s ease}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f4f4f9;text-decoration:underline}nav[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:1.5rem}nav[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#bbb;margin:0;font-size:1.2rem}nav[_ngcontent-%COMP%]   .noUser[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:10px;color:#ff6f61;font-weight:700}.noUser[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ff3b28}h2[_ngcontent-%COMP%]{color:#ff6f61;font-size:2rem;margin-top:20px;text-align:center}@media (max-width: 768px){nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{flex-direction:column}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 0}h2[_ngcontent-%COMP%]{font-size:1.5rem}}']})};function QA(n,e){n&1&&($(0,"label",14),Z(1,"Este correo ya esta registrado!"),G())}function YA(n,e){n&1&&($(0,"label",15),Z(1,"Las contrase\xF1as no coinciden!"),G())}var Aa=class n{constructor(e){this.router=e}fireAuth=L(ft);pswdDontMatch=!1;mailAlreadyRegistered=!1;ngOnInit(){}register(e,t,r){return y(this,null,function*(){if(t!==r)this.pswdDontMatch=!0;else{this.pswdDontMatch=!1;try{(yield dg(this.fireAuth,e,t))&&this.router.navigateByUrl("/home")}catch(i){i instanceof Ue&&i.code==="auth/email-already-in-use"?this.mailAlreadyRegistered=!0:console.error("Registration error:",i)}}})}static \u0275fac=function(t){return new(t||n)(Ze(_t))};static \u0275cmp=ze({type:n,selectors:[["app-registro"]],standalone:!0,features:[qe],decls:23,vars:2,consts:[["userName",""],["userPassword",""],["confirmPassword",""],["id","container",1,"container"],[1,"form-container"],["type","email","placeholder","Email","required","",1,"formControl"],[3,"ngIf"],["type","password","placeholder","Password",1,"formControl"],["type","password","placeholder","Confirm Password",1,"formControl"],[3,"click"],[1,"overlay-container"],[1,"overlay"],[1,"overlay-panel","overlay-right"],["id","signUp","routerLink","/login",1,"ghost"],[1,"passwordMatch"],[1,"pswdMatch"]],template:function(t,r){if(t&1){let i=Tn();$(0,"div",3)(1,"div",4)(2,"h1"),Z(3,"Registro"),G(),Le(4,"input",5,0),En(6,QA,2,0,"ng-template",6),Le(7,"input",7,1)(9,"input",8,2),En(11,YA,2,0,"ng-template",6),$(12,"button",9),Fe("click",function(){ct(i);let a=Ve(5),c=Ve(8),l=Ve(10);return ut(r.register(a.value,c.value,l.value))}),Z(13,"Registrarse"),G()(),$(14,"div",10)(15,"div",11)(16,"div",12)(17,"h1"),Z(18,"Bienvenido!"),G(),$(19,"p"),Z(20,"Si ya tenes una cuenta por favor hace click en ingresar!"),G(),$(21,"button",13),Z(22,"Ingresar"),G()()()()()}t&2&&(wn(6),tr("ngIf",r.mailAlreadyRegistered),wn(5),tr("ngIf",r.pswdDontMatch))},dependencies:[fi,Ws],styles:['@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:800;src:url(https://fonts.gstatic.com/s/montserrat/v26/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{box-sizing:border-box}.pswdMatch[_ngcontent-%COMP%]{color:red;font-size:small}body[_ngcontent-%COMP%]{background:#f6f5f7;display:flex;justify-content:center;align-items:center;flex-direction:column;font-family:Montserrat,sans-serif;height:100vh;margin:-20px 0 50px}h1[_ngcontent-%COMP%]{font-weight:700;margin:0}h2[_ngcontent-%COMP%]{text-align:center}p[_ngcontent-%COMP%]{font-size:14px;font-weight:100;line-height:20px;letter-spacing:.5px;margin:20px 0 30px}span[_ngcontent-%COMP%]{font-size:12px}a[_ngcontent-%COMP%]{color:#333;font-size:14px;text-decoration:none;margin:15px 0}button[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #ff4b2b;background-color:#ff4b2b;color:#fff;font-size:12px;font-weight:700;padding:12px 45px;letter-spacing:1px;text-transform:uppercase;transition:transform 80ms ease-in}button[_ngcontent-%COMP%]:active{transform:scale(.95)}button[_ngcontent-%COMP%]:focus{outline:none}button.ghost[_ngcontent-%COMP%]{background-color:transparent;border-color:#fff}form[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 50px;height:100%;text-align:center}input[_ngcontent-%COMP%]{background-color:#eee;border:none;padding:12px 15px;margin:8px 0;width:100%}.container[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 14px 28px #00000040,0 10px 10px #00000038;position:absolute;margin:10% 10% 10% 25%;overflow:hidden;width:50%;height:60%;max-width:100%;min-height:480px}.form-container[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;align-items:center;padding:20% 5% 5%;top:0;height:100%;transition:all .6s ease-in-out;left:0;width:50%}.container.right-panel-active[_ngcontent-%COMP%]   .sign-in-container[_ngcontent-%COMP%]{transform:translate(100%)}.sign-up-container[_ngcontent-%COMP%]{left:0;width:50%;opacity:0;z-index:1}.container.right-panel-active[_ngcontent-%COMP%]   .sign-up-container[_ngcontent-%COMP%]{transform:translate(100%);opacity:1;z-index:5;animation:_ngcontent-%COMP%_show .6s}@keyframes _ngcontent-%COMP%_show{0%,49.99%{opacity:0;z-index:1}50%,to{opacity:1;z-index:5}}.overlay-container[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;width:50%;height:100%;overflow:hidden;transition:transform .6s ease-in-out;z-index:100}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-container[_ngcontent-%COMP%]{transform:translate(-100%)}.overlay[_ngcontent-%COMP%]{background:#ff416c;background:-webkit-linear-gradient(to right,#ff4b2b,#ff416c);background:linear-gradient(to right,#ff4b2b,#ff416c);background-repeat:no-repeat;background-size:cover;background-position:0 0;color:#fff;position:relative;left:-100%;height:100%;width:200%;transform:translate(0);transition:transform .6s ease-in-out}.container.right-panel-active[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{transform:translate(50%)}.overlay-panel[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 40px;text-align:center;top:0;height:100%;width:50%;transform:translate(0);transition:transform .6s ease-in-out}.overlay-left[_ngcontent-%COMP%]{transform:translate(-20%)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-left[_ngcontent-%COMP%]{transform:translate(0)}.overlay-right[_ngcontent-%COMP%]{right:0;transform:translate(0)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-right[_ngcontent-%COMP%]{transform:translate(20%)}.social-container[_ngcontent-%COMP%]{margin:20px 0}.social-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid #dddddd;border-radius:50%;display:inline-flex;justify-content:center;align-items:center;margin:0 5px;height:40px;width:40px}footer[_ngcontent-%COMP%]{background-color:#222;color:#fff;font-size:14px;bottom:0;position:fixed;left:0;right:0;text-align:center;z-index:999}footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0}footer[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:red}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3c97bf;text-decoration:none}']})};var ry=[{path:"",component:wa},{path:"",redirectTo:"login",pathMatch:"full"},{path:"home",component:ba},{path:"quien-soy",component:Ta},{path:"registro",component:Aa}];var JA="@",XA=(()=>{let e=class e{constructor(r,i,s,a,c){this.doc=r,this.delegate=i,this.zone=s,this.animationType=a,this.moduleImpl=c,this._rendererFactoryPromise=null,this.scheduler=L(Nf,{optional:!0}),this.loadingSchedulerFn=L(ZA,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let r=()=>this.moduleImpl??import("./chunk-VV36RCYR.js").then(s=>s),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(r):i=r(),i.catch(s=>{throw new le(5300,!1)}).then(({\u0275createEngine:s,\u0275AnimationRendererFactory:a})=>{this._engine=s(this.animationType,this.doc);let c=new a(this.delegate,this._engine,this.zone);return this.delegate=c,c})}createRenderer(r,i){let s=this.delegate.createRenderer(r,i);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let a=new fd(s);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(c=>{let l=c.createRenderer(r,i);a.use(l),this.scheduler?.notify(10)}).catch(c=>{a.use(s)}),a}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(i){lc()},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})(),fd=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,r,i){this.delegate.insertBefore(e,t,r,i)}removeChild(e,t,r){this.delegate.removeChild(e,t,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){this.shouldReplay(t)&&this.replay.push(i=>i.setProperty(e,t,r)),this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.shouldReplay(t)&&this.replay.push(i=>i.listen(e,t,r)),this.delegate.listen(e,t,r)}shouldReplay(e){return this.replay!==null&&e.startsWith(JA)}},ZA=new oe("");function iy(n="animations"){return Of("NgAsyncAnimations"),at([{provide:Bs,useFactory:(e,t,r)=>new XA(e,t,r,n),deps:[Ae,Qs,ce]},{provide:uc,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var sy={apiKey:"AIzaSyArH1Lj3pGRhHUfPD6oLZKh-WmzJO1hc78",authDomain:"tp-labo4-7b1a6.firebaseapp.com",projectId:"tp-labo4-7b1a6",storageBucket:"tp-labo4-7b1a6.appspot.com",messagingSenderId:"671600234993",appId:"1:671600234993:web:3d27fe521fa3d244063450"};var oy={providers:[Bf({eventCoalescing:!0}),jp(ry),iy(),pm(()=>mm(sy)),hg(()=>fg()),M_(()=>V_())]};var Sa=class n{title="TP-Sala-De-Juegos";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ze({type:n,selectors:[["app-root"]],standalone:!0,features:[qe],decls:1,vars:0,template:function(t,r){t&1&&Le(0,"router-outlet")},dependencies:[ru]})};np(Sa,oy).catch(n=>console.error(n));
